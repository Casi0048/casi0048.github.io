<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Articoli ‚Äî Echi di Sofia</title>
  <meta name="description" content="Sezione articoli di Echi di Sofia: approfondimenti e scuole di pensiero.">
  <link rel="icon" type="image/png" href="/favicon_io/favicon-32x32.png">
  <style>
    :root{ --bg:#0a0a1a; --text:#e9eef5; --gold:#ffd86a; --cyan:#9ad0ff; --panel:rgba(10,10,30,.94); --border:rgba(255,215,0,.22); }
    *{ box-sizing:border-box; } html{ scroll-behavior:smooth; }
    body{ margin:0; background:var(--bg); color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; min-height:100dvh; display:flex; flex-direction:column; }
    a{ color:var(--cyan); text-decoration:none; } a:hover{ color:#fff; text-decoration:underline; }
    .wrap{ width:min(1200px,94vw); margin:0 auto; }
    header.topbar{ position:sticky; top:0; z-index:50; background:rgba(10,10,30,.96); border-bottom:1px solid var(--border); backdrop-filter: blur(8px); }
    .row{ display:flex; align-items:center; gap:.75rem; padding:.8rem 1rem; }
    .brand{ display:flex; align-items:center; gap:.6rem; color:var(--gold); font-weight:800; }
    .brand img{ width:34px; height:34px; filter:drop-shadow(0 0 .5rem rgba(255,215,0,.35)); }
    .brand span{ background:linear-gradient(90deg,#ffd700,#fff7b0,#ffd700); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:.04em; }
    .spacer{ flex:1; } .nav{ display:flex; gap:.5rem; flex-wrap:wrap; }
    .nav a{ font-weight:700; color:var(--cyan); border:1px solid rgba(0,204,255,.35); padding:.45rem .7rem; border-radius:.6rem; }
    .nav a:hover{ color:#fff; }
    .hero{ padding:2.2rem 1rem 1rem; text-align:center; border-bottom:1px solid rgba(255,255,255,.06); }
    .hero h1{ font-size:clamp(1.8rem,3.5vw,2.6rem); background:linear-gradient(90deg,#00f6ff,#00b7ff,#00a0ff,#00f6ff);
      -webkit-background-clip:text; background-clip:text; color:transparent; filter: drop-shadow(0 0 1rem rgba(0,200,255,.55)); margin:0 0 .35rem; }
    .hero p{ color:#cfe8ff; opacity:.95; }
    .grid{ display:grid; gap:1rem; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); margin:1.2rem 0 1.6rem; }
    .card{ background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:1rem; display:flex; flex-direction:column; gap:.55rem; box-shadow:0 1.2rem 2.2rem rgba(0,0,0,.25); }
    .tag{ display:inline-block; font-size:.78rem; padding:.12rem .5rem; border-radius:999px; color:#0b1022; background:linear-gradient(90deg,#ffd86a,#ffeb9a); font-weight:800; }
    .card h3{ color:#ffeb9a; margin:.2rem 0 0; } .card p{ color:#cfe2ff; opacity:.95; line-height:1.35; }
    .more{ margin-top:auto; } .more a{ font-weight:800; }
    .cta{ display:flex; gap:.6rem; flex-wrap:wrap; justify-content:center; margin-bottom:1.4rem; }
    footer{ margin-top:auto; padding:1rem; text-align:center; color:#9ec3ff; border-top:1px solid rgba(255,255,255,.06); }
    /* anchor helpers */
    #lista-articoli{ scroll-margin-top: 120px; }
    @media (max-width: 768px){ #lista-articoli{ scroll-margin-top: 140px; } }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap row">
      <a class="brand" href="/index.html">
        <img src="/logo-filosofia.svg" alt="Echi di Sofia"><span>Echi di Sofia</span>
      </a>
      <div class="spacer"></div>
      <nav class="nav">
        <a id="open-search" href="#" title="Cerca">üîé Cerca</a>
        <a href="/index.html">Incipit</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <h1>Articoli e Approfondimenti</h1>
    <p>Una selezione di pagine e saggi per esplorare scuole, autori e temi della filosofia.</p>
  </section>

 <main class="wrap">
  <div class="cta">
    <!-- prima era: href="#lista-articoli" -->
    <a class="nav btn" href="/" aria-label="Torna alla home (Incipit)"
       style="border:1px solid var(--border); padding:.55rem .85rem; border-radius:.6rem; color:#ffdf8a; background:rgba(20,20,40,.78); font-weight:700;">
      üè† Torna all‚ÄôIncipit
    </a>

    <a class="nav btn" href="/cerca.html"
       style="border:1px solid rgba(0,204,255,.35); padding:.55rem .85rem; border-radius:.6rem; color:#9ad0ff; background:rgba(20,20,40,.78); font-weight:700;">
      üîé Cerca nel sito
    </a>
  </div>


   <div class="grid" id="lista-articoli"></div>
<p id="conteggio-articoli" style="opacity:.8; text-align:center; margin:.6rem 0 1rem;"></p>

  </main>

  <footer>¬© 2025 Echi di Sofia</footer>

  <!-- Search overlay (stesso della home) -->
  <div class="search-overlay" id="search-overlay" aria-hidden="true">
    <div class="search-panel" role="dialog" aria-modal="true" aria-labelledby="search-title">
      <div class="search-header">
        <strong id="search-title">Cerca</strong>
        <input id="site-search" type="search" placeholder="Cerca nel sito‚Ä¶ (es. Platone, Ipazia, Talete)" autocomplete="off" spellcheck="false">
        <button class="search-close" id="close-search" type="button" aria-label="Chiudi">‚úï</button>
      </div>
      <div class="search-hint">Suggerimento: puoi cercare per <em>titolo</em> o parole nella <em>descrizione</em>. Premi <kbd>Esc</kbd> per chiudere.</div>
      <div id="search-results" class="search-results" role="list" aria-live="polite"></div>
    </div>
  </div>

  <script>window.SEARCH_INDEX_URLS=['/search-index.json','/assets/search-index.json'];</script>
  <script>
  (function(){
    const SOURCES=(window.SEARCH_INDEX_URLS&&window.SEARCH_INDEX_URLS.length)?window.SEARCH_INDEX_URLS:['/search-index.json','/assets/search-index.json'];
    const $open=document.getElementById('open-search'),$overlay=document.getElementById('search-overlay'),$close=document.getElementById('close-search'),$input=document.getElementById('site-search'),$list=document.getElementById('search-results');
    if(!$overlay||!$input||!$list) return;
    function lockScroll(on){ document.documentElement.style.overflow=on?'hidden':''; }
    function openPanel(e){ if(e) e.preventDefault(); $overlay.classList.add('is-open'); $overlay.setAttribute('aria-hidden','false'); lockScroll(true); setTimeout(()=> $input.focus(), 50); }
    function closePanel(e){ if(e) e.preventDefault(); $overlay.classList.remove('is-open'); $overlay.setAttribute('aria-hidden','true'); lockScroll(false); $input.value=''; $list.innerHTML=''; }
    if($open) $open.addEventListener('click', openPanel); $close.addEventListener('click', closePanel);
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closePanel(); }); $overlay.addEventListener('click',(e)=>{ if(e.target===$overlay) closePanel(); });
    function norm(s){ return (s||'').toString().normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase(); }
    function highlight(text,query){ if(!text) return ''; try{ const tokens=norm(query).split(/\s+/).filter(Boolean); if(!tokens.length) return text; let out=text; for(const t of tokens){ if(t.length<2) continue; const re=new RegExp('('+t.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+')','gi'); out=out.replace(re,'<mark>$1</mark>'); } return out; }catch(_){ return text; } }
    function resolveUrl(u){ if(!u) return '#'; if(u.startsWith('http')) return u; if(u.startsWith('/')) return u; return '/'+u.replace(/^\.\//,''); }
    function card(item,query){ const href=resolveUrl(item.url); const desc=item.desc&&item.desc.trim()?item.desc:''; return `<article class="search-card" role="listitem"><a class="title" href="${href}">${highlight(item.title,query)}</a><div class="url">${href}</div>${desc?`<div class="desc">${highlight(desc,query)}</div>`:''}</article>`; }
    function search(items,query){ const q=norm(query); if(!q) return []; return items.filter(it=>{ const t=norm(it.title),d=norm(it.desc),u=norm(it.url); return t.includes(q)||d.includes(q)||u.includes(q); }).slice(0,60); }
    function render(list,query){ if(!list.length){ $list.innerHTML=`<p style="opacity:.8">Nessun risultato per <strong>${query}</strong>.</p>`; return; } $list.innerHTML=list.map(it=>card(it,query)).join(''); }
    function debounce(fn,ms){ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; }
    let INDEX=[]; async function loadIndex(){ for(const u of SOURCES){ try{ const r=await fetch(u,{cache:'no-store'}); if(!r.ok) continue; const data=await r.json(); return Array.isArray(data)?data:(data.items||data.entries||[]); }catch(_){} } return []; }
    const onInput=debounce(()=>{ const q=$input.value.trim(); if(!q){ $list.innerHTML=''; return; } const results=search(INDEX,q); render(results,q); },120);
    $input.addEventListener('input',onInput); $input.addEventListener('keydown',e=>{ if(e.key==='Enter') onInput(); });
    loadIndex().then(arr=>{ INDEX=arr.map(it=>({ title:it.title||it.name||it.slug||'Senza titolo', url:(it.url||it.link||'').toString(), desc:it.desc||it.description||it.excerpt||it.summary||'' })); });
  })();
  </script>
  <script>
(function(){
  const GRID = document.getElementById('lista-articoli');
  const COUNTER = document.getElementById('conteggio-articoli');
  if(!GRID) return;

  const SOURCES = ['/search-index.json','/assets/search-index.json'];

  function href(u){
    if(!u) return '#';
    if(u.startsWith('http')) return u;
    if(u.startsWith('/')) return u;
    return '/' + u.replace(/^\.\//,'');
  }

  function card(item){
    const title = item.title || 'Senza titolo';
    const desc  = item.desc || item.description || '';
    const link  = href(item.url || '');
    return `
      <article class="card">
        <h3 style="color:#ffeb9a; margin:.2rem 0 0;">${title}</h3>
        ${desc ? `<p style="color:#cfe2ff; opacity:.95; line-height:1.35;">${desc}</p>` : ``}
        <div class="more"><a href="${link}" style="font-weight:800;">Leggi ‚Üí</a></div>
      </article>
    `;
  }

  (async () => {
    let data = [];
    for (const u of SOURCES) {
      try {
        const r = await fetch(u, { cache: 'no-store' });
        if (!r.ok) continue;
        const j = await r.json();
        data = Array.isArray(j) ? j : (j.items || j.entries || []);
        break;
      } catch (_) {}
    }

    if (!data.length) {
      GRID.innerHTML = '<p style="opacity:.8">Nessun articolo trovato.</p>';
      return;
    }

    // (opzionale) ordina per titolo; se vuoi mantenere l‚Äôordine del JSON, commenta la riga sotto
    // data.sort((a,b) => (a.title||'').localeCompare(b.title||''));

    GRID.innerHTML = data.map(card).join('');
    if (COUNTER) COUNTER.textContent = `Articoli pubblicati: ${data.length}`;
  })();
})();
</script>

</body>
</html>
