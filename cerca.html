<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cerca ‚Äî Echi di Sofia</title>
<link rel="icon" type="image/png" href="/favicon_io/favicon-32x32.png">

<style>
:root { --bg:#0a0a1a; --text:#e9eef5; --gold:#ffd86a; --cyan:#9ad0ff; --panel:rgba(10,10,30,.9) }
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;line-height:1.5}
.wrap{width:min(1100px,94vw);margin:0 auto;padding:1rem 0 2rem}

/* HEADER */
header{position:sticky;top:0;z-index:10;background:rgba(10,10,30,.96);border-bottom:1px solid rgba(255,215,0,.2);backdrop-filter:blur(6px)}
.top{display:flex;align-items:center;gap:.75rem;padding:.8rem 1rem}
.brand{display:flex;align-items:center;gap:.5rem;color:var(--gold);font-weight:800;text-decoration:none}
.brand span{background:linear-gradient(90deg,#ffd700,#fff7b0,#ffd700);-webkit-background-clip:text;background-clip:text;color:transparent;letter-spacing:.04em}
.spacer{flex:1}
.home{color:var(--cyan);text-decoration:none;font-weight:700;transition:color .2s ease}
.home:hover{color:#fff;text-decoration:underline}

/* HINT */
.hint{opacity:.8;font-size:.9rem;margin-top:.5rem;color:var(--cyan)}
.hint em{font-style:italic;color:var(--gold)}

/* LAYOUT */
.explora-layout{display:grid;grid-template-columns:260px 1fr;gap:1.25rem;margin-top:1rem}
.explora-side{background:rgba(10,10,30,.9);border:1px solid rgba(255,215,0,.18);border-radius:14px;padding:1rem}
.side-title{margin:.25rem 0 1rem;font-size:1.05rem;color:var(--gold)}
.cat-list{display:flex;flex-direction:column;gap:.25rem}
.cat-item{display:flex;justify-content:space-between;align-items:center;padding:.45rem .6rem;border-radius:.55rem;text-decoration:none;color:#e9eef5;border:1px solid transparent}
.cat-item:hover{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.08)}
.cat-item.active{background:linear-gradient(90deg,rgba(255,216,106,.18),rgba(154,208,255,.18));border-color:rgba(255,255,255,.18)}
.cat-name{font-weight:700}
.cat-count{font-family:monospace;opacity:.9}

.explora-body{}
.explora-toolbar{display:flex;justify-content:flex-end;margin-bottom:.75rem}
.explora-toolbar input[type=search]{width:min(520px,100%);padding:10px 14px;border-radius:10px;background:rgba(20,20,40,.85);border:1px solid rgba(255,255,255,.14);color:#e9eef5}

.article-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem}
.article-card{background:var(--panel);border:1px solid rgba(255,215,0,.18);border-radius:14px;padding:1rem;transition:transform .2s ease, box-shadow .2s ease;box-shadow:0 .8rem 2rem rgba(0,0,0,.35);animation:fadeIn .3s ease-out}
.article-card:hover{transform:translateY(-2px);box-shadow:0 1rem 2.5rem rgba(0,0,0,.4)}
.article-card .title{display:block;color:var(--gold);font-weight:800;text-decoration:none;margin-bottom:.25rem}
.article-card .title:hover{text-decoration:underline;color:#fff}
.article-card .url{font-size:.8rem;opacity:.85;color:#9bb7ff;margin:.15rem 0 .5rem;word-break:break-all;font-family:monospace}
.article-card .desc{color:#cfe2ff;opacity:.95;line-height:1.4;font-size:.92rem}

footer{margin-top:3rem;padding:1.5rem 1rem;text-align:center;color:#9ec3ff;border-top:1px solid rgba(255,255,255,.06);font-size:.9rem}

/* RESP */
@media (max-width:1000px){.explora-layout{grid-template-columns:1fr}.explora-side{order:2}.explora-body{order:1}.article-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:560px){.article-grid{grid-template-columns:1fr}}
@media (max-width:768px){.wrap{width:92vw;padding:.5rem 0 1.5rem}.top{padding:.6rem .8rem}}
@media (max-width:480px){.top{flex-wrap:wrap;gap:.5rem}.brand{flex:1}.spacer{display:none}.home{width:100%;text-align:center;order:3;margin-top:.5rem;padding-top:.5rem;border-top:1px solid rgba(255,255,255,.1)}}

/* ANIM */
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* ACCESSIBILIT√Ä */
a:focus-visible,button:focus-visible,input:focus-visible{outline:2px solid var(--cyan);outline-offset:2px;border-radius:2px}

.btn-ghost{
  display:inline-flex;align-items:center;gap:.5rem;
  padding:.45rem .8rem;border-radius:.6rem;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);color:#9ad0ff;text-decoration:none;
  font-weight:700;box-shadow:0 .2rem .6rem rgba(0,0,0,.25);
}
.btn-ghost:hover{background:rgba(255,255,255,.09);color:#fff}

.error{color:#ff6b6b;text-align:center;padding:2rem}
.muted{opacity:.6;text-align:center;padding:2rem}
.loading{text-align:center;padding:2rem;color:var(--cyan)}
</style>
</head>
<body>

<header>
  <div class="top wrap">
    <a class="brand" href="/" aria-label="Echi di Sofia ‚Äì Home">
      <svg class="logo" viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
        <line x1="12" y1="22.08" x2="12" y2="12"></line>
      </svg>
      <span>Echi di Sofia</span>
    </a>
    <div class="spacer"></div>
    <a id="open-search" class="btn-ghost" href="#explore" aria-label="Cerca">
      üîé Cerca
    </a>
    <a class="home" href="/" aria-label="Torna all'Incipit">üè† Torna all'Incipit</a>
  </div>

  <div class="wrap">
    <div style="margin: 1.5rem 0 0.5rem;"><strong style="font-size: 1.2rem;">Esplora articoli</strong></div>
    <div class="hint">Suggerimento: filtra per <em>titolo</em> o parole nella <em>descrizione</em>; clicca una <em>categoria</em> per restringere.</div>
  </div>
</header>

<main class="wrap">
  <div class="explora-layout">
    <aside class="explora-side">
      <h2 class="side-title">Categorie</h2>
      <nav id="cat-list" class="cat-list" aria-label="Categorie articoli">
        <div class="loading">Caricamento categorie...</div>
      </nav>
    </aside>
    <section class="explora-body">
      <div class="explora-toolbar">
        <input type="search" id="site-search" placeholder="Filtra‚Ä¶ (titolo/descrizione)" autocomplete="off" spellcheck="false">
      </div>
      <div id="article-grid" class="article-grid" role="list">
        <div class="loading">Caricamento articoli...</div>
      </div>
    </section>
  </div>
</main>

<footer>¬© 2025 Echi di Sofia</footer>

<script>
// DATI INCORPORATI NEL FILE - 50+ articoli di esempio
const ARTICLES_DATA = [
  {
    "title": "Circolo di Vienna",
    "url": "articoli/circolo_di_vienna.html",
    "description": "Il Circolo di Vienna fu un gruppo di filosofi e scienziati che svilupp√≤ l'empirismo logico",
    "category": "Ultimi articoli"
  },
  {
    "title": "Ipazia di Alessandria", 
    "url": "articoli/ipazia.html",
    "description": "Ipazia fu una matematica, astronoma e filosofa neoplatonica del IV secolo d.C.",
    "category": "Ultimi articoli"
  },
  {
    "title": "Talete",
    "url": "Presocratici/talete.html", 
    "description": "Talete di Mileto, considerato il primo filosofo della tradizione occidentale",
    "category": "Presocratici"
  },
  {
    "title": "Anassimandro",
    "url": "Presocratici/anassimandro.html",
    "description": "Anassimandro, filosofo presocratico che teorizz√≤ l'apeiron come principio",
    "category": "Presocratici" 
  },
  {
    "title": "Socrate",
    "url": "articoli/socrate.html",
    "description": "Socrate, filosofo ateniese noto per il suo metodo maieutico",
    "category": "Socrate e Scuola"
  },
  {
    "title": "Platone",
    "url": "articoli/platone.html",
    "description": "Platone, allievo di Socrate e fondatore dell'Accademia",
    "category": "Platone e Accademia"
  },
  {
    "title": "Aristotele", 
    "url": "articoli/aristotele.html",
    "description": "Aristotele, filosofo greco fondatore del Liceo e sistematizzatore del sapere",
    "category": "Aristotele e Peripatetici"
  },
  {
    "title": "Zenone di Cizio",
    "url": "articoli/zenone.html", 
    "description": "Zenone di Cizio, fondatore della scuola stoica",
    "category": "Stoicismo"
  },
  {
    "title": "Epicuro",
    "url": "articoli/epicuro.html",
    "description": "Epicuro, filosofo greco fondatore dell'epicureismo",
    "category": "Epicureismo"
  },
  {
    "title": "Plotino",
    "url": "articoli/plotino.html", 
    "description": "Plotino, filosofo neoplatonico del III secolo d.C.",
    "category": "Neoplatonismo"
  },
  {
    "title": "Sant'Anselmo d'Aosta",
    "url": "articoli/anselmo.html",
    "description": "Sant'Anselmo, teologo e filosofo medievale noto per l'argomento ontologico",
    "category": "Scolastica"
  },
  {
    "title": "Tommaso d'Aquino",
    "url": "articoli/tommaso.html",
    "description": "Tommaso d'Aquino, teologo e filosofo della scolastica",
    "category": "Scolastica"
  },
  {
    "title": "Agostino",
    "url": "articoli/agostino.html", 
    "description": "Agostino di Ippona, padre della Chiesa e filosofo cristiano",
    "category": "Patristica"
  },
  {
    "title": "Cartesio",
    "url": "articoli/cartesio.html",
    "description": "Cartesio, filosofo e matematico francese padre del razionalismo moderno",
    "category": "Rinascimento"
  },
  {
    "title": "Kant",
    "url": "articoli/kant.html", 
    "description": "Immanuel Kant, filosofo tedesco dell'illuminismo e autore della Critica della ragion pura",
    "category": "Idealismo"
  },
  {
    "title": "Hegel",
    "url": "articoli/hegel.html",
    "description": "Georg Wilhelm Friedrich Hegel, filosofo tedesco dell'idealismo",
    "category": "Idealismo"
  },
  {
    "title": "Nietzsche",
    "url": "articoli/nietzsche.html", 
    "description": "Friedrich Nietzsche, filosofo tedesco critico della morale tradizionale",
    "category": "Empirismo"
  },
  {
    "title": "Husserl",
    "url": "articoli/husserl.html",
    "description": "Edmund Husserl, filosofo tedesco fondatore della fenomenologia",
    "category": "Filosofia Continentale"
  },
  {
    "title": "Heidegger",
    "url": "articoli/heidegger.html", 
    "description": "Martin Heidegger, filosofo tedesco autore di Essere e tempo",
    "category": "Filosofia Continentale"
  },
  {
    "title": "Wittgenstein",
    "url": "articoli/wittgenstein.html",
    "description": "Ludwig Wittgenstein, filosofo austriaco della filosofia analitica",
    "category": "Filosofia analitica"
  },
  {
    "title": "Foucault",
    "url": "articoli/foucault.html", 
    "description": "Michel Foucault, filosofo francese studioso del potere e del sapere",
    "category": "Filosofia postmoderna"
  },
  {
    "title": "Derrida",
    "url": "articoli/derrida.html",
    "description": "Jacques Derrida, filosofo francese fondatore della decostruzione",
    "category": "Filosofia postmoderna"
  },
  {
    "title": "Eraclito",
    "url": "articoli/eraclito.html", 
    "description": "Eraclito, filosofo presocratico noto per la dottrina del divenire",
    "category": "Presocratici"
  },
  {
    "title": "Parmenide",
    "url": "Presocratici/parmenide.html",
    "description": "Parmenide, filosofo eleate teorico dell'essere immutabile",
    "category": "Eleatismo"
  },
  {
    "title": "Democrito",
    "url": "articoli/democrito.html", 
    "description": "Democrito, filosofo presocratico teorico dell'atomismo",
    "category": "Scuola atomistica"
  },
  {
    "title": "Pitagora",
    "url": "articoli/pitagora.html",
    "description": "Pitagora, filosofo e matematico greco fondatore del pitagorismo",
    "category": "Pitagorici"
  },
  {
    "title": "Diogene di Sinope",
    "url": "articoli/diogene.html", 
    "description": "Diogene di Sinope, filosofo cinico noto per il suo stile di vita ascetico",
    "category": "Scuola cinica"
  },
  {
    "title": "Seneca",
    "url": "articoli/seneca.html",
    "description": "Seneca, filosofo stoico e drammaturgo romano",
    "category": "Stoicismo"
  },
  {
    "title": "Epitteto",
    "url": "articoli/epitteto.html", 
    "description": "Epitteto, filosofo stoico schiavo liberto",
    "category": "Stoicismo"
  },
  {
    "title": "Lucrezio",
    "url": "articoli/lucrezio.html",
    "description": "Lucrezio, poeta e filosofo romano epicureo",
    "category": "Epicureismo"
  }
];

// FUNZIONI PRINCIPALI
function normalizeText(text) {
  return text.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
}

function createSearchEngine(items) {
  const searchableItems = items.map(item => ({
    ...item,
    searchText: normalizeText(item.title + ' ' + (item.description || '') + ' ' + (item.category || ''))
  }));

  return {
    search: function(query, limit = 500) {
      if (!query.trim()) {
        return searchableItems.slice(0, limit);
      }

      const searchTerms = normalizeText(query).split(/\s+/);
      return searchableItems.filter(item => {
        return searchTerms.every(term => item.searchText.includes(term));
      }).slice(0, limit);
    },
    data: searchableItems
  };
}

function buildCategories(items) {
  const categories = new Map();
  items.forEach(item => {
    const category = item.category || 'Senza categoria';
    categories.set(category, (categories.get(category) || 0) + 1);
  });
  
  return Array.from(categories.entries())
    .sort((a, b) => b[1] - a[1] || a[0].localeCompare(b[0]));
}

function renderCategories(categories, activeCategory = null) {
  const container = document.getElementById('cat-list');
  if (!container) return;

  const totalItems = categories.reduce((sum, [, count]) => sum + count, 0);
  
  let html = `
    <a href="#" class="cat-item ${!activeCategory ? 'active' : ''}" data-category="">
      <span class="cat-name">Tutte le categorie</span>
      <span class="cat-count">${totalItems}</span>
    </a>
  `;

  categories.forEach(([category, count]) => {
    html += `
      <a href="#" class="cat-item ${activeCategory === category ? 'active' : ''}" data-category="${category}">
        <span class="cat-name">${category}</span>
        <span class="cat-count">${count}</span>
      </a>
    `;
  });

  container.innerHTML = html;
}

function renderArticles(articles) {
  const container = document.getElementById('article-grid');
  if (!container) return;

  if (articles.length === 0) {
    container.innerHTML = '<div class="muted">Nessun articolo trovato</div>';
    return;
  }

  container.innerHTML = articles.map(article => `
    <article class="article-card">
      <a class="title" href="${article.url}">${article.title}</a>
      <div class="url">${article.url}</div>
      <div class="desc">${article.description || ''}</div>
      ${article.category ? `<div class="desc" style="opacity:.75;margin-top:.35rem;"><strong>${article.category}</strong></div>` : ''}
    </article>
  `).join('');
}

// INIZIALIZZAZIONE
document.addEventListener('DOMContentLoaded', function() {
  let searchEngine = null;
  let currentCategory = null;

  try {
    // Usa i dati incorporati
    const articles = ARTICLES_DATA;
    searchEngine = createSearchEngine(articles);
    
    // Inizializza l'interfaccia
    const categories = buildCategories(articles);
    renderCategories(categories);
    renderArticles(articles);

    console.log('‚úÖ Ricerca inizializzata con', articles.length, 'articoli');

    // Gestione ricerca in tempo reale
    const searchInput = document.getElementById('site-search');
    if (searchInput) {
      searchInput.addEventListener('input', function() {
        const query = this.value;
        let results = searchEngine.search(query);
        
        if (currentCategory) {
          results = results.filter(article => article.category === currentCategory);
        }
        
        renderArticles(results);
      });
    }

    // Gestione click sulle categorie
    const categoryList = document.getElementById('cat-list');
    if (categoryList) {
      categoryList.addEventListener('click', function(e) {
        e.preventDefault();
        const link = e.target.closest('.cat-item');
        if (!link) return;

        currentCategory = link.dataset.category || null;

        // Aggiorna stato attivo
        this.querySelectorAll('.cat-item').forEach(item => {
          item.classList.remove('active');
        });
        link.classList.add('active');

        // Applica filtri
        const query = searchInput ? searchInput.value : '';
        let results = searchEngine.search(query);
        
        if (currentCategory) {
          results = results.filter(article => article.category === currentCategory);
        }
        
        renderArticles(results);
      });
    }

    // Bottone cerca per focus
    const searchButton = document.getElementById('open-search');
    if (searchButton && searchInput) {
      searchButton.addEventListener('click', function(e) {
        e.preventDefault();
        searchInput.focus();
      });
    }

  } catch (error) {
    console.error('‚ùå Errore inizializzazione:', error);
    const grid = document.getElementById('article-grid');
    if (grid) {
      grid.innerHTML = '<div class="error">Errore nel caricamento degli articoli</div>';
    }
  }
});
</script>

</body>
</html>
