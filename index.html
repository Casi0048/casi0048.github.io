<head>
  <meta charset="utf-8">
  <title>Echi di Sofia ‚Äî Portale di Filosofia</title>

  <!-- ESSENZIALI PER SEO E MOBILE -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Esplora il pensiero filosofico attraverso i secoli. Autori, correnti, timeline interattiva e risorse per approfondire.">
  <meta name="keywords" content="filosofia, storia della filosofia, socrate, platone, aristotele, kant, nietzsche, pensiero filosofico">
  <meta name="author" content="Echi di Sofia">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://casi0048.github.io/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://casi0048.github.io/">
  <meta property="og:title" content="Echi di Sofia - Portale Completo di Filosofia">
  <meta property="og:description" content="Esplora il pensiero filosofico attraverso i secoli. Autori, correnti, timeline interattiva e risorse per approfondire.">
  <meta property="og:image" content="https://casi0048.github.io/immagini%20per%20sito/Socrates_Louvre.jpg">
  <meta property="og:site_name" content="Echi di Sofia">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Echi di Sofia - Portale di Filosofia">
  <meta name="twitter:description" content="Scopri la filosofia attraverso autori, correnti e pensieri. Risorse gratuite per appassionati.">
  <meta name="twitter:image" content="https://casi0048.github.io/immagini%20per%20sito/Socrates_Louvre.jpg">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon_io/favicon-32x32.png">
  <link rel="apple-touch-icon" href="favicon_io/apple-touch-icon.png">

  <!-- ===== PRECONNECT utili ===== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- ===== PRELOAD OK (immagine) ===== -->
  <link rel="preload" as="image" href="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Socrates_Louvre.jpg">

  <!-- ===== GOOGLE FONTS (niente preload del CSS) ===== -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&family=UnifrakturMaguntia&family=Cormorant+Garamond:wght@400;600&display=swap">

  <!-- ===== FONT AWESOME (un solo stylesheet) ===== -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous">
<link rel="canonical" href="https://www.echidisofia.org/">

  <!-- Schema.org -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Echi di Sofia",
      "description": "Portale completo di filosofia antica, moderna e contemporanea",
      "url": "https://casi0048.github.io/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://casi0048.github.io/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>

<style>
     :root {
  /* === COLORI FONDAMENTALI === */
  --bg: #0a0a1a;
  --text-light: #e9eef5;
  --text-accent: #9ad0ff;
  
  /* === COLORI ACCENT PRINCIPALI === */
  --gold: #ffd86a;
  --cyan: #00ccff;
  --purple: #b967ff;
  
  /* === COLORI SECONDARI === */
  --gold-secondary: #d4af37;
  --cyan-dark: #0099cc;
  --purple-dark: #8a4dcc;
  
  /* === SPACING SYSTEM === */
  --space-xs: 0.5rem;
  --space-sm: 1rem;
  --space-md: 1.5rem;
  --space-lg: 2rem;
  --space-xl: 3rem;
  
  /* === BREAKPOINTS SYSTEM === */
  --bp-mobile: 768px;
  --bp-tablet: 1024px;
  --bp-desktop: 1200px;
  
  /* === TYPOGRAPHY SCALE === */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 2rem;
  --text-4xl: 3rem;
  
  /* === COMPONENT VARIABLES === */
  --menu-bg: rgba(10, 10, 30, .98);
  --menu-border: rgba(255, 215, 0, .22);
  --glass: rgba(0, 0, 0, .35);
  --card-bg: rgba(10,10,30,0.9);
  --card-border: rgba(255,215,0,0.3);
}
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Ripristina padding per elementi che ne hanno bisogno */
button, input, select, textarea {
  padding: 0.25rem 0.5rem;
}

/* Ripristina margini per alcuni elementi testuali */
p, h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
}
      body {
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text-light);
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      }
      /* Effetto particelle cosmiche di sfondo */
      #cosmic-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      }
      .cosmic-particle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.6);
      box-shadow: 0 0 10px rgba(255,255,255,0.8);
      animation: float 15s infinite linear;
      }
      @keyframes float {
      0% {
      transform: translateY(100vh) rotate(0deg);
      opacity: 0;
      }
      10% {
      opacity: 0.7;
      }
      90% {
      opacity: 0.7;
      }
      100% {
      transform: translateY(-100px) rotate(360deg);
      opacity: 0;
      }
      }
      a {
      color: var(--text-accent);
      text-decoration: none;
      transition: color 0.3s, text-shadow 0.3s;
      }
      a:hover {
      color: #fff;
      text-shadow: 0 0 0.38rem #33ccff;
      }
      /* Header e Top Bar */
      .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1.2rem;
      background: var(--menu-bg);
      backdrop-filter: blur(0.6rem);
      -webkit-backdrop-filter: blur(0.6rem);
      border-bottom: 1px solid var(--menu-border);
      z-index: 2000;
      transition: transform 0.3s ease;
      }
      .top-bar.hidden {
      transform: translateY(-100%);
      }
      .brand {
      display: flex;
      align-items: center;
      gap: 0.62rem;
      text-decoration: none;
      margin-left: 150px;
      }
      .brand svg {
      width: 2.12rem;
      height: 2.12rem;
      filter: drop-shadow(0 0 0.38rem rgba(255, 215, 0, .5));
      }
      .brand span {
      font-family: 'Cinzel Decorative', cursive;
      font-weight: 700;
      letter-spacing: 0.1rem;
      background: linear-gradient(90deg, #ffd700, #fff7b0, #ffd700);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 0.62rem rgba(255, 215, 0, .35);
      font-size: 1.5rem;
      }
      .bar-right {
      display: flex;
      align-items: center;
      gap: 0.62rem;
      }
      .translate-box {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      }
      .translate-select {
      appearance: none;
      padding: 0.45rem 0.8rem;
      border: 1px solid var(--menu-border);
      border-radius: 0.62rem;
      background: rgba(20, 20, 40, .78);
      color: var(--text-light);
      font-size: 0.95rem;
      cursor: pointer;
      }
     /* === SEARCH: lente a sinistra, X a destra (solo CSS) === */
.search-container{
  position: relative;
  display: inline-flex;
  align-items: center;
  overflow: visible;
  z-index: 3001;
}

/* Input con spazio per lente (sx) e X (dx) */
.search-container input[type="search"],
.search-container input[type="text"]{
  width: 16.25rem;
  height: 2.5rem;
  padding-left: 2.4rem;   /* spazio lente a sinistra */
  padding-right: 2.6rem;  /* spazio X a destra */
  background: rgba(20,20,40,.78);
  border: 1px solid var(--menu-border);
  border-radius: 0.38rem;
  color: var(--text-light);
  font: 300 .95rem/2.5rem 'Montserrat', sans-serif;
  outline: none;
  transition: border-color .25s, box-shadow .25s;
  box-sizing: border-box;
}
.search-container input:focus{
  border-color: rgba(255,215,0,.5);
  box-shadow: 0 0 .75rem rgba(255,215,0,.18);
}

/* Lente: incollata al bordo sinistro allineata verticalmente */
.search-container .search-icon{
  position: absolute;
  left: .8rem;   
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.05rem;
  line-height: 1;
  color: rgba(255,215,0,.90);
  opacity: .95;
  pointer-events: none;    /* decorativa: non blocca i clic sull'input */
  z-index: 3003;
}
/* Fallback se la <i> √® vuota (niente FA) */
.search-container .search-icon:empty::before{
  content: "üîé";
  display: inline-block;
  transform: translateY(1px);
}

/* X nativa di Safari: resa visibile e ‚Äúoro‚Äù */
.search-container input[type="search"]::-webkit-search-cancel-button{
  -webkit-appearance: none;
  height: 18px; width: 18px; opacity: 1;
  background-color: var(--gold, #d4af37);
  border-radius: 50%;
  -webkit-mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/>\
</svg>') no-repeat center / 100% 100%;
}

/* (Se nel markup c‚Äô√® anche un bottone .clear-search) ‚Äì stesso allineamento della X nativa */
.search-container .clear-search{
  position: absolute;
  right: 1.95rem;
  top: 50%;
  transform: translateY(-50%);
  width: 22px; height: 22px;
  display: none;                 /* mostralo con la tua logica o tienilo sempre visibile */
  align-items: center; justify-content: center;
  border: 0; border-radius: 50%;
  background: rgba(255,255,255,.12);
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.25);
  color: var(--gold, #d4af37);
  font-weight: 700; cursor: pointer;
  z-index: 3004;
}

/* Se vuoi farlo apparire senza JS quando c‚Äô√® testo (richiede l‚ÄôHTML: input prima, poi .clear-search) */
.search-container input:not(:placeholder-shown) ~ .clear-search,
.search-container input:focus ~ .clear-search{
  display: flex;
}

      .menu-container {
      position: fixed;
      top: 4.5rem;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      z-index: 1900;
      padding: 0.5rem 0;
      background: rgba(10,10,30,0.9);
      backdrop-filter: blur(0.5rem);
      border-bottom: 1px solid rgba(255,215,0,0.1);
      transition: transform 0.3s ease;
      }
      .menu-container.hidden {
      transform: translateY(-100%);
      }
      nav.menu-desktop ul {
      display: flex;
      gap: 1px;
      list-style: none;
      margin: 0;
      padding: 0;
      justify-content: center;
      white-space: nowrap;
      }
      nav.menu-desktop li {
      position: relative;
      }
      .menu-btn, nav.menu-desktop li>a {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 1px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-accent);
      font-family: 'Cormorant Garamond', serif;
      font-weight: 700;
      font-size: 1.2rem;
      padding: .45rem .7rem;
      border-radius: 0.38rem;
      transition: .25s;
      text-decoration: none;
      text-shadow: 0 0 0.38rem #33ccff99;
      }
      .menu-btn:hover, nav.menu-desktop li>a:hover {
      color: #fff;
      }
      .arrow {
      font-size: .75rem;
      }
      /* Mega Menu */
.mega-menu {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-10px) scale(0.95);
  width: 61.25rem;
  max-width: 94vw;
  background: rgba(10,10,30,0.92);
  border: 1px solid rgba(255,215,0,0.25);
  border-top: 0;
  padding: 0.88rem;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.88rem;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  backdrop-filter: blur(15px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 950;
}

li.dropdown:hover > .mega-menu,
li.dropdown:focus-within > .mega-menu,
.mega-menu:hover {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0) scale(1);
}

.mega-menu h4 {
  margin: .2rem 0 .6rem;
  font-size: 1rem;
  color: var(--gold);
  font-family: 'Cinzel', serif;
  position: relative;
  padding-bottom: 6px;
}

.mega-menu h4::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--gold);
  transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

li.dropdown:hover .mega-menu h4::after {
  width: 100%;
}

.mega-menu > div {
  opacity: 0;
  transform: translateY(8px);
  transition: all 0.15s ease;
}

.mega-menu > div:nth-child(1) { transition-delay: 0.01s; }
.mega-menu > div:nth-child(2) { transition-delay: 0.02s; }
.mega-menu > div:nth-child(3) { transition-delay: 0.03s; }
.mega-menu > div:nth-child(4) { transition-delay: 0.04s; }

li.dropdown:hover .mega-menu > div,
li.dropdown:focus-within .mega-menu > div {
  opacity: 1;
  transform: translateY(0);
}

.mega-menu a {
  display: block;
  color: var(--text-accent);
  font-weight: 700;
  font-size: .95rem;
  padding: .12rem 0;
  position: relative;
  left: -5px;
  opacity: 0;
  transition: all 0.12s ease;
  transition-delay: calc(var(--delay, 0) * 0.015s);
  border-radius: 4px;
  margin: 0.1rem 0;
}

li.dropdown:hover .mega-menu a,
li.dropdown:focus-within .mega-menu a {
  left: 0;
  opacity: 1;
}

.mega-menu a:hover {
  color: #fff;
  transform: translateX(4px);
  background: rgba(255,215,0,0.1);
  padding-left: 0.5rem;
  text-shadow: 0 0 10px rgba(51,204,255,0.5);
  transition: all 0.08s ease;
}
/* Contenuto principale */
main {
  flex: 1;
  margin-top: 9rem;
  padding: 1rem;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

.welcome-section {
  text-align: center;
  padding: .8rem 0;
  margin-bottom: 8rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
}
.welcome-title {
  font-family: 'Cinzel Decorative', cursive;
  font-weight: 700;
  font-size: 3.5rem;
  color: transparent;
  background: linear-gradient(
    135deg,
    #87CEEB 0%,
    #00BFFF 25%,
    #1E90FF 50%,
    #00BFFF 75%,
    #87CEEB 100%
  );
  background-size: 400% 400%;
  -webkit-background-clip: text;
  background-clip: text;
  animation: 
    sofiaSparkle 4s linear infinite,
    titlePulse 2.5s ease-in-out infinite;
  text-align: center;
  display: block;
  width: 100%;
  margin: 0 auto 1rem auto;
}

@keyframes titlePulse {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 10px rgba(0,191,255,0.3));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 25px rgba(0,191,255,0.8));
  }
}

.welcome-subtitle {
  color: #00D4FF !important;
  font-size: 1.5rem;
  margin-bottom: 3rem;
  text-align: center;
  display: block;
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  animation: visibleSparkle 2s ease-in-out infinite;
  font-weight: 700;
}

@keyframes visibleSparkle {
  0%, 100% {
    text-shadow: 
      0 0 15px #00BFFF,
      0 0 30px #1E90FF;
  }
  50% {
    text-shadow: 
      0 0 25px #00BFFF,
      0 0 50px #1E90FF,
      0 0 70px #87CEEB;
    transform: scale(1.05);
  }
}
.typing-effect {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.4rem;
  font-style: italic;
  color: #00CFFF;
  font-weight: 700;
  display: inline-block;
  min-width: 60ch;
  text-align: center;
  white-space: nowrap;
  
  /* Ottimizzazioni per performance */
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
  will-change: contents;
}

/* USA SOLO .cursor (rimuovi .caret) */
.cursor {
  display: inline-block;
  animation: blink 1.2s ease-in-out infinite;
  font-weight: 400;
  margin-left: 2px;
}

/* UNA SOLA keyframes blink */
@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* === MEDIA QUERIES UNIFICATE === */
@media (max-width: 768px) {
  .typing-effect {
    font-size: 1.1rem;
    min-width: 40ch;
    white-space: normal;
  }
  
  .welcome-title {
    font-size: 2.5rem;
  }
  
  .welcome-subtitle {
    font-size: 1.2rem;
  }
}

/* Citazioni filosofiche fluttuanti */
.floating-quotes {
  position: fixed;
  bottom: 0px;
  right: 20px;
  z-index: 20;
  max-width: 300px;
}

.quote-bubble {
  background: rgba(10,10,30,0.9);
  border: 1px solid var(--menu-border);
  border-radius: 15px;
  padding: 5px;
  margin-bottom: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  transform: translateX(100%);
  opacity: 0;
  transition: transform 0.5s, opacity 0.5s;
  backdrop-filter: blur(5px);
}

.quote-bubble.show {
  transform: translateX(0);
  opacity: 1;
}

.quote-text {
  font-style: italic;
  margin-bottom: 5px;
  color: var(--text-light);
}

.quote-author {
  text-align: right;
  font-size: 0.9rem;
  color: var(--gold);
}

/* Footer */
footer { padding: 1.5rem 1rem; 
    margin-top: auto; /* Spazio aggiuntivo */
    position: relative;
    z-index: 10;
    background: #06060d;
    /* resto del CSS */
}
    /* removed duplicate footer style */
      .footer-wrap {
      max-width: 75rem;
      margin: 0 auto;
      padding: 0 1rem;
     }
      .footer-columns {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 1rem;
      align-items: start;
      text-align: left;
     }
      .footer-columns h3,
      .footer-columns h4 {
      margin: 0.1rem 0 0.3rem;
      color: #ffd86a;
      font-family: 'Cinzel', serif;
      letter-spacing: 0.2px;
      font-size: 0.9rem;
      }
      .footer-columns p {
      margin: 1rem 0;
      color: #00bb2d;
      line-height: 1.3;
      font-size: 0.85rem; 
      }
      .footer-columns ul {
      list-style: none;
      margin: 0;
      padding: 0;
      }
      .footer-columns li {
      margin: 0.1rem 0;
      font-size: 0.85rem;
      }
      .footer-legal {
      margin-top: 1rem;
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
      font-size: 0.8rem;
      justify-content: center;
      }
      .social {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.5rem;
      }
      .social a {
      width: 1.75rem;
      height: 1.75rem;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      }
      /* Responsive */
      @media (max-width: 61.25rem) {
      .footer-columns {
      grid-template-columns: 1fr;
      gap: 1rem;}

      .mega-menu {
      grid-template-columns: repeat(2, 1fr);
      }
      .search-container input {
      width: 12rem;
      }
      .welcome-title {
      font-size: 2.3rem;
      }
      .timeline::after {
      left: 31px;
      }
      .timeline-item {
      width: 100%;
      padding-left: 70px;
      padding-right: 25px;
      }
      .timeline-item:nth-child(even) {
      left: 0;
      }
      .timeline-item:nth-child(odd)::after,
      .timeline-item:nth-child(even)::after {
      left: 21px;
      }
      }
      @media (max-width: 37.5rem) {
      .top-bar {
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      }
      .bar-right {
      flex-wrap: wrap;
      justify-content: center;
      }
      .search-container input {
      width: 100%;
      max-width: 100%;
      }
      .menu-container {
      overflow-x: auto;
      }
      nav.menu-desktop ul {
      flex-wrap: nowrap;
      justify-content: flex-start;
      }
      .floating-quotes {
      display: none;
      }
      .menu-desktop > ul > li.dropdown:nth-child(2) .mega-menu {
  left: auto !important;
  right: 0 !important;
  transform: translateX(0) translateY(0.62rem) !important;
}
      .menu-desktop > ul > li.dropdown:nth-child(2):hover > .mega-menu,
      .menu-desktop > ul > li.dropdown:nth-child(2):focus-within > .mega-menu {
      transform: translateX(0) translateY(0) !important;
      }
           /* Pannello risultati ricerca */
      #search-panel { font-family: 'Montserrat', sans-serif; }
      mark.search-hit {
      background: rgba(255,215,0,0.35);
      padding: 0 .15em;
      border-radius: .2em;
      }
      
      /* === v6: Varianti posizionamento mega-menu per singole voci === */
      /* Default: resta centrato (stili gi√† presenti) */
      nav.menu-desktop .mega-menu.anchor-left {
      left: 0 !important;
      right: auto !important;
      transform: translateY(0.62rem) !important;
      }
      nav.menu-desktop li.dropdown:hover > .mega-menu.anchor-left,
      nav.menu-desktop li.dropdown:focus-within > .mega-menu.anchor-left,
      nav.menu-desktop .mega-menu.anchor-left:hover {
      transform: translateY(0) !important;
      }
      nav.menu-desktop .mega-menu.right-align {
      left: auto !important;
      right: 0 !important;
      transform: translateY(0.62rem) !important;
      }
      nav.menu-desktop li.dropdown:hover > .mega-menu.right-align,
      nav.menu-desktop li.dropdown:focus-within > .mega-menu.right-align,
      nav.menu-desktop .mega-menu.right-align:hover {
      transform: translateY(0) !important;
      }
      /* Pannello ricerca: chiudi */
      #search-panel .search-close {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: 1px solid rgba(255, 215, 0, .35);
      color: #e9eef5;
      border-radius: 6px;
      padding: 2px 8px;
      cursor: pointer;
      font-size: .85rem;
      }
      #search-panel .search-close:hover {
      background: rgba(255,255,255,0.06);
      }
    </style>
    <style id="menu-fix-overrides">
/* RIMUOVI LA TRANSITION DAI MEGA-MENU PER APERTURA ISTANTANEA */


nav.menu-desktop li.dropdown > .mega-menu.anchor-left {
  left: 0 !important;
  right: auto !important;
  transform: translateY(0.62rem) !important;
}

nav.menu-desktop li.dropdown:hover > .mega-menu.anchor-left,
nav.menu-desktop li.dropdown:focus-within > .mega-menu.anchor-left,
nav.menu-desktop .mega-menu.anchor-left:hover {
  transform: translateY(0) !important;
}

nav.menu-desktop li.dropdown > .mega-menu.right-align {
  left: auto !important;
  right: 0 !important;
  transform: translateY(0.62rem) !important;
}

nav.menu-desktop li.dropdown:hover > .mega-menu.right-align,
nav.menu-desktop li.dropdown:focus-within > .mega-menu.right-align,
nav.menu-desktop .mega-menu.right-align:hover {
  transform: translateY(0) !important;
}

@media (max-width: 768px) {
  nav.menu-desktop .mega-menu {
    left: 0 !important;
    right: 0 !important;
    transform: translateY(0.62rem) !important;
    width: 100vw !important;
    max-width: 100vw !important;
  }
  
  nav.menu-desktop li.dropdown:hover > .mega-menu,
  nav.menu-desktop li.dropdown:focus-within > .mega-menu,
  nav.menu-desktop .mega-menu:hover {
    transform: translateY(0) !important;
  }
}
</style>
<style id="patch-ui">/* CSS minimized for reliability */
      body{overflow:visible!important}
      .slider-vertical{position:fixed;left:3.25rem;top:7.5rem;width:11.25rem;height:20rem;z-index:80;overflow:hidden;border:1px solid rgba(255,215,0,.18);border-radius:.75rem;background:rgba(10,10,25,.45);backdrop-filter:blur(.38rem);box-shadow:0 .5rem 1.5rem rgba(0,0,0,.35)}
      .slider-vertical .slider-inner{position:absolute;inset:0;will-change:transform}
      .slide-vertical{width:100%;padding:.62rem .62rem .88rem;display:flex;flex-direction:column;align-items:center;gap:.5rem}
      .slide-vertical img{width:100%;height:8.75rem;object-fit:contain;display:block;background:rgba(0,0,0,.25);border-radius:.62rem;border:1px solid rgba(255,255,255,.1);box-shadow:0 .38rem .88rem rgba(0,0,0,.25)}
      .slide-vertical p{margin:.25rem 0 0;font-family:'Cormorant Garamond',serif;font-size:.92rem;text-align:center;color:#ffe9b8;text-shadow:0 0 .5rem rgba(255,215,0,.25);min-height:2.6em;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
      .slider-controls{position:fixed;left:5.75rem;top:27.81rem;width:11.25rem;display:flex;flex-direction:column;gap:.5rem;background:rgba(10,10,25,.55);border:1px solid rgba(255,215,0,.22);border-radius:.62rem;padding:.5rem;z-index:80}
      .ctrl-btn{display:inline-flex;align-items:center;justify-content:center;min-height:2rem;margin-bottom:2px;padding:.38rem .62rem;font-weight:600;cursor:pointer;border-radius:.5rem;border:1px solid rgba(255,215,0,.25);background:rgba(20,20,40,.7);color:#ffd86a}
      .audio-player{ margin-top:.5rem;  max-width:520px; position:fixed;left:3.25rem;top:40.38rem;z-index:80;display:flex;align-items:center;gap:.62rem;padding:.5rem .62rem;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.62rem;opacity:1;transform:none}
      .audio-title{font-weight:600}.audio-player .controls{display:flex;align-items:center;gap:.62rem}.audio-player input[type=range]{width:7.5rem}
      .articles-blob{position:fixed;right:1.25rem;top:9.5rem;width:20rem;z-index:90;background:radial-gradient(120% 150% at 100% 0%,rgba(50,120,255,.16),rgba(10,10,30,.82));border:1px solid rgba(255,255,255,.08);border-radius:1rem;padding:.88rem 1rem;box-shadow:0 .94rem 1.88rem rgba(0,0,0,.35)}
      .articles-blob h3{margin:0 0 .5rem;font-family:'Cinzel',serif;color:#ffd86a}.articles-blob ul{list-style:none;margin:0;padding:0}.articles-blob li{margin:.25rem 0}.articles-blob a{color:#cfe8ff;text-decoration:none;font-weight:700}.articles-blob a:hover{color:#fff;text-decoration:underline}
      .right-embed{position:fixed;right:1.25rem;top:40rem;width:20rem;z-index:25;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.75rem;padding:.5rem}
      .right-embed iframe{width:100%;height:264px;display:block;border:0}
      #russell-box{position:fixed;bottom:8vh;left:2rem;z-index:10;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.62rem;padding:.62rem .75rem;max-width:24rem;box-shadow:0 .5rem 1.12rem rgba(0,0,0,.35)}
      #russell-btn{all:unset;cursor:pointer;display:block;color:#ffd86a;}#russell-hint{position:fixed;bottom:19vh;left:3.5rem;z-index:2;color:#cfe8ff;opacity:.85;font-style:italic;font-weight:700}
      #lightning,#bolt{position:fixed;inset:0;pointer-events:none;z-index:1;opacity:0}
      #lightning{background:radial-gradient(circle at 50% 50%,rgba(255,255,255,.9),rgba(255,255,255,.2) 40%,transparent 65%);transition:opacity .18s ease-out}
      #bolt{width:160px;height:400px;left:50%;top:50%;background:linear-gradient(to bottom,rgba(255,255,255,1),rgba(255,255,255,0));clip-path:polygon(48% 0,52% 0,60% 25%,45% 25%,55% 55%,40% 55%,48% 100%,42% 100%,35% 60%,50% 60%,38% 28%,58% 28%);filter:drop-shadow(0 0 12px rgba(255,255,255,.8));transition:opacity .28s ease-out,transform .09s ease-out}
      #effects-ctrl{position:fixed;top:.9rem;right:1.25rem;width:auto;z-index:2147483603;display:flex;gap:.5rem;justify-content:flex-end}
      #effects-ctrl .ctrl-btn{min-width:6.5rem}
      @media (min-width:1200px){ main{padding-left:16rem;padding-right:22rem} }
    </style>

<style id="patch-ui-override">
/* ==== Slider verticale: dimensioni fisse & anti-jitter (300px) ==== */
.slider-vertical{
  /* larghezza card e altezze fisse */
  --slide-w: 260px;
  --slide-h: 300px;        /* altezza card */
  --vpad: 24px;            /* padding verticale: .62rem top + .88rem bottom ‚âà 24px */
  --caption-h: 52px;       /* spazio fisso per la didascalia (‚âà 2 righe) */
  --img-h: calc(var(--slide-h) - var(--caption-h) - var(--vpad));
  width: var(--slide-w);
}

.slider-vertical .slider-inner{
  position:absolute; inset:0;
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);        /* forza compositing GPU */
}

.slide-vertical{
  width: 100%;
  height: var(--slide-h);
  padding: .62rem .62rem .88rem;
  display: flex; flex-direction: column; align-items: center; gap: .5rem;
  box-sizing: border-box;
  overflow: hidden;                /* niente trabordi durante il movimento */
  contain: content;                /* isola layout/paint della card */
  backface-visibility: hidden;
}

.slide-vertical img{
  width: 100%;
  height: var(--img-h);
  object-fit: cover;               /* riempi la card tagliando l‚Äôeccesso */
  display: block;
  background: rgba(0,0,0,.25);
  border-radius: .62rem;
  border: 1px solid rgba(255,255,255,.1);
  box-shadow: 0 .38rem .88rem rgba(0,0,0,.25);
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* Didascalia: spazio stabile, 2 righe max */
.slide-vertical p{
  margin: .25rem 0 0;
  font-family: 'Cormorant Garamond', serif;
  font-size: .92rem;
  text-align: center;
  color: #ffe9b8;
  text-shadow: 0 0 .5rem rgba(255,215,0,.25);
  min-height: var(--caption-h);
  line-height: 1.3;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>


<link rel="stylesheet" href="patch-ui-override.css?v=20251029">

    <style id="right-links-css">
      .right-box{
      position:fixed; right:1.25rem; width:20rem; z-index:25;
      background: rgba(10,10,30,.86); border:1px solid rgba(255,215,0,.25);
      border-radius:.75rem; padding:.62rem .75rem; box-shadow:0 .9rem 1.8rem rgba(0,0,0,.34)
      }
      .right-box h3{margin:.1rem 0 .4rem; font-family:'Cinzel',serif; color:#ffd86a; font-size:1rem}
      .right-box .mini{color:#bcd7ff; font-size:.8rem; opacity:.85;}
      .right-box .row{display:flex; align-items:center; gap:.5rem; margin:.38rem 0;}
      .right-box input[type="search"]{
      width:100%; height:2rem; padding:0 .6rem; border-radius:.5rem;
      background:rgba(20,20,40,.75); border:1px solid rgba(255,215,0,.28); color:#e9eef5
      }
      .right-box .sources{display:flex; flex-wrap:wrap; gap:.4rem .6rem; margin:.35rem 0 .5rem}
      .right-box .sources label{font-size:.8rem; color:#d9e7ff}
      .right-box .btn{display:inline-flex; align-items:center; justify-content:center;
      padding:.38rem .6rem; border-radius:.5rem; border:1px solid rgba(255,215,0,.25);
      background:rgba(20,20,40,.78); color:#ffd86a; font-weight:700; cursor:pointer
      }      
      #dict-compact{ top: 22.5rem; }
      #iep-linkbox{ top: 35.2rem; }
      @media (min-width: 1200px){
      .right-embed{ top: 42.5rem; }
      }
      @media (max-width: 980px){
      #dict-compact, #iep-linkbox { position: static; width:100%; margin: .75rem 0; }
      }
      /* Assicurati che l'enciclopedia abbia un z-index pi√π alto */

    </style>
<style id="effects-right-edge">
      /* üéØ Tieni qui i ‚Äúknob‚Äù da regolare */
      :root{
      --effects-right: -0.6rem;  /* ‚Üì Porta a 0 o anche -4px per incollare al bordo */
      --effects-top:   0.9rem;   /* ‚Üë se vuoi abbassarli/alzarli un po' */
      }
      /* Caso A: fallback fisso (quando NON vengono appesi dentro l'header) */
      #effects-ctrl{
      position: fixed;
      top: var(--effects-top) !important;
      right: var(--effects-right) !important;
      z-index: 2147483603;
      }
      /* Caso B: quando li appendiamo dentro header/topbar/navbar */
      header, .topbar, .navbar{ position: relative; overflow: visible; }
      header #effects-ctrl,
      .topbar #effects-ctrl,
      .navbar #effects-ctrl{
      position: absolute !important;
      top: var(--effects-top);
      right: var(--effects-right);
      margin-left: 0; /* neutralizza eventuali margini precedenti */
      }
    </style>
<!-- -->

<style id="audio-player-stack">
  /* forza il box audio a prendersi tutta la riga sotto */
  #audio-player{
    display: grid;              /* titolo riga 1, controlli riga 2 */
    grid-template-columns: 1fr;
    gap: .35rem;
    flex: 1 1 100% !important;  /* se il genitore √® flex, occupa 100% e va a capo */
    width: 15% !important;
    margin-top: 0.5rem;
  }
  #audio-player{ margin-top: 585px; top: 0; }

  #audio-player .audio-title{
    margin: 0; font-weight: 700;
  }
  #audio-player .controls{
    display: flex;
    flex-wrap: wrap;            /* se serve, i controlli vanno a capo */
    gap: .5rem .6rem;
    align-items: center;
  }
  #audio-player #time{
    font-variant-numeric: tabular-nums;
    min-width: 7.2rem;          /* evita salti di layout */
  }
  #audio-player #volume{
    width: 160px;               /* regola pure: 120‚Äì220px */
  }
</style>

<!-- removed later #audio-player override for Safari-stability -->
<style id="search-related-css">
      .related-results{
      margin-top:.6rem; padding-top:.6rem;
      border-top:1px solid rgba(255,215,0,.22);
      }
      .related-header{
      margin:0 0 .35rem; font-weight:700; font-size:1rem; color:#ffeb9a;
      }
      .related-list{ list-style:none; margin:0; padding:0; display:grid; gap:.4rem; }
      .related-item{ padding:.45rem .55rem; border:1px solid rgba(255,215,0,.16); border-radius:10px; background:rgba(10,10,30,.78); }
      .related-item a{ color:#ffeb9a; text-decoration:none; }
      .related-item a:hover{ text-decoration:underline; }
      .related-item .meta{ font-size:.86rem; opacity:.9; margin-top:.15rem; }
    </style>
<style id="search-panel-tune">
  :root{
    --search-panel-w: 600px;  /* Larghezza finestra risultati */
    --search-panel-maxh: 72vh;/* Altezza massima con scroll interno */
  }

  /* Pannello */
  #search-panel, #searchPanel, .search-panel, .results-panel{
    position: fixed;
    left: 50%; top: clamp(72px, 8vh, 120px);
    transform: translateX(-50%);
    width: min(94vw, var(--search-panel-w));
    max-height: var(--search-panel-maxh);
    border-radius: 12px;
    overflow: hidden; /* scorre solo il body interno */
    z-index: 2147483605;
  }

  /* Header del pannello: titolo + chiudi */
  .search-header, #search-header, .results-header{
    display: flex; align-items: center; justify-content: space-between;
    padding: .65rem .9rem;
    border-bottom: 1px solid rgba(255,215,0,.22);
  }
  .search-title, .results-title{
    margin:0; font-weight: 700; font-size: 1.05rem;
  }
  .search-close, #search-close, [data-role="search-close"]{
    margin: 0; padding: .35rem .55rem; border-radius: .5rem; line-height:1;
    cursor: pointer; border: 1px solid rgba(255,215,0,.25);
    background: rgba(20,20,40,.78); color:#ffd86a; font-weight:700;
  }

  /* Corpo scorrevole */
  #search-results, #searchResults, .search-results, .results-scroll{
    max-height: calc(var(--search-panel-maxh) - 3.2rem); /* togli header */
    overflow: auto;
    padding: .6rem .8rem .8rem;
    display: grid; gap: .55rem;
  }

  /* Singolo risultato (flessibile: li, div, ecc.) */
  #search-results > *, .search-results > *{
    padding: .55rem .65rem;
    border: 1px solid rgba(255,215,0,.16);
    border-radius: 10px;
    background: rgba(10,10,30,.78);
  }

  /* Titolo risultato */
  #search-results h4, .search-results h4, .result-title{
    margin: 0 0 .2rem; font-size: 1rem; font-weight: 700; color:#ffeb9a;
  }

  /* Tag/meta (es. Idealismo) come ‚Äúchip‚Äù */
  .result-meta, .result-tag, .tag{
    display:inline-block; margin: 0 0 .25rem; padding:.1rem .45rem;
    font-size:.8rem; border-radius:999px; color:#0b1022;
    background: linear-gradient(90deg,#ffd86a,#ffeb9a);
  }

  /* Descrizione + sorgente */
  .result-desc{ margin:.1rem 0 .15rem; font-size:.9rem; color:#cfe2ff; line-height:1.25; }
  .result-source{ font-size:.8rem; opacity:.85; }

  /* Evidenziazione (se usi <mark> o aggiungi classe) */
  mark, .hl{ background: #ffe08a; color:#141414; padding:0 .15rem; border-radius:.2rem; }

  /* Mobile piena larghezza e un po‚Äô pi√π alto */
  @media (max-width: 900px){
    :root{ --search-panel-w: 100vw; --search-panel-maxh: 82vh; }
    #search-panel, #searchPanel, .search-panel, .results-panel{
      left:50%; transform:translateX(-50%); width:100vw; border-radius:10px;
    }
  }
</style>

<script id="search-config">
  // prova prima l‚ÄôURL assoluto del dominio, poi il fallback root-relative
  window.SEARCH_INDEX_URLS = [
    'https://www.echidisofia.org/search-index.json?v=20251028',
    '/search-index.json?v=20251028'
    // Aggiungi SOLO se hai aggiornato ANCHE questo file:
    // '/assets/search-index.json?v=20251028'
  ];
</script>

<style id="search-clear-btn">
  /* Assicura il contesto */
  .search-container{ position:relative; z-index:3001; }
  /* Lascia spazio a lente + bottone clear */
  #site-search{
    padding-right: 3.8rem;   /*  X a destra + lente un po' pi√π a sinistra */
    position: relative; z-index:3002;
  }

  /* Lente: decorativa, dentro il box (se la usi) */
  .search-container .search-icon{ left: 0.8rem; 
    position:absolute;  top:50%; transform:translateY(-50%);
    font-size:1.05rem; line-height:1; color:var(--gold,#d4af37);
    opacity:.95; pointer-events:none; z-index:3003;
  }

  /* Nascondi la ‚ùå nativa (cos√¨ non fa confusione) */
  #site-search::-webkit-search-cancel-button{
    -webkit-appearance:none; display:none !important;
  }

  /* Bottone CLEAR custom (oro) */
  .clear-search{
    position:absolute; right:.6rem; top:50%; transform:translateY(-50%);
    width:22px; height:22px; border-radius:50%;
    background: var(--gold,#d4af37) !important;
    border:none; padding:0; margin:0;
    display:none; align-items:center; justify-content:center;
    cursor:pointer; z-index:3004;

  }

  /* Icona con mask SVG (bordo morbido) */
  .clear-search::before{
    content:""; display:block; width:14px; height:14px;
    background:#0b1022;
    -webkit-mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/>\
</svg>') no-repeat center / 100% 100%;
            mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/>\
</svg>') no-repeat center / 100% 100%;
  }

  /* Mostra il bottone se c‚Äô√® testo (CSS-only sui browser che supportano :has) */
  .search-container:has(#site-search:not(:placeholder-shown)) .clear-search{ display:flex; }
  .search-container:has(#site-search[value]:not([value=""])) .clear-search{ display:flex; }

  /* Mobile: tutto ok anche a tutta larghezza */
  @media (max-width:900px){
    #site-search{ padding-right:3.8rem; }
  }
</style>
<style id="cookie-consent-css">
  :root{
    --cc-bg: rgba(10,10,30,.96);
    --cc-border: rgba(255,215,0,.28);
    --cc-gold: var(--gold, #d4af37);
    --cc-cyan: var(--cyan, #00ccff);
  }

  /* Banner compatto ‚Äúfluttuante‚Äù (bottom center) */
  .cc-banner{
    position: fixed; left: 50%; bottom: 1.25rem; transform: translateX(-50%);
    width: min(92vw, 740px);
    background: var(--cc-bg);
    border: 1px solid var(--cc-border);
    border-radius: 12px;
    box-shadow: 0 1.2rem 2.4rem rgba(0,0,0,.45);
    padding: .95rem 1rem;
    display: none;
    z-index: 2147483607; /* sopra tutto */
    backdrop-filter: blur(.5rem);
  }
  .cc-banner.open{ display: grid; gap: .75rem; grid-template-columns: 1fr auto; align-items: start; }
  .cc-banner .cc-title{ font-family:'Cinzel',serif; color: var(--cc-gold); margin: 0 0 .25rem; font-size: 1.05rem; }
  .cc-banner .cc-text{ color:#dfe8ff; font-size:.92rem; line-height:1.35; opacity:.95; margin:0; }
  .cc-actions{ display: flex; gap: .5rem; flex-wrap: wrap; align-items:center; justify-content:flex-end; }
  .cc-btn{
    border:1px solid var(--cc-border); border-radius:.55rem; padding:.48rem .75rem;
    background: rgba(20,20,40,.78); color:#ffd86a; font-weight:700; cursor:pointer;
  }
  .cc-btn.solid{ background: linear-gradient(180deg,#ffd86a,#e3c45a); color:#0b1022; border-color: #ffd86a; }
  .cc-link{ color: var(--cc-cyan); text-decoration: none; font-weight: 600; }

  /* MODALE ‚ÄúPersonalizza‚Äù */
  .cc-modal{
    position: fixed; inset: 0; display: none; place-items: center;
    background: rgba(0,0,0,.55); z-index: 2147483608;
  }
  .cc-modal.open{ display: grid; }
  .cc-card{
    width: min(94vw, 720px); max-height: 80vh; overflow:auto;
    background: var(--cc-bg);
    border:1px solid var(--cc-border); border-radius:14px; padding:1rem 1rem 1.1rem;
    box-shadow: 0 1.3rem 2.6rem rgba(0,0,0,.5);
  }
  .cc-card h3{ margin:.1rem 0 .2rem; color:var(--cc-gold); font-family:'Cinzel',serif; }
  .cc-row{ display:grid; grid-template-columns: 1fr auto; gap:.5rem; align-items:center; padding:.55rem .5rem; border-bottom:1px solid rgba(255,215,0,.13); }
  .cc-row:last-child{ border-bottom:0; }
  .cc-desc{ font-size:.92rem; color:#cfe2ff; opacity:.95; margin:.15rem 0 0; }
  .cc-switch{ display:flex; align-items:center; gap:.5rem; }
  .cc-switch input{ width: 46px; height: 24px; appearance: none; background: #1e2746; border-radius: 999px; position: relative; outline: none; cursor: pointer; border:1px solid rgba(255,215,0,.22); }
  .cc-switch input:checked{ background:#2a7dff; }
  .cc-switch input::after{
    content:""; position:absolute; left:3px; top:3px; width:18px; height:18px; border-radius:50%; background:#fff; transition:.2s;
  }
  .cc-switch input:checked::after{ transform: translateX(22px); }
  .cc-badge{ font-size:.75rem; color:#0b1022; background: var(--cc-gold); border-radius:999px; padding:.08rem .5rem; font-weight:800; }
  .cc-actions-row{ margin-top:.8rem; display:flex; gap:.6rem; justify-content:flex-end; flex-wrap:wrap; }
  .cc-btn.outline{ background: rgba(20,20,40,.78); color:#ffd86a; }

  /* FAB (biscottino) ‚Äî lo muovo se ‚Äútocca‚Äù il box di Russell */
  #cookie-fab{
    position: fixed; left: 1.25rem; bottom: 1.25rem;
    width: 48px; height: 48px; border-radius: 999px; border:1px solid var(--cc-border);
    background: rgba(20,20,40,.78);
    display: grid; place-items: center; cursor: pointer;
    box-shadow: 0 .8rem 1.6rem rgba(0,0,0,.45);
    z-index: 2147483606;
    color:#ffde9a; font-size:1.25rem;
  }
  #cookie-fab:hover{ box-shadow: 0 0 .85rem rgba(255,215,0,.45); }

  @media (max-width: 900px){
    .cc-banner{ left: .75rem; right:.75rem; transform:none; width:auto; }
  }
</style>
<style id="cookie-fab-label">
  /* Trasforma il FAB in un pill-button con icona + testo affiancati */
  #cookie-fab{
    display: inline-flex !important;
    align-items: center;
    gap: .45rem;                 /* distanza tra üç™ e ‚ÄúCookie‚Äù */
    height: 48px;
    width: auto !important;      /* niente 48px fissi */
    padding: 0 .85rem 0 .70rem;  /* spazio orizzontale */
    border-radius: 999px;
    white-space: nowrap;         /* evita a capo del testo */
    line-height: 1;              /* allineamento verticale pulito */
    font-weight: 700;            /* testo un po‚Äô pi√π deciso */
    /* mantiene colori/ombra gi√† definiti in precedenza */
  }

  /* Accessibilit√† focus */
  #cookie-fab:focus-visible{
    outline: 2px solid var(--cc-gold, #d4af37);
    outline-offset: 2px;
  }

  /* Tweak responsive: pill leggermente pi√π compatto su schermi stretti */
  @media (max-width: 680px){
    #cookie-fab{
      height: 44px;
      gap: .40rem;
      padding: 0 .75rem 0 .60rem;
      font-size: .95rem;
    }
  }
</style>
<!-- removed ultimate-clickthrough-zfix-2025-10-08 --><style id="quote-runner-css-solid-2025-10-08">
#quote-runner{ position:fixed; left:50%; bottom:270px; transform:translateX(-50%); z-index:20; pointer-events:none; max-width:min(86vw,680px); }
#quote-runner .quote-bubble{ position:relative; opacity:0; margin:0; backdrop-filter: blur(5px); will-change: transform, opacity; }
#quote-runner .quote-bubble .quote-text{ font-size:1.05rem; line-height:1.4; }
#quote-runner .quote-bubble .quote-author{ margin-top:.25rem; }
#quote-runner .slide-in{ animation:quoteSlideInOut 9s cubic-bezier(.2,1,.2,1) forwards; }
@keyframes quoteSlideInOut{
  0%{ transform:translateX(55vw); opacity:0; }
  18%{ opacity:1; }
  40%{ transform:translateX(0); opacity:1; }
  70%{ transform:translateX(0); opacity:1; }
  100%{ transform:translateX(-55vw); opacity:0; }
}
@media(max-width:600px){
  #quote-runner{ bottom:160px; }
  #quote-runner .quote-bubble .quote-text{ font-size:1rem; }
}
</style>
<style id="zfix-submenu-overlays-2025-10-08">
/* === Z-INDEX FIX: keep submenu above right-side boxes (articles/dictionary/encyclopedia) === */
.menu-container{ z-index: 100 !important; } /* above .articles-blob/.right-embed (3600) */
nav.menu-desktop, nav.menu-desktop ul, nav.menu-desktop li{ position: relative; z-index: 101 !important; }
nav.menu-desktop .mega-menu{ z-index: 2147483606 !important; pointer-events: auto !important; }
/* Ensure right boxes don't steal hover on desktop when menu is open */
@media (min-width: 981px){
  nav.menu-desktop li.dropdown:hover ~ .right-box,
  nav.menu-desktop li.dropdown:focus-within ~ .right-box{ pointer-events: none !important; }
}
</style><script type="application/ld+json">{
  "@context":"https://schema.org",
  "@type":"CollectionPage",
  "name":"Timeline filosofica",
  "isPartOf":{"@type":"WebSite","name":"Echi di Sofia"}
}</script><style id="responsive-extras">
/* === Echi di Sofia: responsive extras (inlined) === */
@media (max-width: 768px){
  .menu-btn, .ctrl-btn { min-width: 44px; min-height: 44px; }
  .timeline-content { padding: 15px; margin: 10px 5px; } /* opzionale, migliora leggibilit√† */
}
</style>

<script id="gt-init">
window.googleTranslateElementInit = function(){
  try{
    new google.translate.TranslateElement({
      pageLanguage: 'it',
      includedLanguages: 'en,fr,de,es,pl',
      autoDisplay: false
    }, 'google_translate_element');
    document.documentElement.removeAttribute('data-gt-error');
  }catch(e){ console.warn('GT init error', e); }
};
</script>
<script defer="True" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<style>
/* === SFONDO STELLARE COMPLETO - VERSIONE DEFINITIVA === */
.stars-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
    overflow: hidden;
}

/* STELLE NORMALI - VERSIONE MIGLIORATA PER LAMPEGGIAMENTO */
.star {
    position: absolute;
    background-color: #ffffff;
    border-radius: 50%;
    animation: twinkle var(--duration) ease-in-out infinite;
    animation-delay: var(--delay);
}

/* DURATE PI√ô LUNGHE PER LAMPEGGIAMENTO PI√ô LENTO */
.star.small { width: 1px; height: 1px; opacity: 0.3; --duration: 6s; --delay: 0s; }
.star.medium { width: 2px; height: 2px; opacity: 0.6; --duration: 8s; --delay: 1s; }
.star.large { width: 3px; height: 3px; opacity: 0.8; --duration: 10s; --delay: 2s; }
.star.xlarge { width: 4px; height: 4px; opacity: 1; --duration: 12s; --delay: 3s; }

/* LAMPEGGIAMENTO PI√ô EVIDENTE */
@keyframes twinkle {
    0% { opacity: 0.2; transform: scale(1); }
    20% { opacity: 1; transform: scale(1.4); }    /* Picco pi√π rapido */
    40% { opacity: 0.3; transform: scale(1); }
    60% { opacity: 1; transform: scale(1.3); }    /* Secondo picco */
    80% { opacity: 0.4; transform: scale(1); }
    100% { opacity: 0.2; transform: scale(1); }
}

/* COMETE VOLANTI - DIMENSIONI RIDOTTE */
.shooting-star {
    position: absolute;
    width: 4px;
    height: 1px; 
    background: linear-gradient(90deg, 
        transparent 0%, 
        #ffffff 15%, 
        #00ccff 40%, 
        transparent 100%);
    border-radius: 50%;
    filter: blur(0.2px);
    box-shadow: 0 0 4px #00ccff, 0 0 8px #ffffff;
    opacity: 0;
    z-index: 1;
}

/* VARIANTI DI VELOCIT√Ä - COMETE PICCOLE */
.shooting-star.fast {
    animation-duration: 4s;
    background: linear-gradient(90deg, 
        transparent 0%, 
        #ffd700 15%, 
        #ffffff 35%, 
        transparent 100%);
    box-shadow: 0 0 5px #ffd700, 0 0 10px #ffffff;
    width: 5px;
}

.shooting-star.slow {
    animation-duration: 10s;
    background: linear-gradient(90deg, 
        transparent 0%, 
        #b967ff 15%, 
        #ffffff 35%, 
        transparent 100%);
    box-shadow: 0 0 4px #b967ff, 0 0 8px #ffffff;
    width: 5px;
}

/* ANIMAZIONI COMETE */
.shooting-star.diagonal {
    animation: shoot-diagonal 7s ease-out infinite;
}

.shooting-star.horizontal {
    animation: shoot-horizontal 6s ease-out infinite;
}

.shooting-star.vertical {
    animation: shoot-vertical 8s ease-out infinite;
}

.shooting-star.reverse {
    animation: shoot-reverse 7s ease-out infinite;
}

/* STELLE COLORATE */
.star.color-blue { background-color: #00ccff; box-shadow: 0 0 6px #00ccff; }
.star.color-gold { background-color: #ffd700; box-shadow: 0 0 6px #ffd700; }
.star.color-purple { background-color: #b967ff; box-shadow: 0 0 6px #b967ff; }
.star.color-green { background-color: #00ff88; box-shadow: 0 0 6px #00ff88; }
.star.color-pink { background-color: #ff66cc; box-shadow: 0 0 6px #ff66cc; }
.star.color-orange { background-color: #ffaa00; box-shadow: 0 0 6px #ffaa00; }

/* ANIMAZIONI KEYFRAMES COMETE */
@keyframes shoot-diagonal {
    0% { transform: translateX(-150px) translateY(-150px) rotate(45deg); opacity: 0; }
    10% { opacity: 1; }
    30% { opacity: 1; }
    100% { transform: translateX(calc(100vw + 150px)) translateY(calc(100vh + 150px)) rotate(45deg); opacity: 0; }
}

@keyframes shoot-horizontal {
    0% { transform: translateX(-150px) rotate(0deg); opacity: 0; }
    15% { opacity: 1; }
    40% { opacity: 1; }
    100% { transform: translateX(calc(100vw + 150px)) rotate(0deg); opacity: 0; }
}

@keyframes shoot-vertical {
    0% { transform: translateY(-150px) rotate(90deg); opacity: 0; }
    15% { opacity: 1; }
    35% { opacity: 1; }
    100% { transform: translateY(calc(100vh + 150px)) rotate(90deg); opacity: 0; }
}

@keyframes shoot-reverse {
    0% { transform: translateX(calc(100vw + 150px)) translateY(-150px) rotate(-45deg); opacity: 0; }
    10% { opacity: 1; }
    30% { opacity: 1; }
    100% { transform: translateX(-150px) translateY(calc(100vh + 150px)) rotate(-45deg); opacity: 0; }
}

/* TEMA CHIARO */
[data-theme="light"] .star { opacity: 0.1; background-color: #1a202c; }
[data-theme="light"] .shooting-star { opacity: 0.3; }

/* ACCESSIBILIT√Ä */
@media (prefers-reduced-motion: reduce) {
    .star, .shooting-star { animation: none !important; opacity: 0.5; }
}

/* COMETE MICRO */
.shooting-star.micro {
    width: 3px !important;
    height: 0.5px !important;
    filter: blur(0.1px) !important;
    box-shadow: 0 0 2px currentColor !important;
}
</style>
<style id="lens-left-fix">
/* --- Lens left & vertically centered (scoped, minimal) --- */
.search-container{ position: relative !important; }
#site-search{ padding-left: 2.6rem !important; }  /* space for the lens on the left */
.search-container .search-icon{
  position: absolute !important;
  left: 0.9rem !important;
  
  top: 50% !important;
  transform: translateY(-50%) !important;
  pointer-events: none;  /* decorative: doesn't block typing/clicks */
  line-height: 1;
}
</style>
<style id="volume-slider-fix">
/* --- Fix visuale slider volume (Safari, WebKit) --- */
#audio-player input[type="range"]{
  -webkit-appearance: none; /* necessario in Safari per disegnare la track custom */
  width: 160px;
  background: transparent;  /* niente barra grigia di default */
}

/* Track (Safari/Chrome) */
#audio-player input[type="range"]::-webkit-slider-runnable-track{
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255,215,0,.55), rgba(0,204,255,.45));
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.25);
}

/* Thumb (Safari/Chrome) */
#audio-player input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--gold, #d4af37);
  margin-top: -4px; /* (thumb 14 - track 6)/2 = 4 */
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

/* Track (Firefox) */
#audio-player input[type="range"]::-moz-range-track{
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255,215,0,.55), rgba(0,204,255,.45));
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.25);
}

/* Thumb (Firefox) */
#audio-player input[type="range"]::-moz-range-thumb{
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

/* Edge/old IE */
#audio-player input[type="range"]::-ms-track{
  height: 6px; border-color: transparent; color: transparent;
}
#audio-player input[type="range"]::-ms-fill-lower,
#audio-player input[type="range"]::-ms-fill-upper{
  background: linear-gradient(90deg, rgba(255,215,0,.55), rgba(0,204,255,.45));
  border-radius: 999px;
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.25);
}
#audio-player input[type="range"]::-ms-thumb{
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

/* Migliora focus/hover */
#audio-player input[type="range"]:focus::-webkit-slider-runnable-track{
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.45), 0 0 10px rgba(0,204,255,.25);
}
#audio-player input[type="range"]:hover::-webkit-slider-thumb{
  box-shadow: 0 0 10px rgba(255,215,0,.6);
}
</style>
<style id="range-dynamic-fill">
/* === Dynamic fill base (applies to both #volume and #slider-speed) === */
#volume, #slider-speed{
  -webkit-appearance: none;
  background:
    linear-gradient(90deg, rgba(255,215,0,.85), rgba(0,204,255,.85)) no-repeat,
    linear-gradient(90deg, rgba(255,255,255,.14), rgba(255,255,255,.14)) no-repeat;
  background-size: var(--fill, 0%) 6px, 100% 6px;
  background-position: left center, left center;
  background-repeat: no-repeat;
  border-radius: 999px;
}
#volume::-webkit-slider-runnable-track,
#slider-speed::-webkit-slider-runnable-track{ background: transparent; height: 6px; }
#volume::-moz-range-track,
#slider-speed::-moz-range-track{ background: transparent; height: 6px; }
#volume::-ms-track,
#slider-speed::-ms-track{ background: transparent; height: 6px; color: transparent; border-color: transparent; }

#volume::-webkit-slider-thumb,
#slider-speed::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  margin-top: -4px; box-shadow: 0 0 6px rgba(255,215,0,.4);
}
#volume::-moz-range-thumb,
#slider-speed::-moz-range-thumb{
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}
#volume::-ms-thumb,
#slider-speed::-ms-thumb{
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}
</style>
<style id="speed-horizontal-color">
/* === Speed slider: horizontal, same dynamic fill as volume === */
#slider-speed{
  -webkit-appearance: none;
  width: 160px;               /* same width as volume */
  background:
    linear-gradient(90deg, rgba(255,215,0,.85), rgba(0,204,255,.85)) no-repeat,  /* filled */
    linear-gradient(90deg, rgba(255,255,255,.14), rgba(255,255,255,.14)) no-repeat; /* empty track */
  background-size: var(--fill, 0%) 6px, 100% 6px;
  background-position: left center, left center;
  background-repeat: no-repeat;
  border-radius: 999px;
}

/* Transparent native track so our background shows */
#slider-speed::-webkit-slider-runnable-track{ background: transparent; height: 6px; }
#slider-speed::-moz-range-track{ background: transparent; height: 6px; }
#slider-speed::-ms-track{ background: transparent; height: 6px; color: transparent; border-color: transparent; }

/* Thumb styling like volume */
#slider-speed::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  margin-top: -4px; /* center thumb on 6px track */
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}
#slider-speed::-moz-range-thumb{
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}
#slider-speed::-ms-thumb{
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}
</style>
<style id="speed-readout-css">
#slider-speed{ vertical-align: middle; }
#speed-readout{
  display: inline-block;
  min-width: 3.5ch;
  margin-left: .6rem;
  padding: .15rem .4rem;
  border-radius: .5rem;
  font-variant-numeric: tabular-nums;
  font-size: .9rem;
  line-height: 1.1;
  background: rgba(255,255,255,.15);
  border: 1px solid rgba(212,175,55,.55);
  box-shadow: 0 0 6px rgba(255,215,0,.25);
}
</style>
<style id="russell-conservative-anim">
/* Conservative micro‚Äëinteraction for Russell box ‚Äî stronger & robust */
#russell-box{
  transition: box-shadow 220ms ease, transform 220ms ease, background-color 220ms ease, filter 220ms ease;
  will-change: box-shadow, transform, filter;
}
/* Click/keyboard ping state */
#russell-box.ping{
   box-shadow: 0 0 0 2px rgba(255,215,0,.40), 0 0 28px rgba(255,215,0,.55);
  transform: translateY(-2px) scale(1.015);
  background-color: rgba(20,20,40,.88);
   filter: brightness(2.10) saturate(2.08);
  z-index: 2147483600; /* bring above misc overlays while pinging */
}
/* Button visual sync */
#russell-btn{
  transition: color 160ms ease, text-shadow 160ms ease, opacity 160ms ease;
}
#russell-btn.ping{
  color: #ffe08a;
  text-shadow: 0 0 10px rgba(255,215,0,.45);
  opacity: 1;
}

/* Fallback: immediate feedback on press even without JS */
#russell-box:active{
  box-shadow: 0 0 0 2px rgba(255,215,0,.35), 0 0 22px rgba(255,215,0,.55);
  filter: brightness(1.04);
}

/* Respect reduced motion: keep glow, skip lift */
@media (prefers-reduced-motion: reduce){
  #russell-box{ transition: box-shadow 220ms ease, background-color 220ms ease, filter 220ms ease; }
  #russell-box.ping{ transform: none; }
}
</style>
<style id="hard-overrides-right-left">
/* === HARD OVERRIDES: Alternanza sinistra/destra === */
.timeline{ position: relative; width: 100%; }
.timeline > .timeline-item{ width:50% !important; display:block !important; position:relative; float:none !important; }
.timeline > .timeline-item.left{ margin-left:0 !important; padding-right:60px; text-align:right; }
.timeline > .timeline-item.right{ margin-left:50% !important; left:auto !important; padding-left:60px; text-align:left; }

/* Assicurati che nessun reset successivo rompa l'allineamento */
.timeline > .timeline-item.right[style]{ left:auto !important; }

/* Tenere visibili dot & connector e agganciarli al centro */
.timeline > .timeline-item .tl-dot{ left:50% !important; transform: translate(-50%, -50%) !important; }
.timeline > .timeline-item.left .tl-connector{ left: calc(50% + 12px) !important; right:auto !important; }
.timeline > .timeline-item.right .tl-connector{ right: calc(50% + 12px) !important; left:auto !important; }

/* Evita overflow che potrebbe nascondere le card destre */
.timeline-container{ overflow: visible !important; }


/* Mobile: una colonna */
@media (max-width: 900px){
  .timeline > .timeline-item{ width:100% !important; margin-left:0 !important; text-align:left; }
  .timeline > .timeline-item.left{ padding-right:20px; padding-left:70px; }
  .timeline > .timeline-item.right{ padding-left:70px; }
}
@media (max-width: 768px) {
  .timeline-item.left::after,
  .timeline-item.right::after {
    width: 30px; /* Connettori pi√π corti su mobile */
    left: 40px; /* Allineamento con la linea mobile */
  }
}
</style>
<style id="center-dot-and-widen-cards">
/* === Center rainbow dot over each card & widen cards by ~3cm === */
:root{ --card-widen: 114px; } /* ~3cm at 96dpi */

.timeline-item{ position: relative; }
.timeline-content{ position: relative; margin-top: 2rem; } /* align with tl-dot top */

.timeline > .timeline-item .tl-dot{
  left: 50% !important;           /* center relative to the item/card */
  top: 2rem !important;           /* same as .timeline-content margin-top */
  transform: translate(-50%, -50%) !important;
}

/* Widen cards outward from the center line */
.timeline > .timeline-item .timeline-content{
  width: calc(100% + var(--card-widen));
}
.timeline > .timeline-item.left .timeline-content{
  margin-left: calc(-1 * var(--card-widen));
}
.timeline > .timeline-item.right .timeline-content{
  margin-right: calc(-1 * var(--card-widen));
}

/* Keep connectors attached to the center line */
.timeline > .timeline-item.left .tl-connector{
  left: calc(50% + 12px) !important;
  right: auto !important;
}
.timeline > .timeline-item.right .tl-connector{
  right: calc(50% + 12px) !important;
  left: auto !important;
}

/* Ensure overflow is visible so wider cards aren't clipped */
.timeline-container{ overflow: visible !important; }
</style>
<style>
.timeline-container {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
}

.timeline-title {
    color: var(--gold);
    text-align: center;
    margin-bottom: var(--space-xl);
    font-size: clamp(var(--text-3xl), 5vw, var(--text-4xl));
    text-shadow: 0 0 20px rgba(255,215,0,0.6);
}

.timeline {
    position: relative;
    padding: var(--space-lg) 0;
}

/* Linea centrale */
.timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    transform: translateX(-50%);
    background: linear-gradient(180deg, 
        var(--purple) 0%,
        var(--cyan) 30%,
        var(--gold) 70%,
        var(--purple) 100%);
    box-shadow: 0 0 20px rgba(185,103,255,0.6);
    z-index: 1;
}

.timeline-item {
    position: relative;
    width: 45%;
    margin: var(--space-xl) 0;
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.8s ease;
    will-change: transform, opacity;
}

/* Posizionamento alternato */
.timeline-item.left {
    left: 0;
    margin-right: auto;
    padding-right: 60px;
    text-align: right;
}

.timeline-item.right {
    left: 55%;
    margin-left: auto;
    padding-left: 60px;
    text-align: left;
}

.timeline-item.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Card styling */
.timeline-content {
    background: linear-gradient(145deg, 
        var(--card-bg) 0%,
        rgba(20,20,50,0.8) 50%,
        var(--card-bg) 100%);
    border: 1px solid var(--card-border);
    border-radius: 15px;
    padding: var(--space-lg);
    backdrop-filter: blur(10px);
    box-shadow: 
        0 15px 35px rgba(0,0,0,0.5),
        0 0 0 1px rgba(255,215,0,0.2);
    transition: all 0.4s ease;
    position: relative;
    z-index: 3;
}

.timeline-content:hover {
    transform: translateY(-5px);
    box-shadow: 
        0 20px 40px rgba(0,0,0,0.6),
        0 0 0 1px rgba(255,215,0,0.4);
}

.timeline-content h3 {
    color: var(--gold);
    margin-bottom: var(--space-sm);
    font-size: var(--text-xl);
}

.period {
    color: var(--cyan);
    font-style: italic;
    margin-bottom: var(--space-sm);
    display: inline-block;
    padding: var(--space-xs) var(--space-md);
    background: rgba(0,204,255,0.15);
    border-radius: 20px;
    border: 1px solid rgba(0,204,255,0.4);
}

/* Punto timeline */
.timeline-item::before {
    content: '';
    position: absolute;
    top: 2rem;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, 
        #ffffff 0%, 
        var(--gold) 30%,
        var(--cyan) 70%,
        var(--purple) 100%);
    box-shadow: 
        0 0 0 6px rgba(255,215,0,0.3),
        0 0 0 12px rgba(0,204,255,0.2),
        0 0 20px 8px rgba(255,215,0,0.5);
    z-index: 4;
    opacity: 0;
    transform: scale(0);
    transition: all 0.6s ease 0.3s;
}

.timeline-item.left::before {
    right: -10px;
}

.timeline-item.right::before {
    left: -10px;
}

.timeline-item.visible::before {
    opacity: 1;
    transform: scale(1);
    animation: pulse 2s ease-in-out infinite 1s;
}

@keyframes pulse {
    0%, 100% { 
        box-shadow: 
            0 0 0 6px rgba(255,215,0,0.3),
            0 0 0 12px rgba(0,204,255,0.2),
            0 0 20px 8px rgba(255,215,0,0.5);
    }
    50% { 
        box-shadow: 
            0 0 0 8px rgba(255,215,0,0.5),
            0 0 0 16px rgba(0,204,255,0.3),
            0 0 30px 12px rgba(255,215,0,0.7);
    }
}

/* Connettori */
.timeline-item::after {
    content: '';
    position: absolute;
    top: 2rem;
    height: 2px;
    width: 50px;
    background: linear-gradient(90deg, 
        var(--gold),
        var(--cyan),
        var(--purple));
    opacity: 0;
    transform: scaleX(0);
    transition: all 0.6s ease 0.5s;
    z-index: 3;
    filter: drop-shadow(0 0 8px rgba(255,215,0,0.6));
}

.timeline-item.left::after {
    right: -50px;
    transform-origin: right center;
    background: linear-gradient(270deg, 
        var(--gold),
        var(--cyan),
        var(--purple));
}

.timeline-item.right::after {
    left: -50px;
    transform-origin: left center;
    background: linear-gradient(90deg, 
        var(--gold),
        var(--cyan),
        var(--purple));
}

.timeline-item.visible::after {
    opacity: 1;
    transform: scaleX(1);
}

/* Responsive */
@media (max-width: 768px) {
    .timeline::before {
        left: 30px;
    }
    
    .timeline-item {
        width: calc(100% - 70px);
        margin: var(--space-lg) 0;
        margin-left: 70px;
    }
    
    .timeline-item.left,
    .timeline-item.right {
        left: 0;
        padding: 0 0 0 var(--space-sm);
        text-align: left;
    }
    
    .timeline-item.left::before,
    .timeline-item.right::before {
        left: -40px;
        right: auto;
    }
    
    .timeline-item.left::after,
    .timeline-item.right::after {
        left: -30px;
        right: auto;
        width: 30px;
        transform-origin: left center;
        background: linear-gradient(90deg, 
            var(--gold),
            var(--cyan),
            var(--purple));
    }
}

/* Accessibilit√† */
@media (prefers-reduced-motion: reduce) {
    .timeline-item,
    .timeline-content,
    .timeline-item::before,
    .timeline-item::after {
        transition: none;
        animation: none;
    }
    
    .timeline-item {
        opacity: 1;
        transform: none;
    }
}
</style>
<style>
/* === TIMELINE SPETTACOLARE ULTIMATE - CARDS A DOPPIA LARGHEZZA === */
.timeline-container {
  --accent-gold: #ffd86a;
  --accent-cyan: #00ccff;
  --accent-purple: #b967ff;
  perspective: 1200px;
  margin: 4rem 0;
  position: relative;
  overflow: hidden;
}

.timeline-title {
  font-family: 'Cinzel', serif;
  color: var(--accent-gold);
  text-align: center;
  margin-bottom: 0rem;
  font-size: 3.5rem;
  text-shadow: 0 0 30px rgba(255,215,0,0.6);
  position: relative;
}

.timeline-title::after {
  content: '';
  display: block;
  width: 200px;
  height: 4px;
  background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
  margin: 1rem auto;
  border-radius: 2px;
  animation: titleGlow 3s ease-in-out infinite;
}

@keyframes titleGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.4); }
  50% { box-shadow: 0 0 40px rgba(255,215,0,0.8); }
}

.timeline {
  position: relative;
  max-width: 1400px; /* Aumentata per accomodare cards pi√π larghe */
  margin: 0 auto;
  padding: 2rem 0;
}

/* Linea temporale cosmica */
.timeline::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 4px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, 
    var(--accent-purple) 0%,
    var(--accent-cyan) 30%,
    var(--accent-gold) 70%,
    var(--accent-purple) 100%);
  box-shadow: 
    0 0 30px rgba(185,103,255,0.6),
    0 0 60px rgba(0,204,255,0.3);
  filter: blur(0.5px);
  z-index: 1;
}

/* Effetto particelle sulla linea */
.timeline::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 8px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, 
    transparent 0%,
    rgba(255,255,255,0.8) 10%,
    rgba(255,255,255,0.4) 20%,
    transparent 30%,
    transparent 70%,
    rgba(255,255,255,0.4) 80%,
    rgba(255,255,255,0.8) 90%,
    transparent 100%);
  background-size: 100% 200%;
  animation: particleFlow 4s linear infinite;
  z-index: 2;
}

@keyframes particleFlow {
  0% { background-position: 0 0; }
  100% { background-position: 0 200%; }
}

.timeline-item {
  position: relative;
  width: calc(90% - 60px); /* RADDOPPIATA: da 50% a 90% */
  margin: 4rem 0;
  opacity: 0;
  transform-style: preserve-3d;
  will-change: transform, opacity;
}

.timeline-item.left {
  margin-right: auto;
  padding-right: 80px;
  text-align: right;
  transform: 
    translateX(-400px) 
    rotateY(25deg) 
    scale(0.7)
    skew(-8deg, -5deg);
  filter: blur(12px) brightness(0.8);
}

.timeline-item.right {
  margin-left: auto;
  padding-left: 80px;
  text-align: left;
  transform: 
    translateX(400px) 
    rotateY(-25deg) 
    scale(0.7)
    skew(8deg, 5deg);
  filter: blur(12px) brightness(0.8);
}

/* Card spettacolare con effetto vetro cosmico */
.timeline-content {
  position: relative;
  background: linear-gradient(145deg, 
    rgba(10,10,30,0.9) 0%,
    rgba(20,20,50,0.8) 50%,
    rgba(10,10,30,0.9) 100%);
  border: 1px solid transparent;
  border-radius: 20px;
  padding: 2rem 2.5rem;
  backdrop-filter: blur(20px);
  transform: translateZ(50px);
  box-shadow: 
    0 25px 50px rgba(0,0,0,0.5),
    0 0 0 1px rgba(255,215,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -1px 0 rgba(0,0,0,0.2);
  overflow: hidden;
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Effetto bordo luminoso animato */
.timeline-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 20px;
  padding: 2px;
  background: linear-gradient(45deg, 
    var(--accent-purple), 
    var(--accent-cyan), 
    var(--accent-gold), 
    var(--accent-purple));
  background-size: 300% 300%;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  animation: borderGlow 3s ease infinite;
  opacity: 0;
  transition: opacity 0.6s ease;
}

.timeline-item.visible .timeline-content::before {
  opacity: 1;
}

@keyframes borderGlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Punto temporale con effetto pulsante */


/* Connettori energetici */
.tl-connector {
  position: absolute;
  top: 2rem;
  height: 3px;
  width: calc(50% - 72px);
  background: linear-gradient(90deg, 
    transparent,
    var(--accent-gold),
    var(--accent-cyan),
    var(--accent-purple),
    transparent);
  transform-origin: var(--origin);
  transform: scaleX(0);
  filter: drop-shadow(0 0 10px rgba(255,215,0,0.8));
  opacity: 0;
  z-index: 5;
}

.timeline-item.left .tl-connector {
  left: auto;
  right: calc(50% + 36px);
  background: linear-gradient(270deg, 
    transparent,
    var(--accent-gold),
    var(--accent-cyan),
    var(--accent-purple),
    transparent);
}

/* ANIMAZIONI DI ENTRATA SPETTACOLARI */
.timeline-item.visible {
  opacity: 1;
  filter: blur(0) brightness(1);
  animation-duration: 1.2s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.timeline-item.visible.left {
  animation-name: cosmicSlideInLeft;
}

.timeline-item.visible.right {
  animation-name: cosmicSlideInRight;
}

@keyframes cosmicSlideInLeft {
  0% {
    transform: translateX(-400px) rotateY(25deg) scale(0.7) skew(-8deg, -5deg);
    opacity: 0;
    filter: blur(12px) brightness(0.8);
  }
  20% {
    transform: translateX(-200px) rotateY(15deg) scale(0.8) skew(-4deg, -2deg);
    opacity: 0.5;
    filter: blur(6px) brightness(0.9);
  }
  50% {
    transform: translateX(50px) rotateY(-10deg) scale(1.1) skew(2deg, 1deg);
    opacity: 1;
    filter: blur(0) brightness(1.1);
  }
  70% {
    transform: translateX(-20px) rotateY(5deg) scale(1.02) skew(-1deg, -0.5deg);
    opacity: 1;
    filter: blur(0) brightness(1);
  }
  100% {
    transform: translateX(0) rotateY(0deg) scale(1) skew(0deg, 0deg);
    opacity: 1;
    filter: blur(0) brightness(1);
  }
}

@keyframes cosmicSlideInRight {
  0% {
    transform: translateX(400px) rotateY(-25deg) scale(0.7) skew(8deg, 5deg);
    opacity: 0;
    filter: blur(12px) brightness(0.8);
  }
  20% {
    transform: translateX(200px) rotateY(-15deg) scale(0.8) skew(4deg, 2deg);
    opacity: 0.5;
    filter: blur(6px) brightness(0.9);
  }
  50% {
    transform: translateX(-50px) rotateY(10deg) scale(1.1) skew(-2deg, -1deg);
    opacity: 1;
    filter: blur(0) brightness(1.1);
  }
  70% {
    transform: translateX(20px) rotateY(-5deg) scale(1.02) skew(1deg, 0.5deg);
    opacity: 1;
    filter: blur(0) brightness(1);
  }
  100% {
    transform: translateX(0) rotateY(0deg) scale(1) skew(0deg, 0deg);
    opacity: 1;
    filter: blur(0) brightness(1);
  }
}

/* Animazioni coordinate per punti e connettori */
.timeline-item.visible .tl-dot {
  animation: 
    dotPop 0.6s cubic-bezier(0.2, 0.9, 0.2, 1) forwards 0.3s,
    dotPulse 2s ease-in-out infinite 1s;
}

.timeline-item.visible .tl-connector {
  animation: connectorDraw 0.8s cubic-bezier(0.2, 0.9, 0.2, 1) forwards 0.5s;
}

@keyframes dotPop {
  0% { transform: translate(-50%, -50%) scale(0); }
  60% { transform: translate(-50%, -50%) scale(1.4); }
  80% { transform: translate(-50%, -50%) scale(0.9); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

@keyframes dotPulse {
  0%, 100% { 
    box-shadow: 
      0 0 0 8px rgba(255,215,0,0.4),
      0 0 0 16px rgba(0,204,255,0.3),
      0 0 0 24px rgba(185,103,255,0.2),
      0 0 30px 12px rgba(255,215,0,0.6);
  }
  50% { 
    box-shadow: 
      0 0 0 12px rgba(255,215,0,0.6),
      0 0 0 24px rgba(0,204,255,0.4),
      0 0 0 36px rgba(185,103,255,0.3),
      0 0 50px 20px rgba(255,215,0,0.8);
  }
}

@keyframes connectorDraw {
  from { 
    transform: scaleX(0);
    opacity: 0;
  }
  to { 
    transform: scaleX(1);
    opacity: 1;
  }
}

/* Effetti hover spettacolari */
.timeline-content:hover {
  transform: translateZ(80px) scale(1.05) rotateX(5deg);
  box-shadow: 
    0 35px 70px rgba(0,0,0,0.6),
    0 0 0 2px rgba(255,215,0,0.5),
    inset 0 2px 0 rgba(255,255,255,0.2),
    inset 0 -2px 0 rgba(0,0,0,0.3);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Styling del contenuto */
.timeline-content h3 {
  color: var(--accent-gold);
  margin-bottom: 1rem;
  font-size: 1.8rem;
  font-family: 'Cinzel', serif;
  text-shadow: 0 0 15px rgba(255,215,0,0.4);
  position: relative;
}

.period {
  color: var(--accent-cyan);
  font-style: italic;
  font-size: 1.1rem;
  margin-bottom: 1.5rem;
  display: inline-block;
  padding: 0.5rem 1.2rem;
  background: rgba(0,204,255,0.15);
  border-radius: 15px;
  border: 1px solid rgba(0,204,255,0.3);
  box-shadow: 0 0 20px rgba(0,204,255,0.2);
}

.timeline-content p {
  line-height: 1.7;
  margin-bottom: 1rem;
  color: #e9eef5;
  font-size: 1.05rem;
}

.timeline-content strong {
  color: #ffeb9a;
  text-shadow: 0 0 10px rgba(255,235,154,0.3);
}

/* Responsive per mobile */
@media (max-width: 900px) {
  .timeline::before,
  .timeline::after {
    left: 30px;
  }
  
  .timeline-item {
    width: auto;
    margin: 3rem 0;
  }
  
  .timeline-item.left,
  .timeline-item.right {
    padding-left: 70px;
    padding-right: 20px;
    text-align: left;
    margin-left: 0;
    margin-right: 0;
  }
  
  .timeline-item.visible.left,
  .timeline-item.visible.right {
    animation: mobileSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
  
  .tl-connector {
    left: 38px;
    right: auto;
    width: calc(100% - 70px);
  }
  
  .timeline-title {
    font-size: 2.5rem;
  }
}

@keyframes mobileSlideIn {
  0% {
    transform: translateX(-100px) scale(0.9);
    opacity: 0;
    filter: blur(8px);
  }
  100% {
    transform: translateX(0) scale(1);
    opacity: 1;
    filter: blur(0);
  }
}

/* Riduzione motion per accessibilit√† */
@media (prefers-reduced-motion: reduce) {
  .timeline-item,
  .timeline-content,
  .tl-dot,
  .tl-connector {
    transition: none !important;
    animation: none !important;
    transform: none !important;
    opacity: 1 !important;
    filter: none !important;
  }
  
  .timeline::after {
    animation: none;
  }
}
</style>
<style id="timeline-dots-fix">
/* === TIMELINE DOTS RE-ALIGN (LEFT items on the center line) === */
.timeline{ position: relative; }
.timeline .timeline-item.left{ position: relative; }

/* Place the dot on the RIGHT BORDER of the left item, so it sits on the main timeline */
.timeline .timeline-item.left::before{
  content: "";
  position: absolute;
  top: 2rem;
  left: 100%;                 /* right border of the left item */
  transform: translate(-50%, -50%); /* center the 12px dot over the border */
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%,
      #ffffff 0%,
      #ffd86a 35%,
      #00ccff 70%,
      #b967ff 100%);
  box-shadow:
      0 0 0 6px rgba(255,215,0,0.35),
      0 0 0 12px rgba(0,204,255,0.25),
      0 0 0 18px rgba(185,103,255,0.18),
      0 0 26px 10px rgba(255,215,0,0.55);
  z-index: 10;
  pointer-events: none;
}

/* Connector from the card towards the timeline (ending at 100%) */
.timeline .timeline-item.left::after{
  left: calc(100% - 60px) !important;  /* start 60px inside the card */
  right: auto !important;
  width: 60px;
  transform-origin: right center;
}

/* Mobile rail alignment (if your timeline rail moves to 45px on mobile) */
@media (max-width: 900px){
  .timeline .timeline-item.left::before{
    left: 45px;               /* rail position */
    transform: translate(-50%, -50%);
  }
  .timeline .timeline-item.left::after{
    left: 51px !important;    /* rail + 6px (half dot width) */
    right: auto !important;
  }
}
</style>
<style id="timeline-right-rail-bridge">
/* === TIMELINE RIGHT: dentino to the RIGHT of the rail === */
.timeline .timeline-item.right{ position: relative; }
/* Dot stays centered on the rail at the card's left edge */
.timeline .timeline-item.right::before{
  left: 0;
  transform: translate(-50%, -50%);
}
/* Connector segment entirely inside the card, starting just RIGHT of the rail
   6px = half of 12px dot, so it begins under the dot's right edge */
.timeline .timeline-item.right::after{
  left: 6px !important;     /* start just to the right of the rail */
  right: auto !important;
  width: 54px !important;   /* 60px padding - 6px already covered by dot */
  transform-origin: left center !important;
}
/* Optional mobile rail alignment (uncomment and tune if your rail shifts to 45px)
@media (max-width: 900px){
  .timeline .timeline-item.right::before{ left: 45px; transform: translate(-50%, -50%); }
  .timeline .timeline-item.right::after{ left: calc(45px + 6px) !important; width: 54px !important; }
}
*/
</style>
<style id="timeline-suggest-perf">/* TIMELINE (HINT PERFORMANCE) */
/* - Scopo: applica 'will-change' solo quando gli elementi sono visibili per migliorare performance. */
/* - Non altera il layout; sicuro rimuovere se non necessario. */

.timeline .timeline-item.visible,
.timeline .timeline-item.visible::before,
.timeline .timeline-item.visible::after{
  will-change: transform, opacity;
}
</style>
<style>
/* === BORDO RAFFINATO PER "SUSTINE ET ABSTINE" === */
.exploding-text {
    position: relative;
    cursor: pointer;
    user-select: none;
    padding: 0.8rem 1.5rem;
    font-weight: 700;
    border-radius: 20px; 
    /* BORDO ELEGANTE CON GRADIENTE */
    border: 2px solid transparent;
    background: 
        linear-gradient(145deg, rgba(10,10,30,0.9), rgba(20,20,50,0.8)) padding-box,
        linear-gradient(135deg, 
            rgba(255,215,0,0.8) 0%,
            rgba(0,204,255,0.6) 30%,
            rgba(185,103,255,0.7) 70%,
            rgba(255,215,0,0.8) 100%
        ) border-box;
    
    color: #3DDC84;
    backdrop-filter: blur(12px);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    display: inline-block;
    
    /* EFFETTI DI LUCE */
    box-shadow: 
        0 4px 20px rgba(0,0,0,0.3),
        0 0 0 1px rgba(255,255,255,0.1) inset,
        0 0 30px rgba(255,215,0,0.2);
    
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    font-family: 'Cormorant Garamond', serif;
    letter-spacing: 0.15em;
}

/* EFFETTO HOVER SUL BORDO */
.exploding-text:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 
        0 8px 30px rgba(0,0,0,0.4),
        0 0 0 1px rgba(255,255,255,0.2) inset,
        0 0 40px rgba(255,215,0,0.3);
    
    /* BORDO PI√ô LUMINOSO ALL'HOVER */
    background: 
        linear-gradient(145deg, rgba(15,15,35,0.9), rgba(25,25,55,0.8)) padding-box,
        linear-gradient(135deg, 
            rgba(255,215,0,0.9) 0%,
            rgba(0,204,255,0.8) 30%,
            rgba(185,103,255,0.9) 70%,
            rgba(255,215,0,0.9) 100%
        ) border-box;
}

/* DURANTE L'ESPLOSIONE - BORDO ENFATIZZATO */
.exploding-text.exploding {
    border: 3px solid transparent;
    background: 
        linear-gradient(145deg, rgba(20,20,40,0.9), rgba(30,30,60,0.8)) padding-box,
        linear-gradient(135deg, 
            rgba(255,107,0,0.9) 0%,
            rgba(255,215,0,0.8) 25%,
            rgba(0,204,255,0.9) 50%,
            rgba(185,103,255,0.8) 75%,
            rgba(255,107,0,0.9) 100%
        ) border-box;
    
    box-shadow: 
        0 0 30px rgba(255,107,0,0.6),
        0 0 0 2px rgba(255,255,255,0.3) inset,
        0 0 60px rgba(0,204,255,0.4);
    
    animation: borderPulse 0.8s ease-in-out infinite;
}

@keyframes borderPulse {
    0%, 100% {
        box-shadow: 
            0 0 30px rgba(255,107,0,0.6),
            0 0 0 2px rgba(255,255,255,0.3) inset,
            0 0 60px rgba(0,204,255,0.4);
    }
    50% {
        box-shadow: 
            0 0 40px rgba(255,107,0,0.8),
            0 0 0 3px rgba(255,255,255,0.4) inset,
            0 0 80px rgba(0,204,255,0.6);
    }
}

/* STILE PER I CARATTERI INDIVIDUALI */
.char {
    display: inline-block;
    transition: all 0.3s ease;
    position: relative;
}

/* SEPARATORI E ICONE */
.m-sep {
    opacity: 0.7;
    padding: 0 0.5ch;
    font-weight: 300;
    color: rgba(255,215,0,0.8);
}

.m-icon {
    font-size: 1.1em;
    vertical-align: -0.1em;
    filter: drop-shadow(0 0 5px rgba(255,215,0,0.5));
}

/* ANIMAZIONI ESPLOSIONE (manteniamo le tue) */
@keyframes letterExplodeOut {
    0% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
    }
    70% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0.5;
        filter: blur(4px);
    }
    100% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0;
        filter: blur(4px);
    }
}

@keyframes letterWaveIn {
    0% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0;
        filter: blur(4px);
    }
    60% {
        transform: translate(calc(var(--explode-dx) * 0.2), calc(var(--explode-dy) * 0.2)) rotate(calc(var(--explode-rotate) * 0.3)) scale(1.1);
        opacity: 0.8;
        filter: blur(1px);
    }
    100% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
    }
}

/* RESPONSIVE */
@media (max-width: 768px) {
    .exploding-text {
        padding: 0.6rem 1.2rem;
        font-size: 0.95rem;
        border-radius: 16px;
    }
}

@media (max-width: 480px) {
    .exploding-text {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
        border-radius: 14px;
        letter-spacing: 0.1em;
    }
}
</style>
<script id="timeline-suggest-aria">// TIMELINE (ACCESSIBILIT√Ä)
// - Scopo: aggiunge role='region' e aria-label alla sezione della timeline, se mancanti.
// - Non modifica stili/animazioni; migliora la fruibilit√† con tecnologie assistive.

document.addEventListener('DOMContentLoaded', function(){
  var sec = document.querySelector('section.timeline-container');
  if (sec){
    if (!sec.hasAttribute('role')) sec.setAttribute('role','region');
    if (!sec.hasAttribute('aria-label')) sec.setAttribute('aria-label','Linea del tempo filosofica');
  }
});
</script><script id="timeline-suggest-nojs-flag">// FALLBACK NO-JS (FLAG)
// - Scopo: aggiunge '.no-js' all'elemento <html> prima del DOMContentLoaded.
// - Serve a mostrare la timeline se JS √® disattivato (vedi CSS relativo).
(function(){ document.documentElement.classList.add('no-js'); })();</script><style id="timeline-suggest-nojs-css">/* FALLBACK NO-JS (CSS) */
/* - Scopo: se JS resta disattivato, mostra tutti gli elementi senza animazioni. */
/* - Disattivabile rimuovendo questo blocco o la classe '.no-js' su <html>. */

.no-js .timeline .timeline-item{
  opacity: 1 !important;
  transform: none !important;
  transition: none !important;
}
</style><script id="timeline-suggest-nojs-remove">// FALLBACK NO-JS (REMOVE FLAG)
// - Scopo: rimuove la classe '.no-js' al DOMContentLoaded (JS attivo).
// - Assicura che, con JS attivo, la timeline torni ad animarsi normalmente.

document.addEventListener('DOMContentLoaded', function(){
  document.documentElement.classList.remove('no-js');
});
</script><script defer="defer" id="timeline-suggest-io">// TIMELINE (MICRO-STAGGER NON INVASIVO)
// - Scopo: sfalsa leggermente i tempi d'ingresso delle card per migliorare la lettura visiva.
// - Usa IntersectionObserver. Ritardo = index*70ms (+120ms per card a destra), max 600ms.
// - Per disattivare: rimuovere questo script o impostare delayMs=0.
// - Rispetto accessibilit√†: si pu√≤ aggiungere controllo di prefers-reduced-motion.

document.addEventListener('DOMContentLoaded', function(){
  var items = Array.prototype.slice.call(document.querySelectorAll('.timeline .timeline-item'));
  if (!items.length) return;

  var seen = new WeakSet();
  var io = new IntersectionObserver(function(entries){
    entries.forEach(function(e){
      if (e.isIntersecting && !seen.has(e.target)){
        var idx = items.indexOf(e.target);
        var sideRight = e.target.classList.contains('right') ? 120 : 0;  // piccolo offset lato destro
        var delayMs = Math.min(idx*70 + sideRight, 600);
        e.target.style.transitionDelay = (delayMs/1000)+'s';
        e.target.classList.add('visible');
        seen.add(e.target);
        io.unobserve(e.target);
      }
    });
  }, { threshold: 0.08, rootMargin: '0px 0px -10% 0px' });

  items.forEach(function(el){ io.observe(el); });

  // Primo pass: se gi√† in viewport
  requestAnimationFrame(function(){
    items.forEach(function(el){
      var r = el.getBoundingClientRect();
      if (r.top < (innerHeight*0.9) && r.bottom > 0){
        var idx = items.indexOf(el);
        var sideRight = el.classList.contains('right') ? 120 : 0;
        var delayMs = Math.min(idx*70 + sideRight, 600);
        el.style.transitionDelay = (delayMs/1000)+'s';
        el.classList.add('visible');
        seen.add(el);
        io.unobserve(el);
      }
    });
  });
});
</script>
<style>
/* === THEME TOGGLE STYLES === */
.theme-btn {
  background: rgba(20,20,40,0.78);
  border: 1px solid rgba(255,215,0,0.25);
  border-radius: 0.5rem;
  padding: 0.5rem;
  cursor: pointer;
  color: #ffd86a;
  font-size: 1.2rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
}

.theme-btn:hover {
  background: rgba(255,215,0,0.1);
  border-color: rgba(255,215,0,0.5);
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(255,215,0,0.3);
}

[data-theme="light"] a {
  color: #2b6cb0;
  font-weight: 500;
}

[data-theme="light"] a:hover {
  color: #1a202c;
  text-shadow: 0 0 0.38rem rgba(43,108,176,0.3);
}

</style>
<style>
  /* Light Theme Variables - RIVISTO PER CONTRASTO */
[data-theme="light"] {
  --bg: #f8fafc;
  --text-light: #0f1419;
  --text-accent: #1d4ed8;
  --menu-bg: rgba(255,255,255,0.98);
  --menu-border: rgba(59,130,246,0.4);
  --glass: rgba(255,255,255,0.95);
  --gold: #ca8a04;
  --cyan: #0369a1;
}

[data-theme="light"] body {
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  color: #0f1419;
  font-weight: 500;
}

[data-theme="light"] .top-bar {
  background: rgba(255,255,255,0.98);
  border-bottom: 2px solid rgba(59,130,246,0.3);
  backdrop-filter: blur(15px);
  box-shadow: 0 2px 20px rgba(0,0,0,0.08);
}

[data-theme="light"] .brand span {
  background: linear-gradient(90deg, #ca8a04, #eab308, #ca8a04);
  -webkit-background-clip: text;
  background-clip: text;
  text-shadow: 0 0 0.62rem rgba(202,138,4,0.4);
}

[data-theme="light"] .welcome-title {
  background: linear-gradient(90deg, #1d4ed8, #2563eb, #3b82f6, #1d4ed8);
  -webkit-background-clip: text;
  background-clip: text;
  filter: drop-shadow(0 0 1.12rem rgba(29,78,216,0.6));
}

[data-theme="light"] .welcome-subtitle {
  color: #1d4ed8;
  font-weight: 700;
  text-shadow: 0 0 10px rgba(29,78,216,0.2);
}

[data-theme="light"] .timeline-content {
  background: linear-gradient(145deg, #ffffff, #f1f5f9);
  color: #0f1419;
  border: 2px solid rgba(59,130,246,0.4);
  box-shadow: 
    0 15px 35px rgba(0,0,0,0.1),
    0 0 0 1px rgba(59,130,246,0.2),
    inset 0 1px 0 rgba(255,255,255,0.8);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .timeline-content h3 {
  color: #ca8a04;
  text-shadow: 0 0 15px rgba(202,138,4,0.3);
  font-weight: 700;
}

[data-theme="light"] .timeline-content .period {
  color: #0369a1;
  background: rgba(3,105,161,0.15);
  border: 2px solid rgba(3,105,161,0.4);
  font-weight: 700;
  box-shadow: 0 0 15px rgba(3,105,161,0.3);
}

[data-theme="light"] .timeline-content p {
  color: #1e293b;
  line-height: 1.7;
  font-weight: 500;
}

[data-theme="light"] .timeline-content strong {
  color: #1d4ed8;
  font-weight: 700;
}

[data-theme="light"] .timeline::before {
  background: linear-gradient(180deg, #7c3aed, #1d4ed8, #ca8a04, #7c3aed);
  box-shadow: 
    0 0 25px rgba(124,58,237,0.5),
    0 0 50px rgba(29,78,216,0.3);
}

[data-theme="light"] .timeline-item::before {
  background: radial-gradient(circle at 35% 35%, 
    #ffffff 0%, 
    #eab308 25%,
    #1d4ed8 65%,
    #7c3aed 100%);
  box-shadow: 
    0 0 0 8px rgba(234,179,8,0.5),
    0 0 0 16px rgba(29,78,216,0.4),
    0 0 0 24px rgba(124,58,237,0.3),
    0 0 30px 12px rgba(234,179,8,0.6);
}

[data-theme="light"] .menu-container {
  background: rgba(255,255,255,0.98);
  border-bottom: 2px solid rgba(59,130,246,0.3);
  backdrop-filter: blur(15px);
  box-shadow: 0 5px 25px rgba(0,0,0,0.08);
}

[data-theme="light"] .menu-btn,
[data-theme="light"] nav.menu-desktop li>a {
  color: #1d4ed8;
  font-weight: 700;
  text-shadow: 0 0 0.38rem rgba(29,78,216,0.4);
}

[data-theme="light"] .menu-btn:hover,
[data-theme="light"] nav.menu-desktop li>a:hover {
  color: #0f1419;
  background: rgba(59,130,246,0.15);
  transform: translateY(-2px);
}

[data-theme="light"] .mega-menu {
  background: rgba(255,255,255,0.98);
  border: 2px solid rgba(59,130,246,0.4);
  backdrop-filter: blur(20px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.15);
}

[data-theme="light"] .mega-menu h4 {
  color: #ca8a04;
  border-bottom: 3px solid rgba(202,138,4,0.5);
  font-weight: 700;
}

[data-theme="light"] .mega-menu a {
  color: #1e293b;
  font-weight: 600;
}

[data-theme="light"] .mega-menu a:hover {
  color: #1d4ed8;
  background: rgba(59,130,246,0.15);
  transform: translateX(6px);
  font-weight: 700;
}

[data-theme="light"] /* removed duplicate footer style */

[data-theme="light"] footer h3,
[data-theme="light"] footer h4 {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .articles-blob,
[data-theme="light"] .right-box {
  background: rgba(255,255,255,0.95);
  border: 2px solid rgba(59,130,246,0.4);
  color: #0f1419;
  backdrop-filter: blur(15px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

[data-theme="light"] .articles-blob h3,
[data-theme="light"] .right-box h3 {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .articles-blob a,
[data-theme="light"] .right-box a {
  color: #1d4ed8;
  font-weight: 700;
}

[data-theme="light"] .articles-blob a:hover,
[data-theme="light"] .right-box a:hover {
  color: #0f1419;
}

[data-theme="light"] .quote-bubble {
  background: rgba(255,255,255,0.95);
  border: 2px solid rgba(59,130,246,0.4);
  color: #0f1419;
  backdrop-filter: blur(15px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

[data-theme="light"] .quote-text {
  color: #0f1419;
  font-style: italic;
  font-weight: 600;
}

[data-theme="light"] .quote-author {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .ctrl-btn {
  background: linear-gradient(135deg, #ffffff, #f1f5f9);
  border: 2px solid rgba(59,130,246,0.4);
  color: #1d4ed8;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

[data-theme="light"] .ctrl-btn:hover {
  background: rgba(59,130,246,0.15);
  border-color: rgba(59,130,246,0.6);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59,130,246,0.3);
}

[data-theme="light"] .theme-btn {
  background: linear-gradient(135deg, #ffffff, #f1f5f9);
  border: 2px solid rgba(59,130,246,0.4);
  color: #1d4ed8;
  font-weight: 700;
}

[data-theme="light"] .search-container input {
  background: rgba(255,255,255,0.95);
  border: 2px solid rgba(59,130,246,0.4);
  color: #0f1419;
  font-weight: 500;
}

[data-theme="light"] .search-container input:focus {
  border-color: rgba(202,138,4,0.6);
  box-shadow: 0 0 0.75rem rgba(202,138,4,0.3);
}

[data-theme="light"] .typing-effect {
  color: #1d4ed8;
  font-weight: 600;
  text-shadow: 0 0 10px rgba(29,78,216,0.3)

}

[data-theme="light"] .exploding-text {
  color:#0f1419;
  border: 1px solid rgba(59,130,246,0.4);
  background: rgba(255,255,255,0.9);
  font-weight: 700;
}

/* Sfondo pi√π chiaro per elementi di sfondo */
[data-theme="light"] #cosmic-bg {
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 50%, #e2e8f0 100%);
}

[data-theme="light"] .stars-container {
  display: none; /* Nasconde le stelle nel tema light */
}
/* Transizione smooth tra i temi */
html {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Effetto "modalit√† giorno" pi√π marcato */
[data-theme="light"] {
  color-scheme: light;
}

[data-theme="dark"] {
  color-scheme: dark;
}
</style>
<style>
/* === CTA SECTION (Dopo Timeline) === */
.cta-section {
  margin: 4rem auto;
  max-width: 800px;
  padding: 0 1rem;
}

.cta-card {
  background: linear-gradient(145deg, rgba(10,10,30,0.9), rgba(20,20,50,0.8));
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 15px;
  padding: 2.5rem;
  text-align: center;
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.cta-card h3 {
  color: var(--gold);
  font-family: 'Cinzel', serif;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.cta-card p {
  color: var(--text-light);
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 0;
}

.cta-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1.5rem;
}

.cta-btn {
  padding: 0.8rem 1.5rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
  border: none;
  cursor: pointer;
  font-size: 0.95rem;
}

.cta-btn.primary {
  background: var(--gold);
  color: #0a0a1a;
}

.cta-btn.secondary {
  background: transparent;
  border: 2px solid var(--gold);
  color: var(--gold);
}

.cta-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255,215,0,0.3);
}

.cta-note {
  margin-top: 1rem;
  opacity: 0.7;
  font-size: 0.9rem;
  color: var(--text-accent);
}

/* === CTA FLOTTANTE === */
.floating-cta {
  position: fixed;
  bottom: 50px;
  right: 355px;
  z-index: 10000;
  animation: floatBounce 3s ease-in-out infinite;
}

.floating-cta button {
  background: linear-gradient(135deg, var(--gold), #ffeb3b);
  border: none;
  border-radius: 25px;
  padding: 12px 20px;
  color: #0a0a1a;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255,215,0,0.4);
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.9rem;
  white-space: nowrap;
}

.floating-cta button:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 25px rgba(255,215,0,0.6);
}

/* Animazione fluttuante */
@keyframes floatBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* === MODALE NEWSLETTER === */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(10,10,30,0.95);
  z-index: 10001;
  display: none;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(5px);
  animation: fadeIn 0.3s ease;
}

.modal-content {
  background: var(--menu-bg);
  padding: 2.5rem 2rem 2rem;
  border-radius: 15px;
  border: 1px solid var(--menu-border);
  max-width: 450px;
  width: 90%;
  box-shadow: 0 20px 40px rgba(0,0,0,0.5);
  position: relative;
  animation: slideUp 0.3s ease;
}

.modal-content h3 {
  color: var(--gold);
  font-family: 'Cinzel', serif;
  margin-bottom: 1rem;
  text-align: center;
  font-size: 1.4rem;
}

.modal-content p {
  color: var(--text-light);
  text-align: center;
  margin-bottom: 1.5rem;
  line-height: 1.5;
}

/* Pulsante chiudi modale */
.close-modal {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 1.8rem;
  cursor: pointer;
  color: var(--text-light);
  background: none;
  border: none;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
}

.close-modal:hover {
  color: var(--gold);
  background: rgba(255,215,0,0.1);
  transform: scale(1.1);
}

/* Form newsletter */
#newsletterForm {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

#newsletterForm input[type="email"] {
  width: 100%;
  padding: 0.9rem;
  border: 1px solid var(--menu-border);
  border-radius: 8px;
  background: rgba(20,20,40,0.8);
  color: var(--text-light);
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

#newsletterForm input[type="email"]:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(255,215,0,0.2);
}

#newsletterForm input[type="email"]::placeholder {
  color: rgba(233,238,245,0.6);
}

#newsletterForm button[type="submit"] {
  background: var(--gold);
  color: #0a0a1a;
  border: none;
  padding: 0.9rem 1.5rem;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

#newsletterForm button[type="submit"]:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255,215,0,0.3);
}

.privacy-note {
  margin-top: 1rem;
  opacity: 0.7;
  font-size: 0.8rem;
  text-align: center;
  color: var(--text-accent);
}

/* Animazioni */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

/* === RESPONSIVE DESIGN === */
@media (max-width: 768px) {
  .cta-section {
    margin: 3rem auto;
    padding: 0 0.5rem;
  }
  
  .cta-card {
    padding: 2rem 1.5rem;
  }
  
  .cta-card h3 {
    font-size: 1.3rem;
  }
  
  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .cta-btn {
    width: 100%;
    max-width: 250px;
  }
  
  .floating-cta {
    bottom: 50px; /* üëà COERENTE: stesso bottom di desktop */
    right: 15px;  /* üëà Pi√π a destra su mobile per evitare conflitti */
    left: auto;   /* üëà Reset left se presente */
  }
  
  .floating-cta button {
    padding: 10px 16px;
    font-size: 0.8rem;
  }
  
  .modal-content {
    padding: 2rem 1.5rem 1.5rem;
    margin: 1rem;
  }
  
  .modal-content h3 {
    font-size: 1.2rem;
  }
}

@media (max-width: 480px) {
  .cta-card {
    padding: 1.5rem 1rem;
  }
  
  .cta-card h3 {
    font-size: 1.2rem;
  }
  
  .cta-card p {
    font-size: 1rem;
  }
  
  .floating-cta {
    bottom: 50px; /* üëà COERENTE: stesso bottom di tutti i dispositivi */
    right: 10px;
    left: auto;
  }
  
  .floating-cta button {
    padding: 8px 14px;
    font-size: 0.75rem;
  }
}

/* Supporto per preferenze di movimento ridotto */
@media (prefers-reduced-motion: reduce) {
  .floating-cta {
    animation: none;
  }
  
  .cta-btn,
  .floating-cta button,
  #newsletterForm button[type="submit"] {
    transition: none;
  }
  
  .modal {
    animation: none;
  }
  
  .modal-content {
    animation: none;
  }
}
#lista-articoli { scroll-margin-top: 120px; }
@media (max-width: 768px){
  #lista-articoli { scroll-margin-top: 140px; }
}

</style>
<style id="search-panel-skin">
/* Restore search panel background & border */
#search-panel, #searchPanel, .search-panel, .results-panel{
  background: rgba(10,10,30,.96);
  border: 1px solid rgba(255,215,0,.28);
  box-shadow: 0 1rem 2rem rgba(0,0,0,.45);
  backdrop-filter: blur(.5rem);
}
</style>
<style id="search-panel-anim">
/* === Search Panel Animations (CSS-only) === */
#search-panel, #searchPanel, .search-panel, .results-panel{
  transform: translateX(-50%) translateY(-6px) scale(.985);
  opacity: 0;
  pointer-events: none;
  transition:
    transform .35s cubic-bezier(.2, .9, .2, 1),
    opacity   .32s ease;
  will-change: transform, opacity;
}
#search-panel.open, #searchPanel.open, .search-panel.open, .results-panel.open{
  opacity: 1;
  transform: translateX(-50%) translateY(0) scale(1);
  pointer-events: auto;
}

/* Backdrop per click-out */
#search-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
  opacity: 0; pointer-events: none;
  transition: opacity .28s ease;
  z-index: 2147483604;
}
#search-backdrop.open{ opacity: 1; pointer-events: auto; }

@media (prefers-reduced-motion: reduce){
  #search-panel, #searchPanel, .search-panel, .results-panel { transition: none !important; }
  #search-backdrop{ transition: none !important; }
}
</style><style id="search-results-stagger">
/* === Staggered results & highlight pulse === */
#search-results > *, .search-results > *, #searchResults > *{
  opacity: 0;
  transform: translateY(8px);
  will-change: transform, opacity;
  animation: spItemIn .48s cubic-bezier(.2,1,.2,1) both;
  animation-delay: calc(var(--i, 0) * 60ms);
}
@keyframes spItemIn{
  to{ opacity:1; transform: translateY(0); }
}
#search-results mark, .search-results mark, #searchResults mark{
  animation: hlPulse 1.4s ease-out .2s 1 both;
}
@keyframes hlPulse{
  0% { box-shadow: 0 0 0 rgba(255,215,0,0); }
  35%{ box-shadow: 0 0 .8rem rgba(255,215,0,.35); }
  100%{ box-shadow: 0 0 0 rgba(255,215,0,0); }
}
@media (prefers-reduced-motion: reduce){
  #search-results > *, .search-results > *, #searchResults > *{
    animation: none !important; opacity: 1; transform: none;
  }
}
</style>
<style>
/* === PULSANTE TORNA SU - VERSIONE FLUTTUANTE === */
.back-to-top.floating {
    position: fixed;
    bottom: 20px; /* Posizionato sopra il CTA fluttuante */
    left: 155px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--gold), #ffeb3b);
    border: 2px solid rgba(255,215,0,0.3);
    color: #0a0a1a;
    font-size: 1.5rem;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999; /* Leggermente sotto il CTA (10000) */
    box-shadow: 
        0 4px 15px rgba(255,215,0,0.4),
        0 0 0 2px rgba(10,10,30,0.1); /* Bordo esterno per contrasto */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    animation: float-gentle 3s ease-in-out infinite;
}

/* Animazione fluttuante delicata */
@keyframes float-gentle {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-5px);
    }
}

.back-to-top.floating:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 
        0 8px 25px rgba(255,215,0,0.6),
        0 0 0 2px rgba(255,215,0,0.2);
    background: linear-gradient(135deg, #ffeb3b, var(--gold));
    animation: none; /* Ferma l'animazione durante l'hover */
}

.back-to-top.floating:active {
    transform: translateY(-1px) scale(1.05);
}

/* Versione con effetto "bolla luminosa" */
.back-to-top.floating.glow {
    background: radial-gradient(circle at 30% 30%, #ffeb3b, var(--gold));
    box-shadow: 
        0 4px 20px rgba(255,215,0,0.5),
        0 0 30px rgba(255,215,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.4);
}

/* Versione trasparente/semitrasparente */
.back-to-top.floating.glass {
    background: rgba(212,175,55,0.15);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,215,0,0.4);
    color: var(--gold);
    box-shadow: 
        0 4px 20px rgba(0,0,0,0.2),
        inset 0 1px 0 rgba(255,255,255,0.1);
}

.back-to-top.floating.glass:hover {
    background: rgba(212,175,55,0.25);
    color: #0a0a1a;
}

/* Regolazioni per diverse altezze del CTA */
.back-to-top.floating.above-small-cta {
    bottom: 90px; /* Per CTA pi√π piccoli */
}

.back-to-top.floating.above-large-cta {
    bottom: 120px; /* Per CTA pi√π grandi */
}

.back-to-top.floating.above-xl-cta {
    bottom: 150px; /* Per CTA molto grandi */
}

/* Versione compatta per mobile */
@media (max-width: 768px) {
    .back-to-top.floating {
        bottom: 80px; /* Pi√π vicino al bordo su mobile */
        left: 20px;
        width: 45px;
        height: 45px;
        font-size: 1.3rem;
    }
    
    .back-to-top.floating.above-small-cta {
        bottom: 70px;
    }
    
    .back-to-top.floating.above-large-cta {
        bottom: 100px;
    }
    
    /* Riduci animazione su mobile per performance */
    .back-to-top.floating {
        animation: float-gentle-mobile 4s ease-in-out infinite;
    }
    
    @keyframes float-gentle-mobile {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-3px);
        }
    }
}

/* Supporto per preferenze di movimento ridotto */
@media (prefers-reduced-motion: reduce) {
    .back-to-top.floating {
        animation: none;
        transition: none;
    }
    
    .back-to-top.floating:hover {
        transform: none;
    }
}
</style>

<style>
    /* Stili per le cometine variopinte */
    .tiny-comets-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 2;
    }
</style>
<script>
// === ESPLOSIONE CON RICOMPOSIZIONE A ONDA ===
document.addEventListener('DOMContentLoaded', function() {
  const explodingText = document.getElementById('exploding');
  const explodeBtn = document.getElementById('btn-explode');
  const explosionSound = document.getElementById('explosionSound');
  
  if (!explodingText) return;

  // CSS PER ESPLOSIONE E ONDA
  const explosionCSS = `
    @keyframes letterExplodeOut {
      0% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
      }
      70% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0.5;
        filter: blur(4px);
      }
      100% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0;
        filter: blur(4px);
      }
    }
    
    @keyframes letterWaveIn {
      0% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4);
        opacity: 0;
        filter: blur(4px);
      }
      60% {
        transform: translate(calc(var(--explode-dx) * 0.2), calc(var(--explode-dy) * 0.2)) rotate(calc(var(--explode-rotate) * 0.3)) scale(1.1);
        opacity: 0.8;
        filter: blur(1px);
      }
      100% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
      }
    }
    
    @keyframes pageShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px) rotate(-1deg); }
      50% { transform: translateX(6px) rotate(0.8deg); }
      75% { transform: translateX(-4px) rotate(-0.5deg); }
    }
    
    .char {
      display: inline-block;
      transition: all 0.3s ease;
    }
    
    .exploding-active {
      animation: pageShake 1s ease-in-out;
    }
    
    /* PARTICELLE */
    .explosion-particle {
      position: fixed;
      pointer-events: none;
      z-index: 2147483600;
      border-radius: 50%;
      animation: particleFly 1.5s ease-out forwards;
    }
    
    @keyframes particleFly {
      0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translate(var(--particle-dx), var(--particle-dy)) scale(0) rotate(360deg);
        opacity: 0;
      }
    }
  `;
  
  const style = document.createElement('style');
  style.textContent = explosionCSS;
  document.head.appendChild(style);

  function getRandomColor() {
    const colors = [
      '#FF6B00', '#FF0000', '#00CCFF', '#B967FF', 
      '#FFD700', '#00FF88', '#FF00FF', '#FFFFFF'
    ];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function createParticleSwarm(element, particleCount = 40) {
    const rect = element.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.className = 'explosion-particle';
      particle.style.left = centerX + 'px';
      particle.style.top = centerY + 'px';
      
      const angle = Math.random() * Math.PI * 2;
      const distance = 60 + Math.random() * 180;
      const dx = Math.cos(angle) * distance;
      const dy = Math.sin(angle) * distance;
      
      particle.style.setProperty('--particle-dx', dx + 'px');
      particle.style.setProperty('--particle-dy', dy + 'px');
      
      const size = 2 + Math.random() * 6;
      particle.style.width = size + 'px';
      particle.style.height = size + 'px';
      particle.style.background = getRandomColor();
      
      document.body.appendChild(particle);
      setTimeout(() => particle.remove(), 1500);
    }
  }

  // ESPLOSIONE CON EFFETTO ONDA
  function triggerWaveExplosion() {
    if (explodingText.classList.contains('exploding')) return;
    
    // SUONO
    if (explosionSound) {
      try {
        explosionSound.currentTime = 0;
        explosionSound.volume = 0.7;
        explosionSound.play();
      } catch(e) {}
    }

    // SCUOTIMENTO
    document.body.classList.add('exploding-active');
    setTimeout(() => document.body.classList.remove('exploding-active'), 1000);

    // PARTICELLE
    createParticleSwarm(explodingText, 50);

    const chars = explodingText.querySelectorAll('.char');
    explodingText.classList.add('exploding');

    // FASE 1: ESPLOSIONE IN USCITA (tutte insieme)
    chars.forEach((char, index) => {
      const distance = 40 + Math.random() * 80;
      const angle = Math.random() * Math.PI * 2;
      const dx = Math.cos(angle) * distance;
      const dy = Math.sin(angle) * distance;
      const rotation = (Math.random() - 0.5) * 480;
      
      char.style.setProperty('--explode-dx', dx + 'px');
      char.style.setProperty('--explode-dy', dy + 'px');
      char.style.setProperty('--explode-rotate', rotation + 'deg');

      // ANIMAZIONE USCITA - TUTTE INSIEME
      char.animate([
        { transform: 'translate(0, 0) rotate(0deg) scale(1)', opacity: 1, filter: 'blur(0px)' },
        { transform: `translate(${dx}px, ${dy}px) rotate(${rotation}deg) scale(1.4)`, opacity: 0, filter: 'blur(4px)' }
      ], {
        duration: 600,
        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
        fill: 'forwards'
      });
    });

    // FASE 2: RICOMPOSIZIONE A ONDA (sequenziale)
    setTimeout(() => {
      chars.forEach((char, index) => {
        // RITARDO PROGRESSIVO PER EFFETTO ONDA
        const waveDelay = index * 80; // 80ms tra ogni lettera
        
        setTimeout(() => {
          // ANIMAZIONE RIENTRO A ONDA
          char.animate([
            { 
              transform: `translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.4)`, 
              opacity: 0, 
              filter: 'blur(4px)',
              color: getRandomColor()
            },
            { 
              transform: `translate(calc(var(--explode-dx) * 0.3), calc(var(--explode-dy) * 0.3)) rotate(calc(var(--explode-rotate) * 0.2)) scale(1.1)`, 
              opacity: 0.9, 
              filter: 'blur(1px)',
              color: getRandomColor()
            },
            { 
              transform: 'translate(0, 0) rotate(0deg) scale(1)', 
              opacity: 1, 
              filter: 'blur(0px)',
              color: 'currentColor'
            }
          ], {
            duration: 500,
            easing: 'cubic-bezier(0.2, 0.8, 0.4, 1.2)',
            fill: 'forwards'
          }).onfinish = () => {
            // PULIZIA FINALE
            char.style.transform = '';
            char.style.opacity = '';
            char.style.filter = '';
            char.style.color = '';
            
            // ULTIMA LETTERA - FINE ESPLOSIONE
            if (index === chars.length - 1) {
              explodingText.classList.remove('exploding');
              
              // EFFETTO FINALE DI CALMA
              setTimeout(() => {
                createParticleSwarm(explodingText, 15);
              }, 200);
            }
          };
        }, waveDelay);
      });
    }, 600); // Ritardo prima di iniziare l'onda
  }

  // EVENT LISTENERS
  if (explodeBtn) {
    explodeBtn.addEventListener('click', triggerWaveExplosion);
  }

  explodingText.addEventListener('click', triggerWaveExplosion);

  console.log('üåä Esplosione a onda caricata!');
});

// TEST
setTimeout(() => {
  console.log('‚úÖ Sistema onda pronto - Lettere:', document.querySelectorAll('.char').length);
}, 1000);
</script>
<style id="explosion-theater-css">
/* === EXPLOSION THEATER (conservative, layered) === */

/* Stabilizza il box motto per evitare "respiro" al caricamento */
.motto{
  display:inline-block;
  white-space:nowrap;
  contain:inline-size;
  line-height:1;
  --motto-ch: 62; /* aggiorna se cambi testo */
  min-width: calc(var(--motto-ch) * 1ch);
  margin-top: 2px;
   letter-spacing:.125em;
}
.motto .m-text{
  display:inline-block;
  white-space:nowrap;
  font-size-adjust: 0.52;
}
.motto .m-icon, .motto .m-sep, .motto .char{
  line-height:1;
  vertical-align:baseline;
}

/* Layer di effetti */
.fx-layer{position:fixed;inset:0;pointer-events:none;z-index:1300}
.fx-flash{
  background:radial-gradient(circle at center,#fff,rgba(255,255,255,.3) 40%,transparent 60%);
  mix-blend-mode:screen;opacity:0;transition:opacity .25s ease;
  width:100%;height:100%;
}
.fx-shock{
  position:absolute;left:50%;top:50%;width:10vmin;height:10vmin;border-radius:50%;
  border:2px solid rgba(255,255,255,.9);opacity:0;transform:translate(-50%,-50%) scale(.25);
  filter:drop-shadow(0 0 12px rgba(255,255,255,.85));mix-blend-mode:screen
}
.fx-smoke{
  position:absolute;left:50%;top:50%;width:60vmin;height:60vmin;border-radius:50%;
  background:radial-gradient(closest-side,rgba(180,200,255,.18),rgba(0,0,0,0));
  transform:translate(-50%,-50%) scale(.4);opacity:0;filter:blur(2px)
}
.fx-embers{position:absolute;inset:0;}

/* Preglow leggero durante il buildup */
#exploding.preglow .m-text{
  text-shadow:0 0 18px rgba(0,220,255,.75),0 0 32px rgba(0,180,255,.55);
}

/* Accessibilit√†: riduci gli effetti se richiesto dall'utente */
@media (prefers-reduced-motion: reduce){
  .fx-layer{display:none !important;}
  .char{transition:none !important;}
}
</style>

<style>
/* ALBERO DELLA CONOSCENZA - POSIZIONAMENTO CORRETTO */
.welcome-section {
    position: relative;
    text-align: center;
    padding: .8rem 0;
    margin-bottom: 8rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-height: 400px;
    overflow: visible; /* Importante per elementi absolute */
}

.welcome-decoration {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    text-align: center;
    z-index: 50; /* Aumentato z-index */
}

/* POSIZIONAMENTO SINISTRA - CORRETTO */
.welcome-decoration.left {
    left: calc(50% - 530px); /* 350px a sinistra del centro */
    top: 40%;
}

.welcome-decoration.right {
    right: calc(50% - 540px); /* 350px a destra del centro */
    top: 45%;
}

.philosophy-tree {
    font-size: 0.8rem;
    margin-bottom: 1rem;
    filter: drop-shadow(0 0 10px rgba(255,215,0,0.3));
}

.tree-container {
    position: relative;
    width: 120px;
    height: 180px;
    margin: 0 auto;
}

.tree-trunk {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 80px;
    background: linear-gradient(to right, #8B4513, #A0522D, #8B4513);
    border-radius: 4px;
}

.tree-branches {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 100px;
}

.branch {
    position: absolute;
    background: linear-gradient(to bottom, #8B4513, #A0522D);
    border-radius: 2px;
}

.branch-1 {
    width: 40px;
    height: 4px;
    top: 20px;
    left: 10px;
    transform: rotate(-30deg);
}

.branch-2 {
    width: 35px;
    height: 4px;
    top: 40px;
    right: 15px;
    transform: rotate(25deg);
}

.branch-3 {
    width: 30px;
    height: 3px;
    top: 60px;
    left: 5px;
    transform: rotate(-20deg);
}

.branch-4 {
    width: 25px;
    height: 3px;
    top: 75px;
    right: 8px;
    transform: rotate(15deg);
}

.tree-leaves {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.leaf {
    position: absolute;
    font-size: 1.2rem;
    opacity: 0.8;
    animation: leafGlow 3s ease-in-out infinite;
    text-shadow: 0 0 8px currentColor;
}

.leaf-1 { top: 15px; left: 20px; color: var(--gold); animation-delay: 0s; }
.leaf-2 { top: 25px; right: 25px; color: var(--cyan); animation-delay: 0.5s; }
.leaf-3 { top: 50px; left: 15px; color: var(--purple); animation-delay: 1s; }
.leaf-4 { top: 55px; right: 20px; color: var(--gold); animation-delay: 1.5s; }
.leaf-5 { top: 75px; left: 30px; color: var(--cyan); animation-delay: 2s; }
.leaf-6 { top: 80px; right: 15px; color: var(--purple); animation-delay: 2.5s; }

.tree-roots {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 20px;
}

.root {
    position: absolute;
    background: linear-gradient(to bottom, #5D4037, #6D4C41);
    border-radius: 1px;
    bottom: 0;
}

.root-1 {
    width: 15px;
    height: 8px;
    left: 10px;
    transform: rotate(-20deg);
}

.root-2 {
    width: 12px;
    height: 6px;
    left: 50%;
    transform: translateX(-50%);
}

.root-3 {
    width: 14px;
    height: 7px;
    right: 10px;
    transform: rotate(20deg);
}

.decoration-caption {
    margin-top: 1rem;
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-size: 1.2rem;
    opacity: 0.9;
    background: linear-gradient(90deg, #FFD700, #FFE8A3, #FFD700);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 8px rgba(255,215,0,0.4);
    font-weight: 700;
}

/* Animazioni */
@keyframes leafGlow {
    0%, 100% {
        opacity: 0.6;
        transform: scale(1);
        text-shadow: 0 0 5px currentColor;
    }
    50% {
        opacity: 1;
        transform: scale(1.1);
        text-shadow: 0 0 15px currentColor;
    }
}

/* Effetto hover sull'intero albero */
.philosophy-tree:hover .leaf {
    animation-duration: 1.5s;
}

.philosophy-tree:hover .tree-trunk {
    background: linear-gradient(to right, #A0522D, #CD853F, #A0522D);
}

/* RESPONSIVE CORRETTO */
@media (max-width: 1200px) {
    .welcome-decoration.left {
        left: calc(50% - 300px); /* Pi√π vicino al centro */
    }
    .welcome-decoration.right {
        right: calc(50% - 300px);
    }
}

@media (max-width: 1024px) {
    .welcome-decoration.left {
        left: calc(50% - 250px);
        transform: translateY(-50%) scale(0.9);
    }
    .welcome-decoration.right {
        right: calc(50% - 250px);
        transform: translateY(-50%) scale(0.9);
    }
}

@media (max-width: 768px) {
    .welcome-decoration.left {
        left: calc(50% - 200px);
        transform: translateY(-50%) scale(0.7);
    }
    .welcome-decoration.right {
        right: calc(50% - 200px);
        transform: translateY(-50%) scale(0.7);
    }
    
    .tree-container {
        width: 80px;
        height: 120px;
    }
    
    .decoration-caption {
        font-size: 0.7rem;
    }
}

@media (max-width: 600px) {
    .welcome-decoration.left {
        left: 20px; /* Torna a left fisso su schermi piccoli */
        transform: translateY(-50%) scale(0.6);
    }
    .welcome-decoration.right {
        right: 20px;
        transform: translateY(-50%) scale(0.6);
    }
}

@media (max-width: 480px) {
    .welcome-decoration.left,
    .welcome-decoration.right {
        display: none; /* Nascondi su mobile molto piccolo */
    }
}
.heraclitus-clock {
    font-size: 0.8rem;
    margin-bottom: 1rem;
    filter: drop-shadow(0 0 10px rgba(255,215,0,0.3));
}

.clock-face {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto;
    background: radial-gradient(circle, rgba(10,10,30,0.9) 0%, rgba(20,20,50,0.8) 70%);
    border: 3px solid var(--gold);
    border-radius: 50%;
    box-shadow: 
        0 0 20px rgba(255,215,0,0.4),
        inset 0 0 20px rgba(0,204,255,0.2);
}

.clock-hand {
    position: absolute;
    background: linear-gradient(to top, var(--cyan), var(--purple));
    border-radius: 2px;
    transform-origin: bottom center;
    left: 50%;
    bottom: 50%;
}

.clock-hand.hours {
    width: 4px;
    height: 35px;
    transform: translateX(-50%) rotate(45deg);
    box-shadow: 0 0 8px var(--cyan);
}

.clock-hand.minutes {
    width: 2px;
    height: 50px;
    transform: translateX(-50%) rotate(180deg);
    box-shadow: 0 0 6px var(--purple);
}

.river-flow {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        var(--cyan) 20%, 
        var(--purple) 50%, 
        var(--cyan) 80%, 
        transparent 100%);
    animation: riverFlow 3s linear infinite;
    box-shadow: 0 0 10px var(--cyan);
}

/* Punti dell'orologio */
.clock-face::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background: var(--gold);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--gold);
}

.clock-face::after {
    content: '';
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background: var(--gold);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--gold);
}

/* Animazioni */
@keyframes riverFlow {
    0% {
        transform: translateX(-100%);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Le lancette si muovono lentamente */
.clock-hand.hours {
    animation: hourHand 12s linear infinite;
}

.clock-hand.minutes {
    animation: minuteHand 8s linear infinite;
}

@keyframes hourHand {
    from { transform: translateX(-50%) rotate(45deg); }
    to { transform: translateX(-50%) rotate(405deg); }
}

@keyframes minuteHand {
    from { transform: translateX(-50%) rotate(180deg); }
    to { transform: translateX(-50%) rotate(540deg); }
}

/* Effetto hover */
.heraclitus-clock:hover .river-flow {
    animation-duration: 1.5s;
    background: linear-gradient(90deg, 
        transparent 0%, 
        #00ff88 20%, 
        var(--cyan) 50%, 
        #00ff88 80%, 
        transparent 100%);
}

.heraclitus-clock:hover .clock-hand {
    animation-duration: 4s;
}
</style>
<style>
/* Stili aggiuntivi per l'esplosione */
#btn-explode {
    background: linear-gradient(135deg, #ff6b00, #ff0000) !important;
    border: 2px solid rgba(255,255,255,0.5) !important;
    color: yellow!important;
    font-weight: bold !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
    box-shadow: 0 0 20px rgba(255,107,0,0.7) !important;
    transition: all 0.3s ease !important;
    margin-top: 5px;
}
.typing-wrap + #btn-explode {
  margin-top: 30px;
}

#btn-explode:hover {
    transform: scale(1.1) !important;
    box-shadow: 0 0 30px rgba(255,107,0,0.9) !important;
}

/* Assicurati che il body possa essere animato */
body {
    transform-origin: center center;
}
</style>
</head>

<body>
 
  <div class="search-panel" id="search-panel"><div class="search-header"><h3 class="search-title">Risultati</h3><button aria-label="Chiudi pannello" class="search-close" id="search-close" type="button">Chiudi</button></div><div class="search-results results-scroll" id="search-results"><div class="sp-item" data-placeholder="true"><h4 class="result-title">Suggerimento</h4><p class="result-desc">Digita nel campo di ricerca in alto per vedere i risultati qui.</p></div></div></div>
<!-- UI PATCH BLOCKS -->
<!-- ===== SLIDER VERTICALE ‚Äî solo .webp dai tuoi /foto ===== -->
<div aria-label="Galleria autori" class="slider-vertical" data-vertical-slider="on">
  <div class="slider-inner" id="sliderInner">
    <div class="slide-vertical">
      <img src="/foto/aristotele.webp" alt="Aristotele" width="260" height="340" loading="eager" decoding="async" />
      <p>Aristotele</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/bergson.webp" alt="Henri Bergson" width="260" height="340" loading="eager" decoding="async" />
      <p>Henri Bergson</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/epitteto.webp" alt="Epitteto" width="260" height="340" loading="eager" decoding="async" />
      <p>Epitteto</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/eraclito.webp" alt="Eraclito" width="260" height="340" loading="lazy" decoding="async" />
      <p>Eraclito</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/erasmo.webp" alt="Erasmo da Rotterdam" width="260" height="340" loading="lazy" decoding="async" />
      <p>Erasmo da Rotterdam</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/fichte.webp" alt="Johann G. Fichte" width="260" height="340" loading="lazy" decoding="async" />
      <p>Johann G. Fichte</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/hegel.webp" alt="G.W.F. Hegel" width="260" height="340" loading="lazy" decoding="async" />
      <p>G.W.F. Hegel</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/heidegger.webp" alt="Martin Heidegger" width="260" height="340" loading="lazy" decoding="async" />
      <p>Martin Heidegger</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/hobbes.webp" alt="Thomas Hobbes" width="260" height="340" loading="lazy" decoding="async" />
      <p>Thomas Hobbes</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/john-locke.webp" alt="John Locke" width="260" height="340" loading="lazy" decoding="async" />
      <p>John Locke</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/kant.webp" alt="Immanuel Kant" width="260" height="340" loading="lazy" decoding="async" />
      <p>Immanuel Kant</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/kierkegaard.webp" alt="S√∏ren Kierkegaard" width="260" height="340" loading="lazy" decoding="async" />
      <p>S√∏ren Kierkegaard</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/lucrezio.webp" alt="Lucrezio" width="260" height="340" loading="lazy" decoding="async" />
      <p>Lucrezio</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/moro.webp" alt="Tommaso Moro" width="260" height="340" loading="lazy" decoding="async" />
      <p>Tommaso Moro</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/parmenide.webp" alt="Parmenide" width="260" height="340" loading="lazy" decoding="async" />
      <p>Parmenide</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/pitagora.webp" alt="Pitagora" width="260" height="340" loading="lazy" decoding="async" />
      <p>Pitagora</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/platone.webp" alt="Platone" width="260" height="340" loading="lazy" decoding="async" />
      <p>Platone</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/schelling.webp" alt="F.W.J. Schelling" width="260" height="340" loading="lazy" decoding="async" />
      <p>F.W.J. Schelling</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/schopenhauer.webp" alt="Arthur Schopenhauer" width="260" height="340" loading="lazy" decoding="async" />
      <p>Arthur Schopenhauer</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/senofane.webp" alt="Senofane" width="260" height="340" loading="lazy" decoding="async" />
      <p>Senofane</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/talete.webp" alt="Talete" width="260" height="340" loading="lazy" decoding="async" />
      <p>Talete</p>
    </div>

    <div class="slide-vertical">
      <img src="/foto/voltaire.webp" alt="Voltaire" width="260" height="340" loading="lazy" decoding="async" />
      <p>Voltaire</p>
    </div>

  </div>
</div>

<div class="slider-controls" id="slider-controls">
<button class="ctrl-btn" id="slider-toggle">‚èØÔ∏è Avvia / Ferma</button>
<button class="ctrl-btn" id="slider-invert">üîÑ Inverti</button>
<label class="speed-label" for="slider-speed"><span class="speed-label-text">Regola velocit√†</span><input id="slider-speed" max="12" min="1" type="range" value="8"/></label>
</div>
<div aria-label="Lettore audio" class="audio-player" id="audio-player">
<div class="audio-title">üéß Musica per lo studio</div>
<br/>
<div class="controls"><button aria-label="Riproduci/Pausa" id="playPause">‚ñ∂Ô∏è</button><span aria-live="polite" id="time">0:00 / 0:00</span><input id="volume" max="1" min="0" step="0.01" type="range" value="0.8"/></div>
<audio id="myAudio" playsinline="True" preload="auto" src="https://casi0048.github.io/suoni/Strauss.mp3"></audio>
</div>
<aside aria-label="Ultimi articoli" class="articles-blob">
<h3>üì∞ Ultimi articoli</h3>
<ul>
<li><a href="articoli/circolo_di_vienna.html">Circolo di Vienna</a></li>
<li><a href="articoli/ipazia.html">Ipazia di Alessandria</a></li>
<li><a href="articoli/platone_mito_caverna.html">Il Mito della Caverna di Platone</a></li>
<li><a href="articoli/parmenide1.html">Parmenide di Elea</a></li>
<li><a href="articoli/2nietzsche.html">Nietzsche</a></li>
<li><a href="articoli/battaglia_maratona.html">Battaglia di Maratona</a></li>
</ul>
</aside>
<!-- Dizionario filosofico ‚Äî multi-fonte, compatto -->
<div class="right-box" id="dict-compact">
<h3>üìò Dizionario filosofico</h3>
<div class="mini">multi‚Äëfonte, compatto</div>
<form id="dict-form">
<div class="row">
<input id="dict-q" placeholder="Cerca un termine‚Ä¶" type="search"/>
</div>
<div class="sources">
<label><input checked="" data-url="https://duckduckgo.com/?q=site%3Aplato.stanford.edu+{q}" type="checkbox"/> SEP</label>
<label><input checked="" data-url="https://duckduckgo.com/?q=site%3Aiep.utm.edu+{q}" type="checkbox"/> IEP</label>
<label><input checked="" data-url="https://www.treccani.it/risultati?q={q}" type="checkbox"/> Treccani</label>
<label><input data-url="https://it.wikipedia.org/w/index.php?search={q}" type="checkbox"/> Wikipedia</label>
<label><input data-url="https://www.britannica.com/search?query={q}" type="checkbox"/> Britannica</label>
</div>
<div class="row">
<button class="btn" type="submit">Cerca</button>
</div>
</form>
</div>
<!-- Enciclopedia filosofica (IEP tradotta) -->
<div class="right-box" id="iep-linkbox">
<h3>üìö Enciclopedia filosofica (IEP)</h3>
<div class="row">
<a class="btn" href="https://iep-utm-edu.translate.goog/a/?_x_tr_sl=auto&amp;_x_tr_tl=it&amp;_x_tr_hl=uk&amp;_x_tr_pto=wapp" rel="noopener" target="_blank">
        Apri versione tradotta
        </a>
</div>
<div class="mini">
        oppure <a href="https://iep.utm.edu/" rel="noopener" target="_blank">IEP originale</a>
</div>
</div>
<div class="right-embed">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" src="https://www.youtube.com/embed/G_REgkOuQfw" title="Schopenhauer e Nietzsche (Hans-Georg Gadamer) - 3x4"></iframe>
</div>
<div id="russell-box"><button id="russell-btn">üéµ "La maggior parte degli uomini preferirebbe morire piuttosto che pensare,  infatti √® quello che fanno."<br/><strong>‚Äì Bertrand Russell</strong></button></div>
<div id="russell-hint">Clicca box sotto per ascoltare la chitarra üé∏</div>
<audio id="russell-audio" playsinline="True" preload="auto" src="https://casi0048.github.io/suoni/gitarra.mp3"></audio>
<audio id="thunder-sound" playsinline="True" preload="auto">
<source src="https://casi0048.github.io/suoni/thunder-sound.mp3" type="audio/mpeg"/>
</audio>
<audio id="explosionSound" playsinline="True" preload="auto" src="https://casi0048.github.io/suoni/explosion-1.mp3"></audio>
<div aria-hidden="true" id="lightning"></div>
<div aria-hidden="true" id="bolt"></div>
<!-- Sfondo con particelle cosmiche -->
<div id="cosmic-bg"></div>
<div aria-hidden="true" class="stars-container" id="starsContainer"></div>
<!-- Top Bar -->
<div class="top-bar">
<a class="brand" href="/">
<svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24">
<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
<polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
<line x1="12" x2="12" y1="22.08" y2="12"></line>
</svg>
<span>Echi di Sofia</span>
</a>
<div style="position: relative;">
<button class="ctrl-btn" id="paradigma-btn" style="
            background: rgba(20,20,40,0.78);
            border: 1px solid rgba(255,215,0,0.25);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: #ffd86a;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            white-space: nowrap;">
            üé≠ Maestri del Pensiero üß†<span style="font-size: 1.5em; color: #00ccff;">‚ñæ</span>
</button>
<!-- Overlay 4 Filosofi -->
<div id="filosofi-overlay" style="
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 10px;
            background: linear-gradient(to bottom, rgba(10,10,30,0.95), rgba(10,10,30,0.9));
            border-radius: 10px;
            max-width: 800px;
            width: 600px;
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,215,0,0.3);
            z-index: 9999;
            backdrop-filter: blur(10px);">
<h3 style="color: #ffd86a; margin-bottom: 20px; font-family: 'Cinzel', serif; text-align: center;">
                I Filosofi che hanno cambiato il paradigma
                <span style="font-size: 1.5em; color: #00ccff;">‚ñæ</span>
</h3>
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
<div style="text-align: center;">
<img alt="Socrate" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Socrates_Louvre.jpg" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;"/>
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Socrate</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"So di non sapere."</p>
</div>
<div style="text-align: center;">
<img alt="Platone" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/platone.png" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;"/>
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Platone</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"La realt√† √® un'ombra delle Idee".Tradotto: Come il mondo vero divenne favola</p>
</div>
<div style="text-align: center;">
<img alt="Kant" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/kant.webp" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;"/>
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Kant</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"Sapere aude! Abbi il coraggio di servirti della tua propria intelligenza!"</p>
</div>
<div style="text-align: center;">
<img alt="Nietzsche" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/friedrich-nietzsche.jpg" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;"/>
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Nietzsche</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"Dio √® morto! Dio resta morto! E noi lo abbiamo ucciso! Come ci consoleremo noi, gli assassini di tutti gli assassini? Quanto di pi√∫ sacro e di pi√∫ possente il mondo possedeva fino ad oggi, si √® dissanguato sotto i nostri coltelli; chi deterger√† da noi questo sangue?"</p>
</div>
</div>
</div>
</div>
<div class="bar-right">
<div class="translate-box">
<span>üåê</span>
<select aria-label="Traduci pagina" class="translate-select" id="customTranslate">
<option value="it">Italiano</option>
<option value="en">English</option>
<option value="fr">Fran√ßais</option>
<option value="de">Deutsch</option>
<option value="es">Espa√±ol</option>
<option value="pl">Polski</option>
</select>
<div aria-hidden="true" id="google_translate_element" style="position:fixed;bottom:0;right:0;width:1px;height:1px;opacity:0;pointer-events:none;overflow:hidden"></div>
</div>
<div class="search-container" role="search">
<input aria-label="Cerca" id="site-search" placeholder="Cerca nel sito..." type="search"/>
<i aria-hidden="true" class="fa-solid fa-magnifying-glass search-icon"></i>
</div>
<button aria-label="Cambia tema" class="ctrl-btn theme-btn" id="theme-toggle" title="Tema chiaro/scuro">
    üåô
  </button>
<button class="ctrl-btn" id="btn-thunder" title="Riproduci tuono">‚ö° Tuono</button>

</div>
</div>
<!-- Menu principale -->
<div class="menu-container">
<nav class="menu-desktop" aria-label="Navigazione principale" role="navigation">
<ul role="menu">
<li class="dropdown">
<a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/benvenuti.html" role="menuitem"> üóùÔ∏è INCIPIT</a>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            üèõÔ∏è Filosofia antica <span class="arrow">‚ñº</span>
</button>
<div aria-label="Sottomenu Filosofia antica" class="mega-menu columns-4 anchor-left" role="menu">
<div>
<h4>Presocratici</h4>
<a href="Presocratici/talete.html" role="menuitem">Talete</a>
<a href="Presocratici/anassimandro.html" role="menuitem">Anassimandro</a>
<a href="Presocratici/anassimene.html" role="menuitem">Anassimene</a>
<a href="articoli/eraclito.html" role="menuitem">Eraclito</a>
</div>
<div>
<h4>Eleatismo</h4>
<a href="Presocratici/senofane.html" role="menuitem">Senofane</a>
<a href="Presocratici/parmenide.html" role="menuitem">Parmenide</a>
<a href="articoli/zenone.html" role="menuitem">Zenone</a>
<a href="articoli/melisso.html" role="menuitem">Melisso</a>
</div>
<div>
<h4>Sofisti</h4>
<a href="articoli/gorgia.html" role="menuitem">Gorgia</a>
<a href="articoli/ippia.html" role="menuitem">Ippia</a>
<a href="articoli/prodico.html" role="menuitem">Prodico</a>
</div>
<div>
<h4>Pitagorici</h4>
<a href="articoli/pitagora.html" role="menuitem">Pitagora</a>
<a href="articoli/filolao.html" role="menuitem">Filolao</a>
<a href="articoli/alcmeone.html" role="menuitem">Alcmeone</a>
<a href="articoli/archita.html" role="menuitem">Archita</a>
<a href="articoli/ippaso.html" role="menuitem">Ippaso</a>
</div>
<div>
<h4>Scuola cinica</h4>
<a href="articoli/antistene.html" role="menuitem">Antistene</a>
<a href="articoli/diogene.html" role="menuitem">Diogene di Sinope</a>
<a href="articoli/cratete.html" role="menuitem">Cratete di Tebe</a>
<a href="articoli/iparchia.html" role="menuitem">Ipparchia</a>
<a href="articoli/metrocle.html" role="menuitem">Metrocle di Maronea</a>
</div>
<div>
<h4>Scuola atomistica</h4>
<a href="articoli/leucippo.html" role="menuitem">Leucippo di Mileto</a>
<a href="articoli/democrito.html" role="menuitem">Democrito di Abdera</a>
<a href="articoli/scuola-vai%C5%9Be%E1%B9%A3ika.html" role="menuitem">Scuola Vai≈õe·π£ika</a>
</div>
<div>
<h4>Storiografia greca antica</h4>
<a href="articoli/erodoto.html" role="menuitem">Erodoto</a>
<a href="articoli/tucidide.html" role="menuitem">Tucidide </a>
<a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
<a href="articoli/polibio.html" role="menuitem">Polibio</a>
</div>
<div>
<h4>üöÄApprofondimenti</h4>
<a href="https://www.worldhistory.org/trans/it/1-13310/democrazia-ateniese/" role="menuitem">Democrazia Ateniese</a>
<a href="https://www.worldhistory.org/trans/it/2-927/donne-nellantica-grecia/" role="menuitem">Donne nell'Antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-11373/magna-grecia/" role="menuitem">Magna Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-14956/il-teatro-dellantica-grecia/" role="menuitem">Il teatro dell'antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-10553/la-religione-nellantica-grecia/" role="menuitem">La religione nell'antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-19269/la-danza-nellantica-grecia/" role="menuitem">La danza nell'Antica Grecia</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            üìúFilosofia classica <span class="arrow">‚ñº</span>
</button>
<div aria-label="Sottomenu Filosofia classica" class="mega-menu columns-4" role="menu">
<div>
<h4>Socrate e Scuola</h4>
<a href="articoli/socrate.html" role="menuitem">Socrate</a>
<a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
<a href="articoli/antistene.html" role="menuitem">Antistene</a>
<h4>Scetticismo</h4>
<a href="articoli/pirrone.html" role="menuitem">Pirrone di Elide </a>
<a href="articoli/timone.html" role="menuitem">Timone di Fliunte </a>
<a href="articoli/arcesilao.html" role="menuitem">Arcesilao di Pitane</a>
<a href="articoli/carneade.html" role="menuitem">Carneade di Cirene</a>
<a href="articoli/enesidemo.html" role="menuitem">Enesidemo di Cnosso</a>
<a href="articoli/agrippa.html" role="menuitem">Agrippa</a>
<a href="articoli/sesto.html" role="menuitem">Sesto Empirico</a>
</div>
<div>
<h4>Platone e Accademia</h4>
<a href="articoli/platone.html" role="menuitem">Platone</a>
<a href="articoli/aristippo.html" role="menuitem">Aristippo</a>
<a href="articoli/diotima.html" role="menuitem">Diotima</a>
</div>
<div>
<h4>Aristotele e Peripatetici</h4>
<a href="articoli/aristotele.html" role="menuitem">Aristotele</a>
<a href="articoli/teofrasto.html" role="menuitem">Teofrasto</a>
<a href="articoli/eudemo.html" role="menuitem">Eudemo di Rodi </a>
<a href="articoli/stratone.html" role="menuitem">Stratone di Lampsaco</a>
<a href="articoli/demetrio.html" role="menuitem">Demetrio Falereo</a>
<a href="articoli/andronico.html" role="menuitem">Andronico di Rodi</a>
<a href="articoli/alessandro-afrodisia.html" role="menuitem">Alessandro di Afrodisia </a>
</div>
<div>
<h4>Stoicismo</h4>
<a href="articoli/zenone.html" role="menuitem">Zenone di Cizio</a>
<a href="articoli/epitteto.html" role="menuitem">Epitteto</a>
<a href="articoli/seneca.html" role="menuitem">Seneca</a>
<a href="articoli/cleante.html" role="menuitem">Cleante di Asso </a>
<a href="articoli/crisippo.html" role="menuitem">Crisippo di Soli </a>
<a href="articoli/panezio.html" role="menuitem">Panezio di Rodi</a>
<a href="articoli/posidonio.html" role="menuitem">Posidonio di Apamea </a>
</div>
<div>
<h4>Epicureismo</h4>
<a href="articoli/epicuro.html" role="menuitem">Epicuro</a>
<a href="articoli/lucrezio.html" role="menuitem">Lucrezio</a>
<a href="articoli/cicerone.html" role="menuitem">Cicerone</a>
<a href="articoli/ermarco.html" role="menuitem">Ermarco di Mitilene</a>
<a href="articoli/colote.html" role="menuitem">Colote di Lampsaco</a>
<a href="articoli/zenone_di_sidone.html " role="menuitem">Zenone di Sidone </a>
</div>
<div>
<h4>Neoplatonismo</h4>
<a href="articoli/plotino.html" role="menuitem">Plotino</a>
<a href="articoli/giamblico.html" role="menuitem">Giamblico di Calcide </a>
<a href="articoli/proclo.html" role="menuitem">Proclo</a>
<a href="articoli/ipazia.html" role="menuitem">Ipatia di Alessandria</a>
<a href="articoli/simplicio.html" role="menuitem">Simplicio di Cilicia </a>
<a href="articoli/orfismo.html" role="menuitem">Orfismo</a>
<a href="articoli/eleusi.html" role="menuitem">Misteri Eleusini</a>
</div>
<div>
<h4>Drammaturgia greca antica</h4>
<a href="articoli/eschilo.html" role="menuitem">Eschilo</a>
<a href="articoli/sofocle.html" role="menuitem">Sofocle</a>
<a href="articoli/euripide.html" role="menuitem">Euripide</a>
</div>
<div>
<h4>Commedia greca antica</h4>
<a href="articoli/aristofane.html" role="menuitem">Aristofane</a>
<a href="articoli/menandro.html" role="menuitem">Menandro</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">‚õ™Filosofia medievale<span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia medievale" class="mega-menu columns-4" role="menu">
<div>
<h4>Scolastica</h4>
<a href="articoli/eriugena.html" role="menuitem">Giovanni Scoto Eriugena</a>
<a href="articoli/anselmo.html" role="menuitem">Sant'Anselmo d'Aosta</a>
<a href="articoli/abelardo.html" role="menuitem">Pietro Abelardo</a>
<a href="articoli/alberto-m.html" role="menuitem">Alberto Magno</a>
<a href="articoli/tommaso%20d'aquino.html" role="menuitem">Tommaso d'Aquino</a>
<a href="articoli/bonaventura.html" role="menuitem">Bonaventura da Bagnoregio</a>
<a href="articoli/duns%20scoto.html" role="menuitem">Duns Scoto</a>
<a href="articoli/ockham.html" role="menuitem">Guglielmo di Ockham</a>
<a href="articoli/buridano.html" role="menuitem">Giovanni Buridano</a>
<a href="articoli/oresome.html" role="menuitem">Nicola d'Oresme</a>
</div>
<div>
<h4>Patristica</h4>
<a href="articoli/clemente.html" role="menuitem">Clemente Alessandrino</a>
<a href="articoli/tertulliano.html" role="menuitem">Tertulliano</a>
<a href="articoli/origene.html" role="menuitem">Origene</a>
<a href="articoli/cipriano.html" role="menuitem">Cipriano di Cartagine</a>
<a href="articoli/atanasio.html" role="menuitem">Atanasio di Alessandria</a>
<a href="articoli/basilio.html" role="menuitem">Basilio di Cesarea</a>
<a href="articoli/gregorio-di-nazianzo.html" role="menuitem">Gregorio di Nazianzo</a>
<a href="articoli/gregorio-di-nizza.html" role="menuitem">Gregorio di Nissa</a>
<a href="articoli/ambrogio.html" role="menuitem">Ambrogio di Milano</a>
<a href="articoli/girolamo.html" role="menuitem">Girolamo</a>
<a href="articoli/agostino.html" role="menuitem">Agostino</a>
<a href="articoli/pseudo-dionigi.html" role="menuitem">Pseudo-Dionigi Areopagita</a>
<a href="articoli/boezio.html" role="menuitem">Boezio</a>
<a href="articoli/alberto-m.html" role="menuitem">Gregorio Magno</a>
</div>
<div>
<h4>Mistica</h4>
<a href="articoli/ildegarda.html" role="menuitem">Ildegarda di Bingen </a>
<a href="articoli/eckhart.html" role="menuitem">Meister Eckhart</a>
<a href="articoli/caterina.html" role="menuitem">Caterina da Siena</a>
<h4>Filosofia Islamica</h4>
<a href="articoli/avicenna.html" role="menuitem">Avicenna</a>
<a href="articoli/averroe.html" role="menuitem">Averro√®</a>
<a href="articoli/al-farabi.html" role="menuitem">Al-Farabi</a>
<a href="articoli/al-ghazali.html" role="menuitem">Al-Ghazali</a>
</div>
<div>
<h4>Filosofia Ebraica</h4>
<a href="articoli/maimonide.html" role="menuitem">Maimonide</a>
<a href="articoli/saadia%20goan.html" role="menuitem">Saadia Gaon</a>
<a href="articoli/gersonide.html" role="menuitem">Gersonide</a>
<a href="articoli/hasdai%20crescas.html" role="menuitem">Hasdai Crescas</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üí°Filosofia moderna <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia moderna" class="mega-menu columns-4" role="menu">
<div>
<h4>Rinascimento</h4>
<a href="articoli/erasmo.html" role="menuitem">Erasmo da Rotterdam</a>
<a href="articoli/machiavelli.html" role="menuitem">Niccol√≤ Machiavelli</a>
<a href="articoli/moro.html" role="menuitem">Tommaso Moro</a>
<a href="articoli/bruno.html" role="menuitem">Giordano Bruno</a>
<h4>Razionalismo</h4>
<a href="articoli/cartesio.html" role="menuitem">Cartesio</a>
<a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
<a href="articoli/leibniz.html" role="menuitem">Leibniz</a>
</div>
<div>
<h4>Empirismo</h4>
<a href="articoli/locke.html" role="menuitem">Locke</a>
<a href="articoli/hume.html" role="menuitem">Hume</a>
<a href="articoli/berkeley.html" role="menuitem">Berkeley</a>
<h4>Romanticismo</h4>
<a href="articoli/frege.html" role="menuitem">Arthur Schopenhauer</a>
<a href="articoli/kierkegaard.html" role="menuitem">S√∏ren Kierkegaard</a>
<a href="articoli/goethe.html" role="menuitem">Johann Wolfgang von Goethe</a>
</div>
<div>
<h4>Illuminismo</h4>
<a href="articoli/rousseau.html" role="menuitem">Rousseau</a>
<a href="articoli/montesquieu.html" role="menuitem">Montesquieu</a>
<a href="articoli/voltaire.html" role="menuitem">Voltaire</a>
<h4>Materialismo</h4>
<a href="articoli/marx.html" role="menuitem">Karl Marx</a>
<a href="articoli/engels.html" role="menuitem">Friedrich Engels</a>
<a href="articoli/feuerbach.html" role="menuitem">Ludwig Andreas Feuerbach </a>
</div>
<div>
<h4>Idealismo</h4>
<a href="articoli/hegel.html" role="menuitem">Hegel</a>
<a href="articoli/kant.html" role="menuitem">Kant</a>
<a href="articoli/fichte.html" role="menuitem">Fichte</a>
<a href="articoli/schelling.html" role="menuitem">Schelling</a>
</div>
<div>
<h4>Positivismo</h4>
<a href="articoli/comte.html" role="menuitem">Auguste Comte </a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
<a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
<a href="articoli/mach.html" role="menuitem">Ernst Mach</a>
<a href="articoli/adrig%C3%B2.html" role="menuitem">Roberto Ardig√≤</a>
</div>
<div>
<h4>Gnoseologia</h4>
<a href="articoli/bacon.html" role="menuitem">Francis Bacon</a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
<a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
</div>
<div>
<h4>Metafisica/Ontologia</h4>
<a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
<a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
<a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
<a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
<a href="articoli/lewis.html" role="menuitem">David Lewis</a>
</div>
<div>
<h4>Filosofia russa</h4>
<a href="articoli/dostoevskij.html" role="menuitem">F√´dor Dostoevskij</a>
<a href="articoli/solov'%C3%ABv.html" role="menuitem">Vladimir Solov'√´v </a>
<a href="articoli/rozanov.html" role="menuitem">Vasilij Rozanov </a>
<a href="articoli/sestov.html" role="menuitem">Lev ≈†estov</a>
<a href="articoli/bulgakov.html" role="menuitem">Sergej Bulgakov</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üåÄFilosofia contemporanea <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia contemporanea" class="mega-menu columns-4" role="menu">
<div>
<h4>Filosofia analitica</h4>
<a href="articoli/frege.html" role="menuitem">Frege</a>
<a href="articoli/russell.html" role="menuitem">Russell</a>
<a href="articoli/wittgenstein.html" role="menuitem">Wittgenstein</a>
<a href="articoli/moore.html" role="menuitem">G.E. Moore</a>
<h4>Utilitarismo</h4>
<a href="articoli/betham.html" role="menuitem">Jeremy Bentham </a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill</a>
</div>
<div>
<h4>Filosofia Continentale</h4>
<a href="articoli/husserl.html" role="menuitem">Husserl</a>
<a href="articoli/merleau-ponty.html" role="menuitem">Merleau-Ponty</a>
<a href="articoli/l%C3%A9vi-strauss.html" role="menuitem">Claude L√©vi-Strauss</a>
<a href="articoli/bergson1.html" role="menuitem">Henri-Louis Bergson</a>
<a href="articoli/althusser.html" role="menuitem">Louis Althusser</a>
<a href="articoli/dreyfus.html" role="menuitem">Dina Dreyfus</a>
<a href="articoli/sartre.html" role="menuitem">Sartre</a>
</div>
<div>
<h4>Ermeneutica</h4>
<a href="articoli/schleiermacher.html" role="menuitem">Friedrich Schleiermacher</a>
<a href="articoli/dilthey.html" role="menuitem">Wilhelm Dilthey</a>
<a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
<a href="articoli/gadamer.html" role="menuitem">Hans-Georg Gadamer</a>
<a href="/articoli/ricoeur.html" role="menuitem">Paul Ricoeur</a>
</div>
<div>
<h4>Filosofia del linguaggio</h4>
<a href="articoli/wittgenstein.html" role="menuitem">Ludwig Wittgenstein</a>
<a href="articoli/austin.html" role="menuitem">J.L. Austin</a>
<a href="articoli/searle.html" role="menuitem">John Searle</a>
<a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
<h4>Scuola di Francoforte</h4>
<a href="articoli/horkheimer.html" role="menuitem">Max Horkheimer</a>
<a href="articoli/adorno.html" role="menuitem">Theodor W. Adorno</a>
<a href="/articoli/marcuse.html" role="menuitem">Herbert Marcuse</a>
<a href="articoli/benjamin.html" role="menuitem">Walter Benjamin</a>
<a href="articoli/fromm.html" role="menuitem">Erich Fromm</a>
<a href="articoli/habermas.html" role="menuitem">J√ºrgen Habermas</a>
</div>
<div>
<h4>Pragmatismo Americano</h4>
<a href="articoli/peirce.html" role="menuitem">Peirce</a>
<a href="articoli/james.html" role="menuitem">W. James</a>
<a href="articoli/dewey.html" role="menuitem">Dewey</a>
<a href="articoli/rorty.html" role="menuitem">R. Rorty</a>
</div>
<div>
<h4>Filosofia postmoderna</h4>
<a href="articoli/derrida.html" role="menuitem">Derrida</a>
<a href="articoli/foucault.html" role="menuitem">Foucault</a>
<a href="articoli/lyotard.html" role="menuitem">Lyotard</a>
<a href="articoli/deleuze.html" role="menuitem">Deleuze</a>
<a href="articoli/butler.html" role="menuitem">Butler</a>
</div>
<div>
<h4>Filosofia italiana</h4>
<a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
<a href="articoli/eco.html" role="menuitem">Umberto Eco</a>
<a href="articoli/vattimo.html" role="menuitem">Gianni Vattimo</a>
<a href="articoli/bodei.html" role="menuitem">Remo Bodei</a>
<a href="articoli/cacciari.html" role="menuitem">Massimo Cacciari</a>
<a href="articoli/galimberti.html" role="menuitem">Umberto Galimberti</a>
</div>
<div>
<h4>Socioetica</h4>
<a href="articoli/rawls.html" role="menuitem">John Rawls:</a>
<a href="articoli/nozick.html" role="menuitem">Robert Nozick</a>
<a href="articoli/singer.html" role="menuitem">Peter Singer</a>
<a href="articoli/jonas.html" role="menuitem">Hans Jonas</a>
<a href="articoli/beauvoir.html" role="menuitem">Simone de Beauvoir</a>
<a href="articoli/fraser.html" role="menuitem">Nancy Fraser</a>
<a href="articoli/said.html" role="menuitem">Edward Said</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üáµüá± Filosofia polacca <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia polacca" class="mega-menu columns-4 right-align" role="menu">
<div>
<h4>Romanticismo</h4>
<a href="articoli/wronski.html" role="menuitem">J√≥zef Hoene-Wro≈Ñski</a>
<a href="articoli/cieszkowski.html" role="menuitem">August Cieszkowski</a>
<a href="articoli/mickiewicz.html" role="menuitem">Adam Mickiewicz</a>
<a href="articoli/rzewuski.html" role="menuitem">Henryk Rzewuski</a>
<a href="articoli/potocki.html" role="menuitem">Stanis≈Çaw Kostka Potocki</a>
</div>
<div>
<h4>Logica e Analitica</h4>
<a href="articoli/twardowski.html" role="menuitem">Kazimierz Twardowski</a>
<a href="articoli/lukasiewicz.html" role="menuitem">Jan ≈Åukasiewicz</a>
<a href="articoli/tarski.html" role="menuitem">Alfred Tarski</a>
<a href="articoli/kotarbinski.html" role="menuitem">Tadeusz Kotarbi≈Ñski</a>
<a href="articoli/ajdukiewicz.html" role="menuitem">Kazimierz Ajdukiewicz</a>
<a href="articoli/ingarden.html" role="menuitem">Roman Ingarden</a>
</div>
<div>
<h4>Periodo comunista</h4>
<a href="articoli/malinowski.html" role="menuitem">Bronis≈Çaw Malinowski</a>
<a href="articoli/kolakowski.html" role="menuitem">Leszek Ko≈Çakowski</a>
<a href="articoli/wojtyla.html" role="menuitem">
                Karol Wojty≈Ça<br/>
                (Papa Giovanni Paolo II)
                </a>
</div>
<div>
<h4>Post-Comunista</h4>
<a href="articoli/tischner.html" role="menuitem">J√≥zef Tischner</a>
<a href="articoli/bauman.html" role="menuitem">Zygmunt Bauman</a>
</div>
</div>
</li>
<li class="dropdown">
<a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/pagina-contatti.html" role="menuitem">üìß Contatti</a>
</li>
</ul>
</nav>
</div>
<div class="scroll-progress">
<div class="scroll-progress-bar"></div>
</div>
<!-- Contenuto principale -->
<main role="main" aria-label="Contenuto principale">
<!-- Canvas per le piccole cometine variopinte -->
<canvas class="tiny-comets-canvas" id="tiny-comets"></canvas>
<section class="welcome-section">
<!-- ALBERO DELLA CONOSCENZA - SINISTRA -->
    <div class="welcome-decoration left">
        <div class="philosophy-tree">
            <div class="tree-container">
                <div class="tree-trunk"></div>
                <div class="tree-branches">
                    <div class="branch branch-1"></div>
                    <div class="branch branch-2"></div>
                    <div class="branch branch-3"></div>
                    <div class="branch branch-4"></div>
                </div>
                <div class="tree-leaves">
                    <div class="leaf leaf-1">‚ôÇ</div>
                    <div class="leaf leaf-2">‚ôÄ</div>
                    <div class="leaf leaf-3">‚àû</div>
                    <div class="leaf leaf-4">Œî</div>
                    <div class="leaf leaf-5">Œ®</div>
                    <div class="leaf leaf-6">Œ¶</div>
                </div>
                <div class="tree-roots">
                    <div class="root root-1"></div>
                    <div class="root root-2"></div>
                    <div class="root root-3"></div>
                </div>
            </div>
        </div>
        <p class="decoration-caption">¬´Contemplari et contemplata aliis tradere¬ª</p>
    </div>

    <h1 class="welcome-title">Benvenuto in<br/>Echi di Sofia</h1>
    <p class="welcome-subtitle">Un viaggio tra storia, stelle e pensiero</p>

<div class="welcome-decoration right">
    <div class="heraclitus-clock">
        <div class="clock-face">
            <div class="clock-hand hours"></div>
            <div class="clock-hand minutes"></div>
            <div class="river-flow"></div>
        </div>
    </div>
    <p class="decoration-caption">‚è≥"Panta rei"üåø<br/><span class="sub-caption">üíÉTutto danza nel divenire üåä</span></p>
</div>
<div class="typing-wrap">
<div class="typing-effect"></div>
</div>
<button class="ctrl-btn" id="btn-explode" onclick="(function(){var x=document.getElementById('exploding');if(!x)return;var r=x.getBoundingClientRect();x.dispatchEvent(new MouseEvent('click',{bubbles:true,cancelable:true,clientX:r.left+r.width/2,clientY:r.top+r.height/2}));})();" type="button">
  üß® Esplodiüåã
</button>
<div aria-label="Sustine et abstine" class="motto exploding-text" id="exploding" title="Clicca per esplodere">
    <span aria-hidden="true" class="m-icon">‚è≥</span>
    <span aria-hidden="true" class="m-sep">‚Ä¢</span>
    <span class="m-text">
        <span class="char">S</span>
        <span class="char">u</span>
        <span class="char">s</span>
        <span class="char">t</span>
        <span class="char">i</span>
        <span class="char">n</span>
        <span class="char">e</span>
        <span class="char">&nbsp;</span>
        <span class="char">e</span>
        <span class="char">t</span>
        <span class="char">&nbsp;</span>
        <span class="char">a</span>
        <span class="char">b</span>
        <span class="char">s</span>
        <span class="char">t</span>
        <span class="char">i</span>
        <span class="char">n</span>
        <span class="char">e</span>
    </span>
    <span aria-hidden="true" class="m-sep">‚Ä¢</span>
    <span aria-hidden="true" class="m-icon">‚ôæÔ∏è</span>
</div>

</section>
<!-- Timeline filosofica interattiva - INTEGRATA -->
<!-- Timeline filosofica interattiva - COMPLETA -->
<section class="timeline-container">
<h2 class="timeline-title">Linea del Tempo Filosofica</h2>
<div class="timeline">
<!-- Filosofia Antica -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üèõÔ∏è Filosofia Antica</h3>
<p class="period">VII sec. a.C. - V sec. d.C.</p>
<p>Dai Presocratici al Neoplatonismo, l'indagine sulla physis e sul cosmo. I filosofi cercano di comprendere la natura fondamentale della realt√†.</p>
<p><strong>Filosofi principali:</strong> Talete, Socrate, Platone, Aristotele, Plotino</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Medievale -->
<div class="timeline-item right">
<div class="timeline-content">
<h3>‚õ™ Filosofia Medievale</h3>
<p class="period">V - XV secolo</p>
<p>Fede e ragione si incontrano nella Scolastica. La filosofia araba ed ebraica fioriscono preservando il pensiero antico.</p>
<p><strong>Filosofi principali:</strong> Agostino, Tommaso d'Aquino, Avicenna, Averro√®, Maimonide</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Moderna -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üí° Filosofia Moderna</h3>
<p class="period">XV - XIX secolo</p>
<p>Razionalismo, Empirismo, Idealismo: il soggetto diventa il centro della riflessione filosofica.</p>
<p><strong>Filosofi principali:</strong> Cartesio, Kant, Hegel, Hume, Rousseau</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Contemporanea -->
<div class="timeline-item right">
<div class="timeline-content">
<h3>üåÄ Filosofia Contemporanea</h3>
<p class="period">XIX secolo - oggi</p>
<p>Dalla crisi della metafisica alle filosofie del linguaggio e dell'esistenza. Nuovi approcci alla conoscenza e all'etica.</p>
<p><strong>Filosofi principali:</strong> Nietzsche, Heidegger, Wittgenstein, Foucault, Derrida</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Polacca -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üáµüá± Filosofia Polacca</h3>
<p class="period">XIX‚ÄìXX secolo</p>
<p>Dalla Scuola di Leopoli-Varsavia alla fenomenologia e all'etica del Novecento.</p>
<p><strong>Filosofi principali:</strong> Twardowski, ≈Åukasiewicz, Kotarbi≈Ñski, Ajdukiewicz, Tatarkiewicz</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
</div>
</section>
<!-- -->
<!-- CTA: approfondisci -->
<section class="cta-timeline">
<div class="cta-card">
<h3>üéØ Ti √® piaciuto questo viaggio nella filosofia?</h3>
<p>Approfondisci con i nostri articoli specializzati e risorse esclusive</p>
<div class="cta-buttons">
<!-- porta alla griglia completa nella HOME -->
<a aria-label="Vai alla griglia completa degli articoli" class="cta-btn primary" href="/articoli/#lista-articoli">
  üìñ Esplora Articoli Completi
</a>
<a aria-label="Iscriviti per ricevere contenuti esclusivi" class="cta-btn secondary" href="#" onclick="showNewsletterModal(); return false;">
        üìß Ricevi Contenuti Esclusivi
      </a>
</div>
<p class="cta-note"><small>Unisciti a 2.300+ appassionati di filosofia</small></p>
</div>
</section>
<!-- ANCORAGGIO GRIGLIA: il pulsante #lista-articoli atterra qui -->
<section class="wrap" id="lista-articoli" style="padding:1.2rem 1rem 0;">
<!-- Se hai gi√† una griglia/carte pi√π gi√π: lascia pure vuoto, serve solo l'ancora -->
<!-- In alternativa, puoi mettere qui le card articoli o farle generare via JS -->
<div class="grid">
<!-- facoltativo: placeholder visivo -->
<!-- <article class="card"><h3>Articoli</h3><p>Scorri per esplorare la sezione.</p></article> -->
</div>
</section>
</main>
<!-- Citazioni filosofiche fluttuanti -->
<div class="floating-quotes"><div class="quote-bubble"><div class="quote-text">‚ÄúConosci te stesso‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúSo di non sapere‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúUna vita senza ricerca non √® degna di essere vissuta‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa filosofia comincia con la meraviglia‚Äù</div><div class="quote-author">‚Äî Platone</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa bellezza √® lo splendore del vero‚Äù</div><div class="quote-author">‚Äî Platone</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúSiamo ci√≤ che facciamo ripetutamente. L'eccellenza non √® un atto ma un'abitudine‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa felicit√† dipende da noi stessi‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNulla √® nell'intelletto che prima non sia passato dai sensi‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúTutto scorre‚Äù</div><div class="quote-author">‚Äî Eraclito</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl carattere √® destino‚Äù</div><div class="quote-author">‚Äî Eraclito</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúL'uomo √® misura di tutte le cose‚Äù</div><div class="quote-author">‚Äî Protagora</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúVivere secondo natura‚Äù</div><div class="quote-author">‚Äî Zenone di Cizio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon sono le cose che ci turbano, ma le opinioni che abbiamo su di esse‚Äù</div><div class="quote-author">‚Äî Epitteto</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon √® la morte che dobbiamo temere, ma il non cominciare mai a vivere‚Äù</div><div class="quote-author">‚Äî Marco Aurelio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita √® opinione‚Äù</div><div class="quote-author">‚Äî Marco Aurelio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa felicit√† consiste nel desiderare ci√≤ che si ha‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon esiste vento favorevole per il marinaio che non sa dove andare‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl destino guida chi lo segue e trascina chi si oppone‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúVivi nascosto‚Äù</div><div class="quote-author">‚Äî Epicuro</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúAma e fa' ci√≤ che vuoi‚Äù</div><div class="quote-author">‚Äî Sant'Agostino</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa fede cerca l'intelligenza‚Äù</div><div class="quote-author">‚Äî Anselmo d'Aosta</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúContemplata aliis tradere‚Äù</div><div class="quote-author">‚Äî Tommaso d'Aquino</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon moltiplicare gli enti senza necessit√†‚Äù</div><div class="quote-author">‚Äî Guglielmo di Ockham</div></div><div class="quote-bubble"><div class="quote-text">‚Äú√à meglio essere temuti che amati, se non si pu√≤ essere entrambi‚Äù</div><div class="quote-author">‚Äî Niccol√≤ Machiavelli</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúCogito, ergo sum‚Äù</div><div class="quote-author">‚Äî Cartesio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl cuore ha le sue ragioni che la ragione non conosce‚Äù</div><div class="quote-author">‚Äî Blaise Pascal</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa mente √® una tabula rasa‚Äù</div><div class="quote-author">‚Äî John Locke</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúEsse est percipi‚Äù</div><div class="quote-author">‚Äî George Berkeley</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa bellezza delle cose esiste nella mente di chi le contempla‚Äù</div><div class="quote-author">‚Äî David Hume</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDue cose riempiono l‚Äôanimo: il cielo stellato sopra di me e la legge morale dentro di me‚Äù</div><div class="quote-author">‚Äî Immanuel Kant</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúAgisci in modo da trattare l‚Äôumanit√† sempre come fine e mai semplicemente come mezzo‚Äù</div><div class="quote-author">‚Äî Immanuel Kant</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúQuel che √® reale √® razionale‚Äù</div><div class="quote-author">‚Äî G.W.F. Hegel</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita oscilla tra la noia e il dolore‚Äù</div><div class="quote-author">‚Äî Arthur Schopenhauer</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita dev‚Äôessere compresa all‚Äôindietro, ma va vissuta in avanti‚Äù</div><div class="quote-author">‚Äî S√∏ren Kierkegaard</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúChi ha un perch√© per vivere pu√≤ sopportare quasi ogni come‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDiventa ci√≤ che sei‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon esistono fatti, solo interpretazioni‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDi ci√≤ di cui non si pu√≤ parlare si deve tacere‚Äù</div><div class="quote-author">‚Äî Ludwig Wittgenstein</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl significato √® l‚Äôuso‚Äù</div><div class="quote-author">‚Äî Ludwig Wittgenstein</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl linguaggio √® la casa dell‚Äôessere‚Äù</div><div class="quote-author">‚Äî Martin Heidegger</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúL‚Äôesistenza precede l‚Äôessenza‚Äù</div><div class="quote-author">‚Äî Jean‚ÄëPaul Sartre</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúBisogna immaginare Sisifo felice‚Äù</div><div class="quote-author">‚Äî Albert Camus</div></div></div>
<!-- Footer -->
<footer>
<div class="footer-wrap">
<div class="footer-columns">
<div class="col about">
<h3>Pensieri Filosofici</h3>
<p>Tra pensiero e stelle: un percorso tra scuole, autori<br/> e temi della filosofia, dalla classicit√† al contemporaneo.</p>
</div>
<div class="search-sections">
<h4>Sezioni</h4>
<ul>
<li><a href="pagine/benvenuti.html">Incipit</a></li>
<li><a href="articoli/cinismo.html">Cinismo</a></li>
<li><a href="articoli/epicureismo.html">Epicureismo</a></li>
<li><a href="articoli/filosofia-indiana.html">Filosofia indiana</a></li>
<li><a href="articoli/platonismo.html">Platonismo</a></li>
<li><a href="articoli/scetticismo.html">Scetticismo</a></li>
<li><a href="articoli/stoicismo.html">Stoicismo</a></li>
</ul>
</div>
<div class="col contact">
<h4>Contatti</h4>
<ul>
<li><a href="mailto:info@echidisofia.example">info@echidisofia.example</a></li>
<li><a href="https://casi0048.github.io/pagine/pagina-contatti.html">Modulo contatti</a></li>
</ul>
<div class="social">
<a aria-label="Instagram" href="#"><i class="fa-brands fa-instagram"></i></a>
<a aria-label="YouTube" href="#"><i class="fa-brands fa-youtube"></i></a>
<a aria-label="X/Twitter" href="#"><i class="fa-brands fa-x-twitter"></i></a>
</div>
</div>
</div>
<div class="footer-legal">
<span>¬© <span id="year"></span> Echi di Sofia</span>
<span class="dot">‚Ä¢</span>
<a href="https://casi0048.github.io/pagine/privacy-policy.html">Privacy</a>
<span class="dot">‚Ä¢</span>
<a href="https://casi0048.github.io/pagine/credits.html">Crediti</a>
</div>
</div>
</footer>
<!-- ========== CTA FLOTTANTE ========== -->
<div class="floating-cta" id="floatingNewsletter">
<button onclick="showNewsletterModal()">
    üìß Filosofia in Posta
  </button>
</div>
<!-- ========== MODALE NEWSLETTER ========== -->
<div class="modal" id="newsletterModal">
<div class="modal-content">
<span class="close-modal" onclick="closeNewsletterModal()">√ó</span>
<h3>üìö Iscriviti alla Newsletter Filosofica</h3>
<p>Ricevi articoli esclusivi, risorse gratuite e approfondimenti direttamente nella tua email</p>
<form id="newsletterForm">
<input placeholder="tua.email@esempio.com" required="" type="email"/>
<button type="submit">Iscriviti Ora</button>
</form>
<p class="privacy-note"><small>Rispettiamo la tua privacy. Cancellazione sempre possibile.</small></p>
</div>
</div>
<script>
// === PERFORMANCE & ERROR HANDLING - VERSIONE PULITA ===

document.addEventListener('DOMContentLoaded', function() {
  
  // 1. CARICAMENTO FONT AWESOME SEMPLIFICATO (senza preload problematico)
  const fontAwesomeCSS = document.createElement('link');
  fontAwesomeCSS.rel = 'stylesheet';
  fontAwesomeCSS.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css';
  fontAwesomeCSS.crossOrigin = 'anonymous';
  document.head.appendChild(fontAwesomeCSS);
  console.log('‚úÖ Font Awesome caricato');

  // 2. LAZY LOADING IMMAGINI TIMELINE
  const lazyImages = document.querySelectorAll('.timeline-content img[data-src]');
  
  if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          safeEffect(() => {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            img.classList.add('fade-in');
          }, () => {
            // Fallback: carica immediatamente
            img.src = img.dataset.src;
          });
          observer.unobserve(img);
        }
      });
    }, { 
      rootMargin: '50px 0px',
      threshold: 0.1
    });

    lazyImages.forEach(img => imageObserver.observe(img));
  } else {
    // Fallback per browser senza IntersectionObserver
    lazyImages.forEach(img => {
      img.src = img.dataset.src;
      img.removeAttribute('data-src');
    });
  }

  // 3. GESTIONE ERRORI ROBUSTA
  function safeEffect(callback, fallback = null) {
    try {
      if (typeof callback === 'function') {
        callback();
      }
    } catch (error) {
      console.warn('Effect failed:', error.message);
      if (fallback && typeof fallback === 'function') {
        try {
          fallback();
        } catch (fallbackError) {
          console.error('Fallback also failed:', fallbackError);
        }
      }
    }
  }

  // 4. INIZIALIZZAZIONE SICURA EFFETTI STELLARI
  safeEffect(
    () => {
      // Qui va il tuo initStars() esistente
      if (typeof initStars === 'function') {
        initStars();
      } else {
        // Se initStars non esiste, fallback base
        createBasicStars();
      }
    },
    () => {
      console.log('Stars effect disabled due to performance issues');
      const starsContainer = document.getElementById('starsContainer');
      if (starsContainer) {
        starsContainer.style.display = 'none';
      }
    }
  );

  // 5. FALLBACK STELLE SEMPLIFICATO
  function createBasicStars() {
    const container = document.getElementById('starsContainer');
    if (!container) return;
    
    // Versione semplificata per performance
    for (let i = 0; i < 50; i++) {
      const star = document.createElement('div');
      star.className = 'star small';
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.animationDelay = Math.random() * 5 + 's';
      container.appendChild(star);
    }
  }

  // 6. MONITORAGGIO PERFORMANCE - Versione sicura
  if ('performance' in window) {
    window.addEventListener('load', () => {
      safeDOMOperation(() => {
        // Usa l'API moderna se disponibile
        if (performance.getEntriesByType) {
          const navEntries = performance.getEntriesByType('navigation');
          if (navEntries.length > 0) {
            const navEntry = navEntries[0];
            const loadTime = navEntry.loadEventEnd - navEntry.startTime;
            if (loadTime > 0) {
              console.log(`Page loaded in ${Math.round(loadTime)}ms`);
            }
          }
        }
        // Fallback per browser pi√π vecchi
        else if (performance.timing) {
          const timing = performance.timing;
          if (timing.loadEventEnd > 0 && timing.navigationStart > 0) {
            const loadTime = timing.loadEventEnd - timing.navigationStart;
            if (loadTime > 0) {
              console.log(`Page loaded in ${loadTime}ms`);
            }
          }
        }
      });
    });
  }

  // 7. GESTIONE ERRORI GLOBALE
  window.addEventListener('error', (event) => {
    console.error('Global error caught:', event.error);
    // Non bloccare l'esperienza utente per errori minori
  });

  // 8. GESTIONE OFFLINE
  window.addEventListener('online', () => {
    console.log('Connection restored');
    document.body.classList.remove('offline');
  });

  window.addEventListener('offline', () => {
    console.log('Connection lost');
    document.body.classList.add('offline');
  });

  // 9. CSS PER STATI SPECIALI
  const performanceCSS = `
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    .offline {
      opacity: 0.8;
      filter: grayscale(0.3);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @media (prefers-reduced-motion: reduce) {
      .fade-in {
        animation: none;
      }
    }
  `;

 // Inietta CSS performance
const style = document.createElement('style');
style.textContent = performanceCSS;
document.head.appendChild(style);

console.log('‚úÖ Sistema performance inizializzato');

});

// FUNZIONE safeDOMOperation - SOLO UNA VOLTA!
function safeDOMOperation(operation, fallback = null) {
  try {
    if (typeof operation === 'function') {
      return operation();
    }
  } catch (error) {
    console.warn('DOM operation failed:', error.message);
    if (fallback && typeof fallback === 'function') {
      try {
        return fallback();
      } catch (fallbackError) {
        console.error('Fallback also failed:', fallbackError);
      }
    }
  }
  return null;
}


    

// Crea particelle esplosive che si diffondono sullo schermo
function createExplosionParticles() {
    const colors = ['#FFD700', '#FF6B00', '#FF0000', '#FFFFFF', '#00CCFF'];
    const particleCount = 30;
    
    for (let i = 0; i < particleCount; i++) {
        safeDOMOperation(() => {
            const particle = document.createElement('div');
            const size = Math.random() * 15 + 5;
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            particle.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                width: ${size}px;
                height: ${size}px;
                background: ${color};
                border-radius: 50%;
                pointer-events: none;
                z-index: 2147483601;
                opacity: 0.8;
                box-shadow: 0 0 10px ${color};
            `;
            
            document.body.appendChild(particle);
            
            // Animazione casuale per ogni particella
            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 200;
            const duration = 0.5 + Math.random() * 0.5;
            
            const animation = particle.animate([
                {
                    transform: 'translate(-50%, -50%) scale(1)',
                    opacity: 0.8
                },
                {
                    transform: `translate(${Math.cos(angle) * distance - 50}%, ${Math.sin(angle) * distance - 50}%) scale(0)`,
                    opacity: 0
                }
            ], {
                duration: duration * 1000,
                easing: 'ease-out',
                fill: 'forwards'
            });
            
            // Rimuovi la particella dopo l'animazione
            animation.onfinish = () => {
                safeDOMOperation(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                });
            };
        });
    }
}

// === INTEGRAZIONE CON IL CODICE ESISTENTE ===
document.addEventListener('DOMContentLoaded', function() {
    // Attiva l'esplosione con il pulsante esistente
    const explodeBtn = document.getElementById('btn-explode');
    if (explodeBtn) {
        explodeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            createPageShakingExplosion();
        });
    }
    
    // Aggiungi anche l'esplosione al click sul motto
    const explodingText = document.getElementById('exploding');
    if (explodingText) {
        const originalClick = explodingText.onclick;
        explodingText.addEventListener('click', function(e) {
            // Esegui l'effetto originale se esiste
            if (typeof originalClick === 'function') {
                originalClick.call(this, e);
            }
            // Aggiungi l'esplosione della pagina
            createPageShakingExplosion();
        });
    }
    
    // Stili aggiuntivi per il pulsante esplosione
    const explosionStyles = `
        #btn-explode {
            background: linear-gradient(135deg, #ff6b00, #ff0000) !important;
            border: 2px solid rgba(255,255,255,0.5) !important;
            color: white !important;
            font-weight: bold !important;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
            box-shadow: 0 0 20px rgba(255,107,0,0.7) !important;
            transition: all 0.3s ease !important;
        }
        
        #btn-explode:hover {
            transform: scale(1.1) !important;
            box-shadow: 0 0 30px rgba(255,107,0,0.9) !important;
        }
        
        body {
            transform-origin: center center;
        }
    `;
    
    // Aggiungi gli stili solo se non esistono gi√†
    if (!document.getElementById('explosion-styles')) {
        const styleEl = document.createElement('style');
        styleEl.id = 'explosion-styles';
        styleEl.textContent = explosionStyles;
        document.head.appendChild(styleEl);
    }
});
</script>
<script>
// ========== UTILITY SICURE AGGIUNTE ==========
// Safe DOM manipulation utility
function safeDOMOperation(operation) {
  try {
    if (typeof operation === 'function') {
      return operation();
    }
  } catch (error) {
    console.warn('DOM operation failed:', error.message);
    return null;
  }
}

// Safe element selector
function getElementSafe(selector) {
  return safeDOMOperation(() => {
    const element = typeof selector === 'string' ? 
      document.querySelector(selector) : selector;
    return element && document.body.contains(element) ? element : null;
  });
}

// Safe audio play
function softPlay(audio, volume, delay) {
  try {
    audio.volume = volume || 1.0;
    setTimeout(() => audio.play().catch(() => {}), delay || 0);
  } catch (_) {}
}

      document.addEventListener('DOMContentLoaded', ()=>{
        const effects = document.getElementById('effects-ctrl');
        if(effects && document.body.contains(effects)){
          const host = document.querySelector('.topbar, .top-bar, header .menu-desktop, header nav, header, .navbar');
          if(host && document.body.contains(host)){ 
            try{ 
              host.appendChild(effects); 
              effects.style.position=''; 
              effects.style.top=''; 
              effects.style.right=''; 
            }catch(_){ } 
          }
        }
      });

      // === SLIDER VERTICALE - VERSIONE VELOCIT√Ä MIGLIORATA ===
      (function(){
        const inner = document.getElementById('sliderInner');
        if(!inner) return;
        
        let pos = 0;
        let speed = 0.8; // VELOCIT√Ä BASE PI√ô ALTA
        let dir = 1;
        let running = true;
        
        function step(){
          if(!running){
            requestAnimationFrame(step);
            return;
          }
          pos += dir * speed;
          inner.style.transform = `translateY(${-pos}px)`;
          const total = inner.scrollHeight - inner.clientHeight;
          if(pos >= total) pos = 0;
          if(pos < 0) pos = total;
          requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
        
        const t = document.getElementById('slider-toggle'),
              i = document.getElementById('slider-invert'),
              sp = document.getElementById('slider-speed');
        
        t?.addEventListener('click', () => running = !running);
        i?.addEventListener('click', () => dir *= -1);
        
        // üöÄ REGOLAZIONE VELOCIT√Ä MIGLIORATA
        sp?.addEventListener('input', () => {
          const v = parseInt(sp.value, 10) || 5;
          
          // FORMULA MIGLIORATA: progressione pi√π sensibile
          if(v <= 6) {
            speed = 0.2 + (v - 1) * 0.15;
          } else {
            speed = 0.2 + (v - 1) * 0.25;
          }
        });
        
        // Inizializza con velocit√† media
        if(sp) {
          sp.value = 8;
          sp.dispatchEvent(new Event('input'));
        }
      })();

      window.addEventListener('load',()=>{
        const a=document.getElementById('myAudio'),
              btn=document.getElementById('playPause'),
              tm=document.getElementById('time'),
              v=document.getElementById('volume');
        if(!a||!btn)return;
        function f(s){if(!isFinite(s))return'0:00';const m=Math.floor(s/60),c=Math.floor(s%60);return m+':'+(c<10?'0'+c:c)}
        function u(){tm.textContent=`${f(a.currentTime)} / ${f(a.duration)}`}
        v.value=.8;
        a.volume=parseFloat(v.value);
        btn.addEventListener('click',()=>{
          if(a.paused){
            a.play().catch(()=>{});
            btn.textContent='‚è∏Ô∏è';
          }else{
            a.pause();
            btn.textContent='‚ñ∂Ô∏è';
          }
        });
        v.addEventListener('input',()=>a.volume=parseFloat(v.value));
        a.addEventListener('timeupdate',u);
        a.addEventListener('loadedmetadata',u);
        a.addEventListener('ended',()=>{btn.textContent='‚ñ∂Ô∏è'});
      });

      (function(){
        const b=document.getElementById('russell-btn'),
              h=document.getElementById('russell-hint'),
              a=document.getElementById('russell-audio');
        if(!b||!a)return;
        let u=false;
        function lk(){
          if(u)return;
          u=true;
          a.muted=false;
          a.play().then(()=>{a.pause();a.currentTime=0}).catch(()=>{});
          window.removeEventListener('pointerdown',lk,{capture:true});
          window.removeEventListener('keydown',lk,{capture:true});
        }
        window.addEventListener('pointerdown',lk,{once:true,capture:true,passive:true});
        window.addEventListener('keydown',lk,{once:true,capture:true});
        b.addEventListener('click',()=>{
          try{
            a.currentTime=0;
            a.play().catch(()=>{});
          }catch(_){ }
        });
      })();

      (function(){
        const btn=document.getElementById('btn-thunder'),
              th=document.getElementById('thunder-sound'),
              ex=document.getElementById('explosionSound'),
              ov=document.getElementById('lightning'),
              bo=document.getElementById('bolt');
        if(!btn||!th||!ov||!bo)return;
        let unlocked=false;
        async function unlockOnce(){
          if(unlocked)return;
          unlocked=true;
          for(const s of [th,ex]){
            try{
              s.muted=false;
              await s.play();
              s.pause();
              s.currentTime=0;
            }catch(_){}
          }
        }
        window.addEventListener('pointerdown',unlockOnce,{once:true,passive:true,capture:true});
        window.addEventListener('keydown',unlockOnce,{once:true,capture:true});
        let on=false;
        function up(){
          btn.classList.toggle('active',on);
          btn.setAttribute('aria-pressed',on?'true':'false');
          btn.textContent=on?'‚ö° Tuono: ON':'‚ö° Tuono';
        }
        btn.addEventListener('click',e=>{
          e.preventDefault();
          on=!on;
          if(on){
            try{
              th.currentTime=0;
              softPlay(th, 1.0, 140);
            }catch(_){}
          }else{
            try{
              th.pause();
              th.currentTime=0;
            }catch(_){}
          }
          up();
        });
        up();
        function flash(){
          const x=15+Math.random()*70,
                y=10+Math.random()*65,
                ang=-25+Math.random()*50,
                sy=.8+Math.random()*1.2;
          ov.style.transition='none';
          ov.offsetHeight;
          ov.style.background=`radial-gradient(circle at ${x}% ${y}%, rgba(255,255,255,.95), rgba(255,255,255,.22) 40%, transparent 65%)`;
          ov.style.opacity='1';
          ov.style.transition='opacity 80ms ease-out';
          setTimeout(()=>ov.style.opacity='0',140);
          bo.style.left=x+'%';
          bo.style.top=y+'%';
          bo.style.transform=`translate(-50%,-50%) rotate(${ang}deg) scaleY(${sy})`;
          bo.style.transition='transform 90ms ease-out, opacity 280ms ease-out';
          bo.style.opacity='1';
          setTimeout(()=>bo.style.opacity='0',180);
          if(on){
            try{
              th.currentTime=0;
              softPlay(th, 1.0, 140);
            }catch(_){}
          }
        }
       const LAMPO_MIN_MS = 5000;     // minimo tra un lampo e l'altro
const LAMPO_JITTER_MS = 3000;  // aggiunta casuale (0..JITTER)

(function schedule(){
  setTimeout(()=>{
    flash();
    schedule();
  }, LAMPO_MIN_MS + Math.random()*LAMPO_JITTER_MS);
})();

        document.getElementById('explode-btn')?.addEventListener('click',()=>{
          try{
            ex.muted=false;
            ex.volume=1.0;
            ex.currentTime=0;
            softPlay(ex, 1.0, 140);
          }catch(_){}
        });
      })();
</script>
<script id="search-init-smart">
      (function(){
        // Disattiva eventuale vecchio init (se presente)
        document.querySelectorAll('#search-init-robust').forEach(n => n.remove());
      
        const LIMIT = 20; // quante righe mostrare
        const input = document.getElementById('site-search');
        if (!input) return;
      
        // Pannello risultati: usa il tuo se c'√®, altrimenti lo crea
        function ensurePanel(){
          let panel = document.querySelector('#search-panel, #searchPanel, .search-panel, .results-panel');
          if (!panel) {
            panel = document.createElement('div');
            panel.id = 'search-panel';
            panel.innerHTML = `
              <div class="search-header">
                <h4 class="search-title">Risultati della ricerca</h4>
                <button class="search-close" type="button" aria-label="Chiudi">Chiudi ‚úñ</button>
              </div>
              <div id="search-results" class="search-results"></div>
            `;
            document.body.appendChild(panel);
          }
          // chiudi/ESC
          const closeBtn = panel.querySelector('.search-close, #search-close, [data-role="search-close"]');
          const close = ()=> panel.style.display='none';
          closeBtn && closeBtn.addEventListener('click', close);
          window.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });
          return panel;
        }
        const panel = ensurePanel();
        const resultsWrap = panel.querySelector('#search-results, .search-results, #searchResults');
      
        // ---------- caricamento indice ----------
        let INDEX = [];
        function haveIndex(){ return Array.isArray(INDEX) && INDEX.length; }
      
        function norm(s){
          const NORM_MAP = {'≈Ç':'l','≈Å':'l','√ü':'ss','√∏':'o','√¶':'ae','≈ì':'oe'};
          return (s||'').toString().toLowerCase()
            .replace(/[≈Ç≈Å√ü√∏√¶≈ì]/g, m=>NORM_MAP[m]||m)
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
            .replace(/\s+/g,' ').trim();
        }
        function escapeHTML(s){ return (s||'').replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }
        function hi(hay, q){ // evidenzia la query (semplice)
          if(!q) return escapeHTML(hay||'');
          const a = escapeHTML(hay||''); const n = norm(hay); const nq = norm(q);
          if(!nq) return a;
          // trova pos (prima occorrenza)
          const pos = n.indexOf(nq);
          if(pos<0) return a;
          // ricostruisci evidenziando il range (approssimando con lunghezze uguali: ok per ASCII)
          const pre  = escapeHTML((hay||'').slice(0,pos));
          const mid  = escapeHTML((hay||'').slice(pos, pos+nq.length));
          const post = escapeHTML((hay||'').slice(pos+nq.length));
          return `${pre}<mark>${mid}</mark>${post}`;
        }
      
        function score(query, item){
          const q = norm(query); if(!q) return 0;
          const t = norm(item.title), d = norm(item.desc), u = norm(item.url);
          // parziali: includes su titolo/desc/url
          let s = 0;
          if (t.includes(q)) s += 40;
          if (d.includes(q)) s += 20;
          if (u.includes(q)) s += 10;
          // piccoli bonus per token (migliora ordinamento)
          for (const tok of q.split(' ').filter(Boolean)){
            if (t.startsWith(tok+' ')||t.endsWith(' '+tok)||t.includes(' '+tok+' ')) s+=12;
            if (d.includes(tok)) s+=6;
          }
          return s;
        }
      
        async function loadIndex(){
          if (Array.isArray(window.SEARCH_INDEX) && window.SEARCH_INDEX.length){
            INDEX = window.SEARCH_INDEX;
            return;
          }
          const candidates = (window.SEARCH_INDEX_URLS && window.SEARCH_INDEX_URLS.length)
            ? window.SEARCH_INDEX_URLS
            : ['search-index.json','/search-index.json','/assets/search-index.json'];
          for (const url of candidates){
            try{
              const r = await fetch(url, {cache:'no-store'});
              if (r.ok) { INDEX = await r.json(); return; }
            }catch(e){}
          }
        }
      
        function render(results, q){
          resultsWrap.innerHTML = '';
          if (!results.length){
            resultsWrap.innerHTML = `<div class="result"><em>Nessun risultato</em></div>`;
            return;
          }
          for (const it of results.slice(0, LIMIT)){
            const title = hi(it.title, q);
            const desc  = hi(it.desc||'', q);
            const url   = escapeHTML(it.url||'#');
            const row = document.createElement('div');
            row.className = 'result';
            row.innerHTML = `
              <h4 class="result-title"><a href="${url}">${title}</a></h4>
              ${desc ? `<div class="result-desc">${desc}</div>` : ``}
              <div class="result-source">${escapeHTML((new URL(url, location.href)).hostname || '')}</div>
            `;
            resultsWrap.appendChild(row);
          }
        }
      
        function search(q){
          if(!haveIndex() || !q.trim()){
            panel.style.display = 'none';
            resultsWrap.innerHTML = '';
            return;
          }
          const ranked = INDEX
            .map(it => ({ it, s: score(q, it) }))
            .filter(x => x.s > 0)
            .sort((a,b)=> b.s - a.s)
            .map(x => x.it);
          panel.style.display = 'block';
          render(ranked, q);
        }
      
        // bind input (debounce leggero)
        let t = 0;
        input.addEventListener('input', ()=>{
          clearTimeout(t);
          const q = input.value;
          t = setTimeout(()=> search(q), 90);
        });
      
        // bootstrap: carica indice e se c'√® testo in input, cerca subito
        loadIndex().then(()=>{ if (input.value.trim()) search(input.value); });
      })();
    </script>
<script id="dict-compact-js">
(function(){
  const form = document.getElementById('dict-form');
  const input = document.getElementById('dict-q');
  if(!form || !input) return;
  
  form.addEventListener('submit', function(e){
    e.preventDefault();
    const q = (input.value || '').trim();
    if(!q) { 
      input.focus(); 
      return; 
    }
    
    const checks = form.querySelectorAll('.sources input[type="checkbox"]:checked');
    let opened = 0;
    
    checks.forEach(ch => {
      const tmpl = ch.getAttribute('data-url');
      if(!tmpl) return;
      const url = tmpl.replace('{q}', encodeURIComponent(q));
      const w = window.open(url, '_blank', 'noopener');
      if(w) opened++;
    });
    
    if(!opened){
      window.open('https://duckduckgo.com/?q=site%3Aiep.utm.edu+' + encodeURIComponent(q), '_blank', 'noopener');
    }
  });
})();
</script>


<script id="thunder-toggle-fix">
      (function(){
        const btn = document.getElementById('btn-thunder');
        const audio = document.getElementById('thunder-sound');
        const overlay = document.getElementById('lightning');
        const bolt = document.getElementById('bolt');
        if(!btn || !audio) return;
      
        // evita doppie bind: clona e rimpiazza
        const newBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(newBtn, btn);
      
        // assicura che non vada in loop
        audio.loop = false;
      
        let playing = false;
        function ui() {
          newBtn.setAttribute('aria-pressed', playing ? 'true' : 'false');
          newBtn.textContent = playing ? '‚ö° Tuono: ON' : '‚ö° Tuono';
        }
        function flashOnce(){
          if(!(overlay && bolt)) return;
          overlay.style.opacity='1';
          setTimeout(()=> overlay.style.opacity='0', 140);
          bolt.style.left='70%'; bolt.style.top='20%';
          bolt.style.transform='translate(-50%,-50%) rotate(5deg) scaleY(1.1)';
          bolt.style.opacity='1';
          setTimeout(()=> bolt.style.opacity='0', 180);
        }
        function stop(){
          playing = false;
          try { audio.pause(); audio.currentTime = 0; } catch(_) {}
          ui();
        }
        function start(){
          playing = true;
          try { audio.currentTime = 0; audio.play().catch(()=>{}); } catch(_) {}
          flashOnce();
          ui();
          // üëá se vuoi che si fermi da solo dopo 1.5s, decommenta:
          // setTimeout(stop, 1500);
        }
      
        newBtn.addEventListener('click', (e)=>{
          e.preventDefault();
          if (playing) stop(); else start();
        });
      
        // Esc per fermare
        window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') stop(); });
      
        // quando finisce naturalmente, aggiorna UI
        audio.addEventListener('ended', stop);
      
        ui();
      })();
    </script>
<script id="audio-player-wrap-fix">
      // Se il genitore √® un flex-row senza wrap, abilita il wrap cos√¨ il player va sotto
      (function(){
        const ap = document.getElementById('audio-player');
        if(!ap) return;
        const parent = ap.parentElement;
        const cs = parent && getComputedStyle(parent);
        if (cs && cs.display.includes('flex') && cs.flexWrap === 'nowrap') {
          parent.style.flexWrap = 'wrap';
          // opzionale: distanza tra la riga dei controlli slider e il player
          parent.style.rowGap = parent.style.rowGap || '.5rem';
        }
      })();
    </script>
<script id="search-related-augment">
      (function(){
        const input       = document.getElementById('site-search');
        const resultsWrap = document.querySelector('#search-results, .search-results, #searchResults');
        const INDEX       = Array.isArray(window.SEARCH_INDEX) ? window.SEARCH_INDEX : null;
        if(!input || !resultsWrap || !INDEX) return;
      
        // normalizza (accent-fold: it/pl ecc.)
        const NORM_MAP = {'≈Ç':'l','≈Å':'l','√ü':'ss','√∏':'o','√¶':'ae','≈ì':'oe'};
        function norm(s){
          return (s||'').toString().toLowerCase()
            .replace(/[≈Ç≈Å√ü√∏√¶≈ì]/g, m=>NORM_MAP[m]||m)
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
            .replace(/[^a-z0-9\s]/g,' ').replace(/\s+/g,' ').trim();
        }
      
        // scoring semplice: titolo >> descrizione > url + bonus per token match
        function score(query, item){
          const q = norm(query); if(!q) return 0;
          const t = norm(item.title), d = norm(item.desc), u = norm(item.url);
          let s=0;
          if(t===q) s+=100;
          if(t.includes(q)) s+=40;
          if(d.includes(q)) s+=20;
          if(u.includes(q)) s+=10;
          const toks = q.split(' ').filter(Boolean);
          for(const tok of toks){
            if(t.startsWith(tok+' ')||t.endsWith(' '+tok)||t.includes(' '+tok+' ')) s+=12;
            if(d.includes(tok)) s+=6;
            if(u.includes(tok)) s+=3;
          }
          return s;
        }
      
        function grabShownUrls(){
          const set = new Set();
          resultsWrap.querySelectorAll('a[href]').forEach(a=> set.add(a.getAttribute('href')));
          return set;
        }
      
        function topRelated(query, exclude, limit=6){
          return INDEX.map(it=>({it, s:score(query,it)}))
            .filter(x=>x.s>0 && !exclude.has(x.it.url))
            .sort((a,b)=>b.s-a.s)
            .slice(0, limit)
            .map(x=>x.it);
        }
      
        function ensureBox(){
          let box = document.getElementById('related-results');
          if(!box){
            box = document.createElement('div');
            box.id = 'related-results';
            box.className = 'related-results';
            box.innerHTML = '<h4 class="related-header">Risultati correlati (ricerca ampliata)</h4><ul class="related-list"></ul>';
            resultsWrap.appendChild(box);
          }
          return box;
        }
      
        function renderRelated(list){
          const box = ensureBox();
          const ul  = box.querySelector('.related-list');
          ul.innerHTML = '';
          list.forEach(it=>{
            const li = document.createElement('li');
            li.className = 'related-item';
            li.innerHTML = `<a href="${it.url}"><strong>${it.title}</strong></a>` +
                           (it.desc ? `<div class="meta">${it.desc}</div>` : '');
            ul.appendChild(li);
          });
          box.style.display = list.length ? 'block' : 'none';
        }
      
        function updateRelated(){
          const q = input.value || '';
          if(!q.trim()){ renderRelated([]); return; }
          const shown = grabShownUrls();
          // Se il pannello mostra *pochissimi* risultati (es. 0‚Äì1), proponi correlati
          const visibleItems = resultsWrap.querySelectorAll(':scope > *'); // fallback generico
          if(visibleItems.length <= 1){
            renderRelated(topRelated(q, shown, 6));
          }else{
            renderRelated([]);
          }
        }
      
        // osserva cambi al pannello + input
        const mo = new MutationObserver(()=> updateRelated());
        mo.observe(resultsWrap, {childList:true, subtree:true});
        input.addEventListener('input', ()=> setTimeout(updateRelated, 80));
        document.addEventListener('DOMContentLoaded', updateRelated);
      })();
    </script>
<script id="search-clear-js">
document.addEventListener('DOMContentLoaded', ()=>{
  const input = document.getElementById('site-search');
  const box   = document.querySelector('.search-container');
  if(!input || !box) return;

  // crea il bottone solo se non esiste gi√†
  let btn = box.querySelector('.clear-search');
  if(!btn){
    btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'clear-search';
    btn.setAttribute('aria-label','Cancella');
    box.appendChild(btn);
  }

  // fallback: mostra/nascondi anche dove :has non c'√®
  function sync(){
    btn.style.display = input.value ? 'flex' : 'none';
  }
  input.addEventListener('input', sync);
  input.addEventListener('change', sync);

  // click: svuota, aggiorna risultati e rimetti focus
  btn.addEventListener('click', ()=>{
    input.value = '';
    input.dispatchEvent(new Event('input', {bubbles:true}));
    input.focus();
    sync();
  });

  // Esc cancella (comodo da tastiera)
  input.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape'){
      e.preventDefault();
      btn.click();
    }
  });

  sync();
});
</script>
<!-- Cookie Banner -->
<div aria-label="Impostazioni cookie" aria-live="polite" class="cc-banner" id="cookie-banner" role="dialog">
<div>
<h4 class="cc-title">üç™ Utilizziamo i cookie</h4>
<p class="cc-text">
      Usiamo cookie necessari e, previo consenso, cookie per analisi e miglioramento.
      Puoi modificare le scelte in qualsiasi momento. Leggi la <a class="cc-link" href="https://casi0048.github.io/pagine/privacy-policy.html" rel="noopener" target="_blank">Privacy &amp; Cookie Policy</a>.
    </p>
</div>
<div class="cc-actions">
<button class="cc-btn" id="cc-decline" type="button">Rifiuta</button>
<button class="cc-btn" id="cc-customize" type="button">Personalizza</button>
<button class="cc-btn solid" id="cc-accept" type="button">Accetta tutto</button>
</div>
</div>
<!-- Modale preferenze -->
<div aria-hidden="true" aria-label="Preferenze cookie" class="cc-modal" id="cookie-modal">
<div class="cc-card" role="document">
<h3>Preferenze cookie</h3>
<p class="cc-text">Seleziona le categorie non necessarie che desideri attivare.</p>
<div class="cc-row">
<div>
<div><span class="cc-badge">Necessari</span> Sempre attivi</div>
<p class="cc-desc">Richiesti per il corretto funzionamento del sito.</p>
</div>
<div class="cc-switch"><input aria-label="Cookie necessari" checked="" disabled="" type="checkbox"/></div>
</div>
<div class="cc-row">
<div>
<div>Preferenze</div>
<p class="cc-desc">Memorizzano scelte del sito (es. lingua).</p>
</div>
<div class="cc-switch"><input aria-label="Cookie preferenze" id="cc-pref" type="checkbox"/></div>
</div>
<div class="cc-row">
<div>
<div>Statistiche</div>
<p class="cc-desc">Aiutano a capire come usi il sito (in forma aggregata).</p>
</div>
<div class="cc-switch"><input aria-label="Cookie statistiche" id="cc-analytics" type="checkbox"/></div>
</div>
<div class="cc-row">
<div>
<div>Marketing</div>
<p class="cc-desc">Contenuti/embeds esterni che potrebbero impostare cookie.</p>
</div>
<div class="cc-switch"><input aria-label="Cookie marketing" id="cc-marketing" type="checkbox"/></div>
</div>
<div class="cc-actions-row">
<button class="cc-btn outline" id="cc-cancel" type="button">Annulla</button>
<button class="cc-btn" id="cc-reject-all" type="button">Rifiuta tutto</button>
<button class="cc-btn solid" id="cc-save" type="button">Salva preferenze</button>
</div>
</div>
</div>
<!-- Biscottino (riapri preferenze) -->
<button aria-label="Preferenze cookie" id="cookie-fab" title="Preferenze cookie">üç™ Cookie</button>
<script>
// ========== GESTIONE ERRORI GLOBALE ==========
window.addEventListener('error', function(e) {
  console.error('Errore globale:', e.error);
});

// Safe element selector con fallback
function safeQuery(selector, context = document) {
  try {
    return context.querySelector(selector);
  } catch (error) {
    console.warn(`Elemento ${selector} non trovato:`, error);
    return null;
  }
}
</script>
<script id="cookie-consent-js">
(function(){
  const LS_KEY = 'cookieConsent.v1';
  const $ = (s,c=document)=>c.querySelector(s);

  const banner = $('#cookie-banner');
  const modal  = $('#cookie-modal');
  const fab    = $('#cookie-fab');

  const pref   = $('#cc-pref');
  const anal   = $('#cc-analytics');
  const mark   = $('#cc-marketing');

  const btnAccept  = $('#cc-accept');
  const btnDecline = $('#cc-decline');
  const btnCustom  = $('#cc-customize');
  const btnSave    = $('#cc-save');
  const btnCancel  = $('#cc-cancel');
  const btnRejectAll = $('#cc-reject-all');

  function getStored(){
    try{ return JSON.parse(localStorage.getItem(LS_KEY)) || null; }catch(e){ return null; }
  }
  function store(consent){
    localStorage.setItem(LS_KEY, JSON.stringify({ ts: Date.now(), consent }));
  }

  // Iniettabile: qui caricherai librerie solo se consentito
  function apply(consent){
    // Esempio: se analytics true, carica GA (placeholder)
    if (consent.analytics){
      // loadAnalytics(); // <- qui il tuo script reale
    }
    // Se marketing false, puoi nascondere/‚Äúoffuscare‚Äù embed terzi
    // ‚Ä¶
  }

  function openBanner(){ banner.classList.add('open'); }
  function closeBanner(){ banner.classList.remove('open'); }
  function openModal(){ modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); }
  function closeModal(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); }

  // Prime impostazioni dall‚Äôarchivio
  const stored = getStored();
  if (!stored){ openBanner(); }  // mostra il banner solo se manca consenso
  else { apply(stored.consent); }

  // Pulsanti banner
  btnAccept.addEventListener('click', ()=>{
    const consent = { preferences:true, analytics:true, marketing:true };
    store(consent); apply(consent); closeBanner();
  });
  btnDecline.addEventListener('click', ()=>{
    const consent = { preferences:false, analytics:false, marketing:false };
    store(consent); apply(consent); closeBanner();
  });
  btnCustom.addEventListener('click', ()=>{
    // precompila gli switch dalla memoria
    const s = getStored();
    pref.checked = !!(s && s.consent.preferences);
    anal.checked = !!(s && s.consent.analytics);
    mark.checked = !!(s && s.consent.marketing);
    openModal();
  });

  // Pulsanti modale
  btnSave.addEventListener('click', ()=>{
    const consent = { preferences:pref.checked, analytics:anal.checked, marketing:mark.checked };
    store(consent); apply(consent); closeModal(); closeBanner();
  });
  btnCancel.addEventListener('click', ()=> closeModal());
  btnRejectAll.addEventListener('click', ()=>{
    pref.checked = anal.checked = mark.checked = false;
  });

  // Biscottino: riapre la modale in ogni momento
  fab.addEventListener('click', ()=>{
    const s = getStored();
    pref.checked = !!(s && s.consent.preferences);
    anal.checked = !!(s && s.consent.analytics);
    mark.checked = !!(s && s.consent.marketing);
    openModal();
  });

  // Evita sovrapposizione con il box di Russell: se collide, sposta a destra
  function avoidOverlap(){
    const rb = document.getElementById('russell-box'); /* presente nel tuo file */ 
    if(!rb) return;
    const r1 = fab.getBoundingClientRect();
    const r2 = rb.getBoundingClientRect();
    const overlap = !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom);
    if(overlap){
      fab.style.left = 'auto';
      fab.style.right = '1.25rem';
    }else{
      fab.style.right = 'auto';
      fab.style.left  = '1.25rem';
    }
  }
  avoidOverlap();
  window.addEventListener('resize', avoidOverlap);
  window.addEventListener('scroll', avoidOverlap);

  // ESC chiude la modale
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
})();
</script>
<script>
/* === Floating Quotes Controller v2 === */
(function(){
  var timer = null, idx = 0, paused = false;
  function qs(a){ return document.querySelector(a); }
  function qsa(a){ return Array.prototype.slice.call(document.querySelectorAll(a)); }
  function step(bubbles){
    if(!bubbles.length) return;
     document.querySelector('.floating-quotes').style.zIndex = '20';
    // Remove show from all
    bubbles.forEach(function(b){ b.classList.remove("show"); });
    // Add to current
    bubbles[idx].classList.add("show");
    idx = (idx + 1) % bubbles.length;
  }
  function start(){
    var bubbles = qsa(".floating-quotes .quote-bubble");
    if(!bubbles.length) return;
     document.querySelector('.floating-quotes').style.zIndex = '20';
    // Sanitize initial: ensure only one .show
    var any = bubbles.some(function(b){ return b.classList.contains("show"); });
    if(!any){ idx = 0; }
    else { idx = (bubbles.findIndex(function(b){ return b.classList.contains("show"); }) + 1) % bubbles.length; }
    step(bubbles);
    clearInterval(timer);
    timer = setInterval(function(){ if(!paused) step(bubbles); }, 8000);
    // Pause on hover
    var box = qs(".floating-quotes");
    if(box){
      box.addEventListener("mouseenter", function(){ paused = true; });
      box.addEventListener("mouseleave", function(){ paused = false; });
    }
  }
  // Re-init safe on DOM ready and after 1s (in case of late inserts)
  if(document.readyState!=="loading") start(); else document.addEventListener("DOMContentLoaded", start);
  setTimeout(start, 1000);
})();</script>
<script>
/* === Typing Controller v4 - FLUIDO === */
(function(){
  function ready(fn){ 
    if(document.readyState!=="loading") fn(); 
    else document.addEventListener("DOMContentLoaded", fn); 
  }
  
  ready(function(){
    var el = document.querySelector(".typing-effect");
    if(!el) return;
    
    // Aggiungi cursor se non esiste
    if(!el.querySelector('.cursor')) {
      el.innerHTML += '<span class="cursor">|</span>';
    }
    
    var phrases = [
      "‚ÄúLa filosofia comincia con la meraviglia.‚Äù ‚Äî Platone",
      "‚ÄúSapere di non sapere √® il principio della saggezza.‚Äù ‚Äî Socrate",
      "‚ÄúLa misura dell‚Äôuomo √® l‚Äôuomo.‚Äù ‚Äî Protagora",
      "‚ÄúLa conoscenza √® potere.‚Äù ‚Äî Francis Bacon",
      "‚ÄúL'uomo √® un lupo per l'uomo.‚Äù ‚Äî Thomas Hobbes",
      "‚ÄúLa mente √® una tabula rasa.‚Äù ‚Äî John Locke",
      "‚ÄúEsse est percipi (essere √® essere percepito).‚Äù ‚Äî George Berkeley",
      "‚ÄúLa ragione √® schiava delle passioni.‚Äù ‚Äî David Hume",
      "‚ÄúIl cielo stellato sopra di me e la legge morale in me.‚Äù ‚Äî Immanuel Kant",
      "‚ÄúViviamo nel migliore dei mondi possibili.‚Äù ‚Äî Gottfried Wilhelm Leibniz",
      "‚ÄúIl cuore ha le sue ragioni che la ragione non conosce.‚Äù ‚Äî Blaise Pascal",
      "‚ÄúLa libert√† √® il riconoscimento della necessit√†.‚Äù ‚Äî G.W.F. Hegel",
      "‚ÄúDio √® morto.‚Äù ‚Äî Friedrich Nietzsche",
      "‚ÄúDiventa ci√≤ che sei.‚Äù ‚Äî Friedrich Nietzsche",
      "‚ÄúIl mondo √® la mia rappresentazione.‚Äù ‚Äî Arthur Schopenhauer",
      "‚ÄúLa vita pu√≤ essere compresa solo all'indietro, ma va vissuta in avanti.‚Äù ‚Äî S√∏ren Kierkegaard",
      "‚ÄúL'esistenza precede l'essenza.‚Äù ‚Äî Jean-Paul Sartre",
      "‚ÄúL'inferno sono gli altri.‚Äù ‚Äî Jean-Paul Sartre",
      "‚ÄúBisogna immaginare Sisifo felice.‚Äù ‚Äî Albert Camus",
      "‚ÄúDonna non si nasce, lo si diventa.‚Äù ‚Äî Simone de Beauvoir",
      "‚ÄúLa banalit√† del male.‚Äù ‚Äî Hannah Arendt",
      "‚ÄúLa scienza avanza per congetture e confutazioni.‚Äù ‚Äî Karl Popper",
      "‚ÄúIl problema dell'umanit√† √® che gli stupidi sono sicurissimi, mentre gli intelligenti sono pieni di dubbi.‚Äù ‚Äî Bertrand Russell",
      "‚ÄúLa mente e il corpo sono una sola e medesima cosa.‚Äù ‚Äî Baruch Spinoza",
      "‚ÄúNon si scende due volte nello stesso fiume.‚Äù ‚Äî Eraclito",
      "‚ÄúL'essere √®, il non-essere non √®.‚Äù ‚Äî Parmenide",
      "‚ÄúIl piacere √® il principio e il fine della vita felice.‚Äù ‚Äî Epicuro",
      "‚ÄúNon sono le cose a turbare gli uomini, ma i giudizi che essi formulano sulle cose.‚Äù ‚Äî Epitteto",
      "‚ÄúLa felicit√† della tua vita dipende dalla qualit√† dei tuoi pensieri.‚Äù ‚Äî Marco Aurelio",
      "‚ÄúNon esiste vento favorevole per il marinaio che non sa dove andare.‚Äù ‚Äî Seneca",
      "‚ÄúAma e fa' ci√≤ che vuoi.‚Äù ‚Äî Agostino d'Ippona",
      "‚ÄúTemo l'uomo di un solo libro.‚Äù ‚Äî Tommaso d'Aquino",
      "‚ÄúCredo per comprendere.‚Äù ‚Äî Anselmo d'Aosta",
      "‚Äú√à meglio essere temuti che amati, se non si pu√≤ essere entrambi.‚Äù ‚Äî Niccol√≤ Machiavelli",
      "‚ÄúL'uomo nasce libero, ma ovunque √® in catene.‚Äù ‚Äî Jean-Jacques Rousseau",
      "‚ÄúSe Dio non esistesse, bisognerebbe inventarlo.‚Äù ‚Äî Voltaire",
      "‚ÄúIl linguaggio √® la casa dell'Essere.‚Äù ‚Äî Martin Heidegger",
      "‚ÄúSu ci√≤ di cui non si pu√≤ parlare si deve tacere.‚Äù ‚Äî Ludwig Wittgenstein",
      "‚ÄúDove c'√® potere, c'√® resistenza.‚Äù ‚Äî Michel Foucault",
      "‚ÄúEssere che pu√≤ essere compreso √® linguaggio.‚Äù ‚Äî Hans-Georg Gadamer",
      "‚ÄúUn viaggio di mille miglia comincia con un solo passo.‚Äù ‚Äî Laozi",
      "‚ÄúCi√≤ che sappiamo √® una goccia, ci√≤ che ignoriamo √® un oceano.‚Äù ‚Äî Isaac Newton",
      "‚ÄúCogito, ergo sum.‚Äù ‚Äî Cartesio"
    ];
    
    var i = 0, j = 0, isDeleting = false, pauseCount = 0;
    var baseSpeed = 60; // Velocit√† base pi√π lenta per fluidit√†
    var pauseThreshold = 60; // Pausa pi√π lunga
    
    function typeCharacter() {
      var currentPhrase = phrases[i];
      var cursor = '<span class="cursor">|</span>';
      
      if (!isDeleting) {
        // SCRITTURA - pi√π fluida
        if (j <= currentPhrase.length) {
          el.innerHTML = currentPhrase.slice(0, j) + cursor;
          j++;
          
          // Velocit√† variabile per effetto pi√π naturale
          var speed = baseSpeed + (Math.random() * 30 - 15); // ¬±15ms di variazione
          setTimeout(typeCharacter, speed);
        } else {
          // Fine scrittura - pausa
          pauseCount++;
          if (pauseCount > pauseThreshold) {
            isDeleting = true;
            pauseCount = 0;
            setTimeout(typeCharacter, 100);
          } else {
            setTimeout(typeCharacter, 50);
          }
        }
      } else {
        // CANCELLAZIONE - pi√π fluida
        if (j >= 0) {
          el.innerHTML = currentPhrase.slice(0, j) + cursor;
          j--;
          
          // Cancellazione leggermente pi√π veloce ma fluida
          var deleteSpeed = baseSpeed * 0.7 + (Math.random() * 20 - 10);
          setTimeout(typeCharacter, deleteSpeed);
        } else {
          // Fine cancellazione - passa alla frase successiva
          isDeleting = false;
          i = (i + 1) % phrases.length;
          j = 0;
          setTimeout(typeCharacter, 300); // Breve pausa tra le frasi
        }
      }
    }
    
    // Inizia dopo un breve delay
    setTimeout(typeCharacter, 1000);
  });
})();
</script><div aria-live="polite" id="quote-runner"></div><script>
/* === quote-runner (center slider) === */
(function(){
  function ready(fn){ if(document.readyState!=="loading") fn(); else document.addEventListener("DOMContentLoaded", fn); }
  ready(function(){
    var source = document.querySelectorAll(".floating-quotes .quote-bubble");
    var runner = document.getElementById("quote-runner");
    if(!runner) return;
    function hasBubbles(){ return document.querySelectorAll(".floating-quotes .quote-bubble").length; }
    var idx = 0;
    function showNext(){
      var src = document.querySelectorAll(".floating-quotes .quote-bubble");
      if(!src.length){ return; }
      runner.innerHTML = "";
      var clone = src[idx].cloneNode(true);
      clone.classList.add("slide-in");
      runner.appendChild(clone);
      idx = (idx + 1) % src.length;
    }
    showNext();
    setInterval(showNext, 9000);
  });
})();
</script>
<script>
/* === Timeline scroll reveal (IO) v2 === */
document.addEventListener("DOMContentLoaded", function(){
  var items = Array.prototype.slice.call(document.querySelectorAll(".timeline-item"));
  if (!items.length) return;
  items.forEach(function(el, i){
    el.classList.remove("left","right","visible");
    el.classList.add(i % 2 === 0 ? "left" : "right");
  });
  function computeDelay(el){
    var rect = el.getBoundingClientRect();
    var y = Math.max(0, Math.min(1, (rect.top / Math.max(1, window.innerHeight))));
    var w = Math.max(320, window.innerWidth || 0);
    var scale = (w >= 1200) ? 1.6 : (w >= 1024 ? 1.4 : (w >= 601 ? 1.1 : 0.8));
    var base = Math.round(y * 250 * scale);
    var jitter = Math.round((Math.random()*120));
    return base + jitter;
  }
  var io = new IntersectionObserver(function(entries){
    entries.forEach(function(entry){
      if (entry.isIntersecting) {
        var d = computeDelay(entry.target);
        entry.target.style.setProperty("--delay", d + "ms");
        entry.target.classList.add("visible");
        io.unobserve(entry.target);
      }
    });
  }, { root: null, rootMargin: "0px 0px -8% 0px", threshold: 0.18 });
  items.forEach(function(el){ io.observe(el); });
  // Sync iniziale + fallback
  function initialSync(){
    var vh = Math.max(1, window.innerHeight || 1);
    items.forEach(function(el){
      if (!el.classList.contains('visible')){
        var r = el.getBoundingClientRect();
        if (r.top < vh*0.88 && r.bottom > vh*0.12){ el.classList.add('visible'); }
      }
    });
  }
  function scrollFallback(){
    var vh = Math.max(1, window.innerHeight || 1);
    items.forEach(function(el){
      if (!el.classList.contains('visible')){
        var r = el.getBoundingClientRect();
        if (r.top < vh*0.9 && r.bottom > 0){ el.classList.add('visible'); }
      }
    });
  }
  requestAnimationFrame(initialSync);
  window.addEventListener('scroll', scrollFallback, {passive:true});
  window.addEventListener('resize', scrollFallback);
});
</script>
<script id="quote-runner-js-solid-2025-10-08">
(function(){
  function ready(fn){ 
    if(document.readyState!=='loading') fn(); 
    else document.addEventListener('DOMContentLoaded', fn); 
  }
  
  function qsa(sel, root){
    return Array.prototype.slice.call((root || document).querySelectorAll(sel));
  }
  
  ready(function(){
    var runner = document.getElementById('quote-runner');
    if(!runner) return;
    var PERIOD = 9000;
    
    function readSource(){
      var list = qsa('.floating-quotes .quote-bubble');
      return list.map(function(q){
        var qt = q.querySelector('.quote-text');
        var qa = q.querySelector('.quote-author');
        return {
          t: (qt ? qt.textContent.trim() : ''), 
          a: (qa ? qa.textContent.trim() : '')
        };
      });
    }
    
    var data = readSource();
    if (!data.length){
      data = [
        {t:'‚ÄúConosci te stesso‚Äù', a:'‚Äî Socrate'},
        {t:'‚ÄúLa filosofia comincia con la meraviglia‚Äù', a:'‚Äî Platone'},
        {t:'‚ÄúCogito, ergo sum‚Äù', a:'‚Äî Cartesio'}
      ];
    }
    
    var idx = Math.floor(Math.random() * data.length);
    
    function render(item){
      runner.innerHTML = '';
      var b = document.createElement('div');
      b.className = 'quote-bubble slide-in';
      
      var qt = document.createElement('div');
      qt.className = 'quote-text';
      qt.textContent = item.t;
      
      var qa = document.createElement('div');
      qa.className = 'quote-author';
      qa.textContent = item.a;
      
      b.appendChild(qt);
      b.appendChild(qa);
      runner.appendChild(b);
    }
    
    function next(){
      render(data[idx]);
      idx = (idx + 1) % data.length;
    }
    
    next();
    setInterval(next, PERIOD);
  });
})();
</script>
<script>if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
}</script>
<script id="boomfx-js-2025-10-09">(function(){
  function byId(id){ return document.getElementById(id); }
  var exploding = byId('exploding');
  if(!exploding) return;
  if(!exploding.__wrapped){
    var wrap = document.createElement('span');
    wrap.className = 'exploding-stage';
    exploding.parentNode.insertBefore(wrap, exploding);
    wrap.appendChild(exploding);
    exploding.__wrapped = true;
  }
  function buildChars(target){
    if(target.__charsBuilt) return;
    var nodes = Array.from(target.childNodes);
    target.innerHTML = '';
    nodes.forEach(function(n){
      if(n.nodeType === 3){ // text
        var txt = n.nodeValue;
        for(var i=0;i<txt.length;i++){
          var span = document.createElement('span');
          span.className = 'char';
          span.textContent = txt[i];
          target.appendChild(span);
        }
      }else{
        target.appendChild(n); // keep tags like <b> etc.
      }
    });
    target.__charsBuilt = true;
  }
  function rand(min,max){ return Math.random()*(max-min)+min; }
  function spawnShockFlash(x,y){
    var root = document.body;
    var ring = document.createElement('div');
    ring.className = 'boom-shockwave';
    ring.style.setProperty('--x', x+'px');
    ring.style.setProperty('--y', y+'px');
    var flash = document.createElement('div');
    flash.className = 'boom-flash';
    flash.style.setProperty('--x', x+'px');
    flash.style.setProperty('--y', y+'px');
    root.appendChild(ring); root.appendChild(flash);
    setTimeout(function(){ ring.remove(); flash.remove(); }, 1200);
  }
  function spawnSparks(x,y){
    var root = document.body;
    var isMobile = (window.matchMedia && window.matchMedia('(max-width: 768px)').matches);
    var N = isMobile ? 50 : 110;
    for (var i=0;i<N;i++){
      var s = document.createElement('div');
      s.className = 'boom-spark';
      s.style.setProperty('--x', x+'px'); s.style.setProperty('--y', y+'px');
      var ang = Math.random()*Math.PI*2;
      var spd = rand(120, isMobile? 360 : 520);
      var dx = Math.cos(ang)*spd;
      var dy = Math.sin(ang)*spd + rand(40,120);
      var rot = rand(-540,540);
      var dur = rand(900,1400);
      var fade = dur + rand(0,200);
      var b0 = rand(0,.6), b1 = rand(.6,2.2);
      var size = rand(3,7);
      s.style.setProperty('--dx', dx.toFixed(1)+'px');
      s.style.setProperty('--dy', dy.toFixed(1)+'px');
      s.style.setProperty('--rot', rot.toFixed(1)+'deg');
      s.style.setProperty('--dur', Math.round(dur)+'ms');
      s.style.setProperty('--fade', Math.round(fade)+'ms');
      s.style.setProperty('--b0', b0.toFixed(2)+'px');
      s.style.setProperty('--b1', b1.toFixed(2)+'px');
      s.style.setProperty('--w', size.toFixed(1)+'px');
      s.style.setProperty('--h', size.toFixed(1)+'px');
      root.appendChild(s);
      setTimeout((function(el){ return function(){ el.remove(); }; })(s), fade+80);
    }
  }
  function explodeAt(target, x, y){
    buildChars(target);
    document.body.classList.add('boom-shake');
    setTimeout(function(){ document.body.classList.remove('boom-shake'); }, 560);
    target.classList.add('boom-primed');
    setTimeout(function(){
      target.classList.remove('boom-primed');
      target.classList.add('boom-active');
      var rect = target.getBoundingClientRect();
      var cx = rect.left + rect.width/2, cy = rect.top + rect.height/2;
      var chars = target.querySelectorAll('.char');
      for (var i=0;i<chars.length;i++){
        var el = chars[i];
        var bb = el.getBoundingClientRect();
        var vx = (bb.left + bb.width/2) - cx;
        var vy = (bb.top + bb.height/2) - cy;
        var dist = Math.max(1, Math.sqrt(vx*vx + vy*vy));
        var mult = rand(120, 300);
        var dx = (vx/dist) * mult + rand(-60,60);
        var dy = (vy/dist) * mult + rand(-60,60);
        var dz = rand(-140,140);
        el.style.setProperty('--dx', dx.toFixed(1)+'px');
        el.style.setProperty('--dy', dy.toFixed(1)+'px');
        el.style.setProperty('--dz', dz.toFixed(1)+'px');
        el.style.setProperty('--rx', rand(-40,40).toFixed(1)+'deg');
        el.style.setProperty('--ry', rand(-60,60).toFixed(1)+'deg');
        el.style.setProperty('--rz', rand(-120,120).toFixed(1)+'deg');
        el.style.setProperty('--blur', rand(.2,1.4).toFixed(2)+'px');
        el.style.setProperty('--td', Math.round(rand(820,1150))+'ms');
      }
      spawnShockFlash(x,y);
      spawnSparks(x,y);
      var boom = document.getElementById('explosionSound');
      try{ if(boom){ boom.currentTime=0; boom.volume=1.0; boom.muted=false; softPlay(boom, 1.0, 140).catch(function(){}); } }catch(_){}
      setTimeout(function(){
        target.classList.remove('boom-active');
        var chars2 = target.querySelectorAll('.char');
        for (var j=0;j<chars2.length;j++){
          (function(el,k){
            setTimeout(function(){
              el.style.setProperty('--dx','0px');
              el.style.setProperty('--dy','0px');
              el.style.setProperty('--dz','0px');
              el.style.setProperty('--rx','0deg');
              el.style.setProperty('--ry','0deg');
              el.style.setProperty('--rz','0deg');
              el.style.setProperty('--blur','0px');
              el.style.setProperty('--td', Math.round(rand(400,700))+'ms');
              el.style.opacity='1'; el.style.transform='translate3d(0,0,0)';
            }, k*8);
          })(chars2[j], j);
        }
      }, 1200);
    }, 120);
  }
  function onClick(e){
    var x = (e && 'clientX' in e) ? e.clientX : (window.innerWidth/2);
    var y = (e && 'clientY' in e) ? e.clientY : (window.innerHeight/2);
    explodeAt(exploding, x, y);
    setTimeout(function(){ explodeAt(exploding, x, y); }, 260); // boom‚Äìboom
  }
  exploding.style.cursor='pointer';
  exploding.addEventListener('click', onClick, true);
  var btn = document.getElementById('btn-explode') || document.getElementById('explode-btn');
  if(btn){ btn.addEventListener('click', function(ev){ ev.preventDefault(); onClick(ev); }, true); }
})();</script>

<script id="gt-wire">
document.addEventListener('DOMContentLoaded', function() {
  var translateSelect = document.getElementById('customTranslate');
  function clearCookie(){
    var past='Thu, 01 Jan 1970 00:00:00 GMT';
    document.cookie='googtrans=; expires='+past+'; path=/;';
    document.cookie='googtrans=; expires='+past+'; path=/; domain='+location.hostname+';';
  }
  function openWebTranslate(lang){
    var u = location.href; var sl='it';
    var url='https://translate.google.com/translate?hl='+encodeURIComponent(lang)+'&sl='+encodeURIComponent(sl)+'&tl='+encodeURIComponent(lang)+'&u='+encodeURIComponent(u);
    window.open(url, '_blank', 'noopener');
  }
  function setCombo(lang){
    var combo = document.querySelector('.goog-te-combo');
    if(combo){
      combo.value = lang; combo.dispatchEvent(new Event('change')); return true;
    }
    var frame = document.querySelector('.goog-te-menu-frame');
    if(frame && frame.contentDocument){
      var select = frame.contentDocument.querySelector('.goog-te-combo');
      if(select){ select.value = lang; select.dispatchEvent(new Event('change')); return true; }
    }
    return false;
  }
  function loadGT(){
    if(!(window.google && google.translate)){
      var s=document.createElement('script');
      s.src='https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
      s.async=true;
      s.onerror=function(){ document.documentElement.setAttribute('data-gt-error','load-failed'); };
      document.head.appendChild(s);
    }
  }
  function translatePage(lang){
    if(!lang) return;
    if(lang==='it'){ clearCookie(); setTimeout(function(){ location.reload(); }, 50); return; }
    loadGT();
    var tries=0;
    (function wait(){
      if(window.google && google.translate){
        try{ if(!document.querySelector('.goog-te-combo')) { window.googleTranslateElementInit(); } }catch(_){}
        if(setCombo(lang)) return;
      }
      if(tries++ < 60){ setTimeout(wait, 150); }
      else { document.documentElement.setAttribute('data-gt-error','load-failed'); openWebTranslate(lang); }
    })();
  }
  if(translateSelect){
    translateSelect.addEventListener('change', function(){ translatePage(this.value); }, {passive:true});
    try{
      var c=(document.cookie||'').split(';').map(function(s){return s.trim();}).find(function(s){return s.indexOf('googtrans=')===0;});
      if(!c){ translateSelect.value='it'; }
      else{
        var val=decodeURIComponent(c.split('=')[1]||''); var parts=val.split('/'); var l=parts[2]||'it';
        if(translateSelect.querySelector('option[value="'+l+'"]')) translateSelect.value=l;
      }
    }catch(_){ translateSelect.value='it'; }
  }
});
</script>

<script>
// SISTEMA STELLARE COMPLETO CON VERIFICHE DI SICUREZZA - VERSIONE CORRETTA
document.addEventListener('DOMContentLoaded', function() {
    
    // 1. PRELOAD RISORSE CRITICHE - CORRETTO
    const criticalResources = [
        'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css'
    ];

    // Funzione helper per operazioni DOM sicure
    function safeDOMOperation(operation, fallback = null) {
        try {
            if (typeof operation === 'function') {
                return operation();
            }
        } catch (error) {
            console.warn('DOM operation failed:', error.message);
            if (fallback && typeof fallback === 'function') {
                try {
                    return fallback();
                } catch (fallbackError) {
                    console.error('Fallback also failed:', fallbackError);
                }
            }
        }
        return null;
    }

    // 2. PRELOAD CORRETTO CON CROSSORIGIN
    criticalResources.forEach(resource => {
        if (resource.includes('font-awesome')) {
            safeDOMOperation(() => {
                const preload = document.createElement('link');
                preload.rel = 'preload';
                preload.href = resource;
                preload.as = 'style';
                preload.crossOrigin = 'anonymous'; // üëà AGGIUNTO QUESTO
                
                if (document.head) {
                    document.head.appendChild(preload);
                    console.log('‚úÖ Preload risorsa con crossorigin:', resource);
                    
                    // üëà AGGIUNGI ANCHE IL LINK NORMALE PER EVITARE L'AVVISO
                    const normalLink = document.createElement('link');
                    normalLink.rel = 'stylesheet';
                    normalLink.href = resource;
                    normalLink.crossOrigin = 'anonymous';
                    document.head.appendChild(normalLink);
                }
            }, () => {
                console.warn('‚ùå Fallback preload per:', resource);
            });
        }
    });

    // [RESTANTE CODICE IDENTICO...]
    // 3. SISTEMA STELLARE CON VERIFICHE COMPLETE
    function initializeStars() {
        return safeDOMOperation(() => {
            const starsContainer = document.getElementById('starsContainer') || document.getElementById('stars');
            
            if (!starsContainer) {
                console.warn('‚ùå Container stelle non trovato nel DOM');
                return false;
            }
            
            if (!document.body.contains(starsContainer)) {
                console.warn('‚ùå Container stelle non presente nel document.body');
                return false;
            }

            const starCount = 200;
            let starsCreated = 0;
            let errors = 0;

            for (let i = 0; i < starCount; i++) {
                const success = safeDOMOperation(() => {
                    if (i % 50 === 0 && !document.body.contains(starsContainer)) {
                        console.warn('‚ùå Container stelle rimosso durante la creazione');
                        return false;
                    }

                    const star = document.createElement('div');
                    star.className = 'star';
                    
                    const size = Math.random() * 3;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.opacity = Math.random() * 0.7 + 0.1;
                    star.style.animationDuration = `${3 + Math.random() * 7}s`;
                    star.style.animationDelay = `${Math.random() * 5}s`;
                    
                    starsContainer.appendChild(star);
                    starsCreated++;
                    return true;
                });

                if (!success) errors++;
                if (errors > 10) break;
            }

            console.log(`‚úÖ ${starsCreated} stelle create, ${errors} errori`);
            return starsCreated > 0;
        });
    }

    // 4. LAZY LOADING IMMAGINI SICURO
    function initializeLazyLoading() {
        return safeDOMOperation(() => {
            const lazyImages = document.querySelectorAll('.timeline-content img[data-src]');
            
            if (lazyImages.length === 0) {
                console.log('‚ÑπÔ∏è Nessuna immagine per lazy loading');
                return false;
            }

            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            safeDOMOperation(() => {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                                img.classList.add('fade-in');
                                observer.unobserve(img);
                            });
                        }
                    });
                }, { 
                    rootMargin: '50px 0px',
                    threshold: 0.1
                });

                lazyImages.forEach(img => imageObserver.observe(img));
                console.log(`‚úÖ Lazy loading attivo per ${lazyImages.length} immagini`);
            } else {
                lazyImages.forEach(img => {
                    safeDOMOperation(() => {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                    });
                });
                console.log('‚ÑπÔ∏è Lazy loading fallback attivato');
            }
            return true;
        });
    }

    // 5. FALLBACK STELLE SEMPLIFICATO
    function createBasicStars() {
        return safeDOMOperation(() => {
            const container = document.getElementById('starsContainer');
            if (!container) return false;
            
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star small';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(star);
            }
            console.log('‚úÖ Stelle basic create');
            return true;
        });
    }

    // 6. INIZIALIZZAZIONE SICURA EFFETTI STELLARI
    function initializeStarEffects() {
        safeDOMOperation(
            () => {
                const starsContainer = document.getElementById('starsContainer');
                if (starsContainer && typeof initStars === 'function') {
                    initStars();
                    console.log('‚úÖ Effetti stelle avanzati attivati');
                } else if (starsContainer) {
                    createBasicStars();
                }
            },
            () => {
                console.log('‚ÑπÔ∏è Effetti stelle disabilitati per problemi di performance');
                const starsContainer = document.getElementById('starsContainer');
                if (starsContainer) {
                    starsContainer.style.display = 'none';
                }
            }
        );
    }

    // 7. CSS PER STATI SPECIALI
    function injectPerformanceCSS() {
        return safeDOMOperation(() => {
            if (!document.head) return false;
            
            const performanceCSS = `
                .fade-in {
                    animation: fadeIn 0.5s ease-in;
                }
                
                .offline {
                    opacity: 0.8;
                    filter: grayscale(0.3);
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @media (prefers-reduced-motion: reduce) {
                    .fade-in, .star {
                        animation: none !important;
                    }
                }
            `;

            const style = document.createElement('style');
            style.textContent = performanceCSS;
            document.head.appendChild(style);
            console.log('‚úÖ CSS performance injectato');
            return true;
        });
    }

    // 8. INIZIALIZZAZIONE PRINCIPALE
    console.log('üöÄ Inizializzazione sistema stellare...');
    
    injectPerformanceCSS();
    initializeStars();
    initializeLazyLoading();
    initializeStarEffects();

    console.log('‚úÖ Sistema completamente inizializzato');
});

// 9. GESTIONE ERRORI GLOBALE
window.addEventListener('error', (event) => {
    console.error('‚ùå Errore globale catturato:', event.error);
});

// 10. GESTIONE STATO CONNESSIONE
window.addEventListener('online', () => {
    console.log('üì∂ Connessione ripristinata');
    safeDOMOperation(() => {
        document.body.classList.remove('offline');
    });
});

window.addEventListener('offline', () => {
    console.warn('üì∂ Connessione persa');
    safeDOMOperation(() => {
        document.body.classList.add('offline');
    });
});

// 11. SAFE ELEMENT SELECTOR
window.getElementSafe = function(selector) {
    try {
        const element = typeof selector === 'string' ? 
            document.querySelector(selector) : selector;
        return element && document.body.contains(element) ? element : null;
    } catch (error) {
        console.warn('getElementSafe error:', error);
        return null;
    }
};

console.log('‚≠ê Sistema stellare caricato e pronto');
</script>
<script id="range-dynamic-script">
(function(){
  function setFill(el){
    if(!el) return;
    var min = +el.min || 0;
    var max = +el.max || 100;
    var val = +el.value || 0;
    var pct = ((val - min) * 100) / (max - min);
    el.style.setProperty('--fill', pct + '%');
  }
  function bind(el){
    if(!el) return;
    setFill(el);
    el.addEventListener('input', function(){ setFill(el); });
    el.addEventListener('change', function(){ setFill(el); });
  }
  document.addEventListener('DOMContentLoaded', function(){
    bind(document.querySelector('#audio-player #volume'));
    bind(document.querySelector('#slider-speed'));
  });
})();
</script>
<script id="speed-readout-js">
(function(){
  function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }
  function formatFactor(x){
    // Implementazione base per il formato del fattore di velocit√†
    return '√ó' + parseFloat(x).toFixed(1);
  }
  
  // Inizializzazione del speed readout
  document.addEventListener('DOMContentLoaded', function() {
    var speedSlider = document.getElementById('slider-speed');
    var speedReadout = document.getElementById('speed-readout');
    
    if(speedSlider && speedReadout) {
      function updateSpeedReadout() {
        var value = parseFloat(speedSlider.value) || 1;
        speedReadout.textContent = formatFactor(value);
      }
      
      speedSlider.addEventListener('input', updateSpeedReadout);
      updateSpeedReadout(); // Imposta il valore iniziale
    }
  });
})();
</script>
<script id="russell-conservative-anim-js">
(function(){
  function pingOnce(){
    var box = document.getElementById('russell-box');
    var btn = document.getElementById('russell-btn');
    if(!box) return;
    box.classList.add('ping');
    if(btn) btn.classList.add('ping');
    clearTimeout(pingOnce._t);
    pingOnce._t = setTimeout(function(){
      box.classList.remove('ping');
      if(btn) btn.classList.remove('ping');
    }, 520);
  }
  function isInside(el, id){
    while(el){ if(el.id === id) return true; el = el.parentElement; }
    return false;
  }
  function init(){
    var box = document.getElementById('russell-box');
    var btn = document.getElementById('russell-btn');
    if(!box) return;

    // Click on the button OR anywhere inside the box
    box.addEventListener('click', function(e){
      // avoid false positives from unrelated overlays
      if(isInside(e.target, 'russell-box') || isInside(e.target, 'russell-btn')){
        pingOnce();
      }
    });

    // Keyboard on button
    if(btn){
      if(!btn.hasAttribute('role')) btn.setAttribute('role','button');
      if(!btn.hasAttribute('tabindex')) btn.setAttribute('tabindex','0');
      if(!btn.hasAttribute('aria-label')) btn.setAttribute('aria-label','Apri Russell');
      btn.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' ' || e.keyCode === 13 || e.keyCode === 32){
          e.preventDefault(); pingOnce();
        }
      });
    }
  }
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', init);
  }else{
    init();
  }
})();
</script>
<!-- removed duplicate script#speed-readout-js -->
<script id="sfx-unlock-silent">
(function(){
  var boom = document.getElementById('explosionSound');
  var thunder = document.getElementById('thunder-sound');
  var fired = false;
  async function unlockSilent(){
    if (fired) return; fired = true;
    var list = [boom, thunder].filter(Boolean);
    for (var i=0;i<list.length;i++){
      var a = list[i];
      try{
        var prevMuted = a.muted, prevVol = a.volume;
        a.muted = true; a.volume = 0.0;
        await a.play(); a.pause(); a.currentTime = 0;
        a.muted = prevMuted; a.volume = prevVol;
      }catch(_){}
    }
    window.removeEventListener('pointerdown', unlockSilent, true);
    window.removeEventListener('click', unlockSilent, true);
  }
  window.addEventListener('pointerdown', unlockSilent, { once:true, passive:true, capture:true });
  window.addEventListener('click', unlockSilent, { once:true, passive:true, capture:true });
})();
</script>
<script id="sfx-soft-play">
function softPlay(el, targetVol, ms){
  targetVol = (typeof targetVol === 'number') ? targetVol : 1.0;
  ms = (typeof ms === 'number') ? ms : 140;
  if(!el) return;
  try{
    el.muted = false;
    el.currentTime = 0;
    el.volume = 0.0001;
    el.play().then(function(){
      var steps = Math.max(1, Math.round(ms/30));
      var i=0, start = el.volume, diff = targetVol - start;
      var t = setInterval(function(){
        i++; el.volume = start + diff*(i/steps);
        if(i>=steps){ el.volume = targetVol; clearInterval(t); }
      }, 30);
    }).catch(function(){});
  }catch(_){}
}
</script>
<script id="timeline-bidirectional-scroll">
document.addEventListener('DOMContentLoaded', function() {
  const timelineItems = document.querySelectorAll('.timeline-item');
  
  if (!timelineItems.length) return;
  
  // Intersection Observer per entrambe le direzioni
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const item = entry.target;
      
      if (entry.isIntersecting) {
        // Item entra nella viewport - anima in
        item.classList.add('visible');
        
        // Rimuovi la classe dopo l'animazione per permettere il replay
        setTimeout(() => {
          if (entry.isIntersecting) {
            item.style.opacity = '1';
            item.style.transform = 'none';
          }
        }, 800);
      } else {
        // Item esce dalla viewport - resetta per nuova animazione
        item.classList.remove('visible');
        
        // Piccolo delay per evitare flickering
        setTimeout(() => {
          if (!entry.isIntersecting) {
            item.style.opacity = '0';
            if (item.classList.contains('left')) {
              item.style.transform = 'translateX(-80px) translateY(40px)';
            } else if (item.classList.contains('right')) {
              item.style.transform = 'translateX(80px) translateY(40px)';
            } else {
              item.style.transform = 'translateY(40px)';
            }
          }
        }, 50);
      }
    });
  }, {
    threshold: 0.15, // Trigger quando il 15% dell'elemento √® visibile
    rootMargin: '-50px 0px -50px 0px' // Area di trigger ridotta
  });

  // Osserva tutti gli item
  timelineItems.forEach(item => {
    observer.observe(item);
  });

  // Forza un check iniziale
  setTimeout(() => {
    timelineItems.forEach(item => {
      const rect = item.getBoundingClientRect();
      const isVisible = (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
      );
      
      if (isVisible) {
        item.classList.add('visible');
      }
    });
  }, 100);

  // Gestione del resize per ripristinare le animazioni
  let resizeTimeout;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      timelineItems.forEach(item => {
        const rect = item.getBoundingClientRect();
        const isVisible = (
          rect.top >= 0 &&
          rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
        );
        
        if (!isVisible) {
          item.classList.remove('visible');
        }
      });
    }, 250);
  });
});

// Versione alternativa pi√π aggressiva per animazioni continue
function setupTimelineAnimations() {
  const items = document.querySelectorAll('.timeline-item');
  let ticking = false;
  
  function updateAnimations() {
    const windowHeight = window.innerHeight;
    const triggerPoint = windowHeight * 0.8;
    
    items.forEach(item => {
      const rect = item.getBoundingClientRect();
      const isInView = rect.top < triggerPoint && rect.bottom > 0;
      
      if (isInView && !item.classList.contains('visible')) {
        item.classList.add('visible');
      } else if (!isInView && item.classList.contains('visible')) {
        item.classList.remove('visible');
      }
    });
    
    ticking = false;
  }
  
  function onScroll() {
    if (!ticking) {
      requestAnimationFrame(updateAnimations);
      ticking = true;
    }
  }
  
  window.addEventListener('scroll', onScroll, { passive: true });
  window.addEventListener('resize', onScroll, { passive: true });
  
  // Check iniziale
  updateAnimations();
}

// Avvia le animazioni
document.addEventListener('DOMContentLoaded', setupTimelineAnimations);
</script>
<script>
// Animazione delay progressivo per voci menu
document.addEventListener('DOMContentLoaded', function() {
    const megaMenus = document.querySelectorAll('.mega-menu');
    
    megaMenus.forEach(menu => {
        const links = menu.querySelectorAll('a');
        links.forEach((link, index) => {
            link.style.setProperty('--delay', index);
        });
    });
});
</script>
<script>
// Aggiungi questo script
document.addEventListener('DOMContentLoaded', function() {
  const progressBar = document.querySelector('.scroll-progress-bar');
  
  window.addEventListener('scroll', function() {
    const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (window.scrollY / windowHeight) * 100;
    progressBar.style.width = scrolled + '%';
  });
});
</script>
<script>
/* === THEME TOGGLE FUNCTIONALITY === */
document.addEventListener('DOMContentLoaded', function() {
  const themeToggle = document.getElementById('theme-toggle');
  if (!themeToggle) return;
  
  // Get saved theme or default to dark
  const savedTheme = localStorage.getItem('theme') || 'dark';
  
  // Apply saved theme
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateToggleButton(savedTheme);
  
  // Toggle theme on click
  themeToggle.addEventListener('click', function() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    // Apply new theme
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateToggleButton(newTheme);
    
    // Smooth transition
    document.documentElement.style.transition = 'all 0.5s ease';
    setTimeout(() => {
      document.documentElement.style.transition = '';
    }, 500);
  });
  
  function updateToggleButton(theme) {
    const icon = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    const label = theme === 'dark' ? 'Attiva tema chiaro' : 'Attiva tema scuro';
    
    themeToggle.innerHTML = icon;
    themeToggle.setAttribute('aria-label', label);
    themeToggle.setAttribute('title', label);
    
    // Add click feedback
    themeToggle.style.transform = 'scale(0.9)';
    setTimeout(() => {
      themeToggle.style.transform = 'scale(1)';
    }, 150);
  }
  
  // Listen for system preference changes
  const systemTheme = window.matchMedia('(prefers-color-scheme: light)');
  systemTheme.addEventListener('change', function(e) {
    if (!localStorage.getItem('theme')) {
      const newTheme = e.matches ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      updateToggleButton(newTheme);
    }
  });
});
</script>
<script>
    const btn = document.getElementById('paradigma-btn');
    const overlay = document.getElementById('filosofi-overlay');
    
    let hideTimeout;
    
    function showOverlay() {
        clearTimeout(hideTimeout);
        overlay.style.display = 'block';
    }
    
    function hideOverlay() {
        hideTimeout = setTimeout(() => {
            overlay.style.display = 'none';
        }, 300);
    }
    
    // Apri overlay al passaggio mouse sul bottone
    btn.addEventListener('mouseenter', showOverlay);
    
    // Chiudi overlay dopo uscita mouse dal bottone
    btn.addEventListener('mouseleave', hideOverlay);
    
    // Se il mouse entra nell'overlay cancella la chiusura
    overlay.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
    
    // Se il mouse esce dall'overlay, avvia chiusura
    overlay.addEventListener('mouseleave', hideOverlay);
</script>
<script>
// Funzioni per il modale
function showNewsletterModal() {
  document.getElementById('newsletterModal').style.display = 'flex';
}

function closeNewsletterModal() {
  document.getElementById('newsletterModal').style.display = 'none';
}

// Chiudi modale cliccando fuori
document.getElementById('newsletterModal').addEventListener('click', function(e) {
  if (e.target === this) closeNewsletterModal();
});

// Gestione form (base)
document.getElementById('newsletterForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const email = this.querySelector('input[type="email"]').value;
  alert('Grazie per esserti iscritto! Controlla la tua email: ' + email);
  closeNewsletterModal();
});

// Chiudi con ESC
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') closeNewsletterModal();
});
</script>
<script>
document.addEventListener('click', function(e){
  const link = e.target.closest('a[href="#lista-articoli"]');
  if(!link) return;
  const target = document.getElementById('lista-articoli');
  if(!target) return;
  e.preventDefault();
  try{ target.scrollIntoView({ behavior:'smooth', block:'start' }); }
  catch(_){ location.hash = '#lista-articoli'; }
});
</script>
<script>
  /* removed duplicate window.SEARCH_INDEX_URLS assignment */
</script>
<script>
  // Aggiungi questo script per ottimizzare le animazioni
document.addEventListener('DOMContentLoaded', function() {
  // Usa requestAnimationFrame per animazioni fluide
  function optimizeAnimations() {
    const animatedElements = document.querySelectorAll('.timeline-item, .mega-menu');
    animatedElements.forEach(el => {
      el.style.willChange = 'transform, opacity';
    });
  }
  optimizeAnimations();
});
</script>

<script>
    (function(){
      const panel = document.querySelector('#search-panel');
      const btnClose = document.getElementById('search-close');
      const backdrop = document.getElementById('search-backdrop');
      if(btnClose){
        btnClose.addEventListener('click', function(){
          panel && panel.classList.remove('open');
          if(backdrop){ backdrop.classList.remove('open'); setTimeout(()=>backdrop.hidden=true, 200); }
        });
      }
      // expose a helper to set results (optional)
      window.setSearchResults = function(html){
        const tgt = document.querySelector('#search-results, #searchResults, .search-results, .results-scroll');
        if(!tgt) return;
        tgt.innerHTML = html;
        window.animateSearchResults && window.animateSearchResults();
      };
    })();
    </script>
    <script id="search-auto-open">
// === Auto-open search panel when real results are injected ===
(function(){
  const panel    = document.querySelector('#search-panel, #searchPanel, .search-panel, .results-panel');
  const box      = document.querySelector('#search-results, #searchResults, .search-results, .results-scroll');
  const backdrop = document.getElementById('search-backdrop');
  if (!panel || !box) return;

  // Only count nodes that look like real results (not placeholders)
  function hasRealItems() {
    // Match common result item patterns, exclude placeholders
    const sel = '.sp-item:not([data-placeholder]), .search-result, .result, li.result-item, .result-title a';
    return box.querySelector(sel) !== null;
  }

  function forceClose(){
    panel.classList.remove('open');
    if (backdrop){ backdrop.classList.remove('open'); backdrop.hidden = true; }
  }
  function openPanel(){
    if (!panel.classList.contains('open')) panel.classList.add('open');
    if (backdrop){
      backdrop.hidden = false;
      backdrop.classList.add('open');
      backdrop.onclick = () => forceClose();
    }
    if (typeof window.animateSearchResults === 'function'){
      window.animateSearchResults();
    } else {
      Array.from(box.children).forEach((el,i)=> el.style.setProperty('--i', i));
    }
  }

  // Observe child changes
  const mo = new MutationObserver(()=>{
    if (hasRealItems()) openPanel();
    else forceClose();
  });
  mo.observe(box, { childList: true, subtree: true });

  // Ensure closed on load unless there are real items
  if (!hasRealItems()) forceClose();
  else openPanel();

  // ESC to close
  document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') forceClose(); });
})();
</script>
<!-- Pulsante Torna Su -->
<!-- Con effetto glow -->
<button aria-label="Torna all'inizio" class="back-to-top floating glow" id="backToTop">
    ‚Üë
</button>

<script>
// === GENERATORE DI STELLE - VERSIONE CORRETTA ===
(function() {
    const container = document.getElementById('starsContainer');
    if (!container) return;
    
    // Crea stelle normali - CORRETTO
    const baseStars = Math.floor((window.innerWidth * window.innerHeight) / 800);
    const starCount = Math.min(600, Math.max(150, baseStars));
    
    // CREA LE STELLE NORMALI - QUESTA RIGA MANCAVA COMPLETAMENTE!
    for (let i = 0; i < starCount; i++) {
        createStar();
    }
    
    // Crea stelle cadenti immediatamente
    createMultipleShootingStars();
    
    // Programma la creazione continua
    setInterval(createMultipleShootingStars, 4000);
    
    function createStar() {
        const star = document.createElement('div');
        star.className = 'star';
        
        const sizes = ['small', 'medium', 'large', 'xlarge'];
        const size = sizes[Math.floor(Math.random() * sizes.length)];
        star.classList.add(size);
        
        // RIMUOVI QUESTE RIGHE CHE SOVRASCRIVONO LE DURATE CSS
        // star.style.setProperty('--duration', (4 + Math.random() * 8) + 's');
        // star.style.setProperty('--delay', (Math.random() * 15) + 's');
        
        // 75% di stelle colorate
        if (Math.random() < 0.75) {
            const colors = ['color-blue', 'color-gold', 'color-purple'];
            star.classList.add(colors[Math.floor(Math.random() * colors.length)]);
        }
        
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        
        container.appendChild(star);
    }
    
    function createShootingStar() {
        const shooter = document.createElement('div');
        shooter.className = 'shooting-star';
        
        // SELEZIONA DIREZIONE CASUALE
        const directions = ['diagonal', 'horizontal', 'vertical', 'reverse'];
        const direction = directions[Math.floor(Math.random() * directions.length)];
        shooter.classList.add(direction);
        
        // VARIET√Ä DI VELOCIT√Ä
        if (Math.random() < 0.3) shooter.classList.add('fast');
        if (Math.random() < 0.2) shooter.classList.add('slow');
        
        // POSIZIONE IN BASE ALLA DIREZIONE
        if (direction === 'diagonal') {
            shooter.style.left = '-150px';
            shooter.style.top = Math.random() * 300 + 'px';
        } else if (direction === 'horizontal') {
            shooter.style.left = '-150px';
            shooter.style.top = (Math.random() * window.innerHeight) + 'px';
        } else if (direction === 'vertical') {
            shooter.style.left = (Math.random() * window.innerWidth) + 'px';
            shooter.style.top = '-150px';
        } else if (direction === 'reverse') {
            shooter.style.left = (window.innerWidth + 150) + 'px';
            shooter.style.top = Math.random() * 300 + 'px';
        }
        
        // RITARDO E DURATA
        shooter.style.animationDelay = (Math.random() * 3) + 's';
        
        container.appendChild(shooter);
        
        // RIMUOVI DOPO L'ANIMAZIONE
        const duration = shooter.classList.contains('fast') ? 8000 : 
                        shooter.classList.contains('slow') ? 15000 : 12000;
        
        setTimeout(() => {
            if (shooter.parentNode) {
                shooter.parentNode.removeChild(shooter);
            }
        }, duration);
    }
    
    function createMultipleShootingStars() {
        // Crea 1-2 stelle cadenti contemporaneamente
        const count = 1 + Math.floor(Math.random() * 2);
        for (let i = 0; i < count; i++) {
            setTimeout(() => createShootingStar(), i * 1000);
        }
    }
    
    // RESIZE HANDLER CORRETTO
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            container.innerHTML = '';
            const newBaseStars = Math.floor((window.innerWidth * window.innerHeight) / 800);
            const newStarCount = Math.min(600, Math.max(150, newBaseStars));
            for (let i = 0; i < newStarCount; i++) createStar();
            createMultipleShootingStars();
        }, 250);
    });
    
    // AVVIA SUBITO
    setTimeout(createMultipleShootingStars, 500);
})();
</script>
<script>
    (function() {
        const canvas = document.getElementById("tiny-comets");
        const ctx = canvas.getContext("2d");
        
        let w, h;
        const comets = [];
        const colors = [
            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',
            '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9',
            '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2'
        ];
        
        function resizeCanvas() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        
        class TinyComet {
            constructor() {
                this.reset();
                // Direzione casuale (0-360 gradi)
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 2 + 0.5;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.size = Math.random() * 3 + 1;
                this.trailLength = Math.floor(Math.random() * 8) + 4;
                this.trail = [];
            }
            
            reset() {
                // Posizione iniziale casuale su tutti i bordi
                const side = Math.floor(Math.random() * 4);
                switch(side) {
                    case 0: // Alto
                        this.x = Math.random() * w;
                        this.y = -10;
                        break;
                    case 1: // Destra
                        this.x = w + 10;
                        this.y = Math.random() * h;
                        break;
                    case 2: // Basso
                        this.x = Math.random() * w;
                        this.y = h + 10;
                        break;
                    case 3: // Sinistra
                        this.x = -10;
                        this.y = Math.random() * h;
                        break;
                }
                
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 2 + 0.5;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.size = Math.random() * 3 + 1;
                this.trailLength = Math.floor(Math.random() * 8) + 4;
                this.trail = [];
                this.life = 0;
                this.maxLife = 200 + Math.random() * 300;
            }
            
            update() {
                this.life++;
                
                // Movimento basato sull'angolo
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                
                // Aggiungi punto alla scia
                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > this.trailLength) {
                    this.trail.shift();
                }
                
                // Reset se esce dallo schermo o vita terminata
                if (this.x < -50 || this.x > w + 50 || 
                    this.y < -50 || this.y > h + 50 ||
                    this.life > this.maxLife) {
                    this.reset();
                }
            }
            
            draw() {
                // Disegna la scia
                for (let i = 0; i < this.trail.length; i++) {
                    const point = this.trail[i];
                    const alpha = i / this.trail.length * 0.7;
                    const size = this.size * (i / this.trail.length);
                    
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
                    ctx.fillStyle = this.color.replace(')', `, ${alpha})`).replace('rgb', 'rgba');
                    ctx.fill();
                }
                
                // Disegna la testa della cometa
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                
                // Aggiungi un piccolo bagliore
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                const gradient = ctx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, this.size * 1.5
                );
                gradient.addColorStop(0, this.color.replace(')', ', 0.8)').replace('rgb', 'rgba'));
                gradient.addColorStop(1, this.color.replace(')', ', 0)').replace('rgb', 'rgba'));
                ctx.fillStyle = gradient;
                ctx.fill();
            }
        }
        
        function init() {
            resizeCanvas();
            
            // Crea 80 cometine
            for (let i = 0; i < 60; i++) {
                comets.push(new TinyComet());
                // Distribuisci l'inizio nel tempo
                comets[i].life = Math.random() * 100;
            }
            
            animate();
        }
        
        function animate() {
            ctx.clearRect(0, 0, w, h);
            
            // Sfumo leggero per effetto scia persistente
            ctx.fillStyle = 'rgba(10,10,26,0.1)';
            ctx.fillRect(0, 0, w, h);
            
            comets.forEach(comet => {
                comet.update();
                comet.draw();
            });
            
            requestAnimationFrame(animate);
        }
        
        window.addEventListener('resize', resizeCanvas);
        
        // Avvia quando la pagina √® caricata
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
</script>
<script>
// === ESPLOSIONE + SCIAME PARTICELLE - VERSIONE SPETTACOLARE ===
document.addEventListener('DOMContentLoaded', function() {
  const explodingText = document.getElementById('exploding');
  const explodeBtn = document.getElementById('btn-explode');
  const explosionSound = document.getElementById('explosionSound');
  
  if (!explodingText) return;

  // CSS PER ESPLOSIONE E PARTICELLE
  const explosionCSS = `
    @keyframes letterExplode {
      0% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
      }
      50% {
        transform: translate(var(--explode-dx), var(--explode-dy)) rotate(var(--explode-rotate)) scale(1.2);
        opacity: 0.8;
        filter: blur(2px);
      }
      100% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
      }
    }
    
    @keyframes pageShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px) rotate(-0.5deg); }
      50% { transform: translateX(5px) rotate(0.5deg); }
      75% { transform: translateX(-3px) rotate(-0.3deg); }
    }
    
    .char {
      display: inline-block;
      transition: all 0.3s ease;
    }
    
    .exploding-active {
      animation: pageShake 0.8s ease-in-out;
    }
    
    /* STILE PARTICELLE */
    .explosion-particle {
      position: fixed;
      pointer-events: none;
      z-index: 2147483600;
      border-radius: 50%;
      animation: particleFly 1.5s ease-out forwards;
    }
    
    @keyframes particleFly {
      0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 1;
      }
      80% {
        opacity: 0.8;
      }
      100% {
        transform: translate(var(--particle-dx), var(--particle-dy)) scale(0) rotate(360deg);
        opacity: 0;
      }
    }
    
    .particle-glow {
      box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
    }
  `;
  
  // AGGIUNGI CSS AL DOCUMENTO
  const style = document.createElement('style');
  style.textContent = explosionCSS;
  document.head.appendChild(style);

  // FUNZIONE COLORI CASUALI
  function getRandomColor() {
    const colors = [
      '#FF6B00', '#FF0000', '#00CCFF', '#B967FF', 
      '#FFD700', '#00FF88', '#FF00FF', '#FFFFFF',
      '#FF4500', '#00FFFF', '#FF1493', '#7CFC00'
    ];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  // CREA SCIAME DI PARTICELLE
  function createParticleSwarm(element, particleCount = 50) {
    const rect = element.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.className = 'explosion-particle';
      
      // POSIZIONE INIZIALE
      particle.style.left = centerX + 'px';
      particle.style.top = centerY + 'px';
      
      // DIREZIONE CASUALE
      const angle = Math.random() * Math.PI * 2;
      const distance = 50 + Math.random() * 200;
      const dx = Math.cos(angle) * distance;
      const dy = Math.sin(angle) * distance;
      
      particle.style.setProperty('--particle-dx', dx + 'px');
      particle.style.setProperty('--particle-dy', dy + 'px');
      
      // DIMENSIONE E COLORE
      const size = 2 + Math.random() * 8;
      particle.style.width = size + 'px';
      particle.style.height = size + 'px';
      particle.style.background = getRandomColor();
      
      // EFFETTO GLOW PER MET√Ä DELLE PARTICELLE
      if (Math.random() > 0.5) {
        particle.classList.add('particle-glow');
      }
      
      // DURATA ANIMAZIONE VARIABILE
      const duration = 1000 + Math.random() * 1000;
      particle.style.animationDuration = duration + 'ms';
      
      // AGGIUNGI AL DOCUMENTO
      document.body.appendChild(particle);
      
      // RIMUOVI DOPO L'ANIMAZIONE
      setTimeout(() => {
        if (particle.parentNode) {
          particle.parentNode.removeChild(particle);
        }
      }, duration + 100);
    }
  }

  // CREA PARTICELLE A FORMA DI STELLA
  function createStarParticles(element, count = 20) {
    const rect = element.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    for (let i = 0; i < count; i++) {
      const star = document.createElement('div');
      star.className = 'explosion-particle';
      star.textContent = '‚ú¶';
      star.style.fontSize = (10 + Math.random() * 20) + 'px';
      star.style.color = getRandomColor();
      star.style.background = 'transparent';
      star.style.left = centerX + 'px';
      star.style.top = centerY + 'px';
      
      const angle = (i / count) * Math.PI * 2;
      const distance = 80 + Math.random() * 150;
      const dx = Math.cos(angle) * distance;
      const dy = Math.sin(angle) * distance;
      
      star.style.setProperty('--particle-dx', dx + 'px');
      star.style.setProperty('--particle-dy', dy + 'px');
      star.style.animationDuration = (1200 + Math.random() * 800) + 'ms';
      
      document.body.appendChild(star);
      setTimeout(() => {
        if (star.parentNode) star.parentNode.removeChild(star);
      }, 2500);
    }
  }

  // FUNZIONE PRINCIPALE DI ESPLOSIONE
  function triggerExplosion() {
    if (explodingText.classList.contains('exploding')) return;
    
    // SUONO ESPLOSIONE
    if (explosionSound) {
      try {
        explosionSound.currentTime = 0;
        explosionSound.volume = 0.7;
        explosionSound.play().catch(e => console.log('Audio non riprodotto'));
      } catch(e) {}
    }

    // SCUOTI LA PAGINA
    document.body.classList.add('exploding-active');
    setTimeout(() => {
      document.body.classList.remove('exploding-active');
    }, 800);

    // üî• CREA SCIAME DI PARTICELLE
    createParticleSwarm(explodingText, 60); // 60 particelle normali
    createStarParticles(explodingText, 15); // 15 particelle a stella
    
    // PARTICELLE ADDIZIONALI RITARDATE
    setTimeout(() => {
      createParticleSwarm(explodingText, 30); // Altro sciame dopo un po'
    }, 200);

    // ESPLODI OGNI CARATTERE
    const chars = explodingText.querySelectorAll('.char');
    let completed = 0;

    chars.forEach((char, index) => {
      const distance = 30 + Math.random() * 70;
      const angle = Math.random() * Math.PI * 2;
      const dx = Math.cos(angle) * distance;
      const dy = Math.sin(angle) * distance;
      const rotation = (Math.random() - 0.5) * 360;
      
      char.style.setProperty('--explode-dx', dx + 'px');
      char.style.setProperty('--explode-dy', dy + 'px');
      char.style.setProperty('--explode-rotate', rotation + 'deg');
      
      const delay = index * 40;
      
      const animation = char.animate([
        {
          transform: 'translate(0, 0) rotate(0deg) scale(1)',
          opacity: 1,
          filter: 'blur(0px)',
          color: 'currentColor'
        },
        {
          transform: `translate(${dx}px, ${dy}px) rotate(${rotation}deg) scale(1.3)`,
          opacity: 0.7,
          filter: 'blur(3px)',
          color: getRandomColor()
        },
        {
          transform: `translate(${dx * 0.3}px, ${dy * 0.3}px) rotate(${rotation * 0.3}deg) scale(1.1)`,
          opacity: 0.9,
          filter: 'blur(1px)',
          color: 'currentColor'
        },
        {
          transform: 'translate(0, 0) rotate(0deg) scale(1)',
          opacity: 1,
          filter: 'blur(0px)',
          color: 'currentColor'
        }
      ], {
        duration: 800,
        delay: delay,
        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
        fill: 'forwards'
      });

      animation.onfinish = () => {
        completed++;
        char.style.transform = '';
        char.style.opacity = '';
        char.style.filter = '';
        char.style.color = '';
        
        if (completed === chars.length) {
          explodingText.classList.remove('exploding');
          
          // PARTICELLE FINALI DI CHIUSURA
          setTimeout(() => {
            createParticleSwarm(explodingText, 20);
          }, 100);
        }
      };
    });

    explodingText.classList.add('exploding');
    explodingText.style.transition = 'all 0.3s ease';
    explodingText.style.transform = 'scale(1.05)';
    explodingText.style.filter = 'brightness(1.3)';
    
    setTimeout(() => {
      explodingText.style.transform = '';
      explodingText.style.filter = '';
    }, 500);
  }

  // EVENT LISTENERS
  if (explodeBtn) {
    explodeBtn.addEventListener('click', function(e) {
      e.preventDefault();
      triggerExplosion();
    });
  }

  explodingText.addEventListener('click', function(e) {
    e.preventDefault();
    triggerExplosion();
  });

  console.log('üí•üí´ Sistema esplosione + particelle pronto!');
});

// TEST AUTOMATICO
setTimeout(() => {
  console.log('üîç Test sistema particelle...');
  const testChars = document.querySelectorAll('.char');
  console.log('Caratteri pronti:', testChars.length);
  
  // Test visivo particelle
  setTimeout(() => {
    console.log('‚úÖ Sistema particelle caricato - Pronto per esplodere!');
  }, 500);
}, 1000);
</script>

<script>
  // === PULSANTE TORNA SU ===
(function(){
    const backToTop = document.getElementById('backToTop');
    if (!backToTop) return;
    
    // Mostra/nascondi il pulsante durante lo scroll
    function toggleBackToTop() {
        if (window.scrollY > 300) {
            backToTop.style.display = 'flex';
        } else {
            backToTop.style.display = 'none';
        }
    }
    
    // Scroll fluido verso l'alto
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
    
    // Event listeners
    window.addEventListener('scroll', toggleBackToTop);
    backToTop.addEventListener('click', scrollToTop);
    
    // Anche con tasto Enter per accessibilit√†
    backToTop.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            scrollToTop();
        }
    });
    
    // Inizializza
    toggleBackToTop();
})();
</script>
<script>
// RICERCA SICURA CON CONTROLLI
document.addEventListener('DOMContentLoaded', function() {
    try {
        const input = document.getElementById('site-search');
        const wrap = input && input.closest('.search-container');
        
        if (wrap && input) {
            wrap.addEventListener('click', function(e) {
                // Se clicchi ovunque nel riquadro, il focus va all'input
                if (e.target !== input && document.body.contains(input)) {
                    input.focus();
                }
            });
            console.log('‚úÖ Search container inizializzato');
        } else {
            console.warn('‚ÑπÔ∏è Search container non trovato');
        }
    } catch (error) {
        console.error('‚ùå Errore inizializzazione search:', error);
    }
});
</script>
  <!-- Nel tuo file HTML, prima della chiusura 
<script>
(function(){
  try{
    window.showSearchPanelOnResults = function(panelSel, items){
      var panel = document.querySelector(panelSel || '#search-panel, #searchPanel, .search-panel');
      if(!panel) return;
      if(items && items.length){ panel.style.display = 'block'; panel.removeAttribute('aria-hidden'); }
    };
  }catch(_){}
})();
</script>


<script id="slider-clean-img-attrs">
// Normalizza attributi IMG dello slider (rimuove height hard-coded)
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.slider-vertical img').forEach(function(img){
    if (img.hasAttribute('height')) img.removeAttribute('height');
    if (!img.hasAttribute('width')) img.setAttribute('width','260');
  });
});
</script>

</body> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tippy.js/6.3.7/tippy-bundle.umd.min.js"></script>
<script src="script.js"></script>
<script>
// === ESPLOSIONE CHE SCUOTE LA PAGINA ===
function createPageShakingExplosion() {
    // Crea l'effetto visivo dell'esplosione
    const explosionOverlay = document.createElement('div');
    explosionOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, 
            rgba(255,255,255,0.8) 0%,
            rgba(255,215,0,0.6) 20%,
            rgba(255,100,0,0.4) 40%,
            rgba(255,0,0,0.2) 60%,
            transparent 80%
        );
        pointer-events: none;
        z-index: 2147483600;
        opacity: 0;
        animation: explosionFlash 0.8s ease-out;
    `;
    
    // Aggiungi i keyframes per l'esplosione
    const explosionStyle = document.createElement('style');
    explosionStyle.textContent = `
        @keyframes explosionFlash {
            0% { 
                opacity: 0; 
                transform: scale(0.1);
            }
            20% { 
                opacity: 1; 
                transform: scale(1.2);
            }
            40% { 
                opacity: 0.8; 
                transform: scale(1.5);
            }
            100% { 
                opacity: 0; 
                transform: scale(2);
            }
        }
        
        @keyframes shakePage {
            0%, 100% { transform: translateX(0) translateY(0) rotate(0); }
            10% { transform: translateX(-10px) translateY(-5px) rotate(-1deg); }
            20% { transform: translateX(8px) translateY(4px) rotate(1deg); }
            30% { transform: translateX(-6px) translateY(-3px) rotate(-0.5deg); }
            40% { transform: translateX(4px) translateY(2px) rotate(0.5deg); }
            50% { transform: translateX(-2px) translateY(-1px) rotate(-0.25deg); }
            60% { transform: translateX(1px) translateY(0.5px) rotate(0.25deg); }
        }
        
        .page-shake {
            animation: shakePage 0.8s ease-out;
        }
    `;
    
    document.head.appendChild(explosionStyle);
    document.body.appendChild(explosionOverlay);
    
    // Applica l'effetto di scuotimento a tutto il body
    document.body.classList.add('page-shake');
    
    // Riproduci il suono dell'esplosione se disponibile
    const explosionSound = document.getElementById('explosionSound');
    if (explosionSound) {
        explosionSound.currentTime = 0;
        explosionSound.volume = 0.7;
        explosionSound.play().catch(e => console.log('Audio non riprodotto:', e));
    }
    
    // Crea particelle esplosive aggiuntive
    createExplosionParticles();
    
    // Rimuovi gli effetti dopo l'animazione
    setTimeout(() => {
        if (explosionOverlay.parentNode) {
            explosionOverlay.parentNode.removeChild(explosionOverlay);
        }
        document.body.classList.remove('page-shake');
        if (explosionStyle.parentNode) {
            explosionStyle.parentNode.removeChild(explosionStyle);
        }
    }, 800);
}

// Crea particelle esplosive che si diffondono sullo schermo
function createExplosionParticles() {
    const colors = ['#FFD700', '#FF6B00', '#FF0000', '#FFFFFF', '#00CCFF'];
    const particleCount = 30;
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        const size = Math.random() * 15 + 5;
        const color = colors[Math.floor(Math.random() * colors.length)];
        
        particle.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            width: ${size}px;
            height: ${size}px;
            background: ${color};
            border-radius: 50%;
            pointer-events: none;
            z-index: 2147483601;
            opacity: 0.8;
            box-shadow: 0 0 10px ${color};
        `;
        
        document.body.appendChild(particle);
        
        // Animazione casuale per ogni particella
        const angle = Math.random() * Math.PI * 2;
        const distance = 100 + Math.random() * 200;
        const duration = 0.5 + Math.random() * 0.5;
        
        particle.animate([
            {
                transform: 'translate(-50%, -50%) scale(1)',
                opacity: 0.8
            },
            {
                transform: `translate(${Math.cos(angle) * distance - 50}%, ${Math.sin(angle) * distance - 50}%) scale(0)`,
                opacity: 0
            }
        ], {
            duration: duration * 1000,
            easing: 'ease-out',
            fill: 'forwards'
        });
        
        // Rimuovi la particella dopo l'animazione
        setTimeout(() => {
            if (particle.parentNode) {
                particle.parentNode.removeChild(particle);
            }
        }, duration * 1000);
    }
}

// === ATTIVA L'ESPLOSIONE CON IL PULSANTE ESISTENTE ===
document.addEventListener('DOMContentLoaded', function() {
    const explodeBtn = document.getElementById('btn-explode');
    if (explodeBtn) {
        explodeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            createPageShakingExplosion();
        });
    }
    
    // Aggiungi anche l'esplosione al click sul motto
    const explodingText = document.getElementById('exploding');
    if (explodingText) {
        explodingText.addEventListener('click', function() {
            createPageShakingExplosion();
        });
    }
});

// === ESPLOSIONE AUTOMATICA AL CARICAMENTO (OPZIONALE) ===
// Rimuovi il commento se vuoi l'esplosione automatica all'avvio
/*
window.addEventListener('load', function() {
    setTimeout(() => {
        createPageShakingExplosion();
    }, 2000);
});
*/
</script>


<script>
(function(){
  try{
    window.showSearchPanelOnResults = function(panelSel, items){
      var panel = document.querySelector(panelSel || '#search-panel, #searchPanel, .search-panel');
      if(!panel) return;
      if(items && items.length){ panel.style.display = 'block'; panel.removeAttribute('aria-hidden'); }
    };
  }catch(_){}
})();
</script>
<script>
(function(){
  if (!('serviceWorker' in navigator)) return;
  window.addEventListener('load', function(){
    navigator.serviceWorker.register('/sw.js')
      .then(reg => console.log('‚úÖ SW registrato:', reg.scope))
      .catch(err => console.error('‚ùå SW registration failed:', err));
  });
})();
</script>
<script>
(function () {
  // 1) Se siamo su /index.html ‚áí sostituisci in barra con /
  if (location.pathname.toLowerCase() === '/index.html') {
    const clean = '/' + (location.search || '') + (location.hash || '');
    history.replaceState(null, '', clean);
  }

  // 2) Rewriter dei link: se un <a> punta a index.html, trasformalo in /
  function rewriteAnchor(a) {
    const href = a.getAttribute('href') || '';
    if (/(^|\/)index\.html(\?|#|$)/i.test(href)) {
      // conserva query e hash
      const u = new URL(href, location.origin);
      a.setAttribute('href', '/' + (u.search || '') + (u.hash || ''));
    }
  }

  // iniziale
  document.querySelectorAll('a[href]').forEach(rewriteAnchor);

  // 3) Intercetta i click (anche su link generati dinamicamente) e forza /
  document.addEventListener('click', function (e) {
    const a = e.target.closest('a[href]');
    if (!a) return;
    const href = a.getAttribute('href') || '';
    if (/(^|\/)index\.html(\?|#|$)/i.test(href)) {
      e.preventDefault();
      const u = new URL(a.href, location.origin);
      // naviga a "/" preservando query e hash
      location.assign('/' + (u.search || '') + (u.hash || ''));
    }
  }, { capture: true });
})();
</script>


<script id="slider-clean-img-attrs">
// Normalizza attributi IMG dello slider (rimuove height hard-coded)
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.slider-vertical img').forEach(function(img){
    if (img.hasAttribute('height')) img.removeAttribute('height');
    if (!img.hasAttribute('width')) img.setAttribute('width','260');
  });
});
</script>

</body>
</html>
