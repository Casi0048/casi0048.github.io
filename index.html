<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echi di Sofia - Portale di Filosofia Moderna</title>
    <meta name="description" content="Portale di filosofia antica, moderna e contemporanea, con approfondimenti su autori e correnti.">
    <!-- Favicon -->
    <link href="favicon_io/favicon-32x32.png" rel="icon" type="image/png" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@400;600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
      :root {
      --bg: #0a0a1a;
      --gold: #d4af37;
      --cyan: #00ccff;
      --menu-bg: rgba(10, 10, 30, .98);
      --menu-border: rgba(255, 215, 0, .22);
      --glass: rgba(0, 0, 0, .35);
      --text-light: #e9eef5;
      --text-accent: #9ad0ff;
      }
      * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      }
      body {
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text-light);
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      }
      /* Effetto particelle cosmiche di sfondo */
      #cosmic-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      }
      .cosmic-particle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.6);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      animation: float 15s infinite linear;
      }
      @keyframes float {
      0% {
      transform: translateY(100vh) rotate(0deg);
      opacity: 0;
      }
      10% {
      opacity: 0.7;
      }
      90% {
      opacity: 0.7;
      }
      100% {
      transform: translateY(-100px) rotate(360deg);
      opacity: 0;
      }
      }
      a {
      color: var(--text-accent);
      text-decoration: none;
      transition: color 0.3s, text-shadow 0.3s;
      }
      a:hover {
      color: #fff;
      text-shadow: 0 0 0.38rem #33ccff;
      }
      /* Header e Top Bar */
      .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 90%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1.2rem;
      background: var(--menu-bg);
      backdrop-filter: blur(0.6rem);
      -webkit-backdrop-filter: blur(0.6rem);
      border-bottom: 1px solid var(--menu-border);
      z-index: 2000;
      transition: transform 0.3s ease;
      }
      .top-bar.hidden {
      transform: translateY(-100%);
      }
      .brand {
      display: flex;
      align-items: center;
      gap: 0.62rem;
      text-decoration: none;
      }
      .brand svg {
      width: 2.12rem;
      height: 2.12rem;
      filter: drop-shadow(0 0 0.38rem rgba(255, 215, 0, .5));
      }
      .brand span {
      font-family: 'Cinzel', serif;
      font-weight: 700;
      letter-spacing: 0.1rem;
      background: linear-gradient(90deg, #ffd700, #fff7b0, #ffd700);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 0.62rem rgba(255, 215, 0, .35);
      font-size: 1.5rem;
      }
      .bar-right {
      display: flex;
      align-items: center;
      gap: 0.62rem;
      }
      .translate-box {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      }
      .translate-select {
      appearance: none;
      padding: 0.45rem 0.8rem;
      border: 1px solid var(--menu-border);
      border-radius: 0.62rem;
      background: rgba(20, 20, 40, .78);
      color: var(--text-light);
      font-size: 0.95rem;
      cursor: pointer;
      }
      .search-container {
      position: relative;
      display: flex;
      align-items: center;
      }
      .search-container input {
      width: 16.25rem;
      height: 2.5rem;
      line-height: 2.5rem;
      padding: 0 3.6rem 0 3rem;
      background: rgba(20, 20, 40, .78);
      border: 1px solid var(--menu-border);
      border-radius: 0.38rem;
      color: var(--text-light);
      font-weight: 300;
      font-size: .95rem;
      outline: none;
      transition: .25s;
      box-sizing: border-box;
      }
      .search-container input:focus {
      border-color: rgba(255, 215, 0, .5);
      box-shadow: 0 0 0.75rem rgba(255, 215, 0, .18);
      }
      .search-icon {
      position: absolute;
      left: .6rem;
      font-size: .95rem;
      color: rgba(255, 215, 0, .85);
      }
      .ctrl-btn {
      border: 1px solid var(--menu-border);
      background: rgba(20, 20, 40, .75);
      color: var(--text-light);
      padding: .45rem .6rem;
      border-radius: 0.38rem;
      font-weight: 600;
      cursor: pointer;
      transition: .2s;
      font-family: 'Montserrat', sans-serif;
      }
      .ctrl-btn:hover {
      color: #fff;
      box-shadow: 0 0 0.62rem rgba(255, 215, 0, .25);
      }
      /* Menu principale */
      .menu-container {
      position: fixed;
      top: 4.5rem;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      z-index: 1900;
      padding: 0.5rem 0;
      background: rgba(10, 10, 30, 0.9);
      backdrop-filter: blur(0.5rem);
      border-bottom: 1px solid rgba(255, 215, 0, 0.1);
      transition: transform 0.3s ease;
      }
      .menu-container.hidden {
      transform: translateY(-100%);
      }
      nav.menu-desktop ul {
      display: flex;
      gap: 1px;
      list-style: none;
      margin: 0;
      padding: 0;
      justify-content: center;
      white-space: nowrap;
      }
      nav.menu-desktop li {
      position: relative;
      }
      .menu-btn, nav.menu-desktop li>a {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 1px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-accent);
      font-family: 'Cormorant Garamond', serif;
      font-weight: 700;
      font-size: 1.2rem;
      padding: .45rem .7rem;
      border-radius: 0.38rem;
      transition: .25s;
      text-decoration: none;
      text-shadow: 0 0 0.38rem #33ccff99;
      }
      .menu-btn:hover, nav.menu-desktop li>a:hover {
      color: #fff;
      }
      .arrow {
      font-size: .75rem;
      }
      /* Mega Menu */
      .mega-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(0.62rem);
      width: 61.25rem;
      max-width: 94vw;
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      border-top: 0;
      padding: 0.88rem;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.88rem;
      box-shadow: 0 0.94rem 1.88rem rgba(0, 0, 0, .4);
      backdrop-filter: blur(0.62rem);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: .3s;
      z-index: 950;
      }
      li.dropdown:hover>.mega-menu,
      li.dropdown:focus-within>.mega-menu,
      .mega-menu:hover {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
      transform: translateX(-50%) translateY(0);
      }
      .mega-menu h4 {
      margin: .2rem 0 .4rem;
      font-size: 1rem;
      color: var(--gold);
      font-family: 'Cinzel', serif;
      }
      .mega-menu a {
      display: block;
      color: var(--text-accent);
      font-weight: 700;
      font-size: .95rem;
      padding: .12rem 0;
      }
      .mega-menu a:hover {
      color: #fff;
      transform: translateX(0.19rem);
      }
      /* Contenuto principale */
      main {
      flex: 1;
      margin-top: 9rem;
      padding: 2rem;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      }
      .welcome-section {
      text-align: center;
      padding: 2rem 0;
      }
      .welcome-title {
      font-family: "Cinzel", cursive;
      font-weight: 700;
      font-size: 3.05rem;
      color: transparent;
      background: linear-gradient(90deg, #00f6ff, #00b7ff, #009dff, #00f6ff);
      -webkit-background-clip: text;
      background-clip: text;
      filter: drop-shadow(0 0 1.12rem rgba(0, 220, 255, 0.75)) drop-shadow(0 0 1.88rem rgba(0, 180, 255, 0.65));
      animation: titlePulse 6s infinite;
      margin-bottom: 1rem;
      }
      @keyframes titlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.04); }
      }
      .welcome-subtitle {
      color: var(--text-accent);
      font-size: 1.5rem;
      margin-bottom: 2rem;
      }
      .typing-wrap {
      margin: 2rem 0;
      display: flex;
      justify-content: center;
      min-height: 3.2em;
      }
      .typing-effect {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-style: italic;
      color: #00CFFF;
      font-weight: 700;
      display: inline-block;
      min-width: 60ch;
      text-align: center;
      white-space: nowrap;
      }
      .caret {
      display: inline-block;
      width: 1ch;
      text-align: left;
      position: absolute;
      right: 0;
      }
      .caret::after {
      content: "|";
      animation: blink 1s infinite;
      opacity: .8;
      }
      @keyframes blink {
      0%, 49% { opacity: .8; }
      50%, 100% { opacity: 0; }
      }
      .exploding-text {
      margin: 2rem auto;
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.25rem;
      font-style: italic;
      color: #e7f6ff;
      letter-spacing: 0.1rem;
      display: inline-block;
      cursor: pointer;
      user-select: none;
      z-index: 1;
      white-space: nowrap;
      padding: 1rem;
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 0.5rem;
      background: rgba(0, 0, 0, 0.2);
      }
      .exploding-text .ch {
      display: inline-block;
      will-change: transform, opacity;
      }
      /* Timeline filosofica interattiva - INTEGRATA */
      .timeline-container {
      margin: 4rem 0;
      position: relative;
      padding: 2rem 0;
      }
      .timeline-title {
      text-align: center;
      color: var(--gold);
      font-size: 2.5rem;
      margin-bottom: 3rem;
      font-family: 'Cinzel', serif;
      }
      .timeline {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
      }
      .timeline::after {
      content: '';
      position: absolute;
      width: 6px;
      background: linear-gradient(to bottom, var(--gold), var(--cyan));
      top: 0;
      bottom: 0;
      left: 50%;
      margin-left: -3px;
      border-radius: 10px;
      transform: scaleY(0);
      transform-origin: top;
      animation: growLine 2s ease-out forwards;
      animation-delay: 0.5s;
      }
      @keyframes growLine {
      from { transform: scaleY(0); }
      to { transform: scaleY(1); }
      }
      .timeline-item {
      padding: 10px 40px;
      position: relative;
      width: 50%;
      box-sizing: border-box;
      opacity: 0;
      transform: translateX(-100px);
      transition: all 0.8s ease-out;
      }
      .timeline-item:nth-child(odd) {
      left: 0;
      transform: translateX(-100px);
      }
      .timeline-item:nth-child(even) {
      left: 50%;
      transform: translateX(100px);
      }
      .timeline-item.visible {
      opacity: 1;
      transform: translateX(0);
      }
      .timeline-item::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: var(--gold);
      border: 4px solid var(--cyan);
      top: 15px;
      border-radius: 50%;
      z-index: 1;
      transform: scale(0);
      transition: transform 0.6s ease-out 0.3s;
      }
      .timeline-item.visible::after {
      transform: scale(1);
      }
      .timeline-item:nth-child(odd)::after {
      right: -10px;
      }
      .timeline-item:nth-child(even)::after {
      left: -10px;
      }
      .timeline-content {
      padding: 20px 30px;
      background: rgba(20, 20, 40, 0.8);
      border-radius: 10px;
      border: 1px solid var(--gold);
      backdrop-filter: blur(10px);
      transform: translateY(20px);
      opacity: 0;
      transition: all 0.6s ease-out 0.2s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      .timeline-item.visible .timeline-content {
      transform: translateY(0);
      opacity: 1;
      }
      .timeline-content h3 {
      color: var(--gold);
      margin-bottom: 10px;
      font-size: 1.4rem;
      }
      .timeline-content p {
      line-height: 1.6;
      margin-bottom: 10px;
      }
      .timeline-content .period {
      color: var(--cyan);
      font-style: italic;
      font-size: 0.9rem;
      }
      /* Aggiungere stati di loading */
.timeline-item.loading {
  background: linear-gradient(90deg, transparent, rgba(255,215,0,0.1), transparent);
  animation: loadingShimmer 3s infinite;
}
      /* Citazioni filosofiche fluttuanti */
      .floating-quotes {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      max-width: 300px;
      }
      .quote-bubble {
      background: rgba(10, 10, 30, 0.9);
      border: 1px solid var(--menu-border);
      border-radius: 15px;
      padding: 15px;
      margin-bottom: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transform: translateX(100%);
      opacity: 0;
      transition: transform 0.5s, opacity 0.5s;
      backdrop-filter: blur(5px);
      }
      .quote-bubble.show {
      transform: translateX(0);
      opacity: 1;
      }
      .quote-text {
      font-style: italic;
      margin-bottom: 5px;
      color: var(--text-light);
      }
      .quote-author {
      text-align: right;
      font-size: 0.9rem;
      color: var(--gold);
      }
      /* Footer */
      footer {
      background: #06060d;
      color: #e9eef5;
      margin-top: auto;
      padding: 1.5rem 0;
      }
      .footer-wrap {
      max-width: 75rem;
      margin: 0 auto;
      padding: 0 1rem;
      }
      .footer-columns {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 1rem;
      align-items: start;
      text-align: left;
      }
      .footer-columns h3,
      .footer-columns h4 {
      margin: 0.1rem 0 0.3rem;
      color: #ffd86a;
      font-family: 'Cinzel', serif;
      letter-spacing: 0.2px;
      font-size: 0.9rem;
      }
      .footer-columns p {
      margin: 1rem 0;
      color: #00bb2d;
      line-height: 1.3;
      font-size: 0.85rem;           
      }
      .footer-columns ul {
      list-style: none;
      margin: 0;
      padding: 0;
      }
      .footer-columns li {
      margin: 0.1rem 0;
      font-size: 0.85rem;
      }
      .footer-legal {
      margin-top: 1rem;
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
      font-size: 0.8rem;
      justify-content: center;
      }
      .social {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.5rem;
      }
      .social a {
      width: 1.75rem;
      height: 1.75rem;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      }
      /* Responsive */
      @media (max-width: 61.25rem) {
      .footer-columns {
      grid-template-columns: 1fr;
      gap: 1rem;
      }
      .mega-menu {
      grid-template-columns: repeat(2, 1fr);
      }
      .search-container input {
      width: 12rem;
      }
      .welcome-title {
      font-size: 2.3rem;
      }
      .timeline::after {
      left: 31px;
      }
      .timeline-item {
      width: 100%;
      padding-left: 70px;
      padding-right: 25px;
      }
      .timeline-item:nth-child(even) {
      left: 0;
      }
      .timeline-item:nth-child(odd)::after,
      .timeline-item:nth-child(even)::after {
      left: 21px;
      }
      }
      @media (max-width: 37.5rem) {
      .top-bar {
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      }
      .bar-right {
      flex-wrap: wrap;
      justify-content: center;
      }
      .search-container input {
      width: 100%;
      max-width: 100%;
      }
      .menu-container {
      overflow-x: auto;
      }
      nav.menu-desktop ul {
      flex-wrap: nowrap;
      justify-content: flex-start;
      }
      .floating-quotes {
      display: none;
      }
      }
      .menu-desktop > ul > li.dropdown:nth-child(2) .mega-menu {
      left: auto !important;
      right: 0 !important;
      transform: translateX(0) translateY(0.62rem) !important;
      }
      .menu-desktop > ul > li.dropdown:nth-child(2):hover > .mega-menu,
      .menu-desktop > ul > li.dropdown:nth-child(2):focus-within > .mega-menu {
      transform: translateX(0) translateY(0) !important;
      }
      /* Evidenziazione risultati ricerca */
      mark.search-hit {
      background: rgba(255, 215, 0, 0.35);
      padding: 0 .15em;
      border-radius: .2em;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0.62rem) !important;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0) !important;
      }
      /* Evita il centraggio globale su questo solo menu */
      margin-left: 0 !important;
      }
      /* Pannello risultati ricerca */
      #search-panel { font-family: 'Montserrat', sans-serif; }
      mark.search-hit {
      background: rgba(255, 215, 0, 0.35);
      padding: 0 .15em;
      border-radius: .2em;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0.62rem) !important;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0) !important;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0.62rem) !important;
      }
      left: auto !important;
      right: 0 !important;
      transform: translateY(0) !important;
      }
      /* Pannello ricerca: pulsante chiudi */
      #search-panel .search-close {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: 1px solid rgba(255, 215, 0, .35);
      color: #e9eef5;
      border-radius: 6px;
      padding: 2px 8px;
      cursor: pointer;
      font-size: .85rem;
      }
      #search-panel .search-close:hover {
      background: rgba(255,255,255,0.06);
      }
      /* === v6: Varianti posizionamento mega-menu per singole voci === */
      /* Default: resta centrato (stili già presenti) */
      nav.menu-desktop .mega-menu.anchor-left {
      left: 0 !important;
      right: auto !important;
      transform: translateY(0.62rem) !important;
      }
      nav.menu-desktop li.dropdown:hover > .mega-menu.anchor-left,
      nav.menu-desktop li.dropdown:focus-within > .mega-menu.anchor-left,
      nav.menu-desktop .mega-menu.anchor-left:hover {
      transform: translateY(0) !important;
      }
      nav.menu-desktop .mega-menu.right-align {
      left: auto !important;
      right: 0 !important;
      transform: translateY(0.62rem) !important;
      }
      nav.menu-desktop li.dropdown:hover > .mega-menu.right-align,
      nav.menu-desktop li.dropdown:focus-within > .mega-menu.right-align,
      nav.menu-desktop .mega-menu.right-align:hover {
      transform: translateY(0) !important;
      }
      /* Pannello ricerca: chiudi */
      #search-panel .search-close {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: 1px solid rgba(255, 215, 0, .35);
      color: #e9eef5;
      border-radius: 6px;
      padding: 2px 8px;
      cursor: pointer;
      font-size: .85rem;
      }
      #search-panel .search-close:hover {
      background: rgba(255,255,255,0.06);
      }
    </style>
    <style id="patch-ui">/* CSS minimized for reliability */
      body{overflow:visible!important}
      .slider-vertical{position:fixed;left:3.25rem;top:7.5rem;width:11.25rem;height:20rem;z-index:900;overflow:hidden;border:1px solid rgba(255,215,0,.18);border-radius:.75rem;background:rgba(10,10,25,.45);backdrop-filter:blur(.38rem);box-shadow:0 .5rem 1.5rem rgba(0,0,0,.35)}
      .slider-vertical .slider-inner{position:absolute;inset:0;will-change:transform}
      .slide-vertical{width:100%;padding:.62rem .62rem .88rem;display:flex;flex-direction:column;align-items:center;gap:.5rem}
      .slide-vertical img{width:100%;height:8.75rem;object-fit:contain;display:block;background:rgba(0,0,0,.25);border-radius:.62rem;border:1px solid rgba(255,255,255,.1);box-shadow:0 .38rem .88rem rgba(0,0,0,.25)}
      .slide-vertical p{margin:.25rem 0 0;font-family:'Cormorant Garamond',serif;font-size:.92rem;text-align:center;color:#ffe9b8;text-shadow:0 0 .5rem rgba(255,215,0,.25);min-height:2.6em;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
      .slider-controls{position:fixed;left:3.25rem;top:27.81rem;width:11.25rem;display:flex;flex-direction:column;gap:.5rem;background:rgba(10,10,25,.55);border:1px solid rgba(255,215,0,.22);border-radius:.62rem;padding:.5rem;z-index:900}
      .ctrl-btn{display:inline-flex;align-items:center;justify-content:center;min-height:2rem;padding:.38rem .62rem;font-weight:600;cursor:pointer;border-radius:.5rem;border:1px solid rgba(255,215,0,.25);background:rgba(20,20,40,.7);color:#ffd86a}
      .audio-player{position:fixed;left:3.25rem;top:40.38rem;z-index:2147483601;display:flex;align-items:center;gap:.62rem;padding:.5rem .62rem;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.62rem;opacity:1;transform:none}
      .audio-title{font-weight:600}.audio-player .controls{display:flex;align-items:center;gap:.62rem}.audio-player input[type=range]{width:7.5rem}
      .articles-blob{position:fixed;right:1.25rem;top:9.5rem;width:20rem;z-index:2147483600;background:radial-gradient(120% 150% at 100% 0%,rgba(50,120,255,.16),rgba(10,10,30,.82));border:1px solid rgba(255,255,255,.08);border-radius:1rem;padding:.88rem 1rem;box-shadow:0 .94rem 1.88rem rgba(0,0,0,.35)}
      .articles-blob h3{margin:0 0 .5rem;font-family:'Cinzel',serif;color:#ffd86a}.articles-blob ul{list-style:none;margin:0;padding:0}.articles-blob li{margin:.25rem 0}.articles-blob a{color:#cfe8ff;text-decoration:none;font-weight:700}.articles-blob a:hover{color:#fff;text-decoration:underline}
      .right-embed{position:fixed;right:1.25rem;top:40rem;width:20rem;z-index:2147483600;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.75rem;padding:.5rem}
      .right-embed iframe{width:100%;height:264px;display:block;border:0}
      #russell-box{position:fixed;bottom:5vh;left:2rem;z-index:2147483602;background:rgba(10,10,30,.8);border:1px solid rgba(255,215,0,.25);border-radius:.62rem;padding:.62rem .75rem;max-width:24rem;box-shadow:0 .5rem 1.12rem rgba(0,0,0,.35)}
      #russell-btn{all:unset;cursor:pointer;display:block;color:#ffd86a}#russell-hint{position:fixed;bottom:15vh;left:3.5rem;z-index:2147483602;color:#cfe8ff;opacity:.85;font-style:italic}
      #lightning,#bolt{position:fixed;inset:0;pointer-events:none;z-index:5;opacity:0}
      #lightning{background:radial-gradient(circle at 50% 50%,rgba(255,255,255,.9),rgba(255,255,255,.2) 40%,transparent 65%);transition:opacity .18s ease-out}
      #bolt{width:160px;height:400px;left:50%;top:50%;background:linear-gradient(to bottom,rgba(255,255,255,1),rgba(255,255,255,0));clip-path:polygon(48% 0,52% 0,60% 25%,45% 25%,55% 55%,40% 55%,48% 100%,42% 100%,35% 60%,50% 60%,38% 28%,58% 28%);filter:drop-shadow(0 0 12px rgba(255,255,255,.8));transition:opacity .28s ease-out,transform .09s ease-out}
      #effects-ctrl{position:fixed;top:.9rem;right:1.25rem;width:auto;z-index:2147483603;display:flex;gap:.5rem;justify-content:flex-end}
      #effects-ctrl .ctrl-btn{min-width:6.5rem}
      @media (min-width:1200px){ main{padding-left:16rem;padding-right:22rem} }
    </style>
    <style id="menu-fix-overrides">nav.menu-desktop li.dropdown > .mega-menu.anchor-left{left:0!important;right:auto!important;transform:translateY(0.62rem)!important}nav.menu-desktop li.dropdown:hover>.mega-menu.anchor-left,nav.menu-desktop li.dropdown:focus-within>.mega-menu.anchor-left,nav.menu-desktop .mega-menu.anchor-left:hover{transform:translateY(0)!important}nav.menu-desktop li.dropdown > .mega-menu.right-align{left:auto!important;right:0!important;transform:translateY(0.62rem)!important}nav.menu-desktop li.dropdown:hover>.mega-menu.right-align,nav.menu-desktop li.dropdown:focus-within>.mega-menu.right-align,nav.menu-desktop .mega-menu.right-align:hover{transform:translateY(0)!important}@media (max-width:768px){nav.menu-desktop .mega-menu{left:0!important;right:0!important;transform:translateY(0.62rem)!important;width:100vw!important;max-width:100vw!important}nav.menu-desktop li.dropdown:hover>.mega-menu,nav.menu-desktop li.dropdown:focus-within>.mega-menu,nav.menu-desktop .mega-menu:hover{transform:translateY(0)!important}}</style>
    <style id="timeline-restore-css">
      /* Restore/ensure timeline visibility + gentle reveal animation */
      .timeline .timeline-item{opacity:0; transform: translateY(18px); transition: opacity .6s ease, transform .6s ease;}
      .timeline .timeline-item.visible{opacity:1; transform:none;}
    </style>
    <style id="search-panel-css">
      .search-container{position:relative;display:inline-flex;align-items:center;gap:.4rem}
      .search-container .search-icon{cursor:pointer}
      #search-panel{position:fixed;inset:10% 12% auto 12%;min-height:16rem;max-height:70vh;background:rgba(10,10,30,.96);
      border:1px solid rgba(255,215,0,.28);border-radius:.75rem;box-shadow:0 1rem 2rem rgba(0,0,0,.45);padding:.75rem;z-index:2147483605;display:none}
      #search-panel.open{display:block}
      #search-panel .sp-head{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}
      #search-panel .sp-title{font-family:'Cinzel',serif;color:#ffd86a;font-weight:700}
      #search-panel .sp-close{margin-left:auto;appearance:none;background:rgba(255,255,255,.08);color:#e9eef5;border:1px solid rgba(255,215,0,.28);border-radius:.38rem;padding:.25rem .5rem;cursor:pointer}
      #search-panel .sp-body{display:grid;grid-template-columns:1fr;gap:.4rem;overflow:auto;max-height:58vh}
      .sp-item a{color:#cfe8ff;font-weight:700;text-decoration:none}.sp-item a:hover{color:#fff;text-decoration:underline}
      .sp-item p{margin:.15rem 0 0;font-size:.9rem;color:#b9cbe6}
    </style>
    <style id="right-links-css">
      .right-box{
      position:fixed; right:1.25rem; width:20rem; z-index:2147483600;
      background: rgba(10,10,30,.86); border:1px solid rgba(255,215,0,.25);
      border-radius:.75rem; padding:.62rem .75rem; box-shadow:0 .9rem 1.8rem rgba(0,0,0,.34)
      }
      .right-box h3{margin:.1rem 0 .4rem; font-family:'Cinzel',serif; color:#ffd86a; font-size:1rem}
      .right-box .mini{color:#bcd7ff; font-size:.8rem; opacity:.85}
      .right-box .row{display:flex; align-items:center; gap:.5rem; margin:.38rem 0}
      .right-box input[type="search"]{
      width:100%; height:2rem; padding:0 .6rem; border-radius:.5rem;
      background:rgba(20,20,40,.75); border:1px solid rgba(255,215,0,.28); color:#e9eef5
      }
      .right-box .sources{display:flex; flex-wrap:wrap; gap:.4rem .6rem; margin:.35rem 0 .5rem}
      .right-box .sources label{font-size:.8rem; color:#d9e7ff}
      .right-box .btn{display:inline-flex; align-items:center; justify-content:center;
      padding:.38rem .6rem; border-radius:.5rem; border:1px solid rgba(255,215,0,.25);
      background:rgba(20,20,40,.78); color:#ffd86a; font-weight:700; cursor:pointer
      }
      #dict-compact{ top: 22.5rem; }
      #iep-linkbox{ top: 35.2rem; }
      @media (min-width: 1200px){
      .right-embed{ top: 42.5rem; }
      }
      @media (max-width: 980px){
      #dict-compact, #iep-linkbox { position: static; width:100%; margin: .75rem 0; }
      }
    </style>
    <style id="effects-dedupe-fix">
      /* Se il gruppo resta come fallback fisso (niente header trovato) → stringilo più a destra */
      #effects-ctrl{
      right: .25rem; /* prima era ~1.25rem: così non “tocca” la barra di ricerca */
      }
      /* Se i pulsanti vengono appesi dentro l’header/topbar → niente fixed, un po’ di spazio dal box cerca */
      header #effects-ctrl,
      .topbar #effects-ctrl,
      .navbar #effects-ctrl{
      position: static !important;
      margin-left: .75rem; /* li sposta leggermente verso destra rispetto alla ricerca */
      }
    </style>
    <style id="effects-right-edge">
      /* 🎯 Tieni qui i “knob” da regolare */
      :root{
      --effects-right: -0.6rem;  /* ↓ Porta a 0 o anche -4px per incollare al bordo */
      --effects-top:   0.9rem;   /* ↑ se vuoi abbassarli/alzarli un po' */
      }
      /* Caso A: fallback fisso (quando NON vengono appesi dentro l'header) */
      #effects-ctrl{
      position: fixed;
      top: var(--effects-top) !important;
      right: var(--effects-right) !important;
      z-index: 2147483603;
      }
      /* Caso B: quando li appendiamo dentro header/topbar/navbar */
      header, .topbar, .navbar{ position: relative; overflow: visible; }
      header #effects-ctrl,
      .topbar #effects-ctrl,
      .navbar #effects-ctrl{
      position: absolute !important;
      top: var(--effects-top);
      right: var(--effects-right);
      margin-left: 0; /* neutralizza eventuali margini precedenti */
      }
    </style>
    <style id="timeline-wow-css">
      /* Palette + setup */
      .timeline-container{ --accent:#ffd86a; --line:rgba(255,215,0,.35) }
      .timeline-container .timeline{ position:relative }
      /* Linea centrale “viva” con bagliore */
      .timeline-container .timeline::before{
      content:""; position:absolute; left:50%; top:0; bottom:0; width:2px; transform:translateX(-50%);
      background:linear-gradient(180deg, transparent 0, var(--line) 30%, var(--accent) 50%, var(--line) 70%, transparent 100%);
      background-size:100% 180%;
      animation:tlLineFlow 8s linear infinite;
      filter:drop-shadow(0 0 .6rem rgba(255,215,0,.45));
      }
      @keyframes tlLineFlow{from{background-position:0 0}to{background-position:0 180%}}
      /* Layout item (auto alternanza) */
      .timeline-container .timeline-item{ position:relative; width:calc(50% - 2.4rem); margin:2rem 0; }
      .timeline-container .timeline-item.left  { margin-right:auto; padding-right:2.6rem; text-align:right }
      .timeline-container .timeline-item.right { margin-left:auto;  padding-left: 2.6rem; text-align:left }
      /* Card */
      .timeline-container .timeline-content{
      position:relative; background:rgba(10,10,30,.72);
      border:1px solid rgba(255,215,0,.20); border-radius:14px;
      padding:1rem 1.1rem; box-shadow:0 .7rem 1.6rem rgba(0,0,0,.35);
      transform:translateY(24px) scale(.985); opacity:0;
      transition:transform .8s cubic-bezier(.2,.7,.1,1), opacity .8s ease;
      will-change:transform,opacity;
      }
      .timeline-container .timeline-item.in-view .timeline-content{ transform:none; opacity:1; transition-delay:var(--delay,0s)}
      /* Titolo timeline */
      .timeline-container .timeline-title{
      font-family:'Cinzel',serif; color:var(--accent); text-align:center; margin-bottom:1rem;
      letter-spacing:.5px; position:relative; display:inline-block; left:50%; transform:translateX(-50%);
      }
      .timeline-container .timeline-title::after{
      content:""; display:block; height:2px; width:0; margin:.35rem auto 0;
      background:linear-gradient(90deg,transparent,var(--accent),transparent);
      box-shadow:0 0 .6rem .1rem rgba(255,215,0,.35);
      animation:tlTitle 1.2s ease .2s forwards;
      }
      @keyframes tlTitle{to{width:100%}}
      /* Dot + connector (iniettati via JS) */
      .timeline-container .tl-dot{
      position:absolute; top:1rem; left:50%; width:14px; height:14px; border-radius:50%;
      transform:translate(-50%,-50%) scale(0);
      background:radial-gradient(circle at 50% 45%, #fff, var(--accent) 55%);
      box-shadow:0 0 0 .35rem rgba(255,215,0,.20), 0 0 .8rem .1rem rgba(255,215,0,.35);
      }
      .timeline-container .tl-dot::after{
      content:""; position:absolute; inset:-6px; border:2px solid rgba(255,215,0,.4);
      border-radius:inherit; opacity:0; transform:scale(.4);
      }
      .timeline-container .tl-connector{
      position:absolute; top:1rem; height:2px; width:calc(50% - 2.4rem);
      background:linear-gradient(90deg, var(--accent), transparent);
      transform-origin:var(--origin); transform:scaleX(0); opacity:.95;
      filter:drop-shadow(0 0 .55rem rgba(255,215,0,.6));
      left:calc(50% + 7px); /* default verso destra */
      }
      .timeline-container .timeline-item.left .tl-connector{
      left:auto; right:calc(50% + 7px);
      background:linear-gradient(270deg, var(--accent), transparent);
      }
      /* Entrate “wow” */
      .timeline-container .timeline-item.in-view .tl-dot{
      animation:tlDotPop .60s cubic-bezier(.2,.9,.2,1) forwards var(--delay,0s)
      }
      .timeline-container .timeline-item.in-view .tl-dot::after{
      animation:tlRing .9s ease-out forwards calc(var(--delay,0s)+.05s)
      }
      .timeline-container .timeline-item.in-view .tl-connector{
      animation:tlDraw .65s cubic-bezier(.2,.9,.2,1) forwards calc(var(--delay,0s)+.12s)
      }
      @keyframes tlDotPop{to{transform:translate(-50%,-50%) scale(1)}}
      @keyframes tlRing{0%{opacity:.6;transform:scale(.4)}100%{opacity:0;transform:scale(2.1)}}
      @keyframes tlDraw{from{transform:scaleX(0)}to{transform:scaleX(1)}}
      /* Parallax/tilt soft su contenuto (opzionale) */
      .timeline-container .timeline-content img{ will-change:transform; transition:transform .12s linear }
      .timeline-container .timeline-content:hover{ transform:translateY(-2px) scale(1.003) }
      /* Mobile: colonna singola + linea a sinistra */
      @media (max-width: 900px){
      .timeline-container .timeline::before{ left:1rem; transform:none }
      .timeline-container .timeline-item{ width:auto; margin:1.35rem 0; }
      .timeline-container .timeline-item.left,
      .timeline-container .timeline-item.right{
      padding-left:2.25rem; padding-right:0; text-align:left; margin-left:0; margin-right:0;
      }
      .timeline-container .tl-connector{ left:15px; right:auto; width:calc(100% - 2.4rem) }
      }
      /* Accessibility */
      @media (prefers-reduced-motion: reduce){
      .timeline-container .timeline-content, .timeline-container .tl-dot, .timeline-container .tl-connector{
      transition:none !important; animation:none !important; transform:none !important; opacity:1 !important;
      }
      }
    </style>
    <style id="timeline-comet-and-widen">
      /* Ensure containers don't clip comet/tail */
      .timeline-container, .timeline-container .timeline{ overflow: visible !important; }
      /* --- WIDEN stronger ------------------------------------------------------ */
      .timeline-container .timeline-item{
      width: calc(50% - 1.4rem) !important; /* widened a bit more */
      }
      .timeline-container .timeline-item.left  { padding-right: 1.8rem !important; }
      .timeline-container .timeline-item.right { padding-left:  1.8rem !important; }
      /* make inner card use full width and box-sizing */
      .timeline-container .timeline-content{
      width: 100%;
      max-width: none;
      box-sizing: border-box;
      }
      /* connectors (if present) match widening */
      .timeline-container .tl-connector{
      width: calc(50% - 1.4rem) !important;
      }
      /* Headlines: clamp size + allow breaks to avoid overflow */
      .timeline-container .timeline-content h3{
      font-size: clamp(1.02rem, 2.1vw, 1.22rem);
      line-height: 1.2;
      overflow-wrap: anywhere;
      hyphens: auto;
      margin-top: .15rem;
      margin-bottom: .35rem;
      }
      /* --- COMET -------------------------------------------------------------- */
      .timeline-container .timeline{ position: relative; }
      .timeline-container .tl-comet{
      position: absolute; left: 50%; top: 0;
      width: 10px; height: 10px;
      transform: translate(-50%, -50%) rotate(var(--tail-rot, 0deg));
      border-radius: 50%;
      background: radial-gradient(circle at 50% 50%, #fff 0 35%, var(--accent, #ffd86a) 60%, rgba(255,215,0,.3) 100%);
      /* Put comet above cards and line */
      z-index: 2147483000;
      pointer-events: none; will-change: top, transform;
      transition: top .7s cubic-bezier(.2,.7,.1,1);
      /* Halo */
      box-shadow:
      0 0 10px rgba(255,215,0,.95),
      0 0 18px rgba(255,215,0,.55),
      0 0 28px rgba(255,215,0,.35);
      }
      .timeline-container .tl-comet::after{
      content: ""; position: absolute; left: 50%; top: 100%; transform: translateX(-50%);
      width: 3px; height: 0;
      background: linear-gradient(180deg, rgba(255,215,0,1), rgba(255,215,0,.4) 40%, rgba(255,215,0,0));
      filter: drop-shadow(0 0 8px rgba(255,215,0,.8));
      opacity: 0;
      }
      .timeline-container .tl-comet.shoot::after{ animation: cometTail .9s ease forwards; }
      @keyframes cometTail{
      0%{   height: 0;    opacity: .95 }
      35%{  height: 46px; opacity: 1 }
      100%{ height: 120px; opacity: 0 }
      }
      /* Respect reduced motion */
      @media (prefers-reduced-motion: reduce){
      .timeline-container .tl-comet{ display:none !important }
      }
    </style>
    <!---->
    <style id="audio-player-stack">
      /* forza il box audio a prendersi tutta la riga sotto */
      #audio-player{
      display: grid;              /* titolo riga 1, controlli riga 2 */
      grid-template-columns: 1fr;
      gap: .35rem;
      flex: 1 1 100% !important;  /* se il genitore è flex, occupa 100% e va a capo */
      width: 15% !important;
      margin-top: 0.5rem;
      }
      #audio-player{ margin-top: 610px; top: 0; }


      #audio-player .audio-title{
      margin: 0; font-weight: 700;
      }
      #audio-player .controls{
      display: flex;
      flex-wrap: wrap;            /* se serve, i controlli vanno a capo */
      gap: .5rem .6rem;
      align-items: center;
      }
      #audio-player #time{ 
      font-variant-numeric: tabular-nums; 
      min-width: 7.2rem;          /* evita salti di layout */
      }
      #audio-player #volume{
      width: 160px;               /* regola pure: 120–220px */
      }
    </style>
    <style>
      @media (max-width: 900px){
      #audio-player{ width: 100%; max-width: 520px; }
      }
    </style>

    <style id="search-related-css">
      .related-results{
      margin-top:.6rem; padding-top:.6rem;
      border-top:1px solid rgba(255,215,0,.22);
      }
      .related-header{
      margin:0 0 .35rem; font-weight:700; font-size:1rem; color:#ffeb9a;
      }
      .related-list{ list-style:none; margin:0; padding:0; display:grid; gap:.4rem; }
      .related-item{ padding:.45rem .55rem; border:1px solid rgba(255,215,0,.16); border-radius:10px; background:rgba(10,10,30,.78); }
      .related-item a{ color:#ffeb9a; text-decoration:none; }
      .related-item a:hover{ text-decoration:underline; }
      .related-item .meta{ font-size:.86rem; opacity:.9; margin-top:.15rem; }
    </style>
    <style id="search-panel-tune">
  :root{
    --search-panel-w: 780px;  /* Larghezza finestra risultati */
    --search-panel-maxh: 72vh;/* Altezza massima con scroll interno */
  }

  /* Pannello */
  #search-panel, #searchPanel, .search-panel, .results-panel{
    position: fixed;
    left: 50%; top: clamp(72px, 8vh, 120px);
    transform: translateX(-50%);
    width: min(94vw, var(--search-panel-w));
    max-height: var(--search-panel-maxh);
    border-radius: 12px;
    overflow: hidden; /* scorre solo il body interno */
    z-index: 2147483605;
  }

  /* Header del pannello: titolo + chiudi */
  .search-header, #search-header, .results-header{
    display: flex; align-items: center; justify-content: space-between;
    padding: .65rem .9rem;
    border-bottom: 1px solid rgba(255,215,0,.22);
  }
  .search-title, .results-title{
    margin:0; font-weight: 700; font-size: 1.05rem;
  }
  .search-close, #search-close, [data-role="search-close"]{
    margin: 0; padding: .35rem .55rem; border-radius: .5rem; line-height:1;
    cursor: pointer; border: 1px solid rgba(255,215,0,.25);
    background: rgba(20,20,40,.78); color:#ffd86a; font-weight:700;
  }

  /* Corpo scorrevole */
  #search-results, #searchResults, .search-results, .results-scroll{
    max-height: calc(var(--search-panel-maxh) - 3.2rem); /* togli header */
    overflow: auto;
    padding: .6rem .8rem .8rem;
    display: grid; gap: .55rem;
  }

  /* Singolo risultato (flessibile: li, div, ecc.) */
  #search-results > *, .search-results > *{
    padding: .55rem .65rem;
    border: 1px solid rgba(255,215,0,.16);
    border-radius: 10px;
    background: rgba(10,10,30,.78);
  }

  /* Titolo risultato */
  #search-results h4, .search-results h4, .result-title{
    margin: 0 0 .2rem; font-size: 1rem; font-weight: 700; color:#ffeb9a;
  }

  /* Tag/meta (es. Idealismo) come “chip” */
  .result-meta, .result-tag, .tag{
    display:inline-block; margin: 0 0 .25rem; padding:.1rem .45rem;
    font-size:.8rem; border-radius:999px; color:#0b1022;
    background: linear-gradient(90deg,#ffd86a,#ffeb9a);
  }

  /* Descrizione + sorgente */
  .result-desc{ margin:.1rem 0 .15rem; font-size:.9rem; color:#cfe2ff; line-height:1.25; }
  .result-source{ font-size:.8rem; opacity:.85; }

  /* Evidenziazione (se usi <mark> o aggiungi classe) */
  mark, .hl{ background: #ffe08a; color:#141414; padding:0 .15rem; border-radius:.2rem; }

  /* Mobile piena larghezza e un po’ più alto */
  @media (max-width: 900px){
    :root{ --search-panel-w: 100vw; --search-panel-maxh: 82vh; }
    #search-panel, #searchPanel, .search-panel, .results-panel{
      left:50%; transform:translateX(-50%); width:100vw; border-radius:10px;
    }
  }
</style>
<style id="search-cancel-gold">
  /* usa il tuo oro; se non c’è, fallback */
  :root{ --gold: #d4af37; }

  /* lascia un po’ di spazio a destra per l’icona "X" + la lente */
  #site-search{
    padding-right: 2.2rem; /* regola se serve (2.0–2.6rem) */
  }

  /* Safari/Chromium: icona clear personalizzata color oro */
  #site-search::-webkit-search-cancel-button{
    -webkit-appearance: none;         /* nasconde l’icona nativa */
    height: 18px; width: 18px;        /* dimensione icona */
    cursor: pointer; opacity: 1;
    background-color: var(--gold, #d4af37);  /* <<< colore oro */
    border-radius: 50%;
    /* Maschera SVG: una X con estremi arrotondati */
    -webkit-mask: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/>\
</svg>') no-repeat center / 100% 100%;
  }

  /* se la tua lente è troppo vicina, spostala appena */
  .search-container .search-icon{ right: .55rem; } /* opzionale */
</style>

  </head>
  <body>
    <!-- UI PATCH BLOCKS -->
    <div class="slider-vertical" aria-label="Galleria autori">
      <div class="slider-inner" id="sliderInner">
        <div class="slide-vertical">
          <img alt="Socrate" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Socrates_Louvre.jpg" loading="eager" decoding="async" width="260" height="340" />
          <p>Socrate</p>
        </div>
        <div class="slide-vertical">
          <img alt="Platone" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/platone.png" loading="lazy" decoding="async" width="260" height="340" />
          <p>Platone</p>
        </div>
        <div class="slide-vertical">
          <img alt="Aristotele" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Aristotle_.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Aristotele</p>
        </div>
        <div class="slide-vertical">
          <img alt="Maria Teresa" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/maria_teresa.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>🕯️Maria Teresa: virtù e bellezza in armonia✝️</p>
        </div>
        <div class="slide-vertical">
          <img alt="Livia" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Livia.jpeg" loading="lazy" decoding="async" width="260" height="340" />
          <p>👑🦌Livia🦅DEA egizia🔱</p>
        </div>
        <div class="slide-vertical">
          <img alt="Cartesio" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/cartesio.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Cartesio</p>
        </div>
        <div class="slide-vertical">
          <img alt="Kant" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/kant.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>Kant - il più zoppo tra gli storpi del concetto</p>
        </div>
        <div class="slide-vertical">
          <img alt="Gadamer" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/gadamer.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>H.G.Gadamer</p>
        </div>
        <div class="slide-vertical">
          <img alt="Polpetta" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/polpetta.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>🏹 Polpetta🦸: guerriera celtica</p>
        </div>
        <div class="slide-vertical">
          <img alt="Ricoeur" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/ricoeur.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>P. Ricoeur</p>
        </div>
        <div class="slide-vertical">
          <img alt="Levinas" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/levinas.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>E. Lévinas</p>
        </div>
        <div class="slide-vertical">
          <img alt="San Tommaso" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/s.Tommaso.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>San Tommaso</p>
        </div>
        <div class="slide-vertical">
          <img alt="Cerbero" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/cerbero.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>Cerbero - Guardiano dell'Ade</p>
        </div>
        <div class="slide-vertical">
          <img alt="Nietzsche" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/friedrich-nietzsche.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Nietzsche</p>
        </div>
        <div class="slide-vertical">
          <img alt="Dea" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/dea.jpeg" loading="lazy" decoding="async" width="260" height="340" />
          <p>𓍝Divinità mesopotamica⚯</p>
        </div>
        <div class="slide-vertical">
          <img alt="Gianni Vattimo" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/vattimo.png" loading="lazy" decoding="async" width="260" height="340" />
          <p>Gianni Vattimo</p>
        </div>
        <div class="slide-vertical">
          <img alt="Testa di..." src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/krk.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Testa di ...</p>
        </div>
        <div class="slide-vertical">
          <img alt="Democrito" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Democritus.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Democrito</p>
        </div>
        <div class="slide-vertical">
          <img alt="Talete" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Talete.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Talete</p>
        </div>
        <div class="slide-vertical">
          <img alt="Aristippo" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/aristippo.webp" loading="lazy" decoding="async" width="260" height="340" />
          <p>Aristippo</p>
        </div>
        <div class="slide-vertical">
          <img alt="Massimo Cacciari" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/cacciari.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Massimo Cacciari</p>
        </div>
        <div class="slide-vertical">
          <img alt="Cicerone" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/cicerone.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Cicerone</p>
        </div>
        <div class="slide-vertical">
          <img alt="Dante Alighieri" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/dante.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Dante Alighieri - la iena che fa poesia nelle tombe</p>
        </div>
        <div class="slide-vertical">
          <img alt="Gilles Deleuze" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/deleuze.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Gilles Deleuze</p>
        </div>
        <div class="slide-vertical">
          <img alt="Jacques Derrida" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/derrida.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Jacques Derrida</p>
        </div>
        <div class="slide-vertical">
          <img alt="John Dewey" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/dewey.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>John Dewey</p>
        </div>
        <div class="slide-vertical">
          <img alt="Michel Foucault" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/foucault.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Michel Foucault</p>
        </div>
        <div class="slide-vertical">
          <img alt="G.W.F. Hegel" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/hegel.avif" loading="lazy" decoding="async" width="260" height="340" />
          <p>G.W.F. Hegel</p>
        </div>
        <div class="slide-vertical">
          <img alt="Martin Heidegger" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/heidegger.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Martin Heidegger</p>
        </div>
        <div class="slide-vertical">
          <img alt="Max Horkheimer" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/horkheimer.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Max Horkheimer</p>
        </div>
        <div class="slide-vertical">
          <img alt="Edmund Husserl" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/husserl.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Edmund Husserl</p>
        </div>
        <div class="slide-vertical">
          <img alt="Maurice Merleau-Ponty" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/merleau-ponty.avif" loading="lazy" decoding="async" width="260" height="340" />
          <p>Maurice Merleau-Ponty</p>
        </div>
        <div class="slide-vertical">
          <img alt="Charles S. Peirce" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/peirce.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Charles S. Peirce</p>
        </div>
        <div class="slide-vertical">
          <img alt="Pirrone" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/pirrone.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Pirrone</p>
        </div>
        <div class="slide-vertical">
          <img alt="Pitagora" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/pitagora.avif" loading="lazy" decoding="async" width="260" height="340" />
          <p>Pitagora</p>
        </div>
        <div class="slide-vertical">
          <img alt="Richard Rorty" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/richard_rorty.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Richard Rorty</p>
        </div>
        <div class="slide-vertical">
          <img alt="Bertrand Russell" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/russell.jpeg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Bertrand Russell</p>
        </div>
        <div class="slide-vertical">
          <img alt="Emanuele Severino" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/Severino.png" loading="lazy" decoding="async" width="260" height="340" />
          <p>Emanuele Severino</p>
        </div>
        <div class="slide-vertical">
          <img alt="Michail Bulgakov" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/bulgakov.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Michail Bulgakov</p>
        </div>
        <div class="slide-vertical">
          <img alt="Fëdor Dostoevskij" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/dostoevskij.gif" loading="lazy" decoding="async" width="260" height="340" />
          <p>Fëdor Dostoevskij</p>
        </div>
        <div class="slide-vertical">
          <img alt="Umberto Galimberti" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/galimberti.png" loading="lazy" decoding="async" width="260" height="340" />
          <p>Umberto Galimberti</p>
        </div>
        <div class="slide-vertical">
          <img alt="Max Weber" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/max%20weber.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Max Weber</p>
        </div>
        <div class="slide-vertical">
          <img alt="Lev Šestov" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/sestov.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Lev Šestov</p>
        </div>
        <div class="slide-vertical">
          <img alt="F.W.J. Schelling" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/schelling.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>F.W.J. Schelling</p>
        </div>
        <div class="slide-vertical">
          <img alt="Ludwig Wittgenstein" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/wittgenstein.jpg" loading="lazy" decoding="async" width="260" height="340" />
          <p>Ludwig Wittgenstein</p>
        </div>
      </div>
    </div>
    <div class="slider-controls" id="slider-controls">
      <button class="ctrl-btn" id="slider-toggle">⏯️ Avvia / Ferma</button>
      <button class="ctrl-btn" id="slider-invert">🔄 Inverti</button>
      <label class="speed-label" for="slider-speed"><span class="speed-label-text">Regola velocità</span><input id="slider-speed" type="range" min="1" max="12" value="8"/></label>
    </div>
    <div id="audio-player" class="audio-player" aria-label="Lettore audio">
      <div class="audio-title">🎧 Musica per lo studio</div>
      <br>
      <div class="controls"><button id="playPause">▶️</button><span id="time" aria-live="polite">0:00 / 0:00</span><input id="volume" type="range" min="0" max="1" step="0.01" value="0.8"></div>
      <audio id="myAudio" preload="auto" src="https://casi0048.github.io/suoni/Strauss.mp3"></audio>
    </div>
    <aside aria-label="Ultimi articoli" class="articles-blob">
      <h3>📰 Ultimi articoli</h3>
      <ul>
        <li><a href="articoli/circolo_di_vienna.html">Circolo di Vienna</a></li>
        <li><a href="articoli/ipazia.html">Ipazia di Alessandria</a></li>
        <li><a href="articoli/platone_mito_caverna.html">Il Mito della Caverna di Platone</a></li>
        <li><a href="articoli/parmenide1.html">Parmenide di Elea</a></li>
        <li><a href="articoli/2nietzsche.html">Nietzsche</a></li>
        <li><a href="articoli/battaglio_maratona.html">Battaglia di Maratona</a></li>
      </ul>
    </aside>
    <!-- Dizionario filosofico — multi-fonte, compatto -->
    <div class="right-box" id="dict-compact">
      <h3>📘 Dizionario filosofico</h3>
      <div class="mini">multi‑fonte, compatto</div>
      <form id="dict-form">
        <div class="row">
          <input id="dict-q" type="search" placeholder="Cerca un termine…">
        </div>
        <div class="sources">
          <label><input type="checkbox" data-url="https://duckduckgo.com/?q=site%3Aplato.stanford.edu+{q}" checked> SEP</label>
          <label><input type="checkbox" data-url="https://duckduckgo.com/?q=site%3Aiep.utm.edu+{q}" checked> IEP</label>
          <label><input type="checkbox" data-url="https://www.treccani.it/risultati?q={q}" checked> Treccani</label>
          <label><input type="checkbox" data-url="https://it.wikipedia.org/w/index.php?search={q}"> Wikipedia</label>
          <label><input type="checkbox" data-url="https://www.britannica.com/search?query={q}"> Britannica</label>
        </div>
        <div class="row">
          <button type="submit" class="btn">Cerca</button>
        </div>
      </form>
    </div>
    <!-- Enciclopedia filosofica (IEP tradotta) -->
    <div class="right-box" id="iep-linkbox">
      <h3>📚 Enciclopedia filosofica (IEP)</h3>
      <div class="row">
        <a class="btn" target="_blank" rel="noopener"
          href="https://iep-utm-edu.translate.goog/a/?_x_tr_sl=auto&_x_tr_tl=it&_x_tr_hl=uk&_x_tr_pto=wapp">
        Apri versione tradotta
        </a>
      </div>
      <div class="mini">
        oppure <a target="_blank" rel="noopener" href="https://iep.utm.edu/">IEP originale</a>
      </div>
    </div>
    <div class="right-embed">
      <iframe src="https://www.youtube.com/embed/G_REgkOuQfw" title="Schopenhauer e Nietzsche (Hans-Georg Gadamer) - 3x4" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <div id="russell-box"><button id="russell-btn">🎵 "La maggior parte degli uomini preferirebbe morire piuttosto che pensare,  infatti è quello che fanno"<br><strong>– Bertrand Russell</strong></button></div>
    <div id="russell-hint">Clicca per ascoltare la chitarra 🎸</div>
    <audio id="russell-audio" preload="auto" src="https://casi0048.github.io/suoni/gitarra.mp3"></audio>
    <audio id="thunder-sound" preload="auto">
      <source src="https://casi0048.github.io/suoni/thunder-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="explosionSound" preload="auto" src="https://casi0048.github.io/suoni/explosion-1.mp3"></audio>
    <div id="lightning" aria-hidden="true"></div>
    <div id="bolt" aria-hidden="true"></div>
    <!-- Sfondo con particelle cosmiche -->
    <div id="cosmic-bg"></div>
    <!-- Top Bar -->
    <div class="top-bar">
      <a class="brand" href="/">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
          <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
          <line x1="12" y1="22.08" x2="12" y2="12"></line>
        </svg>
        <span>Echi di Sofia</span>
      </a>
      <div class="bar-right">
        <div class="translate-box">
          <span>🌐</span>
          <select aria-label="Traduci pagina" class="translate-select" id="customTranslate">
            <option value="it">Italiano</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="pl">Polski</option>
          </select>
          <div aria-hidden="true" id="google_translate_element" style="position:absolute;left:-9999px;top:-9999px;height:0;width:0;overflow:hidden"></div>
        </div>
        <div class="search-container" role="search">
          <input aria-label="Cerca" id="site-search" placeholder="Cerca nel sito..." type="search" />
          <i aria-hidden="true" class="fa-solid fa-magnifying-glass search-icon"></i>
        </div>
        <button class="ctrl-btn" id="btn-thunder" title="Riproduci tuono">⚡ Tuono</button>
        <button class="ctrl-btn" id="btn-explode" title="Esplodi testo">💥 Esplodi</button>
      </div>
    </div>
    <!-- Menu principale -->
    <div class="menu-container">
      <nav class="menu-desktop" aria-label="Menu principale">
        <ul role="menu">
          <li class="dropdown">
            <a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/benvenuti.html" role="menuitem"> 🗝️ INCIPIT</a>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            🏛️ Filosofia antica <span class="arrow">▼</span>
            </button>
            <div aria-label="Sottomenu Filosofia antica" class="mega-menu columns-4 anchor-left" role="menu">
              <div>
                <h4>Presocratici</h4>
                <a href="Presocratici/talete.html" role="menuitem">Talete</a>
                <a href="Presocratici/anassimandro.html" role="menuitem">Anassimandro</a>
                <a href="Presocratici/anassimene.html" role="menuitem">Anassimene</a>
                <a href="articoli/eraclito.html" role="menuitem">Eraclito</a>
              </div>
              <div>
                <h4>Eleatismo</h4>
                <a href="Presocratici/senofane.html" role="menuitem">Senofane</a>
                <a href="Presocratici/parmenide.html" role="menuitem">Parmenide</a>
                <a href="articoli/zenone.html" role="menuitem">Zenone</a>
                <a href="articoli/melisso.html" role="menuitem">Melisso</a>
              </div>
              <div>
                <h4>Sofisti</h4>
                <a href="articoli/gorgia.html" role="menuitem">Gorgia</a>
                <a href="articoli/ippia.html" role="menuitem">Ippia</a>
                <a href="articoli/prodico.html" role="menuitem">Prodico</a>
              </div>
              <div>
                <h4>Pitagorici</h4>
                <a href="articoli/pitagora.html" role="menuitem">Pitagora</a>
                <a href="articoli/filolao.html" role="menuitem">Filolao</a>
                <a href="articoli/alcmeone.html" role="menuitem">Alcmeone</a>
                <a href="articoli/archita.html" role="menuitem">Archita</a>
                <a href="articoli/ippaso.html" role="menuitem">Ippaso</a>
              </div>
              <div>
                <h4>Scuola cinica</h4>
                <a href="articoli/antistene.html" role="menuitem">Antistene</a>
                <a href="articoli/diogene.html" role="menuitem">Diogene di Sinope</a>
                <a href="articoli/cratete.html" role="menuitem">Cratete di Tebe</a>
                <a href="articoli/iparchia.html" role="menuitem">Ipparchia</a>
                <a href="articoli/metrocle.html" role="menuitem">Metrocle di Maronea</a>
              </div>
              <div>
                <h4>Scuola atomistica</h4>
                <a href="articoli/leucippo.html" role="menuitem">Leucippo di Mileto</a>
                <a href="articoli/democrito.html" role="menuitem">Democrito di Abdera</a>
                <a href="articoli/scuola-vai%C5%9Be%E1%B9%A3ika.html" role="menuitem">Scuola Vaiśeṣika</a>
              </div>
              <div>
                <h4>Storiografia greca antica</h4>
                <a href="articoli/erodoto.html" role="menuitem">Erodoto</a>
                <a href="articoli/tucidide.html" role="menuitem">Tucidide </a>
                <a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
                <a href="articoli/polibio.html" role="menuitem">Polibio</a>
              </div>
              <div>
                <h4>🚀Approfondimenti</h4>
                <a href="https://www.worldhistory.org/trans/it/1-13310/democrazia-ateniese/" role="menuitem">Democrazia Ateniese</a>
                <a href="https://www.worldhistory.org/trans/it/2-927/donne-nellantica-grecia/" role="menuitem">Donne nell'Antica Grecia</a>
                <a href="https://www.worldhistory.org/trans/it/1-11373/magna-grecia/" role="menuitem">Magna Grecia</a>
                <a href="https://www.worldhistory.org/trans/it/1-14956/il-teatro-dellantica-grecia/" role="menuitem">Il teatro dell'antica Grecia</a>
                <a href="https://www.worldhistory.org/trans/it/1-10553/la-religione-nellantica-grecia/" role="menuitem">La religione nell'antica Grecia</a>
                <a href="https://www.worldhistory.org/trans/it/1-19269/la-danza-nellantica-grecia/" role="menuitem">La danza nell'Antica Grecia</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            📜Filosofia classica <span class="arrow">▼</span>
            </button>
            <div aria-label="Sottomenu Filosofia classica" class="mega-menu columns-4" role="menu">
              <div>
                <h4>Socrate e Scuola</h4>
                <a href="articoli/socrate.html" role="menuitem">Socrate</a>
                <a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
                <a href="articoli/antistene.html" role="menuitem">Antistene</a>
                <h4>Scetticismo</h4>
                <a href="articoli/pirrone.html" role="menuitem">Pirrone di Elide </a>
                <a href="articoli/timone.html" role="menuitem">Timone di Fliunte </a>
                <a href="articoli/arcesilao.html" role="menuitem">Arcesilao di Pitane</a>
                <a href="articoli/carneade.html" role="menuitem">Carneade di Cirene</a>
                <a href="articoli/enesidemo.html" role="menuitem">Enesidemo di Cnosso</a>
                <a href="articoli/agrippa.html" role="menuitem">Agrippa</a>
                <a href="articoli/sesto.html" role="menuitem">Sesto Empirico</a>
              </div>
              <div>
                <h4>Platone e Accademia</h4>
                <a href="articoli/platone.html" role="menuitem">Platone</a>
                <a href="articoli/aristippo.html" role="menuitem">Aristippo</a>
                <a href="articoli/diotima.html" role="menuitem">Diotima</a>
              </div>
              <div>
                <h4>Aristotele e Peripatetici</h4>
                <a href="articoli/aristotele.html" role="menuitem">Aristotele</a>
                <a href="articoli/teofrasto.html" role="menuitem">Teofrasto</a>
                <a href="articoli/eudemo.html" role="menuitem">Eudemo di Rodi </a>
                <a href="articoli/stratone.html" role="menuitem">Stratone di Lampsaco</a>
                <a href="articoli/demetrio.html" role="menuitem">Demetrio Falereo</a>
                <a href="articoli/andronico.html" role="menuitem">Andronico di Rodi</a>
                <a href="articoli/alessandro-afrodisia.html" role="menuitem">Alessandro di Afrodisia </a>
              </div>
              <div>
                <h4>Stoicismo</h4>
                <a href="articoli/zenone.html" role="menuitem">Zenone di Cizio</a>
                <a href="articoli/epitteto.html" role="menuitem">Epitteto</a>
                <a href="articoli/seneca.html" role="menuitem">Seneca</a>
                <a href="articoli/cleante.html" role="menuitem">Cleante di Asso </a>
                <a href="articoli/crisippo.html" role="menuitem">Crisippo di Soli </a>
                <a href="articoli/panezio.html" role="menuitem">Panezio di Rodi</a>
                <a href="articoli/posidonio.html" role="menuitem">Posidonio di Apamea </a>
              </div>
              <div>
                <h4>Epicureismo</h4>
                <a href="articoli/epicuro.html" role="menuitem">Epicuro</a>
                <a href="articoli/lucrezio.html" role="menuitem">Lucrezio</a>
                <a href="articoli/cicerone.html" role="menuitem">Cicerone</a>
                <a href="articoli/ermarco.html" role="menuitem">Ermarco di Mitilene</a>
                <a href="articoli/colote.html" role="menuitem">Colote di Lampsaco</a>
                <a href="articoli/zenone_di_sidone.html " role="menuitem">Zenone di Sidone </a>
              </div>
              <div>
                <h4>Neoplatonismo</h4>
                <a href="articoli/plotino.html" role="menuitem">Plotino</a>
                <a href="articoli/giamblico.html" role="menuitem">Giamblico di Calcide </a>
                <a href="articoli/proclo.html" role="menuitem">Proclo</a>
                <a href="articoli/ipazia.html" role="menuitem">Ipatia di Alessandria</a>
                <a href="articoli/simplicio.html" role="menuitem">Simplicio di Cilicia </a>
                <a href="articoli/orfismo.html" role="menuitem">Orfismo</a>
                <a href="articoli/eleusi.html" role="menuitem">Misteri Eleusini</a>
              </div>
              <div>
                <h4>Drammaturgia greca antica</h4>
                <a href="articoli/eschilo.html" role="menuitem">Eschilo</a>
                <a href="articoli/sofocle.html" role="menuitem">Sofocle</a>
                <a href="articoli/euripide.html" role="menuitem">Euripide</a>
              </div>
              <div>
                <h4>Commedia greca antica</h4>
                <a href="articoli/aristofane.html" role="menuitem">Aristofane</a>
                <a href="articoli/menandro.html" role="menuitem">Menandro</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">⛪Filosofia medievale<span class="arrow">▼</span></button>
            <div aria-label="Sottomenu Filosofia medievale" class="mega-menu columns-4" role="menu">
              <div>
                <h4>Scolastica</h4>
                <a href="articoli/eriugena.html" role="menuitem">Giovanni Scoto Eriugena</a>
                <a href="articoli/anselmo.html" role="menuitem">Sant'Anselmo d'Aosta</a>
                <a href="articoli/abelardo.html" role="menuitem">Pietro Abelardo</a>
                <a href="articoli/alberto-m.html" role="menuitem">Alberto Magno</a>
                <a href="articoli/tommaso%20d'aquino.html" role="menuitem">Tommaso d'Aquino</a>
                <a href="articoli/bonaventura.html" role="menuitem">Bonaventura da Bagnoregio</a>
                <a href="articoli/duns%20scoto.html" role="menuitem">Duns Scoto</a>
                <a href="articoli/ockham.html" role="menuitem">Guglielmo di Ockham</a>
                <a href="articoli/buridano.html" role="menuitem">Giovanni Buridano</a>
                <a href="articoli/oresome.html" role="menuitem">Nicola d'Oresme</a>
              </div>
              <div>
                <h4>Patristica</h4>
                <a href="articoli/clemente.html" role="menuitem">Clemente Alessandrino</a>
                <a href="articoli/tertulliano.html" role="menuitem">Tertulliano</a>
                <a href="articoli/origene.html" role="menuitem">Origene</a>
                <a href="articoli/cipriano.html" role="menuitem">Cipriano di Cartagine</a>
                <a href="articoli/atanasio.html" role="menuitem">Atanasio di Alessandria</a>
                <a href="articoli/basilio.html" role="menuitem">Basilio di Cesarea</a>
                <a href="articoli/gregorio-di-nazianzo.html" role="menuitem">Gregorio di Nazianzo</a>
                <a href="articoli/gregorio-di-nizza.html" role="menuitem">Gregorio di Nissa</a>
                <a href="articoli/ambrogio.html" role="menuitem">Ambrogio di Milano</a>
                <a href="articoli/girolamo.html" role="menuitem">Girolamo</a>
                <a href="articoli/agostino.html" role="menuitem">Agostino</a>
                <a href="articoli/pseudo-dionigi.html" role="menuitem">Pseudo-Dionigi Areopagita</a>
                <a href="articoli/boezio.html" role="menuitem">Boezio</a>
                <a href="articoli/alberto-m.html" role="menuitem">Gregorio Magno</a>
              </div>
              <div>
                <h4>Mistica</h4>
                <a href="articoli/ildegarda.html" role="menuitem">Ildegarda di Bingen </a>
                <a href="articoli/eckhart.html" role="menuitem">Meister Eckhart</a>
                <a href="articoli/caterina.html" role="menuitem">Caterina da Siena</a>
                <h4>Filosofia Islamica</h4>
                <a href="articoli/avicenna.html" role="menuitem">Avicenna</a>
                <a href="articoli/averroe.html" role="menuitem">Averroè</a>
                <a href="articoli/al-farabi.html" role="menuitem">Al-Farabi</a>
                <a href="articoli/al-ghazali.html" role="menuitem">Al-Ghazali</a>
              </div>
              <div>
                <h4>Filosofia Ebraica</h4>
                <a href="articoli/maimonide.html" role="menuitem">Maimonide</a>
                <a href="articoli/saadia%20goan.html" role="menuitem">Saadia Gaon</a>
                <a href="articoli/gersonide.html" role="menuitem">Gersonide</a>
                <a href="articoli/hasdai%20crescas.html" role="menuitem">Hasdai Crescas</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">💡Filosofia moderna <span class="arrow">▼</span></button>
            <div aria-label="Sottomenu Filosofia moderna" class="mega-menu columns-4" role="menu">
              <div>
                <h4>Rinascimento</h4>
                <a href="articoli/erasmo.html" role="menuitem">Erasmo da Rotterdam</a>
                <a href="articoli/machiavelli.html" role="menuitem">Niccolò Machiavelli</a>
                <a href="articoli/moro.html" role="menuitem">Tommaso Moro</a>
                <a href="articoli/bruno.html" role="menuitem">Giordano Bruno</a>
                <h4>Razionalismo</h4>
                <a href="articoli/cartesio.html" role="menuitem">Cartesio</a>
                <a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
                <a href="articoli/leibniz.html" role="menuitem">Leibniz</a>
              </div>
              <div>
                <h4>Empirismo</h4>
                <a href="articoli/locke.html" role="menuitem">Locke</a>
                <a href="articoli/hume.html" role="menuitem">Hume</a>
                <a href="articoli/berkeley.html" role="menuitem">Berkeley</a>
                <h4>Romanticismo</h4>
                <a href="articoli/frege.html" role="menuitem">Arthur Schopenhauer</a>
                <a href="articoli/kierkegaard.html" role="menuitem">Søren Kierkegaard</a>
                <a href="articoli/goethe.html" role="menuitem">Johann Wolfgang von Goethe</a>
              </div>
              <div>
                <h4>Illuminismo</h4>
                <a href="articoli/rousseau.html" role="menuitem">Rousseau</a>
                <a href="articoli/montesquieu.html" role="menuitem">Montesquieu</a>
                <a href="articoli/voltaire.html" role="menuitem">Voltaire</a>
                <h4>Materialismo</h4>
                <a href="articoli/marx.html" role="menuitem">Karl Marx</a>
                <a href="articoli/engels.html" role="menuitem">Friedrich Engels</a>
                <a href="articoli/feuerbach.html" role="menuitem">Ludwig Andreas Feuerbach </a>
              </div>
              <div>
                <h4>Idealismo</h4>
                <a href="articoli/hegel.html" role="menuitem">Hegel</a>
                <a href="articoli/kant.html" role="menuitem">Kant</a>
                <a href="articoli/fichte.html" role="menuitem">Fichte</a>
                <a href="articoli/schelling.html" role="menuitem">Schelling</a>
              </div>
              <div>
                <h4>Positivismo</h4>
                <a href="articoli/comte.html" role="menuitem">Auguste Comte </a>
                <a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
                <a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
                <a href="articoli/mach.html" role="menuitem">Ernst Mach</a>
                <a href="articoli/adrig%C3%B2.html" role="menuitem">Roberto Ardigò</a>
              </div>
              <div>
                <h4>Gnoseologia</h4>
                <a href="articoli/bacon.html" role="menuitem">Francis Bacon</a>
                <a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
                <a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
              </div>
              <div>
                <h4>Metafisica/Ontologia</h4>
                <a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
                <a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
                <a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
                <a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
                <a href="articoli/lewis.html" role="menuitem">David Lewis</a>
              </div>
              <div>
                <h4>Filosofia russa</h4>
                <a href="articoli/dostoevskij.html" role="menuitem">Fëdor Dostoevskij</a>
                <a href="articoli/solov'%C3%ABv.html" role="menuitem">Vladimir Solov'ëv </a>
                <a href="articoli/rozanov.html" role="menuitem">Vasilij Rozanov </a>
                <a href="articoli/sestov.html" role="menuitem">Lev Šestov</a>
                <a href="articoli/bulgakov.html" role="menuitem">Sergej Bulgakov</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">🌀Filosofia contemporanea <span class="arrow">▼</span></button>
            <div aria-label="Sottomenu Filosofia contemporanea" class="mega-menu columns-4" role="menu">
              <div>
                <h4>Filosofia analitica</h4>
                <a href="articoli/frege.html" role="menuitem">Frege</a>
                <a href="articoli/russell.html" role="menuitem">Russell</a>
                <a href="articoli/wittgenstein.html" role="menuitem">Wittgenstein</a>
                <a href="articoli/moore.html" role="menuitem">G.E. Moore</a>
                <h4>Utilitarismo</h4>
                <a href="articoli/betham.html" role="menuitem">Jeremy Bentham </a>
                <a href="articoli/mill.html" role="menuitem">John Stuart Mill</a>
              </div>
              <div>
                <h4>Filosofia Continentale</h4>
                <a href="articoli/husserl.html" role="menuitem">Husserl</a>
                <a href="articoli/merleau-ponty.html" role="menuitem">Merleau-Ponty</a>
                <a href="articoli/l%C3%A9vi-strauss.html" role="menuitem">Claude Lévi-Strauss</a>
                <a href="articoli/bergson1.html" role="menuitem">Henri-Louis Bergson</a>
                <a href="articoli/althusser.html" role="menuitem">Louis Althusser</a>
                <a href="articoli/dreyfus.html" role="menuitem">Dina Dreyfus</a>
                <a href="articoli/sartre.html" role="menuitem">Sartre</a>
              </div>
              <div>
                <h4>Ermeneutica</h4>
                <a href="articoli/schleiermacher.html" role="menuitem">Friedrich Schleiermacher</a>
                <a href="articoli/dilthey.html" role="menuitem">Wilhelm Dilthey</a>
                <a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
                <a href="articoli/gadamer.html" role="menuitem">Hans-Georg Gadamer</a>
                <a href="/articoli/ricoeur.html" role="menuitem">Paul Ricoeur</a>
              </div>
              <div>
                <h4>Filosofia del linguaggio</h4>
                <a href="articoli/wittgenstein.html" role="menuitem">Ludwig Wittgenstein</a>
                <a href="articoli/austin.html" role="menuitem">J.L. Austin</a>
                <a href="articoli/searle.html" role="menuitem">John Searle</a>
                <a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
                <h4>Scuola di Francoforte</h4>
                <a href="articoli/horkheimer.html" role="menuitem">Max Horkheimer</a>
                <a href="articoli/adorno.html" role="menuitem">Theodor W. Adorno</a>
                <a href="/articoli/marcuse.html" role="menuitem">Herbert Marcuse</a>
                <a href="articoli/benjamin.html" role="menuitem">Walter Benjamin</a>
                <a href="articoli/fromm.html" role="menuitem">Erich Fromm</a>
                <a href="articoli/habermas.html" role="menuitem">Jürgen Habermas</a>
              </div>
              <div>
                <h4>Pragmatismo Americano</h4>
                <a href="articoli/peirce.html" role="menuitem">Peirce</a>
                <a href="articoli/james.html" role="menuitem">W. James</a>
                <a href="articoli/dewey.html" role="menuitem">Dewey</a>
                <a href="articoli/rorty.html" role="menuitem">R. Rorty</a>
              </div>
              <div>
                <h4>Filosofia postmoderna</h4>
                <a href="articoli/derrida.html" role="menuitem">Derrida</a>
                <a href="articoli/foucault.html" role="menuitem">Foucault</a>
                <a href="articoli/lyotard.html" role="menuitem">Lyotard</a>
                <a href="articoli/deleuze.html" role="menuitem">Deleuze</a>
                <a href="articoli/butler.html" role="menuitem">Butler</a>
              </div>
              <div>
                <h4>Filosofia italiana</h4>
                <a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
                <a href="articoli/eco.html" role="menuitem">Umberto Eco</a>
                <a href="articoli/vattimo.html" role="menuitem">Gianni Vattimo</a>
                <a href="articoli/bodei.html" role="menuitem">Remo Bodei</a>
                <a href="articoli/cacciari.html" role="menuitem">Massimo Cacciari</a>
                <a href="articoli/galimberti.html" role="menuitem">Umberto Galimberti</a>
              </div>
              <div>
                <h4>Socioetica</h4>
                <a href="articoli/rawls.html" role="menuitem">John Rawls:</a>
                <a href="articoli/nozick.html" role="menuitem">Robert Nozick</a>
                <a href="articoli/singer.html" role="menuitem">Peter Singer</a>
                <a href="articoli/jonas.html" role="menuitem">Hans Jonas</a>
                <a href="articoli/beauvoir.html" role="menuitem">Simone de Beauvoir</a>
                <a href="articoli/fraser.html" role="menuitem">Nancy Fraser</a>
                <a href="articoli/said.html" role="menuitem">Edward Said</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">🇵🇱 Filosofia polacca <span class="arrow">▼</span></button>
            <div aria-label="Sottomenu Filosofia polacca" class="mega-menu columns-4 right-align" role="menu">
              <div>
                <h4>Romanticismo</h4>
                <a href="articoli/wronski.html" role="menuitem">Józef Hoene-Wroński</a>
                <a href="articoli/cieszkowski.html" role="menuitem">August Cieszkowski</a>
                <a href="articoli/mickiewicz.html" role="menuitem">Adam Mickiewicz</a>
                <a href="articoli/rzewuski.html" role="menuitem">Henryk Rzewuski</a>
                <a href="articoli/potocki.html" role="menuitem">Stanisław Kostka Potocki</a>
              </div>
              <div>
                <h4>Logica e Analitica</h4>
                <a href="articoli/twardowski.html" role="menuitem">Kazimierz Twardowski</a>
                <a href="articoli/lukasiewicz.html" role="menuitem">Jan Łukasiewicz</a>
                <a href="articoli/tarski.html" role="menuitem">Alfred Tarski</a>
                <a href="articoli/kotarbinski.html" role="menuitem">Tadeusz Kotarbiński</a>
                <a href="articoli/ingarden.html" role="menuitem">Roman Ingarden</a>
              </div>
              <div>
                <h4>Periodo comunista</h4>
                <a href="articoli/malinowski.html" role="menuitem">Bronisław Malinowski</a>
                <a href="articoli/kolakowski.html" role="menuitem">Leszek Kołakowski</a>
                <a href="articoli/wojtyla.html" role="menuitem">
                Karol Wojtyła<br />
                (Papa Giovanni Paolo II)
                </a>
              </div>
              <div>
                <h4>Post-Comunista</h4>
                <a href="articoli/tischner.html" role="menuitem">Józef Tischner</a>
                <a href="articoli/bauman.html" role="menuitem">Zygmunt Bauman</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/pagina-contatti.html" role="menuitem">📧 Contatti</a>
          </li>
        </ul>
      </nav>
    </div>
    <!-- Contenuto principale -->
    <main>
      <section class="welcome-section">
        <h1 class="welcome-title">Benvenuto in<br />Echi di Sofia</h1>
        <p class="welcome-subtitle">Un viaggio tra storia e pensiero</p>
        <div class="typing-wrap">
          <div class="typing-effect"></div>
          <span aria-hidden="true" class="caret"></span>
        </div>
        <div class="exploding-text" id="exploding" title="Clicca per esplodere">
          ⏳ Pensare, dunque è ancora possibile 🧘
        </div>
      </section>
      <!-- Timeline filosofica interattiva - INTEGRATA -->
      <section class="timeline-container">
        <h2 class="timeline-title">Linea del Tempo Filosofica</h2>
        <div class="timeline">
          <!-- Filosofia Antica -->
          <div class="timeline-item">
            <div class="timeline-content">
              <h3>🏛️ Filosofia Antica</h3>
              <p class="period">VII sec. a.C. - V sec. d.C.</p>
              <p>Dai Presocratici al Neoplatonismo, l'indagine sulla physis e sul cosmo. I filosofi cercano di comprendere la natura fondamentale della realtà.</p>
              <p><strong>Filosofi principali:</strong> Talete, Socrate, Platone, Aristotele, Plotino</p>
            </div>
          </div>
          <!-- Filosofia Medievale -->
          <div class="timeline-item">
            <div class="timeline-content">
              <h3>⛪ Filosofia Medievale</h3>
              <p class="period">V - XV secolo</p>
              <p>Fede e ragione si incontrano nella Scolastica. La filosofia araba ed ebraica fioriscono preservando il pensiero antico.</p>
              <p><strong>Filosofi principali:</strong> Agostino, Tommaso d'Aquino, Avicenna, Averroè, Maimonide</p>
            </div>
          </div>
          <!-- Filosofia Moderna -->
          <div class="timeline-item">
            <div class="timeline-content">
              <h3>💡 Filosofia Moderna</h3>
              <p class="period">XV - XIX secolo</p>
              <p>Razionalismo, Empirismo, Idealismo: il soggetto diventa il centro della riflessione filosofica.</p>
              <p><strong>Filosofi principali:</strong> Cartesio, Kant, Hegel, Hume, Rousseau</p>
            </div>
          </div>
          <!-- Filosofia Contemporanea -->
          <div class="timeline-item">
            <div class="timeline-content">
              <h3>🌀 Filosofia Contemporanea</h3>
              <p class="period">XIX secolo - oggi</p>
              <p>Dalla crisi della metafisica alle filosofie del linguaggio e dell'esistenza. Nuovi approcci alla conoscenza e all'etica.</p>
              <p><strong>Filosofi principali:</strong> Nietzsche, Heidegger, Wittgenstein, Foucault, Derrida</p>
            </div>
          </div>
          <!-- 🇵🇱 Filosofia Polacca -->
          <div class="timeline-item left">
            <div class="timeline-content">
              <h3>🇵🇱 Filosofia Polacca</h3>
              <p class="period">XIX–XX secolo</p>
              <p>Dalla Scuola di Leopoli-Varsavia alla fenomenologia e all’etica del Novecento.</p>
              <p><strong>Filosofi principali:</strong> Twardowski, Łukasiewicz, Kotarbiński, Ajdukiewicz, Tatarkiewicz</p>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- Citazioni filosofiche fluttuanti -->
    <div class="floating-quotes">
      <div class="quote-bubble">
        <div class="quote-text">"Conosci te stesso"</div>
        <div class="quote-author">- Socrate</div>
      </div>
    </div>
    <!-- Footer -->
    <footer>
      <div class="footer-wrap">
        <div class="footer-columns">
          <div class="col about">
            <h3>Pensieri Filosofici</h3>
            <p>Tra pensiero e stelle: un percorso tra scuole, autori e temi della filosofia, dalla classicità al contemporaneo.</p>
          </div>
          <div class="search-sections">
            <h4>Sezioni</h4>
            <ul>
              <li><a href="pagine/benvenuti.html">Incipit</a></li>
              <li><a href="articoli/cinismo.html">Cinismo</a></li>
              <li><a href="articoli/epicureismo.html">Epicureismo</a></li>
              <li><a href="articoli/filosofia-indiana.html">Filosofia indiana</a></li>
              <li><a href="articoli/platonismo.html">Platonismo</a></li>
              <li><a href="articoli/scetticismo.html">Scetticismo</a></li>
              <li><a href="articoli/stoicismo.html">Stoicismo</a></li>
            </ul>
          </div>
          <div class="col contact">
            <h4>Contatti</h4>
            <ul>
              <li><a href="mailto:info@pensierifilosofici.example">info@pensierifilosofici.example</a></li>
              <li><a href="https://casi0048.github.io/pagine/pagina-contatti.html">Modulo contatti</a></li>
            </ul>
            <div class="social">
              <a aria-label="Instagram" href="#"><i class="fa-brands fa-instagram"></i></a>
              <a aria-label="YouTube" href="#"><i class="fa-brands fa-youtube"></i></a>
              <a aria-label="X/Twitter" href="#"><i class="fa-brands fa-x-twitter"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-legal">
          <span>© <span id="year"></span> Pensieri Filosofici</span>
          <span class="dot">•</span>
          <a href="https://casi0048.github.io/pagine/privacy-policy.html">Privacy</a>
          <span class="dot">•</span>
          <a href="https://casi0048.github.io/pagine/credits.html">Crediti</a>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', ()=>{
        const effects = document.getElementById('effects-ctrl');
        if(effects){
          const host = document.querySelector('.topbar, .top-bar, header .menu-desktop, header nav, header, .navbar');
          if(host){ try{ host.appendChild(effects); effects.style.position=''; effects.style.top=''; effects.style.right=''; }catch(_){ } }
        }
      });
      (function(){const inner=document.getElementById('sliderInner');if(!inner)return;let pos=0,speed=.35,dir=1,running=true;function step(){if(!running){requestAnimationFrame(step);return}pos+=dir*speed;inner.style.transform=`translateY(${-pos}px)`;const total=inner.scrollHeight-inner.clientHeight;if(pos>=total)pos=0;if(pos<0)pos=total;requestAnimationFrame(step)}requestAnimationFrame(step);const t=document.getElementById('slider-toggle'),i=document.getElementById('slider-invert'),sp=document.getElementById('slider-speed');t?.addEventListener('click',()=>running=!running);i?.addEventListener('click',()=>dir*=-1);sp?.addEventListener('input',()=>{const v=parseInt(sp.value,10)||8;speed=.1+(v-1)*.08})})();
      window.addEventListener('load',()=>{const a=document.getElementById('myAudio'),btn=document.getElementById('playPause'),tm=document.getElementById('time'),v=document.getElementById('volume');if(!a||!btn)return;function f(s){if(!isFinite(s))return'0:00';const m=Math.floor(s/60),c=Math.floor(s%60);return m+':'+(c<10?'0'+c:c)}function u(){tm.textContent=`${f(a.currentTime)} / ${f(a.duration)}`}v.value=.8;a.volume=parseFloat(v.value);btn.addEventListener('click',()=>{if(a.paused){a.play().catch(()=>{});btn.textContent='⏸️'}else{a.pause();btn.textContent='▶️'}});v.addEventListener('input',()=>a.volume=parseFloat(v.value));a.addEventListener('timeupdate',u);a.addEventListener('loadedmetadata',u);a.addEventListener('ended',()=>{btn.textContent='▶️'})});
      (function(){const b=document.getElementById('russell-btn'),h=document.getElementById('russell-hint'),a=document.getElementById('russell-audio');if(!b||!a)return;let u=false;function lk(){if(u)return;u=true;a.muted=false;a.play().then(()=>{a.pause();a.currentTime=0}).catch(()=>{});window.removeEventListener('pointerdown',lk,{capture:true});window.removeEventListener('keydown',lk,{capture:true})}window.addEventListener('pointerdown',lk,{once:true,capture:true,passive:true});window.addEventListener('keydown',lk,{once:true,capture:true});b.addEventListener('click',()=>{try{a.currentTime=0;a.play().catch(()=>{})}catch(_){ }if(h)h.style.display='none'})})();
      (function(){const btn=document.getElementById('btn-thunder'),th=document.getElementById('thunder-sound'),ex=document.getElementById('explosionSound'),ov=document.getElementById('lightning'),bo=document.getElementById('bolt');if(!btn||!th||!ov||!bo)return;let unlocked=false;async function unlockOnce(){if(unlocked)return;unlocked=true;for(const s of [th,ex]){try{s.muted=false;await s.play();s.pause();s.currentTime=0}catch(_){}}}window.addEventListener('pointerdown',unlockOnce,{once:true,passive:true,capture:true});window.addEventListener('keydown',unlockOnce,{once:true,capture:true});let on=false;function up(){btn.classList.toggle('active',on);btn.setAttribute('aria-pressed',on?'true':'false');btn.textContent=on?'⚡ Tuono: ON':'⚡ Tuono'}btn.addEventListener('click',e=>{e.preventDefault();on=!on;if(on){try{th.currentTime=0;th.play().catch(()=>{})}catch(_){}}else{try{th.pause();th.currentTime=0}catch(_){}}up()});up();function flash(){const x=15+Math.random()*70,y=10+Math.random()*65,ang=-25+Math.random()*50,sy=.8+Math.random()*1.2;ov.style.transition='none';ov.offsetHeight;ov.style.background=`radial-gradient(circle at ${x}% ${y}%, rgba(255,255,255,.95), rgba(255,255,255,.22) 40%, transparent 65%)`;ov.style.opacity='1';ov.style.transition='opacity 80ms ease-out';setTimeout(()=>ov.style.opacity='0',140);bo.style.left=x+'%';bo.style.top=y+'%';bo.style.transform=`translate(-50%,-50%) rotate(${ang}deg) scaleY(${sy})`;bo.style.transition='transform 90ms ease-out, opacity 280ms ease-out';bo.style.opacity='1';setTimeout(()=>bo.style.opacity='0',180);if(on){try{th.currentTime=0;th.play().catch(()=>{})}catch(_){}}}(function schedule(){setTimeout(()=>{flash();schedule()},30000+Math.random()*10000)})();document.getElementById('explode-btn')?.addEventListener('click',()=>{try{ex.muted=false;ex.volume=1.0;ex.currentTime=0;ex.play().catch(()=>{})}catch(_){}})})();
    </script>
    <script id="timeline-restore-js">
      (function(){
        function showAll(){
          document.querySelectorAll('.timeline .timeline-item').forEach(el=>{
            el.classList.add('visible');
            el.style.opacity='1';
            el.style.transform='none';
          });
        }
        const items = document.querySelectorAll('.timeline .timeline-item');
        if(!items.length) return;
        if ('IntersectionObserver' in window){
          const io = new IntersectionObserver((entries)=>{
            entries.forEach(e=>{
              if(e.isIntersecting){
                e.target.classList.add('visible');
                e.target.style.opacity='1';
                e.target.style.transform='none';
                io.unobserve(e.target);
              }
            });
          }, {root:null, rootMargin:'0px 0px -10% 0px', threshold:0.15});
          items.forEach(el=> io.observe(el));
          // Safety: after 5s ensure first 2 are visible even if IO fails
          setTimeout(()=>{
            items.forEach((el,i)=>{ if(i<2){ el.classList.add('visible'); el.style.opacity='1'; el.style.transform='none'; } });
          }, 5000);
        } else {
          // No IO support -> show all
          setTimeout(showAll, 800);
        }
      })();
    </script>
    <script id="search-init-smart">
      (function(){
        // Disattiva eventuale vecchio init (se presente)
        document.querySelectorAll('#search-init-robust').forEach(n => n.remove());
      
        const LIMIT = 20; // quante righe mostrare
        const input = document.getElementById('site-search');
        if (!input) return;
      
        // Pannello risultati: usa il tuo se c'è, altrimenti lo crea
        function ensurePanel(){
          let panel = document.querySelector('#search-panel, #searchPanel, .search-panel, .results-panel');
          if (!panel) {
            panel = document.createElement('div');
            panel.id = 'search-panel';
            panel.innerHTML = `
              <div class="search-header">
                <h4 class="search-title">Risultati della ricerca</h4>
                <button class="search-close" type="button" aria-label="Chiudi">Chiudi ✖</button>
              </div>
              <div id="search-results" class="search-results"></div>
            `;
            document.body.appendChild(panel);
          }
          // chiudi/ESC
          const closeBtn = panel.querySelector('.search-close, #search-close, [data-role="search-close"]');
          const close = ()=> panel.style.display='none';
          closeBtn && closeBtn.addEventListener('click', close);
          window.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });
          return panel;
        }
        const panel = ensurePanel();
        const resultsWrap = panel.querySelector('#search-results, .search-results, #searchResults');
      
        // ---------- caricamento indice ----------
        let INDEX = [];
        function haveIndex(){ return Array.isArray(INDEX) && INDEX.length; }
      
        function norm(s){
          const NORM_MAP = {'ł':'l','Ł':'l','ß':'ss','ø':'o','æ':'ae','œ':'oe'};
          return (s||'').toString().toLowerCase()
            .replace(/[łŁßøæœ]/g, m=>NORM_MAP[m]||m)
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
            .replace(/\s+/g,' ').trim();
        }
        function escapeHTML(s){ return (s||'').replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }
        function hi(hay, q){ // evidenzia la query (semplice)
          if(!q) return escapeHTML(hay||'');
          const a = escapeHTML(hay||''); const n = norm(hay); const nq = norm(q);
          if(!nq) return a;
          // trova pos (prima occorrenza)
          const pos = n.indexOf(nq);
          if(pos<0) return a;
          // ricostruisci evidenziando il range (approssimando con lunghezze uguali: ok per ASCII)
          const pre  = escapeHTML((hay||'').slice(0,pos));
          const mid  = escapeHTML((hay||'').slice(pos, pos+nq.length));
          const post = escapeHTML((hay||'').slice(pos+nq.length));
          return `${pre}<mark>${mid}</mark>${post}`;
        }
      
        function score(query, item){
          const q = norm(query); if(!q) return 0;
          const t = norm(item.title), d = norm(item.desc), u = norm(item.url);
          // parziali: includes su titolo/desc/url
          let s = 0;
          if (t.includes(q)) s += 40;
          if (d.includes(q)) s += 20;
          if (u.includes(q)) s += 10;
          // piccoli bonus per token (migliora ordinamento)
          for (const tok of q.split(' ').filter(Boolean)){
            if (t.startsWith(tok+' ')||t.endsWith(' '+tok)||t.includes(' '+tok+' ')) s+=12;
            if (d.includes(tok)) s+=6;
          }
          return s;
        }
      
        async function loadIndex(){
          if (Array.isArray(window.SEARCH_INDEX) && window.SEARCH_INDEX.length){
            INDEX = window.SEARCH_INDEX;
            return;
          }
          const candidates = (window.SEARCH_INDEX_URLS && window.SEARCH_INDEX_URLS.length)
            ? window.SEARCH_INDEX_URLS
            : ['search-index.json','/search-index.json','/assets/search-index.json'];
          for (const url of candidates){
            try{
              const r = await fetch(url, {cache:'no-store'});
              if (r.ok) { INDEX = await r.json(); return; }
            }catch(e){}
          }
        }
      
        function render(results, q){
          resultsWrap.innerHTML = '';
          if (!results.length){
            resultsWrap.innerHTML = `<div class="result"><em>Nessun risultato</em></div>`;
            return;
          }
          for (const it of results.slice(0, LIMIT)){
            const title = hi(it.title, q);
            const desc  = hi(it.desc||'', q);
            const url   = escapeHTML(it.url||'#');
            const row = document.createElement('div');
            row.className = 'result';
            row.innerHTML = `
              <h4 class="result-title"><a href="${url}">${title}</a></h4>
              ${desc ? `<div class="result-desc">${desc}</div>` : ``}
              <div class="result-source">${escapeHTML((new URL(url, location.href)).hostname || '')}</div>
            `;
            resultsWrap.appendChild(row);
          }
        }
      
        function search(q){
          if(!haveIndex() || !q.trim()){
            panel.style.display = 'none';
            resultsWrap.innerHTML = '';
            return;
          }
          const ranked = INDEX
            .map(it => ({ it, s: score(q, it) }))
            .filter(x => x.s > 0)
            .sort((a,b)=> b.s - a.s)
            .map(x => x.it);
          panel.style.display = 'block';
          render(ranked, q);
        }
      
        // bind input (debounce leggero)
        let t = 0;
        input.addEventListener('input', ()=>{
          clearTimeout(t);
          const q = input.value;
          t = setTimeout(()=> search(q), 90);
        });
      
        // bootstrap: carica indice e se c'è testo in input, cerca subito
        loadIndex().then(()=>{ if (input.value.trim()) search(input.value); });
      })();
    </script>
    <script id="dict-compact-js">
      (function(){
        const form = document.getElementById('dict-form');
        const input = document.getElementById('dict-q');
        if(!form || !input) return;
        form.addEventListener('submit', function(e){
          e.preventDefault();
          const q = (input.value||'').trim();
          if(!q) { input.focus(); return; }
          const checks = form.querySelectorAll('.sources input[type="checkbox"]:checked');
          let opened = 0;
          checks.forEach(ch => {
            const tmpl = ch.getAttribute('data-url');
            if(!tmpl) return;
            const url = tmpl.replace('{q}', encodeURIComponent(q));
            const w = window.open(url, '_blank', 'noopener');
            if(w) opened++;
          });
          if(!opened){
            window.open('https://duckduckgo.com/?q=site%3Aiep.utm.edu+'+encodeURIComponent(q), '_blank', 'noopener');
          }
        });
      })();
    </script>
    <script id="effects-dedupe-js">
      (function(){
        // 1) Elimina eventuali duplicati dei pulsanti
        const groups = document.querySelectorAll('#effects-ctrl');
        if (groups.length > 1) {
          groups.forEach((el, i) => { if (i > 0) el.remove(); });
        }
        const ec = document.getElementById('effects-ctrl');
      
        // 2) Se esiste un header/topbar, append lì i pulsanti (così non resta il fallback “sotto”)
        const host = document.querySelector('.topbar, header, .navbar');
        if (host && ec && ec.parentNode !== host) {
          try { host.appendChild(ec); } catch(_) {}
        }
      
        // 3) Se ricerca e pulsanti condividono il genitore → aggiungi un piccolo margine fra loro
        const search = document.querySelector('#search-topbar, .search-container[role="search"]');
        if (search && ec && search.parentElement === ec.parentElement) {
          ec.style.marginLeft = '.75rem';
        }
      })();
    </script>
    <script id="explode-target-hook">
      (function(){
        // Trova un elemento che contiene quel testo (h1,h2,h3,p,span…)
        const sel = 'h1,h2,h3,p,span,.hero-title,.headline';
        const target = [...document.querySelectorAll(sel)]
          .find(el => el.textContent && el.textContent.includes('Pensare, dunque è ancora possibile'));
      
        if (target) {
          // contrassegna come bersaglio
          target.classList.add('exploding-text');
        }
      
        // Piccola funzione “esplodi” di scorta (se quella globale non è accessibile)
        function explodeFallback(el){
          if(!el || el.__exploded) return;
          el.__exploded = true;
          const txt = el.textContent;
          el.textContent = '';
          const frag = document.createDocumentFragment();
          for (const ch of txt){ const s = document.createElement('span'); s.textContent = ch; frag.appendChild(s); }
          el.appendChild(frag);
          const spans = el.querySelectorAll('span');
          spans.forEach(s => {
            s.style.display = 'inline-block';
            s.style.willChange = 'transform,opacity';
            const dx=(Math.random()*2-1)*80, dy=(Math.random()*2-1)*60, rz=(Math.random()*2-1)*40, t=200+Math.random()*400;
            s.animate(
              [{transform:'translate(0,0) rotate(0deg)',opacity:1},
               {transform:`translate(${dx}px,${dy}px) rotate(${rz}deg)`,opacity:0}],
              {duration:450+t, easing:'cubic-bezier(.2,.6,.3,1)'}
            );
          });
          // ripristina
          setTimeout(()=>{ el.__exploded=false; el.textContent = txt; }, 800);
      
          // suono (se presente)
          const boom = document.getElementById('explosionSound');
          try { if(boom){ boom.muted=false; boom.volume=1.0; boom.currentTime=0; boom.play().catch(()=>{}); } } catch(_) {}
        }
      
        // Collega il pulsante “Esplodi” al bersaglio
        const btn = document.getElementById('explode-btn');
        if (btn) {
          btn.addEventListener('click', () => {
            const el = document.querySelector('.exploding-text') || target;
            if (!el) return;
            // usa la funzione globale se esiste, altrimenti fallback
            if (window.explodeTarget) { window.explodeTarget(el); }
            else { explodeFallback(el); }
          });
        }
      })();
    </script>
    <script id="effects-one">
      (function(){
        /* 0) Spegni vecchie factory/deduper che possono ricreare pulsanti */
        document.querySelectorAll('script#effects-factory, script#effects-dedupe-js').forEach(s => s.remove());
      
        /* 1) Rimuovi eventuali gruppi duplicati “sotto” */
        document.querySelectorAll('#effects-ctrl').forEach(el => el.remove());
      
        /* 2) Trova i pulsanti “buoni” in top-bar (accettiamo entrambe le varianti di id) */
        const btnThunder = document.getElementById('btn-thunder');
        const btnExplode = document.getElementById('explode-btn') || document.getElementById('btn-explode');
      
        if(!btnThunder || !btnExplode){
          console.warn('[effects-one] Pulsanti non trovati. Assicurati che in top-bar esistano #btn-thunder e #explode-btn (o #btn-explode).');
          return;
        }
      
        /* 3) Sblocco audio una volta (Safari/Mobile) */
        const thunderAudio = document.getElementById('thunder-sound');
        const boomAudio    = document.getElementById('explosionSound');
        let unlocked = false;
        function unlockOnce(){
          if(unlocked) return; unlocked = true;
          [thunderAudio, boomAudio].forEach(a=>{
            if(!a) return;
            try{ a.muted=false; a.play().then(()=>{a.pause(); a.currentTime=0}).catch(()=>{}); }catch(_){}
          });
          window.removeEventListener('pointerdown', unlockOnce, {capture:true});
          window.removeEventListener('keydown', unlockOnce, {capture:true});
        }
        window.addEventListener('pointerdown', unlockOnce, {once:true, passive:true, capture:true});
        window.addEventListener('keydown', unlockOnce, {once:true, capture:true});
      
        /* 4) TUONO: suono + flash se presenti gli overlay */
        const overlay = document.getElementById('lightning');
        const bolt    = document.getElementById('bolt');
        btnThunder.addEventListener('click', (e)=>{
          e.preventDefault();
          try{ if(thunderAudio){ thunderAudio.currentTime=0; thunderAudio.play().catch(()=>{}); } }catch(_){}
          if(overlay && bolt){
            overlay.style.opacity='1'; setTimeout(()=> overlay.style.opacity='0', 140);
            bolt.style.left='70%'; bolt.style.top='20%';
            bolt.style.transform='translate(-50%,-50%) rotate(5deg) scaleY(1.1)';
            bolt.style.opacity='1'; setTimeout(()=> bolt.style.opacity='0', 180);
          }
        });
      
        /* 5) “Esplodi” il testo: marca l’elemento bersaglio se presente */
        const target = [...document.querySelectorAll('h1,h2,h3,p,span,.hero-title,.headline')]
          .find(el => el.textContent && el.textContent.includes('Pensare, dunque è ancora possibile'));
        if(target) target.classList.add('exploding-text');
      
        function explodeFallback(el){
          if(!el || el.__exploded) return;
          el.__exploded = true;
          const txt = el.textContent;
          el.textContent = '';
          const frag = document.createDocumentFragment();
          for(const ch of txt){ const s=document.createElement('span'); s.textContent=ch; s.style.display='inline-block'; frag.appendChild(s); }
          el.appendChild(frag);
          el.querySelectorAll('span').forEach(s=>{
            const dx=(Math.random()*2-1)*80, dy=(Math.random()*2-1)*60, rz=(Math.random()*2-1)*40, t=200+Math.random()*400;
            s.animate([{transform:'translate(0,0) rotate(0deg)',opacity:1},
                       {transform:`translate(${dx}px,${dy}px) rotate(${rz}deg)`,opacity:0}],
                      {duration:450+t, easing:'cubic-bezier(.2,.6,.3,1)'});
          });
          setTimeout(()=>{ el.__exploded=false; el.textContent = txt; }, 800);
          try{ if(boomAudio){ boomAudio.muted=false; boomAudio.volume=1.0; boomAudio.currentTime=0; boomAudio.play().catch(()=>{});} }catch(_){}
        }
      
        btnExplode.addEventListener('click', ()=>{
          const el = document.querySelector('.exploding-text') || document.querySelector('h1,h2');
          if(!el) return;
          if(typeof window.explodeTarget === 'function') window.explodeTarget(el);
          else explodeFallback(el);
        });
      })();
    </script>
    <script id="thunder-toggle-fix">
      (function(){
        const btn = document.getElementById('btn-thunder');
        const audio = document.getElementById('thunder-sound');
        const overlay = document.getElementById('lightning');
        const bolt = document.getElementById('bolt');
        if(!btn || !audio) return;
      
        // evita doppie bind: clona e rimpiazza
        const newBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(newBtn, btn);
      
        // assicura che non vada in loop
        audio.loop = false;
      
        let playing = false;
        function ui() {
          newBtn.setAttribute('aria-pressed', playing ? 'true' : 'false');
          newBtn.textContent = playing ? '⚡ Tuono: ON' : '⚡ Tuono';
        }
        function flashOnce(){
          if(!(overlay && bolt)) return;
          overlay.style.opacity='1';
          setTimeout(()=> overlay.style.opacity='0', 140);
          bolt.style.left='70%'; bolt.style.top='20%';
          bolt.style.transform='translate(-50%,-50%) rotate(5deg) scaleY(1.1)';
          bolt.style.opacity='1';
          setTimeout(()=> bolt.style.opacity='0', 180);
        }
        function stop(){
          playing = false;
          try { audio.pause(); audio.currentTime = 0; } catch(_) {}
          ui();
        }
        function start(){
          playing = true;
          try { audio.currentTime = 0; audio.play().catch(()=>{}); } catch(_) {}
          flashOnce();
          ui();
          // 👇 se vuoi che si fermi da solo dopo 1.5s, decommenta:
          // setTimeout(stop, 1500);
        }
      
        newBtn.addEventListener('click', (e)=>{
          e.preventDefault();
          if (playing) stop(); else start();
        });
      
        // Esc per fermare
        window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') stop(); });
      
        // quando finisce naturalmente, aggiorna UI
        audio.addEventListener('ended', stop);
      
        ui();
      })();
    </script>
    <script id="timeline-wow-js">
      (function(){
        const root = document.querySelector('.timeline-container');
        const tl = root?.querySelector('.timeline');
        if(!root || !tl) return;
        const items = Array.from(tl.querySelectorAll('.timeline-item'));
        if(!items.length) return;
      
        // Add left/right alternation only if not present already
        items.forEach((el,i)=>{
          if(!el.classList.contains('left') && !el.classList.contains('right')){
            el.classList.add(i%2===0 ? 'left' : 'right');
          }
          // inject dot/connector once
          if(!el.querySelector('.tl-dot')){
            const dot = document.createElement('span'); dot.className='tl-dot'; el.appendChild(dot);
          }
          if(!el.querySelector('.tl-connector')){
            const con = document.createElement('span'); con.className='tl-connector';
            con.style.setProperty('--origin', el.classList.contains('left') ? 'right center' : 'left center');
            el.appendChild(con);
          }
        });
      
        // Respect existing 'visible' class; map to 'in-view' for our effects
        items.forEach(el => { if (el.classList.contains('visible')) el.classList.add('in-view'); });
      
        // Observer to add in-view on scroll if not already managed
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            if(e.isIntersecting){
              const el = e.target;
              if(!el.classList.contains('in-view')){
                const idx = items.indexOf(el);
                el.style.setProperty('--delay', ((idx%3)*0.08).toFixed(2)+'s');
                el.classList.add('in-view');
              }
              io.unobserve(el);
            }
          });
        }, {threshold:0.2, rootMargin:'0px 0px -10% 0px'});
        items.forEach(el=> { if(!el.classList.contains('visible')) io.observe(el); });
      })();
    </script>
    <script id="timeline-comet-js">
      (function(){
        const root = document.querySelector('.timeline-container');
        const tl   = root?.querySelector('.timeline');
        if(!root || !tl) return;
      
        let comet = tl.querySelector('.tl-comet');
        if(!comet){
          comet = document.createElement('span');
          comet.className = 'tl-comet';
          tl.appendChild(comet);
        }
      
        const items = Array.from(tl.querySelectorAll('.timeline-item'));
        if(!items.length) return;
      
        function dotTopFor(item){
          const dot = item.querySelector('.tl-dot') || item;
          const tlRect  = tl.getBoundingClientRect();
          const dotRect = dot.getBoundingClientRect();
          return (dotRect.top + dotRect.height/2) - tlRect.top + tl.scrollTop;
        }
      
        let lastTop = null;
        function flyTo(item){
          if(!item) return;
          const y = dotTopFor(item);
          const goingUp = (lastTop !== null) && (y < lastTop);
          comet.style.setProperty('--tail-rot', goingUp ? '180deg' : '0deg');
          comet.classList.remove('shoot'); void comet.offsetWidth; comet.classList.add('shoot');
          comet.style.top = y + 'px';
          lastTop = y;
        }
      
        // initial position: first visible or the first item
        const firstVisible = items.find(el => el.classList.contains('in-view') || el.classList.contains('visible')) || items[0];
        comet.style.top = dotTopFor(firstVisible) + 'px';
        lastTop = dotTopFor(firstVisible);
      
        // Respond when items become visible/in-view
        const mo = new MutationObserver((mutList)=>{
          for(const m of mutList){
            if(m.type === 'attributes' && m.attributeName === 'class' && m.target.classList.contains('timeline-item')){
              const el = m.target;
              if(el.classList.contains('in-view') || el.classList.contains('visible')) flyTo(el);
            }
          }
        });
        items.forEach(el => mo.observe(el, {attributes:true}));
      
        // Safety IO if no other script toggles classes
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            if(e.isIntersecting){
              flyTo(e.target);
              io.unobserve(e.target);
            }
          });
        }, {threshold:0.2, rootMargin:'0px 0px -10% 0px'});
        items.forEach(el=> io.observe(el));
      
        // keep aligned on resize/scroll
        let rafId = null;
        function sync(){
          if(rafId) return;
          rafId = requestAnimationFrame(()=>{
            const current = (Array.prototype.findLast
              ? items.findLast(el => el.classList.contains('in-view') || el.classList.contains('visible'))
              : [...items].reverse().find(el => el.classList.contains('in-view') || el.classList.contains('visible')));
            if(current){
              comet.classList.remove('shoot');
              comet.style.top = dotTopFor(current) + 'px';
            }
            rafId = null;
          });
        }
        window.addEventListener('resize', sync, {passive:true});
        window.addEventListener('scroll',  sync, {passive:true});
      })();
    </script>
    <script id="timeline-comet-tweak">
      (function(){
        const tl = document.querySelector('.timeline-container .timeline');
        const comet = tl && tl.querySelector('.tl-comet');
        if(!comet) return;
        // Kick a quick tail after initial positioning
        requestAnimationFrame(()=>{
          comet.classList.remove('shoot'); void comet.offsetWidth; comet.classList.add('shoot');
        });
      })();
    </script>
    <script id="audio-player-wrap-fix">
      // Se il genitore è un flex-row senza wrap, abilita il wrap così il player va sotto
      (function(){
        const ap = document.getElementById('audio-player');
        if(!ap) return;
        const parent = ap.parentElement;
        const cs = parent && getComputedStyle(parent);
        if (cs && cs.display.includes('flex') && cs.flexWrap === 'nowrap') {
          parent.style.flexWrap = 'wrap';
          // opzionale: distanza tra la riga dei controlli slider e il player
          parent.style.rowGap = parent.style.rowGap || '.5rem';
        }
      })();
    </script>
    <script id="search-related-augment">
      (function(){
        const input       = document.getElementById('site-search');
        const resultsWrap = document.querySelector('#search-results, .search-results, #searchResults');
        const INDEX       = Array.isArray(window.SEARCH_INDEX) ? window.SEARCH_INDEX : null;
        if(!input || !resultsWrap || !INDEX) return;
      
        // normalizza (accent-fold: it/pl ecc.)
        const NORM_MAP = {'ł':'l','Ł':'l','ß':'ss','ø':'o','æ':'ae','œ':'oe'};
        function norm(s){
          return (s||'').toString().toLowerCase()
            .replace(/[łŁßøæœ]/g, m=>NORM_MAP[m]||m)
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
            .replace(/[^a-z0-9\s]/g,' ').replace(/\s+/g,' ').trim();
        }
      
        // scoring semplice: titolo >> descrizione > url + bonus per token match
        function score(query, item){
          const q = norm(query); if(!q) return 0;
          const t = norm(item.title), d = norm(item.desc), u = norm(item.url);
          let s=0;
          if(t===q) s+=100;
          if(t.includes(q)) s+=40;
          if(d.includes(q)) s+=20;
          if(u.includes(q)) s+=10;
          const toks = q.split(' ').filter(Boolean);
          for(const tok of toks){
            if(t.startsWith(tok+' ')||t.endsWith(' '+tok)||t.includes(' '+tok+' ')) s+=12;
            if(d.includes(tok)) s+=6;
            if(u.includes(tok)) s+=3;
          }
          return s;
        }
      
        function grabShownUrls(){
          const set = new Set();
          resultsWrap.querySelectorAll('a[href]').forEach(a=> set.add(a.getAttribute('href')));
          return set;
        }
      
        function topRelated(query, exclude, limit=6){
          return INDEX.map(it=>({it, s:score(query,it)}))
            .filter(x=>x.s>0 && !exclude.has(x.it.url))
            .sort((a,b)=>b.s-a.s)
            .slice(0, limit)
            .map(x=>x.it);
        }
      
        function ensureBox(){
          let box = document.getElementById('related-results');
          if(!box){
            box = document.createElement('div');
            box.id = 'related-results';
            box.className = 'related-results';
            box.innerHTML = '<h4 class="related-header">Risultati correlati (ricerca ampliata)</h4><ul class="related-list"></ul>';
            resultsWrap.appendChild(box);
          }
          return box;
        }
      
        function renderRelated(list){
          const box = ensureBox();
          const ul  = box.querySelector('.related-list');
          ul.innerHTML = '';
          list.forEach(it=>{
            const li = document.createElement('li');
            li.className = 'related-item';
            li.innerHTML = `<a href="${it.url}"><strong>${it.title}</strong></a>` +
                           (it.desc ? `<div class="meta">${it.desc}</div>` : '');
            ul.appendChild(li);
          });
          box.style.display = list.length ? 'block' : 'none';
        }
      
        function updateRelated(){
          const q = input.value || '';
          if(!q.trim()){ renderRelated([]); return; }
          const shown = grabShownUrls();
          // Se il pannello mostra *pochissimi* risultati (es. 0–1), proponi correlati
          const visibleItems = resultsWrap.querySelectorAll(':scope > *'); // fallback generico
          if(visibleItems.length <= 1){
            renderRelated(topRelated(q, shown, 6));
          }else{
            renderRelated([]);
          }
        }
      
        // osserva cambi al pannello + input
        const mo = new MutationObserver(()=> updateRelated());
        mo.observe(resultsWrap, {childList:true, subtree:true});
        input.addEventListener('input', ()=> setTimeout(updateRelated, 80));
        document.addEventListener('DOMContentLoaded', updateRelated);
      })();
    </script>
  </body>
</html>
