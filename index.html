<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Echi di Sofia ‚Äî Portale di Filosofia</title>

  <!-- ==================== META ESSENZIALI (SEO & MOBILE) ==================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="description" content="Esplora il pensiero filosofico attraverso i secoli. Autori, correnti, timeline interattiva e risorse per approfondire.">
  <meta name="keywords" content="filosofia, storia della filosofia, socrate, platone, aristotele, kant, nietzsche, pensiero filosofico">
  <meta name="author" content="Echi di Sofia">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <link rel="canonical" href="https://www.echidisofia.org/">

  <!-- ==================== OPEN GRAPH (SOCIAL SHARING) ==================== -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.echidisofia.org/">
  <meta property="og:title" content="Echi di Sofia - Portale Completo di Filosofia">
  <meta property="og:description" content="Esplora il pensiero filosofico attraverso i secoli. Autori, correnti, timeline interattiva e risorse per approfondire.">
  <meta property="og:image" content="https://www.echidisofia.org/foto/socrate.webp">
  <meta property="og:site_name" content="Echi di Sofia">

  <!-- ==================== TWITTER CARD ==================== -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Echi di Sofia - Portale di Filosofia">
  <meta name="twitter:description" content="Scopri la filosofia attraverso autori, correnti e pensieri. Risorse gratuite per appassionati.">
  <meta name="twitter:image" content="https://www.echidisofia.org/foto/socrate.webp">

  <!-- ==================== FAVICONS & MANIFEST (PWA READY) ==================== -->
  <link rel="icon" type="image/svg+xml" href="/favicon_io/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
  <link rel="manifest" href="/favicon_io/site.webmanifest">
  <meta name="theme-color" content="#0b0f19">
  <meta name="msapplication-TileColor" content="#0b0f19">

  <!-- ==================== PRECONNECT (CONNESSIONI ANTICIPATE) ==================== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- ==================== CSS BASE (STILI ESSENZIALI) ==================== -->
  <link rel="stylesheet" href="accent-layer-plus.css">

  <!-- ==================== DIZIONARIO CSS (COMPONENTE SPECIFICO) ==================== -->
  <link rel="stylesheet" href="/esterno/css/dict.css">

  <!-- ==================== FONTS (CARICAMENTO OTTIMIZZATO) ==================== -->
  <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@400;600&family=Montserrat:wght@300;400;600&display=swap"
        onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@400;600&family=Montserrat:wght@300;400;600&display=swap">
  </noscript>

  <!-- ==================== ICONS (CARICAMENTO OTTIMIZZATO) ==================== -->
  <link rel="preload" as="style"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        crossorigin
        onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
          crossorigin>
  </noscript>

  <!-- ==================== GSAP (LIBRERIA ANIMAZIONI) ==================== -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>

  <!-- ==================== DIZIONARIO JS (DIPENDE DA GSAP) ==================== -->
  <script src="/esterno/js/dict.js" defer></script>

  <!-- ==================== CONFIGURAZIONE RICERCA (DATI NON BLOCCANTI) ==================== -->
  <script id="search-config-root">
    window.SEARCH_INDEX_URLS = [
      '/search-index.json?v=20251122',
      '/search-index.json'
    ];
  </script>

  <!-- ==================== SCHEMA.ORG (DATI STRUTTURATI PER SEO) ==================== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Echi di Sofia",
    "description": "Portale completo di filosofia antica, moderna e contemporanea",
    "url": "https://www.echidisofia.org/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.echidisofia.org/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <!-- ==================== PRELOAD IMMAGINE HERO (OPZIONALE) ==================== -->
  <!-- <link rel="preload" as="image" href="https://www.echidisofia.org/foto/socrate.webp"> -->

<style>
/* ============================================================
   üé® VARIABILI GLOBALI CSS (CONSOLIDATE)
   ============================================================ */

:root {
  /* Accenti principali (default gold) */
  --accent: #ffd700;
  --accent-2: #e5c200;
  --accent-3: #ffe066;
  --accent-4: #fff8dc;
  --accent-5: #fff7b0;
  --accent-contrast: #1a1400;
  --accent-glow: rgba(255,215,0,.45);
  --accent-text: #0a0a0a;
  --ring: rgba(255,215,0,.55);
  
  /* Colori base */
  --bg: #0a0a1a;
  --dark-bg: rgba(20,20,30,0.96);
  --darker-bg: rgba(10,10,20,0.9);
  --text-light: #e9eef5;
  --text-accent: #9ad0ff;
  
  /* Palette colori */
  --gold: #ffd86a;
  --gold-secondary: #d4af37;
  --primary-gold: #ffd86a;
  --cyan: #00ccff;
  --cyan-dark: #0099cc;
  --purple: #b967ff;
  --purple-dark: #8a4dcc;
  --accent-blue: #00ccff;
  --accent-red: #FF0000;
  
  /* Bordi e ombre */
  --border-gold: rgba(255,215,0,0.55);
  --shadow-gold: 0 0 14px rgba(255,215,0,0.55);
  --shadow-blue: 0 0 8px rgba(0,204,255,0.4);
  
  /* Componenti */
  --menu-bg: rgba(10, 10, 30, .98);
  --menu-border: rgba(255, 215, 0, .22);
  --glass: rgba(0, 0, 0, .35);
  --card-bg: rgba(10, 10, 30, 0.9);
  --card-border: rgba(255, 215, 0, 0.3);
  --cc-bg: rgba(10,10,30,.96);
  --cc-border: rgba(255,215,0,.28);
  --cc-gold: var(--gold, #d4af37);
  --cc-cyan: var(--cyan, #00ccff);
  --search-panel-w: 600px;
  --search-panel-maxh: 72vh;
  --modal-width: 380px;
  --card-widen: 114px;
  --effects-right: -0.6rem;
  --effects-top: 0.9rem;

  /* Spacing */
  --space-xs: 0.5rem;
  --space-sm: 1rem;
  --space-md: 1.5rem;
  --space-lg: 2rem;
  --space-xl: 3rem;

  /* Tipografia */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 2rem;
  --text-4xl: 3rem;

  /* Breakpoint */
  --bp-mobile: 768px;
  --bp-tablet: 1024px;
  --bp-desktop: 1200px;
}

/* ============================================================
   üé® ACCENT THEMES (dinamici)
   ============================================================ */

body[data-accent="blue"] {
  --accent: #55b6ff;
  --accent-2: #2f98e6;
  --accent-3: #9bd6ff;
  --accent-4: #00ccff;
  --accent-5: #d5ecff;
  --accent-contrast: #001321;
  --accent-glow: rgba(0,191,255,.55);
  --ring: rgba(0,191,255,.55);
}

body[data-accent="green"] {
  --accent: #3de07f;
  --accent-2: #27c16a;
  --accent-3: #89f0b4;
  --accent-4: #66ff99;
  --accent-5: #d6fae6;
  --accent-contrast: #00170a;
  --accent-glow: rgba(0,255,136,.55);
  --ring: rgba(0,255,136,.55);
}

body[data-accent="red"] {
  --accent: #ff5a6a;
  --accent-2: #e23f52;
  --accent-3: #ff9aa5;
  --accent-4: #ff6b6b;
  --accent-5: #ffd5da;
  --accent-contrast: #190004;
  --accent-glow: rgba(255,59,59,.55);
  --ring: rgba(255,59,59,.55);
}

/* Collega vecchi colori al nuovo accent */
body[data-accent] {
  --gold: var(--accent);
  --gold-secondary: var(--accent-2);
  --menu-border: color-mix(in srgb, var(--accent) 35%, transparent);
  --card-border: color-mix(in srgb, var(--accent) 40%, transparent);
}

/* ============================================================
   üé® RUSSELL BOX THEMES
   ============================================================ */

body[data-theme="gold"] {
  --russell-text: #ffd86a;
  --russell-border: #ffeb9c;
  --russell-shadow: #ffdb70;
  --russell-accent: #ffe8a0;
}

body[data-theme="blue"] {
  --russell-text: #9ad0ff;
  --russell-border: #45b3ff;
  --russell-shadow: #0099ff;
  --russell-accent: #7ed8ff;
}

body[data-theme="green"] {
  --russell-text: #a7ffcb;
  --russell-border: #76ffb5;
  --russell-shadow: #29e68c;
  --russell-accent: #90ffcf;
}

body[data-theme="red"] {
  --russell-text: #ffb3b3;
  --russell-border: #ff7a7a;
  --russell-shadow: #ff4d4d;
  --russell-accent: #ff8a8a;
}

/* ============================================================
   üåì TEMA CHIARO (LIGHT MODE)
   ============================================================ */

[data-theme="light"] {
  --bg: #f8fafc;
  --text-light: #0f1419;
  --text-accent: #1d4ed8;
  --menu-bg: rgba(255, 255, 255, 0.98);
  --menu-border: rgba(59, 130, 246, 0.4);
  --glass: rgba(255, 255, 255, 0.95);
  --gold: #ca8a04;
  --cyan: #0369a1;
  --purple: #7c3aed;
  --accent: #1d4ed8;
  --accent-2: #3b82f6;
  --accent-3: #2563eb;
  --accent-5: #dbeafe;
  --card-border: rgba(59, 130, 246, 0.3);
  --card-bg: rgba(255, 255, 255, 0.95);
  color-scheme: light;
}

[data-theme="light"] body {
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  color: #0f1419;
  font-weight: 500;
}

[data-theme="light"] a {
  color: #2b6cb0;
  font-weight: 500;
}

[data-theme="light"] a:hover {
  color: #1a202c;
  text-shadow: 0 0 0.38rem rgba(43, 108, 176, 0.3);
}

[data-theme="light"] .top-bar {
  background: rgba(255, 255, 255, 0.98);
  border-bottom: 2px solid rgba(59, 130, 246, 0.3);
  backdrop-filter: blur(15px);
  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .brand span {
  background: linear-gradient(90deg, var(--accent), var(--accent-5), var(--accent));
  -webkit-background-clip: text;
  background-clip: text;
  text-shadow: 0 0 0.62rem color-mix(in oklab, var(--accent) 35%, transparent);
}

[data-theme="light"] .welcome-title {
  background: linear-gradient(90deg, #1d4ed8, #2563eb, #3b82f6, #1d4ed8);
  -webkit-background-clip: text;
  background-clip: text;
  filter: drop-shadow(0 0 1.12rem rgba(29, 78, 216, 0.6));
}

[data-theme="light"] .welcome-subtitle {
  color: #1d4ed8;
  font-weight: 700;
  text-shadow: 0 0 10px rgba(29, 78, 216, 0.2);
}

[data-theme="light"] .typing-effect {
  color: #1d4ed8;
  font-weight: 600;
  text-shadow: 0 0 10px rgba(29, 78, 216, 0.3);
}

[data-theme="light"] .menu-container {
  background: rgba(255, 255, 255, 0.98);
  border-bottom: 2px solid rgba(59, 130, 246, 0.3);
  backdrop-filter: blur(15px);
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .menu-btn,
[data-theme="light"] nav.menu-desktop li > a {
  color: #1d4ed8;
  font-weight: 700;
  text-shadow: 0 0 0.38rem rgba(29, 78, 216, 0.4);
}

[data-theme="light"] .menu-btn:hover,
[data-theme="light"] nav.menu-desktop li > a:hover {
  color: #0f1419;
  background: rgba(59, 130, 246, 0.15);
  transform: translateY(-2px);
}

[data-theme="light"] .mega-menu {
  background: rgba(255, 255, 255, 0.98);
  border: 2px solid rgba(59, 130, 246, 0.4);
  backdrop-filter: blur(20px);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .mega-menu h4 {
  color: #ca8a04;
  border-bottom: 3px solid rgba(202, 138, 4, 0.5);
  font-weight: 700;
}

[data-theme="light"] .mega-menu a {
  color: #1e293b;
  font-weight: 600;
}

[data-theme="light"] .mega-menu a:hover {
  color: #1d4ed8;
  background: rgba(59, 130, 246, 0.15);
  transform: translateX(6px);
  font-weight: 700;
}

[data-theme="light"] .timeline-content {
  background: linear-gradient(145deg, #ffffff, #f1f5f9);
  color: #0f1419;
  border: 2px solid rgba(59, 130, 246, 0.4);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(59, 130, 246, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .timeline-content h3 {
  color: #ca8a04;
  text-shadow: 0 0 15px rgba(202, 138, 4, 0.3);
  font-weight: 700;
}

[data-theme="light"] .timeline-content .period {
  color: #0369a1;
  background: rgba(3, 105, 161, 0.15);
  border: 2px solid rgba(3, 105, 161, 0.4);
  font-weight: 700;
  box-shadow: 0 0 15px rgba(3, 105, 161, 0.3);
}

[data-theme="light"] .timeline-content p {
  color: #1e293b;
  line-height: 1.7;
  font-weight: 500;
}

[data-theme="light"] .timeline-content strong {
  color: #1d4ed8;
  font-weight: 700;
}

[data-theme="light"] .timeline::before {
  background: linear-gradient(180deg, #7c3aed, #1d4ed8, #ca8a04, #7c3aed);
  box-shadow: 0 0 25px rgba(124, 58, 237, 0.5), 0 0 50px rgba(29, 78, 216, 0.3);
}

[data-theme="light"] .timeline-item::before {
  background: radial-gradient(circle at 35% 35%, #ffffff 0%, #eab308 25%, #1d4ed8 65%, #7c3aed 100%);
  box-shadow: 0 0 0 8px rgba(234, 179, 8, 0.5), 0 0 0 16px rgba(29, 78, 216, 0.4), 0 0 0 24px rgba(124, 58, 237, 0.3), 0 0 30px 12px rgba(234, 179, 8, 0.6);
}

[data-theme="light"] footer {
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
  color: #0f1419;
  border-top: 3px solid rgba(59, 130, 246, 0.4);
}

[data-theme="light"] footer h3,
[data-theme="light"] footer h4 {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .articles-blob,
[data-theme="light"] .right-box {
  background: rgba(255, 255, 255, 0.95);
  border: 2px solid rgba(59, 130, 246, 0.4);
  color: #0f1419;
  backdrop-filter: blur(15px);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .articles-blob h3,
[data-theme="light"] .right-box h3 {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .articles-blob a,
[data-theme="light"] .right-box a {
  color: #1d4ed8;
  font-weight: 700;
}

[data-theme="light"] .articles-blob a:hover,
[data-theme="light"] .right-box a:hover {
  color: #0f1419;
}

[data-theme="light"] .quote-bubble {
  background: rgba(255, 255, 255, 0.95);
  border: 2px solid rgba(59, 130, 246, 0.4);
  color: #0f1419;
  backdrop-filter: blur(15px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .quote-text {
  color: #0f1419;
  font-style: italic;
  font-weight: 600;
}

[data-theme="light"] .quote-author {
  color: #ca8a04;
  font-weight: 700;
}

[data-theme="light"] .ctrl-btn,
[data-theme="light"] .theme-btn {
  background: linear-gradient(135deg, #ffffff, #f1f5f9);
  border: 2px solid rgba(59, 130, 246, 0.4);
  color: #1d4ed8;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .ctrl-btn:hover,
[data-theme="light"] .theme-btn:hover {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.6);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
}

[data-theme="light"] .search-container input {
  background: rgba(255, 255, 255, 0.95);
  border: 2px solid rgba(59, 130, 246, 0.4);
  color: #0f1419;
  font-weight: 500;
}

[data-theme="light"] .search-container input:focus {
  border-color: rgba(202, 138, 4, 0.6);
  box-shadow: 0 0 0.75rem rgba(202, 138, 4, 0.3);
}

[data-theme="light"] .exploding-text {
  color: #0f1419;
  border: 1px solid rgba(59, 130, 246, 0.4);
  background: rgba(255, 255, 255, 0.9);
  font-weight: 700;
}

[data-theme="light"] #cosmic-bg {
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 50%, #e2e8f0 100%);
}

[data-theme="light"] .stars-container {
  display: none;
}

[data-theme="light"] .star {
  opacity: 0.1;
  background-color: #1a202c;
}

[data-theme="light"] .shooting-star {
  opacity: 0.3;
}

[data-theme="dark"] {
  color-scheme: dark;
}

/* ============================================================
   üîÑ TRANSIZIONI GLOBALI
   ============================================================ */

html {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

html, body {
  overflow-x: hidden;
  max-width: 100%;
}

/* ============================================================
   üìê RESET E BASE
   ============================================================ */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

button, input, select, textarea {
  padding: 0.25rem 0.5rem;
}

p, h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
}

body {
  font-family: 'Montserrat', sans-serif;
  background: var(--bg);
  color: var(--text-light);
  overflow-x: hidden;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: visible !important;
}

a {
  color: var(--text-accent);
  text-decoration: none;
  transition: color 0.3s, text-shadow 0.3s;
}

a:hover {
  color: #fff;
  text-shadow: 0 0 0.38rem #33ccff;
}

a, .link-accent {
  color: var(--accent);
}

a:hover {
  color: color-mix(in oklab, var(--accent) 80%, #fff 20%);
}

:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 3px;
  border-radius: 8px;
}

::selection {
  background: var(--accent);
  color: var(--accent-text);
}

main {
  flex: 1;
  margin-top: 9rem;
  padding: 1rem;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

/* ============================================================
   ‚ú® SFONDO COSMICO
   ============================================================ */

#cosmic-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
}

.cosmic-particle {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.6);
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
  animation: float 15s infinite linear;
}

@keyframes float {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  10% { opacity: 0.7; }
  90% { opacity: 0.7; }
  100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
}

/* ============================================================
   ‚≠ê STELLE E COMETE
   ============================================================ */

.stars-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  overflow: hidden;
}

.star {
  position: absolute;
  background-color: #ffffff;
  border-radius: 50%;
  animation: twinkle var(--duration) ease-in-out infinite;
  animation-delay: var(--delay);
}

.star.small { width: 1px; height: 1px; opacity: 0.3; --duration: 6s; --delay: 0s; }
.star.medium { width: 2px; height: 2px; opacity: 0.6; --duration: 8s; --delay: 1s; }
.star.large { width: 3px; height: 3px; opacity: 0.8; --duration: 10s; --delay: 2s; }
.star.xlarge { width: 4px; height: 4px; opacity: 1; --duration: 12s; --delay: 3s; }

.star.color-blue { background-color: #00ccff; box-shadow: 0 0 6px #00ccff; }
.star.color-gold { background-color: #ffd700; box-shadow: 0 0 6px #ffd700; }
.star.color-purple { background-color: #b967ff; box-shadow: 0 0 6px #b967ff; }
.star.color-green { background-color: #00ff88; box-shadow: 0 0 6px #00ff88; }
.star.color-pink { background-color: #ff66cc; box-shadow: 0 0 6px #ff66cc; }
.star.color-orange { background-color: #ffaa00; box-shadow: 0 0 6px #ffaa00; }
.star.color-accent { background-color: var(--accent); box-shadow: 0 0 8px var(--accent); }

@keyframes twinkle {
  0% { opacity: 0.2; transform: scale(1); }
  20% { opacity: 1; transform: scale(1.4); }
  40% { opacity: 0.3; transform: scale(1); }
  60% { opacity: 1; transform: scale(1.3); }
  80% { opacity: 0.4; transform: scale(1); }
  100% { opacity: 0.2; transform: scale(1); }
}

.shooting-star {
  position: absolute;
  width: 10px;
  height: 2px;
  background: linear-gradient(90deg, transparent 0%, #ffffff 15%, #00ccff 40%, transparent 100%);
  border-radius: 50%;
  filter: blur(0.2px);
  box-shadow: 0 0 4px #00ccff, 0 0 8px #ffffff, 0 0 10px var(--accent), 0 0 20px #ffffff;
  opacity: 0;
  z-index: 10;
}

.shooting-star.fast {
  animation-duration: 4s;
  background: linear-gradient(90deg, transparent 0%, #ffd700 15%, #ffffff 35%, transparent 100%);
  width: 5px;
}

.shooting-star.slow {
  animation-duration: 10s;
  background: linear-gradient(90deg, transparent 0%, #b967ff 15%, #ffffff 35%, transparent 100%);
  width: 5px;
}

.shooting-star.micro {
  width: 3px !important;
  height: 0.5px !important;
  filter: blur(0.1px) !important;
  box-shadow: 0 0 2px currentColor !important;
}

.shooting-star.diagonal { animation: shoot-diagonal 7s ease-out infinite; }
.shooting-star.horizontal { animation: shoot-horizontal 6s ease-out infinite; }
.shooting-star.vertical { animation: shoot-vertical 8s ease-out infinite; }
.shooting-star.reverse { animation: shoot-reverse 7s ease-out infinite; }

@keyframes shoot-diagonal {
  0% { transform: translateX(-150px) translateY(-150px) rotate(45deg); opacity: 0; }
  10% { opacity: 1; }
  30% { opacity: 1; }
  100% { transform: translateX(calc(100vw + 150px)) translateY(calc(100vh + 150px)) rotate(45deg); opacity: 0; }
}

@keyframes shoot-horizontal {
  0% { transform: translateX(-150px) rotate(0deg); opacity: 0; }
  15% { opacity: 1; }
  40% { opacity: 1; }
  100% { transform: translateX(calc(100vw + 150px)) rotate(0deg); opacity: 0; }
}

@keyframes shoot-vertical {
  0% { transform: translateY(-150px) rotate(90deg); opacity: 0; }
  15% { opacity: 1; }
  35% { opacity: 1; }
  100% { transform: translateY(calc(100vh + 150px)) rotate(90deg); opacity: 0; }
}

@keyframes shoot-reverse {
  0% { transform: translateX(calc(100vw + 150px)) translateY(-150px) rotate(-45deg); opacity: 0; }
  10% { opacity: 1; }
  30% { opacity: 1; }
  100% { transform: translateX(-150px) translateY(calc(100vh + 150px)) rotate(-45deg); opacity: 0; }
}

[data-accent] .shooting-star.accent {
  filter: drop-shadow(0 0 6px var(--accent));
}

/* ============================================================
   üå† COMET EFFECT
   ============================================================ */

.comet {
  position: fixed;
  top: 0;
  left: 0;
  width: 20px;
  height: 2px;
  z-index: 3;
  opacity: .85;
  pointer-events: none;
  transform: translateX(-100%);
  border-radius: 2px;
  animation: comet-move-ltr linear forwards;
  filter: drop-shadow(0 0 6px rgba(255,255,255,.7));
}

.comet::after {
  content: "";
  position: absolute;
  top: 50%;
  width: 6px;
  height: 6px;
  transform: translateY(-50%);
  border-radius: 50%;
  background: rgba(255,255,255,.95);
  box-shadow: 0 0 10px rgba(255,255,255,.9), 0 0 18px rgba(255,255,255,.6);
  left: var(--head-position, 0px);
  right: auto;
}

.comet[data-direction="rtl"]::after {
  left: auto;
  right: var(--head-position, 0px);
}

@keyframes comet-move-rtl {
  from { transform: translateX(110vw) translateY(var(--startY)); opacity: .8; }
  to { transform: translateX(-10%) translateY(var(--endY)); opacity: 0; }
}

.tiny-comets-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
}

/* ============================================================
   üß≠ TOP BAR
   ============================================================ */

.top-bar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 0.4rem 0.8rem;
  background: var(--menu-bg);
  backdrop-filter: blur(0.6rem);
  -webkit-backdrop-filter: blur(0.6rem);
  border-bottom: 1px solid var(--menu-border);
  z-index: 2000;
  transition: transform 0.3s ease;
}

.top-bar.hidden {
  transform: translateY(-100%);
}

.top-bar .brand,
.top-bar .brand a,
.top-bar .brand .logo,
.top-bar .icon {
  color: var(--accent);
  fill: var(--accent);
  stroke: var(--accent);
}

.top-bar .brand .badge,
.top-bar .brand .dot {
  background: var(--accent);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 30%, transparent);
}

.brand {
  display: flex;
  align-items: center;
  gap: 0.62rem;
  text-decoration: none;
  margin-left: 30px;
}

.brand svg {
  width: 2.12rem;
  height: 2.12rem;
  filter: drop-shadow(0 0 0.38rem rgba(255, 215, 0, .5));
}

.brand span {
  font-family: 'Cinzel Decorative', cursive;
  font-weight: 700;
  letter-spacing: 0.1rem;
  background: linear-gradient(90deg, var(--accent), var(--accent-5), var(--accent));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 0.62rem color-mix(in oklab, var(--accent) 35%, transparent);
  font-size: 1.5rem;
}

.bar-right {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 0.62rem;
}

.brand + .welcome-switcher {
  display: inline-flex;
  gap: .4rem;
  margin-left: .75rem;
  align-items: center;
}

/* ============================================================
   üé® COLOR DOTS (switcher)
   ============================================================ */

.color-dot {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.3);
  background: transparent;
  display: flex;
  margin-left: 10px;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  padding: 0;
}

.color-dot:hover {
  border-color: rgba(255,255,255,0.6);
  transform: scale(1.1);
}

.dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  display: block;
}

.gold-dot { background: #ffd700; }
.blue-dot { background: #3b82f6; }
.green-dot { background: #10b981; }
.red-dot { background: #ef4444; }

/* ============================================================
   üåê TRADUTTORE
   ============================================================ */

.translate-box {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.translate-select {
  appearance: none;
  padding: 0.45rem 0.8rem;
  border: 1px solid var(--menu-border);
  border-radius: 0.62rem;
  background: rgba(20, 20, 40, .78);
  color: var(--text-light);
  font-size: 0.95rem;
  cursor: pointer;
}

/* ============================================================
   üîç SEARCH CONTAINER
   ============================================================ */

.search-container {
  position: relative;
  display: inline-flex;
  align-items: center;
  overflow: visible;
  z-index: 3001;
}

.search-container input[type="search"],
.search-container input[type="text"],
#site-search {
  width: 16.25rem;
  height: 2.5rem;
  padding-left: 2.4rem;
  padding-right: 2.6rem;
  background: rgba(20,20,40,.78);
  border: 1px solid var(--menu-border);
  border-radius: 0.38rem;
  color: var(--text-light);
  font: 300 .95rem/2.5rem 'Montserrat', sans-serif;
  outline: none;
  transition: border-color .25s, box-shadow .25s;
  box-sizing: border-box;
  position: relative;
  z-index: 3002;
}

#site-search {
  padding-left: 2.6rem !important;
  padding-right: 3.8rem !important;
}

.search-container input:focus,
#site-search:focus {
  border-color: rgba(255,215,0,.5);
  box-shadow: 0 0 .75rem rgba(255,215,0,.18);
}

#site-search::-webkit-search-cancel-button {
  -webkit-appearance: none;
  display: none !important;
}

.search-container .search-icon {
  position: absolute;
  left: .8rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.05rem;
  line-height: 1;
  color: rgba(255,215,0,.90);
  opacity: .95;
  pointer-events: none;
  z-index: 3003;
}

#site-search ~ .search-icon {
  left: 0.9rem !important;
  right: auto !important;
}

.search-container .search-icon:empty::before {
  content: "üîé";
  display: inline-block;
  transform: translateY(1px);
}

.search-container input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
  height: 18px;
  width: 18px;
  opacity: 1;
  background-color: var(--gold, #d4af37);
  border-radius: 50%;
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/></svg>') no-repeat center / 100% 100%;
}

.clear-search {
  position: absolute;
  right: 1.95rem;
  top: 50%;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  display: none;
  align-items: center;
  justify-content: center;
  border: 0;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff0000, #cc0000);
  box-shadow: inset 0 0 0 1px rgba(255,215,0,.25);
  color: var(--gold, #d4af37);
  font-weight: 700;
  cursor: pointer;
  z-index: 3004;
}

#site-search ~ .clear-search {
  right: 0.6rem !important;
}

.clear-search::before {
  content: "";
  display: block;
  width: 14px;
  height: 14px;
  background: #0b1022;
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/></svg>') no-repeat center / 100% 100%;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6L18 18M6 18L18 6" stroke="white" stroke-width="3" stroke-linecap="round"/></svg>') no-repeat center / 100% 100%;
}

.search-container:has(#site-search:not(:placeholder-shown)) .clear-search,
.search-container:has(#site-search[value]:not([value=""])) .clear-search {
  display: flex;
}

/* ============================================================
   üçî MENU PRINCIPALE
   ============================================================ */

.menu-container {
  position: fixed;
  top: 4.5rem;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  z-index: 1900;
  padding: 0.5rem 0;
  background: rgba(10, 10, 30, 0.9);
  backdrop-filter: blur(0.5rem);
  border-bottom: 1px solid color-mix(in srgb, var(--accent) 25%, transparent);
  transition: transform 0.3s ease;
  z-index: 100 !important;
}

.menu-container.hidden {
  transform: translateY(-100%);
}

nav.menu-desktop {
  position: relative;
  z-index: 101 !important;
}

nav.menu-desktop ul {
  display: flex;
  gap: 1px;
  list-style: none;
  margin: 0;
  padding: 0;
  justify-content: center;
  white-space: nowrap;
  position: relative;
  z-index: 101 !important;
}

nav.menu-desktop li {
  position: relative;
  z-index: 101 !important;
}

.menu-btn,
nav.menu-desktop li > a {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--accent-5);
  font-family: 'Cormorant Garamond', serif;
  font-weight: 700;
  font-size: 1.2rem;
  padding: 0.45rem 0.7rem;
  border-radius: 0.38rem;
  text-shadow: 0 0 0.38rem color-mix(in srgb, var(--accent) 45%, transparent);
  transition: .25s;
  text-decoration: none;
}

.menu-btn:hover,
nav.menu-desktop li > a:hover {
  color: var(--accent-3);
}

.arrow {
  font-size: .75rem;
}

/* Menu overrides */
nav.menu-desktop .mega-menu {
  transition: none !important;
  z-index: 90 !important;
  pointer-events: auto !important;
}

nav.menu-desktop li.dropdown > .mega-menu.anchor-left {
  left: 0 !important;
  right: auto !important;
  transform: translateY(0.62rem) !important;
}

nav.menu-desktop li.dropdown:hover > .mega-menu.anchor-left,
nav.menu-desktop li.dropdown:focus-within > .mega-menu.anchor-left,
nav.menu-desktop .mega-menu.anchor-left:hover {
  transform: translateY(0) !important;
}

nav.menu-desktop li.dropdown > .mega-menu.right-align {
  left: auto !important;
  right: 0 !important;
  transform: translateY(0.62rem) !important;
}

nav.menu-desktop li.dropdown:hover > .mega-menu.right-align,
nav.menu-desktop li.dropdown:focus-within > .mega-menu.right-align,
nav.menu-desktop .mega-menu.right-align:hover {
  transform: translateY(0) !important;
}

/* FILOSOFIA ANTICA - Allineata al centro (parte da centro e va a destra) */
.menu-desktop > ul > li.dropdown:nth-child(2) .mega-menu {
  left: 50% !important;         /* Bordo sinistro al centro pagina */
  right: auto !important;       /* Resetta right */
  transform: translateX(0) translateY(0.62rem) !important;  /* Nessuno spostamento orizzontale */
}
.menu-desktop > ul > li.dropdown:nth-child(2):hover > .mega-menu,
.menu-desktop > ul > li.dropdown:nth-child(2):focus-within > .mega-menu {
  transform: translateX(0) translateY(0) !important;
}

/* ============================================================
   üìÇ MEGA MENU
   ============================================================ */

.mega-menu {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-10px) scale(0.95);
  width: 61.25rem;
  max-width: 94vw;
  background: rgba(10, 10, 30, 0.92);
  border: 1px solid color-mix(in srgb, var(--accent) 40%, transparent);
  border-top: 0;
  padding: 0.88rem;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.88rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(15px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 950;
}

.mega-menu.anchor-left {
  left: 0 !important;
  right: auto !important;
  transform: translateY(0.62rem) !important;
}

.mega-menu.right-align {
  left: auto !important;
  right: 0 !important;
  transform: translateY(0.62rem) !important;
}

li.dropdown:hover > .mega-menu,
li.dropdown:focus-within > .mega-menu,
.mega-menu:hover {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0) scale(1);
}

li.dropdown:hover > .mega-menu.anchor-left,
li.dropdown:focus-within > .mega-menu.anchor-left,
.mega-menu.anchor-left:hover {
  transform: translateY(0) !important;
}

li.dropdown:hover > .mega-menu.right-align,
li.dropdown:focus-within > .mega-menu.right-align,
.mega-menu.right-align:hover {
  transform: translateY(0) !important;
}

.mega-menu h4 {
  margin: .2rem 0 .6rem;
  font-size: 1rem;
  color: var(--accent-3);
  font-family: 'Cinzel', serif;
  position: relative;
  padding-bottom: 6px;
}

.mega-menu h4::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--accent);
  transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

li.dropdown:hover .mega-menu h4::after {
  width: 100%;
}

.mega-menu > div {
  opacity: 0;
  transform: translateY(8px);
  transition: all 0.15s ease;
}

.mega-menu > div:nth-child(1) { transition-delay: 0.01s; }
.mega-menu > div:nth-child(2) { transition-delay: 0.02s; }
.mega-menu > div:nth-child(3) { transition-delay: 0.03s; }
.mega-menu > div:nth-child(4) { transition-delay: 0.04s; }

li.dropdown:hover .mega-menu > div,
li.dropdown:focus-within .mega-menu > div {
  opacity: 1;
  transform: translateY(0);
}

.mega-menu a {
  display: block;
  color: var(--accent-5);
  font-weight: 700;
  font-size: .95rem;
  padding: .12rem 0;
  margin: 0.1rem 0;
  position: relative;
  left: -5px;
  opacity: 0;
  transition: all 0.12s ease;
  transition-delay: calc(var(--delay, 0) * 0.015s);
  border-radius: 4px;
}

li.dropdown:hover .mega-menu a,
li.dropdown:focus-within .mega-menu a {
  left: 0;
  opacity: 1;
}

.mega-menu a:hover {
  color: var(--accent);
  transform: translateX(4px);
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  padding-left: 0.5rem;
  text-shadow: 0 0 10px color-mix(in srgb, var(--accent-3) 70%, transparent);
  transition: all 0.08s ease;
}

.mega-menu h3,
.submenu-title,
.mega-column-title {
  color: var(--accent-3) !important;
  text-shadow: 0 0 6px color-mix(in srgb, var(--accent) 50%, transparent);
  transition: color .25s ease;
}

@media (min-width: 981px) {
  nav.menu-desktop li.dropdown:hover ~ .right-box,
  nav.menu-desktop li.dropdown:focus-within ~ .right-box {
    pointer-events: none !important;
  }
}

/* ============================================================
   üëã WELCOME SECTION
   ============================================================ */

.welcome-section {
  position: relative;
  text-align: center;
  padding: .8rem 0;
  margin-bottom: 8rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  min-height: 400px;
  overflow: visible;
}

.welcome-title {
  font-family: 'Cinzel Decorative', cursive;
  font-weight: 700;
  font-size: 3.5rem;
  color: transparent;
  background: linear-gradient(125deg, #FFF8DC 0%, #FFD700 15%, #DAA520 30%, #FFD700 45%, #FFEC8B 60%, #FFF8DC 75%, #FFD700 90%, #DAA520 100%);
  background-size: 400% 400%;
  -webkit-background-clip: text;
  background-clip: text;
  animation: sofiaSparkle 4s linear infinite;
  text-align: center;
  display: block;
  width: 100%;
  margin: 0 auto 1rem auto;
}

.welcome-title-themable {
  font-family: 'Cinzel Decorative', cursive;
  font-weight: 700;
  font-size: 3.5rem;
  color: transparent;
  background: linear-gradient(125deg, var(--accent-5) 0%, var(--accent) 18%, var(--accent-3) 36%, var(--accent) 54%, var(--accent-2) 72%, var(--accent-5) 100%);
  background-size: 400% 400%;
  -webkit-background-clip: text;
  background-clip: text;
  animation: welcomeSparkle 4s linear infinite;
  text-shadow: 0 0 10px var(--accent-glow), 0 0 20px color-mix(in oklab, var(--accent) 50%, #fff 50%);
}

.welcome-subtitle {
  color: var(--text-accent);
  font-size: 1.5rem;
  margin-bottom: 2rem;
  text-align: center;
  display: block;
  width: 100%;
  margin-left: auto;
  margin-right: auto;
}

.accordion-subtitle {
  font-size: 1.1rem;
  color: #9ad0ff;
  font-weight: 600;
  display: inline-block;
  animation: accordionEffect 3s ease-in-out infinite;
  text-align: center;
  padding: 0.5rem 1rem;
  border-radius: 10px;
  background: rgba(10, 10, 30, 0.7);
  box-shadow: 0 0 15px rgba(154, 208, 255, 0.3);
  margin-bottom: 2rem;
}

@keyframes sofiaSparkle {
  0% { background-position: 0% 50%; text-shadow: 0 0 10px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.4), 0 0 30px rgba(255, 255, 255, 0.2); }
  25% { background-position: 100% 25%; text-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 25px rgba(255, 215, 0, 0.6), 0 0 35px rgba(255, 255, 255, 0.3); }
  50% { background-position: 50% 100%; text-shadow: 0 0 20px rgba(255, 215, 0, 1), 0 0 30px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 255, 255, 0.4); }
  75% { background-position: 0% 75%; text-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 25px rgba(255, 215, 0, 0.6), 0 0 35px rgba(255, 255, 255, 0.3); }
  100% { background-position: 0% 50%; text-shadow: 0 0 10px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.4), 0 0 30px rgba(255, 255, 255, 0.2); }
}

@keyframes welcomeSparkle {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes accordionEffect {
  0%, 100% { transform: scaleX(0.85); letter-spacing: 0px; opacity: 0.7; background: rgba(10, 10, 30, 0.7); box-shadow: 0 0 10px rgba(154, 208, 255, 0.2); }
  25% { transform: scaleX(0.9); letter-spacing: 1px; opacity: 0.8; }
  50% { transform: scaleX(1); letter-spacing: 2px; opacity: 1; background: rgba(20, 20, 50, 0.8); box-shadow: 0 0 20px rgba(154, 208, 255, 0.5); }
  75% { transform: scaleX(0.9); letter-spacing: 1px; opacity: 0.8; }
}

/* ============================================================
   ‚å®Ô∏è TYPING EFFECT
   ============================================================ */

.typing-wrap {
  margin: 1.25rem 0;
  display: flex;
  justify-content: center;
  min-height: 3.2em;
}

.typing-effect {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.4rem;
  font-style: italic;
  color: #00CFFF;
  font-weight: 700;
  display: inline-block;
  min-width: 60ch;
  text-align: center;
  white-space: nowrap;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
  will-change: contents;
}

.cursor {
  display: inline-block;
  animation: blink 1.2s ease-in-out infinite;
  font-weight: 400;
  margin-left: 2px;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* ============================================================
   üí¨ QUOTE RUNNER
   ============================================================ */

#quote-runner {
  position: fixed;
  left: 50%;
  bottom: 250px;
  transform: translateX(-50%);
  z-index: 20;
  pointer-events: none;
  max-width: min(86vw, 680px);
}

#quote-runner,
#quote-runner * {
  pointer-events: none !important;
}

#quote-runner .quote-bubble {
  position: relative;
  opacity: 0;
  margin: 0;
  backdrop-filter: blur(5px);
  will-change: transform, opacity;
}

#quote-runner .quote-bubble .quote-text {
  font-size: 1.05rem;
  line-height: 1.4;
}

#quote-runner .quote-bubble .quote-author {
  margin-top: .25rem;
}

#quote-runner .slide-in {
  animation: quoteSlideInOut 9s cubic-bezier(.2,1,.2,1) forwards;
}

.floating-quotes {
  display: none !important;
  pointer-events: none !important;
  z-index: 20 !important;
}

.quote-bubble {
  background: rgba(10, 10, 30, 0.9);
  border: 1px solid var(--menu-border);
  border-radius: 15px;
  padding: 5px;
  margin-bottom: 10px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  transform: translateX(100%);
  opacity: 0;
  transition: transform 0.5s, opacity 0.5s;
  backdrop-filter: blur(5px);
}

.quote-bubble.show {
  transform: translateX(0);
  opacity: 1;
}

.quote-text {
  font-style: italic;
  margin-bottom: 5px;
  color: var(--text-light);
}

.quote-author {
  text-align: right;
  font-size: 0.9rem;
  color: var(--gold);
}

@keyframes quoteSlideInOut {
  0% { transform: translateX(55vw); opacity: 0; }
  18% { opacity: 1; }
  40% { transform: translateX(0); opacity: 1; }
  70% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(-55vw); opacity: 0; }
}

/* ============================================================
   üï∞Ô∏è TIMELINE
   ============================================================ */

.timeline-container {
  max-width: 1400px;
  margin: 4rem 0;
  position: relative;
  perspective: 1200px;
  overflow: visible !important;
}

.timeline-title {
  font-family: 'Cinzel', serif;
  color: var(--accent-gold, #ffd86a);
  text-align: center;
  margin-bottom: var(--space-xl);
  font-size: clamp(var(--text-3xl), 5vw, var(--text-4xl));
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
  position: relative;
}

.timeline-title::after {
  content: '';
  display: block;
  width: 200px;
  height: 4px;
  background: linear-gradient(90deg, transparent, var(--accent-gold, #ffd86a), transparent);
  margin: 1rem auto;
  border-radius: 2px;
  animation: titleGlow 3s ease-in-out infinite;
}

@keyframes titleGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); }
  50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.8); }
}

.timeline {
  position: relative;
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--space-lg) 0;
  width: 100%;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 4px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, var(--purple) 0%, var(--cyan) 30%, var(--gold) 70%, var(--purple) 100%);
  box-shadow: 0 0 30px rgba(185, 103, 255, 0.6), 0 0 60px rgba(0, 204, 255, 0.3);
  filter: blur(0.5px);
  z-index: 1;
}

.timeline::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 8px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, transparent 0%, rgba(255, 255, 255, 0.8) 10%, rgba(255, 255, 255, 0.4) 20%, transparent 30%, transparent 70%, rgba(255, 255, 255, 0.4) 80%, rgba(255, 255, 255, 0.8) 90%, transparent 100%);
  background-size: 100% 200%;
  animation: particleFlow 4s linear infinite;
  z-index: 2;
}

@keyframes particleFlow {
  0% { background-position: 0 0; }
  100% { background-position: 0 200%; }
}

.timeline-item {
  position: relative;
  width: 45%;
  margin: var(--space-xl) 0;
  opacity: 0;
  transform: translateY(50px);
  transform-style: preserve-3d;
  transition: all 0.8s ease;
  will-change: transform, opacity;
}

.timeline > .timeline-item {
  width: 50% !important;
  display: block !important;
  position: relative;
  float: none !important;
}

.timeline-item.left {
  left: 0;
  margin-right: auto;
  padding-right: 60px;
  text-align: right;
  transform: translateX(-400px) rotateY(25deg) scale(0.7) skew(-8deg, -5deg);
  filter: blur(12px) brightness(0.8);
}

.timeline-item.right {
  left: 55%;
  margin-left: auto;
  padding-left: 60px;
  text-align: left;
  transform: translateX(400px) rotateY(-25deg) scale(0.7) skew(8deg, 5deg);
  filter: blur(12px) brightness(0.8);
}

.timeline > .timeline-item.left {
  margin-left: 0 !important;
  padding-right: 60px;
  text-align: right;
}

.timeline > .timeline-item.right {
  margin-left: 50% !important;
  left: auto !important;
  padding-left: 60px;
  text-align: left;
}

.timeline-item.visible {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0) brightness(1);
  animation-duration: 1.2s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.timeline-item.visible.left {
  animation-name: cosmicSlideInLeft;
}

.timeline-item.visible.right {
  animation-name: cosmicSlideInRight;
}

@keyframes cosmicSlideInLeft {
  0% { transform: translateX(-400px) rotateY(25deg) scale(0.7) skew(-8deg, -5deg); opacity: 0; filter: blur(12px) brightness(0.8); }
  20% { transform: translateX(-200px) rotateY(15deg) scale(0.8) skew(-4deg, -2deg); opacity: 0.5; filter: blur(6px) brightness(0.9); }
  50% { transform: translateX(50px) rotateY(-10deg) scale(1.1) skew(2deg, 1deg); opacity: 1; filter: blur(0) brightness(1.1); }
  70% { transform: translateX(-20px) rotateY(5deg) scale(1.02) skew(-1deg, -0.5deg); opacity: 1; filter: blur(0) brightness(1); }
  100% { transform: translateX(0) rotateY(0deg) scale(1) skew(0deg, 0deg); opacity: 1; filter: blur(0) brightness(1); }
}

@keyframes cosmicSlideInRight {
  0% { transform: translateX(400px) rotateY(-25deg) scale(0.7) skew(8deg, 5deg); opacity: 0; filter: blur(12px) brightness(0.8); }
  20% { transform: translateX(200px) rotateY(-15deg) scale(0.8) skew(4deg, 2deg); opacity: 0.5; filter: blur(6px) brightness(0.9); }
  50% { transform: translateX(-50px) rotateY(10deg) scale(1.1) skew(-2deg, -1deg); opacity: 1; filter: blur(0) brightness(1.1); }
  70% { transform: translateX(20px) rotateY(-5deg) scale(1.02) skew(1deg, 0.5deg); opacity: 1; filter: blur(0) brightness(1); }
  100% { transform: translateX(0) rotateY(0deg) scale(1) skew(0deg, 0deg); opacity: 1; filter: blur(0) brightness(1); }
}

@keyframes mobileSlideIn {
  0% { transform: translateX(-100px) scale(0.9); opacity: 0; filter: blur(8px); }
  100% { transform: translateX(0) scale(1); opacity: 1; filter: blur(0); }
}

.timeline-content {
  position: relative;
  background: linear-gradient(145deg, var(--card-bg) 0%, rgba(20, 20, 50, 0.8) 50%, var(--card-bg) 100%);
  border: 1px solid var(--card-border);
  border-radius: 20px;
  padding: var(--space-lg);
  backdrop-filter: blur(20px);
  transform: translateZ(50px);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 215, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
  overflow: hidden;
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  margin-top: 2rem;
  z-index: 3;
}

.timeline-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 20px;
  padding: 2px;
  background: linear-gradient(45deg, var(--purple), var(--cyan), var(--gold), var(--purple));
  background-size: 300% 300%;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  animation: borderGlow 3s ease infinite;
  opacity: 0;
  transition: opacity 0.6s ease;
}

.timeline-item.visible .timeline-content::before {
  opacity: 1;
}

@keyframes borderGlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.timeline-content:hover {
  transform: translateZ(80px) scale(1.05) rotateX(5deg);
  box-shadow: 0 35px 70px rgba(0, 0, 0, 0.6), 0 0 0 2px rgba(255, 215, 0, 0.5), inset 0 2px 0 rgba(255, 255, 255, 0.2), inset 0 -2px 0 rgba(0, 0, 0, 0.3);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.timeline-content h3 {
  color: var(--accent-gold, #ffd86a);
  margin-bottom: var(--space-sm);
  font-size: var(--text-xl);
  font-family: 'Cinzel', serif;
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
}

.period {
  color: var(--accent-cyan, #00ccff);
  font-style: italic;
  margin-bottom: var(--space-sm);
  display: inline-block;
  padding: var(--space-xs) var(--space-md);
  background: rgba(0, 204, 255, 0.15);
  border-radius: 20px;
  border: 1px solid rgba(0, 204, 255, 0.4);
  box-shadow: 0 0 20px rgba(0, 204, 255, 0.2);
}

.timeline-content p {
  line-height: 1.7;
  margin-bottom: 1rem;
  color: #e9eef5;
  font-size: 1.05rem;
}

.timeline-content strong {
  color: #ffeb9a;
  text-shadow: 0 0 10px rgba(255, 235, 154, 0.3);
}

/* === PUNTO TIMELINE (UNIFICATO) === */
.timeline-item::before {
  content: '';
  position: absolute;
  top: 2rem;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #ffffff 0%, var(--gold) 30%, var(--cyan) 70%, var(--purple) 100%);
  box-shadow: 0 0 0 6px rgba(255, 215, 0, 0.3), 0 0 0 12px rgba(0, 204, 255, 0.2), 0 0 20px 8px rgba(255, 215, 0, 0.5);
  z-index: 4;
  opacity: 0;
  transform: translate(-50%, -50%) scale(0);
  transition: all 0.6s ease 0.3s;
}

.timeline-item.left::before {
  right: -10px;
  left: auto;
}

.timeline-item.right::before {
  left: 0;
  transform: translate(-50%, -50%);
}

.timeline > .timeline-item .tl-dot {
  /* Questo selettore √® mantenuto per compatibilit√† con eventuali script
     che potrebbero fare riferimento a .tl-dot, ma lo stile effettivo
     √® applicato da .timeline-item::before */
}

.timeline-item.visible::before {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
  animation: dotPulse 2s ease-in-out infinite 1s;
}

@keyframes dotPulse {
  0%, 100% { box-shadow: 0 0 0 8px rgba(255, 215, 0, 0.4), 0 0 0 16px rgba(0, 204, 255, 0.3), 0 0 0 24px rgba(185, 103, 255, 0.2), 0 0 30px 12px rgba(255, 215, 0, 0.6); }
  50% { box-shadow: 0 0 0 12px rgba(255, 215, 0, 0.6), 0 0 0 24px rgba(0, 204, 255, 0.4), 0 0 0 36px rgba(185, 103, 255, 0.3), 0 0 50px 20px rgba(255, 215, 0, 0.8); }
}

@keyframes dotPop {
  0% { transform: translate(-50%, -50%) scale(0); }
  60% { transform: translate(-50%, -50%) scale(1.4); }
  80% { transform: translate(-50%, -50%) scale(0.9); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* === CONNETTORI === */
.timeline-item::after,
.tl-connector {
  content: '';
  position: absolute;
  top: 2rem;
  height: 3px;
  width: calc(50% - 12px);
  background: linear-gradient(90deg, transparent, var(--gold), var(--cyan), var(--purple), transparent);
  opacity: 0;
  transform: scaleX(0);
  transition: all 0.6s ease 0.5s;
  z-index: 5;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
}

.timeline-item.left::after {
  left: auto;
  right: calc(50% - 116px);
  transform-origin: right center;
  background: linear-gradient(270deg, transparent, var(--gold), var(--cyan), var(--purple), transparent);
}

.timeline-item.right::after {
  left: 6px !important;
  right: auto !important;
  width: 54px !important;
  transform-origin: left center !important;
}

.timeline > .timeline-item.left .tl-connector {
  left: calc(50% + 12px) !important;
  right: auto !important;
}

.timeline > .timeline-item.right .tl-connector {
  right: calc(50% + 12px) !important;
  left: auto !important;
}

.timeline-item.visible::after,
.timeline-item.visible .tl-connector {
  opacity: 1;
  transform: scaleX(1);
}

@keyframes connectorDraw {
  from { transform: scaleX(0); opacity: 0; }
  to { transform: scaleX(1); opacity: 1; }
}

/* === LARGHEZZA CARD === */
.timeline .timeline-item .timeline-content {
  width: calc(100% + var(--card-widen));
}

.timeline .timeline-item.left .timeline-content {
  margin-left: calc(-1 * var(--card-widen));
}

.timeline .timeline-item.right .timeline-content {
  margin-right: calc(-1 * var(--card-widen));
}

/* === PERFORMANCE === */
.timeline .timeline-item.visible,
.timeline .timeline-item.visible::before,
.timeline .timeline-item.visible::after {
  will-change: transform, opacity;
}

/* ============================================================
   üì¶ RUSSELL BOX
   ============================================================ */

#russell-box {
  position: fixed;
  bottom: 8vh;
  left: 2rem;
  z-index: 9;
  background: rgba(10,10,30,.8);
  border: 1px solid var(--accent-3);
  border-radius: .75rem;
  padding: 1rem 1.2rem;
  max-width: 25rem;
  color: var(--accent-5);
  box-shadow: 0 0 14px var(--accent-2);
  backdrop-filter: blur(6px);
  cursor: pointer;
  contain: layout style paint;
  transition: box-shadow 220ms ease, transform 220ms ease, background-color 220ms ease, filter 220ms ease;
  will-change: box-shadow, transform, filter;
}

#russell-box.ping {
  box-shadow: 0 0 0 2px rgba(255,215,0,.40), 0 0 28px rgba(255,215,0,.55);
  transform: translateY(-2px) scale(1.015);
  background-color: rgba(20,20,40,.88);
  filter: brightness(2.10) saturate(2.08);
  z-index: 2147483600;
}

#russell-box:active {
  box-shadow: 0 0 0 2px rgba(255,215,0,.35), 0 0 22px rgba(255,215,0,.55);
  filter: brightness(1.04);
  animation: shakeSoft 0.45s ease-out;
}

#russell-btn {
  all: unset;
  cursor: pointer;
  display: block;
  color: #ffd86a;
  font-weight: 600;
  line-height: 1.4;
  text-shadow: 0 0 8px var(--accent-3);
  transition: color 160ms ease, text-shadow 160ms ease, opacity 160ms ease;
  position: relative;
}

#russell-btn.ping {
  color: #ffe08a;
  text-shadow: 0 0 10px rgba(255,215,0,.45);
  opacity: 1;
}

.russell-box:active .russell-inner {
  animation: shakeSoft 0.45s ease-out;
}

.russell-inner {
  display: inline-block;
  transition: transform 180ms cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes shakeSoft {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(1.5deg); }
  50% { transform: rotate(-1.5deg); }
  75% { transform: rotate(1deg); }
  100% { transform: rotate(0deg); }
}

#russell-hint {
  position: fixed;
  bottom: 22vh;
  left: 3.5rem;
  z-index: 2;
  color: #cfe8ff;
  opacity: .85;
  font-style: italic;
  font-weight: 700;
}

#russell-flash {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, rgba(255, 240, 180, 0.45), rgba(255, 200, 120, 0.12), transparent 70%);
  opacity: 0;
  pointer-events: none;
  z-index: 9998;
  mix-blend-mode: screen;
  filter: blur(22px);
}

.russell-shock,
.russell-shock2,
.russell-bolt,
.russell-branch,
.russell-ripple,
.russell-ring,
.russell-fog {
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: 50%;
}

.russell-shock {
  border: 2px solid var(--accent-3);
  opacity: 0;
  transform: scale(0.1);
}

.russell-shock2 {
  border: 2px solid var(--accent);
  opacity: 0;
  transform: scale(0.18);
}

.russell-bolt {
  width: 4px;
  height: 110%;
  background: linear-gradient(to bottom, white, color-mix(in srgb, var(--accent) 65%, transparent), transparent);
  left: 50%;
  transform: translateX(-50%) scaleY(0);
  opacity: 0;
  filter: drop-shadow(0 0 14px var(--accent-2));
}

.russell-branch {
  width: 3px;
  height: 70px;
  background: linear-gradient(to bottom, white, color-mix(in srgb, var(--accent-2) 55%, transparent), transparent);
  left: 25%;
  top: 5%;
  opacity: 0;
}

.russell-ripple {
  border: 1px solid var(--accent-2);
  opacity: 0;
  transform: scale(0.22);
}

.russell-ring {
  border: 1px solid var(--accent);
  opacity: 0;
  transform: scale(0.45);
}

.russell-spark {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent);
  filter: drop-shadow(0 0 8px var(--accent-3));
}

.russell-fog {
  background: radial-gradient(circle, color-mix(in srgb, var(--accent) 28%, transparent), transparent 70%);
  opacity: 0;
}

/* ============================================================
   ‚ö° EFFETTI SPECIALI
   ============================================================ */

#lightning, #bolt {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0;
}

#lightning {
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.9), rgba(255,255,255,.2) 40%, transparent 65%);
  transition: opacity .18s ease-out;
}

#bolt {
  width: 160px;
  height: 400px;
  left: 50%;
  top: 50%;
  background: linear-gradient(to bottom, rgba(255,255,255,1), rgba(255,255,255,0));
  clip-path: polygon(48% 0, 52% 0, 60% 25%, 45% 25%, 55% 55%, 40% 55%, 48% 100%, 42% 100%, 35% 60%, 50% 60%, 38% 28%, 58% 28%);
  filter: drop-shadow(0 0 12px rgba(255,255,255,.8));
  transition: opacity .28s ease-out, transform .09s ease-out;
}

#effects-ctrl {
  position: fixed;
  top: var(--effects-top) !important;
  right: var(--effects-right) !important;
  z-index: 2147483603;
  display: flex;
  gap: .5rem;
  justify-content: flex-end;
}

#effects-ctrl .ctrl-btn {
  min-width: 6.5rem;
}

/* ============================================================
   üéõÔ∏è CONTROLLI (pulsanti vari)
   ============================================================ */

.ctrl-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 2rem;
  margin-bottom: 2px;
  padding: .38rem .62rem;
  font-weight: 600;
  cursor: pointer;
  border-radius: .5rem;
  border: 1px solid rgba(255,215,0,.25);
  background: rgba(20,20,40,.7);
  color: #ffd86a;
}

.btn-ghost {
  border: 1px dashed color-mix(in oklab, var(--accent) 65%, #ffffff22 35%);
  background: color-mix(in oklab, var(--accent) 16%, transparent);
  color: var(--text-light);
  background: transparent;
  color: var(--accent);
  border: 1px solid var(--accent);
  border-radius: 10px;
  padding: .6rem 1rem;
}

.btn-ghost:hover {
  border-style: solid;
  background: color-mix(in oklab, var(--accent) 26%, transparent);
  filter: var(--accent-glow);
}

.btn-accent {
  background: var(--accent);
  color: var(--accent-text);
  border: 1px solid color-mix(in oklab, var(--accent) 70%, #000 30%);
  border-radius: 10px;
  padding: .6rem 1rem;
  box-shadow: 0 6px 25px -8px var(--accent-glow);
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease;
}

.btn-accent:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 32px -8px var(--accent-glow);
}

.theme-btn {
  background: rgba(20, 20, 40, 0.78);
  border: 1px solid rgba(255, 215, 0, 0.25);
  border-radius: 0.5rem;
  padding: 0.5rem;
  cursor: pointer;
  color: #ffd86a;
  font-size: 1.2rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
}

.theme-btn:hover {
  background: rgba(255, 215, 0, 0.1);
  border-color: rgba(255, 215, 0, 0.5);
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
}

.tag-accent {
  display: inline-block;
  padding: .25rem .6rem;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--accent) 70%, #000 30%);
  background: color-mix(in oklab, var(--accent) 18%, transparent);
  color: color-mix(in oklab, var(--accent-text) 70%, #000 30%);
}

/* ============================================================
   üéöÔ∏è SLIDER VERTICALE
   ============================================================ */

.slider-vertical {
  position: fixed;
  left: 3.25rem;
  top: 5.5rem;
  width: 11.25rem;
  height: 20rem;
  z-index: 80;
  overflow: hidden;
  border: 1px solid rgba(255,215,0,.18);
  border-radius: .75rem;
  background: rgba(10,10,25,.45);
  backdrop-filter: blur(.38rem);
  box-shadow: 0 .5rem 1.5rem rgba(0,0,0,.35);
}

.slider-vertical .slider-inner {
  position: absolute;
  inset: 0;
  will-change: transform;
}

.slide-vertical {
  width: 100%;
  padding: .62rem .62rem .88rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .5rem;
}

.slide-vertical img {
  width: 100%;
  height: 8.75rem;
  object-fit: contain;
  display: block;
  background: rgba(0,0,0,.25);
  border-radius: .62rem;
  border: 1px solid rgba(255,255,255,.1);
  box-shadow: 0 .38rem .88rem rgba(0,0,0,.25);
}

.slide-vertical p {
  margin: .25rem 0 0;
  font-family: 'Cormorant Garamond', serif;
  font-size: .92rem;
  font-weight: 600;
  text-align: center;
  color: #ffe9b8;
  text-shadow: 0 0 .5rem rgba(255,215,0,.25);
  min-height: 2.6em;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.slider-controls {
  position: fixed;
  left: 3.25rem;
  top: 26rem;
  width: 11.25rem;
  display: flex;
  flex-direction: column;
  gap: .5rem;
  background: rgba(10,10,25,.55);
  border: 1px solid rgba(255,215,0,.22);
  border-radius: .62rem;
  padding: .5rem;
  z-index: 80;
}

/* ============================================================
   üîä AUDIO PLAYER
   ============================================================ */

.audio-player {
  position: fixed;
  left: 3.25rem;
  top: 1.38rem;
  z-index: 80;
  display: flex;
  align-items: center;
  gap: .62rem;
  padding: .5rem .62rem;
  background: rgba(10,10,30,.8);
  border: 1px solid rgba(255,215,0,.25);
  border-radius: .62rem;
  opacity: 1;
  transform: none;
}

#audio-player {
  display: grid;
  grid-template-columns: 1fr;
  gap: .35rem;
  flex: 1 1 100% !important;
  width: 15% !important;
  margin-top: 580px;
  padding: .5rem .62rem;
}

.audio-title {
  margin: 0;
  font-weight: 700;
}

.audio-player .controls {
  display: flex;
  flex-wrap: wrap;
  gap: .2rem .6rem;
  align-items: center;
}

.audio-player #time {
  font-variant-numeric: tabular-nums;
  min-width: 7.2rem;
}

.audio-player #volume {
  width: 160px;
}

#audio-player input[type="range"] {
  -webkit-appearance: none;
  width: 160px;
  background: transparent;
}

/* Volume & speed slider styling */
#volume, #slider-speed {
  -webkit-appearance: none;
  width: 160px;
  background: linear-gradient(90deg, rgba(255,215,0,.85), rgba(0,204,255,.85)) no-repeat, linear-gradient(90deg, rgba(255,255,255,.14), rgba(255,255,255,.14)) no-repeat;
  background-size: var(--fill, 0%) 6px, 100% 6px;
  background-position: left center, left center;
  background-repeat: no-repeat;
  border-radius: 999px;
}

#volume::-webkit-slider-runnable-track,
#slider-speed::-webkit-slider-runnable-track {
  background: transparent;
  height: 6px;
}

#volume::-webkit-slider-thumb,
#slider-speed::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--gold, #d4af37);
  margin-top: -4px;
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

#volume::-moz-range-track,
#slider-speed::-moz-range-track {
  background: transparent;
  height: 6px;
}

#volume::-moz-range-thumb,
#slider-speed::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

#volume::-ms-track,
#slider-speed::-ms-track {
  background: transparent;
  height: 6px;
  color: transparent;
  border-color: transparent;
}

#volume::-ms-thumb,
#slider-speed::-ms-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--gold, #d4af37);
  box-shadow: 0 0 6px rgba(255,215,0,.4);
}

#slider-speed {
  vertical-align: middle;
}

#speed-readout {
  display: inline-block;
  min-width: 3.5ch;
  margin-left: .6rem;
  padding: .15rem .4rem;
  border-radius: .5rem;
  font-variant-numeric: tabular-nums;
  font-size: .9rem;
  line-height: 1.1;
  background: rgba(255,255,255,.15);
  border: 1px solid rgba(212,175,55,.55);
  box-shadow: 0 0 6px rgba(255,215,0,.25);
}

/* ============================================================
   üì∞ ARTICOLI E RIGHT BOXES
   ============================================================ */

.articles-blob {
  position: fixed;
  right: 1.25rem;
  top: 12.5rem;
  width: 20rem;
  z-index: 90;
  background: radial-gradient(120% 150% at 100% 0%, rgba(50,120,255,.16), rgba(10,10,30,.82));
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 1rem;
  padding: .88rem 1rem;
  box-shadow: 0 .94rem 1.88rem rgba(0,0,0,.35);
}

.articles-blob h3 {
  margin: 0 0 .5rem;
  font-family: 'Cinzel', serif;
  color: #ffd86a;
}

.articles-blob ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.articles-blob li {
  margin: .25rem 0;
}

.articles-blob a {
  color: #cfe8ff;
  text-decoration: none;
  font-weight: 700;
}

.articles-blob a:hover {
  color: #fff;
  text-decoration: underline;
}

.right-box {
  position: fixed;
  right: 1.25rem;
  width: 20rem;
  z-index: 25;
  background: rgba(10,10,30,.86);
  border: 1px solid rgba(255,215,0,.25);
  border-radius: .75rem;
  padding: .62rem .75rem;
  box-shadow: 0 .9rem 1.8rem rgba(0,0,0,.34);
}

.right-box h3 {
  margin: .1rem 0 .4rem;
  font-family: 'Cinzel', serif;
  color: #ffd86a;
  font-size: 1rem;
}

.right-box .mini {
  color: #bcd7ff;
  font-size: .8rem;
  opacity: .85;
}

.right-box .row {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin: .38rem 0;
}

.right-box input[type="search"] {
  width: 100%;
  height: 2rem;
  padding: 0 .6rem;
  border-radius: .5rem;
  background: rgba(20,20,40,.75);
  border: 1px solid rgba(255,215,0,.28);
  color: #e9eef5;
}

.right-box .sources {
  display: flex;
  flex-wrap: wrap;
  gap: .4rem .6rem;
  margin: .35rem 0 .5rem;
}

.right-box .sources label {
  font-size: .8rem;
  color: #d9e7ff;
}

.right-box .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .38rem .6rem;
  border-radius: .5rem;
  border: 1px solid rgba(255,215,0,.25);
  background: rgba(20,20,40,.78);
  color: #ffd86a;
  font-weight: 700;
  cursor: pointer;
}

.right-embed {
  position: fixed;
  right: 1.25rem;
  top: 40rem;
  width: 20rem;
  z-index: 25;
  background: rgba(10,10,30,.8);
  border: 1px solid rgba(255,215,0,.25);
  border-radius: .75rem;
  padding: .5rem;
}

.right-embed iframe {
  width: 100%;
  height: 264px;
  display: block;
  border: 0;
}

#dict-compact { top: 22.2rem; }
#iep-linkbox { top: 36rem; }

/* ============================================================
   üîç SEARCH PANEL
   ============================================================ */

#search-panel,
#searchPanel,
.search-panel,
.results-panel {
  position: fixed;
  left: 50%;
  top: clamp(72px, 8vh, 120px);
  transform: translateX(-50%) translateY(-6px) scale(0.985);
  width: min(94vw, var(--search-panel-w));
  max-height: var(--search-panel-maxh);
  border-radius: 12px;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  transition: transform .35s cubic-bezier(.2, .9, .2, 1), opacity .32s ease;
  will-change: transform, opacity;
  z-index: 2147483605;
  font-family: 'Montserrat', sans-serif;
}

#search-panel.open,
#searchPanel.open,
.search-panel.open,
.results-panel.open {
  opacity: 1;
  transform: translateX(-50%) translateY(0) scale(1);
  pointer-events: auto;
}

#search-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .28s ease;
  z-index: 2147483604;
}

#search-backdrop.open {
  opacity: 1;
  pointer-events: auto;
}

.search-header,
#search-header,
.results-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .65rem .9rem;
  border-bottom: 1px solid rgba(255,215,0,.22);
}

.search-title,
.results-title {
  margin: 0;
  font-weight: 700;
  font-size: 1.05rem;
}

.search-close,
#search-close,
[data-role="search-close"] {
  margin: 0;
  padding: .35rem .55rem;
  border-radius: .5rem;
  line-height: 1;
  cursor: pointer;
  border: 1px solid rgba(255,215,0,.25);
  background: rgba(20,20,40,.78);
  color: #ffd86a;
  font-weight: 700;
}

#search-panel .search-close {
  position: absolute;
  top: 6px;
  right: 8px;
  background: transparent;
  border: 1px solid rgba(255,215,0,.35);
  color: #e9eef5;
  border-radius: 6px;
  padding: 2px 8px;
  cursor: pointer;
  font-size: .85rem;
}

#search-panel .search-close:hover {
  background: rgba(255,255,255,0.06);
}

#search-results,
#searchResults,
.search-results,
.results-scroll {
  max-height: calc(var(--search-panel-maxh) - 3.2rem);
  overflow: auto;
  padding: .6rem .8rem .8rem;
  display: grid;
  gap: .55rem;
}

#search-results > *,
.search-results > *,
#searchResults > * {
  padding: .55rem .65rem;
  border: 1px solid rgba(255,215,0,.16);
  border-radius: 10px;
  background: rgba(10,10,30,.78);
  opacity: 0;
  transform: translateY(8px);
  will-change: transform, opacity;
  animation: spItemIn .48s cubic-bezier(.2,1,.2,1) both;
  animation-delay: calc(var(--i, 0) * 60ms);
}

@keyframes spItemIn {
  to { opacity: 1; transform: translateY(0); }
}

#search-results h4,
.search-results h4,
.result-title {
  margin: 0 0 .2rem;
  font-size: 1rem;
  font-weight: 700;
  color: #ffeb9a;
}

.result-meta,
.result-tag,
.tag {
  display: inline-block;
  margin: 0 0 .25rem;
  padding: .1rem .45rem;
  font-size: .8rem;
  border-radius: 999px;
  color: #0b1022;
  background: linear-gradient(90deg, #ffd86a, #ffeb9a);
}

.result-desc {
  margin: .1rem 0 .15rem;
  font-size: .9rem;
  color: #cfe2ff;
  line-height: 1.25;
}

.result-source {
  font-size: .8rem;
  opacity: .85;
}

mark,
.hl,
mark.search-hit {
  background: #ffe08a;
  color: #141414;
  padding: 0 .15rem;
  border-radius: .2rem;
}

#search-results mark,
.search-results mark,
#searchResults mark {
  animation: hlPulse 1.4s ease-out .2s 1 both;
}

@keyframes hlPulse {
  0% { box-shadow: 0 0 0 rgba(255,215,0,0); }
  35% { box-shadow: 0 0 .8rem rgba(255,215,0,.35); }
  100% { box-shadow: 0 0 0 rgba(255,215,0,0); }
}

.related-results {
  margin-top: .6rem;
  padding-top: .6rem;
  border-top: 1px solid rgba(255,215,0,.22);
}

.related-header {
  margin: 0 0 .35rem;
  font-weight: 700;
  font-size: 1rem;
  color: #ffeb9a;
}

.related-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: .4rem;
}

.related-item {
  padding: .45rem .55rem;
  border: 1px solid rgba(255,215,0,.16);
  border-radius: 10px;
  background: rgba(10,10,30,.78);
}

.related-item a {
  color: #ffeb9a;
  text-decoration: none;
}

.related-item a:hover {
  text-decoration: underline;
}

.related-item .meta {
  font-size: .86rem;
  opacity: .9;
  margin-top: .15rem;
}

/* ============================================================
   üç™ COOKIE CONSENT
   ============================================================ */

.cc-banner {
  position: fixed;
  left: 50%;
  bottom: 1.25rem;
  transform: translateX(-50%);
  width: min(92vw, 740px);
  background: var(--cc-bg);
  border: 1px solid var(--cc-border);
  border-radius: 12px;
  box-shadow: 0 1.2rem 2.4rem rgba(0,0,0,.45);
  padding: .95rem 1rem;
  display: none;
  z-index: 2147483607;
  backdrop-filter: blur(.5rem);
}

.cc-banner.open {
  display: grid;
  gap: .75rem;
  grid-template-columns: 1fr auto;
  align-items: start;
}

.cc-banner .cc-title {
  font-family: 'Cinzel', serif;
  color: var(--cc-gold);
  margin: 0 0 .25rem;
  font-size: 1.05rem;
}

.cc-banner .cc-text {
  color: #dfe8ff;
  font-size: .92rem;
  line-height: 1.35;
  opacity: .95;
  margin: 0;
}

.cc-actions {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-end;
}

.cc-btn {
  border: 1px solid var(--cc-border);
  border-radius: .55rem;
  padding: .48rem .75rem;
  background: rgba(20,20,40,.78);
  color: #ffd86a;
  font-weight: 700;
  cursor: pointer;
}

.cc-btn.solid {
  background: linear-gradient(180deg, #ffd86a, #e3c45a);
  color: #0b1022;
  border-color: #ffd86a;
}

.cc-btn.outline {
  background: rgba(20,20,40,.78);
  color: #ffd86a;
}

.cc-link {
  color: var(--cc-cyan);
  text-decoration: none;
  font-weight: 600;
}

.cc-modal {
  position: fixed;
  inset: 0;
  display: none;
  place-items: center;
  background: rgba(0,0,0,.55);
  z-index: 2147483608;
}

.cc-modal.open {
  display: grid;
}

.cc-card {
  width: min(94vw, 720px);
  max-height: 80vh;
  overflow: auto;
  background: var(--cc-bg);
  border: 1px solid var(--cc-border);
  border-radius: 14px;
  padding: 1rem 1rem 1.1rem;
  box-shadow: 0 1.3rem 2.6rem rgba(0,0,0,.5);
}

.cc-card h3 {
  margin: .1rem 0 .2rem;
  color: var(--cc-gold);
  font-family: 'Cinzel', serif;
}

.cc-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: .5rem;
  align-items: center;
  padding: .55rem .5rem;
  border-bottom: 1px solid rgba(255,215,0,.13);
}

.cc-row:last-child {
  border-bottom: 0;
}

.cc-desc {
  font-size: .92rem;
  color: #cfe2ff;
  opacity: .95;
  margin: .15rem 0 0;
}

.cc-switch {
  display: flex;
  align-items: center;
  gap: .5rem;
}

.cc-switch input {
  width: 46px;
  height: 24px;
  appearance: none;
  background: #1e2746;
  border-radius: 999px;
  position: relative;
  outline: none;
  cursor: pointer;
  border: 1px solid rgba(255,215,0,.22);
}

.cc-switch input:checked {
  background: #2a7dff;
}

.cc-switch input::after {
  content: "";
  position: absolute;
  left: 3px;
  top: 3px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #fff;
  transition: .2s;
}

.cc-switch input:checked::after {
  transform: translateX(22px);
}

.cc-badge {
  font-size: .75rem;
  color: #0b1022;
  background: var(--cc-gold);
  border-radius: 999px;
  padding: .08rem .5rem;
  font-weight: 800;
}

.cc-actions-row {
  margin-top: .8rem;
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  flex-wrap: wrap;
}

#cookie-fab {
  position: fixed;
  left: 1.25rem;
  bottom: 1.25rem;
  display: inline-flex !important;
  align-items: center;
  gap: .45rem;
  height: 48px;
  width: auto !important;
  padding: 0 .85rem 0 .70rem;
  border-radius: 999px;
  white-space: nowrap;
  line-height: 1;
  font-weight: 700;
  border: 1px solid var(--cc-border);
  background: rgba(20,20,40,.78);
  cursor: pointer;
  box-shadow: 0 .8rem 1.6rem rgba(0,0,0,.45);
  z-index: 2147483606;
  color: #ffde9a;
  font-size: 1.25rem;
  animation: float 3s ease-in-out infinite;
}

#cookie-fab:hover {
  box-shadow: 0 0 .85rem rgba(255,215,0,.45);
  transform: translateY(-4px) scale(1.05);
  animation-play-state: paused;
}

#cookie-fab:focus-visible {
  outline: 2px solid var(--cc-gold, #d4af37);
  outline-offset: 2px;
}

#cookie-fab.accepted {
  animation: pulse-green 1s ease;
}

#cookie-fab.declined {
  animation: pulse-red 1s ease;
}

#cookie-fab.saved {
  animation: pulse-blue 1s ease;
}

#cookie-fab.clicked {
  transform: scale(0.95);
}

#cookie-fab.modal-open {
  animation-play-state: paused;
  opacity: 0.7;
}

#cc-reject-all.clicked {
  transform: scale(0.95);
  transition: transform 0.1s;
}

@keyframes pulse-green {
  0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
  70% { box-shadow: 0 0 0 15px rgba(34, 197, 94, 0); }
  100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}

@keyframes pulse-red {
  0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
  70% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); }
  100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
}

@keyframes pulse-blue {
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
  70% { box-shadow: 0 0 0 15px rgba(59, 130, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

@keyframes float {
  0%, 100% { transform: translateY(0) translateX(0); }
  33% { transform: translateY(-6px) translateX(2px); }
  66% { transform: translateY(-3px) translateX(-2px); }
}

/* ============================================================
   üìò DIZIONARIO FAB
   ============================================================ */

/* Versione principale del FAB (bottom:150px) */
#dict-fab {
  position: fixed;
  bottom: 450px;
  right: 120px;
  padding: 12px 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.9) 0%, rgba(255, 216, 106, 0.8) 100%);
  border: 1px solid rgba(255, 215, 0, 0.4);
  border-radius: 25px;
  color: #0a0a1a;
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  font-size: 0.95rem;
  letter-spacing: 0.3px;
  cursor: pointer;
  z-index: 97;
  box-shadow: 0 6px 15px rgba(255, 215, 0, 0.3), 0 0 20px rgba(255, 216, 106, 0.2);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(10px);
}

#dict-fab:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 10px 25px rgba(255, 215, 0, 0.4), 0 0 30px rgba(255, 216, 106, 0.3);
  background: linear-gradient(135deg, rgba(255, 215, 0, 1) 0%, rgba(255, 216, 106, 0.9) 100%);
  border-color: rgba(255, 215, 0, 0.7);
}

#dict-fab:active {
  transform: translateY(0) scale(1);
  box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3), 0 0 15px rgba(255, 216, 106, 0.2);
}

.fab-icona {
  font-size: 1.3em;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
}

.fab-label {
  font-size: 0.95em;
  white-space: nowrap;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

/* Versione alternativa (non utilizzata, mantenuta per compatibilit√†) */
#dict-fab.alternative {
  bottom: 25.4rem;
  right: 5.2rem;
  padding: 10px 18px;
  background: rgba(20,20,40,0.90);
  border: 2px solid rgba(255,215,0,0.55);
  border-radius: 40px;
  color: #ffd86a;
  font-size: 1.15rem;
  font-family: "Cinzel", serif;
  letter-spacing: .4px;
  box-shadow: 0 0 14px rgba(255,215,0,0.55);
}

#dict-fab.alternative .fab-icona {
  font-size: 1.45rem;
}

#dict-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
  z-index: 999998;
}

#dict-overlay.active {
  opacity: 1;
  visibility: visible;
}

#dict-modal {
  position: fixed;
  top: 0;
  right: 0;
  width: var(--modal-width);
  height: 100vh;
  background: var(--dark-bg);
  backdrop-filter: blur(20px);
  border-left: 1px solid rgba(255,255,255,0.1);
  transform: translateX(100%);
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  z-index: 999999;
  box-shadow: -5px 0 30px rgba(0,0,0,0.3);
  border-top: 3px solid transparent;
  border-image: linear-gradient(90deg, transparent, var(--border-gold), transparent) 1;
}

#dict-modal::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--border-gold), transparent);
  z-index: 1;
}

#dict-modal::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,215,0,0.3), transparent);
  z-index: 1;
}

#dict-modal.open {
  transform: translateX(0);
  animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.dict-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.4rem 1.8rem;
  border-bottom: 1px solid rgba(255,215,0,0.2);
  background: linear-gradient(135deg, rgba(10,10,20,0.95) 0%, rgba(20,20,40,0.95) 100%);
  flex-shrink: 0;
}

.dict-header h2 {
  color: var(--primary-gold);
  font-family: 'Cinzel Decorative', cursive;
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,216,106,0.2);
  display: flex;
  align-items: center;
  gap: 10px;
}

.dict-header h2::before {
  content: 'üìñ';
  font-size: 1.2rem;
  opacity: 0.8;
}

#dict-close {
  background: rgba(255,215,0,0.9);
  border: none;
  color: #0a0a1a;
  font-size: 1.6rem;
  cursor: pointer;
  padding: 0;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  line-height: 1;
  font-weight: bold;
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.3), 0 2px 8px rgba(0,0,0,0.2);
}

#dict-close:hover {
  background: var(--primary-gold);
  transform: scale(1.15) rotate(90deg);
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.4), 0 4px 12px rgba(255,216,106,0.4);
  color: #000;
}

.dict-modal-body {
  padding: 1.8rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  flex: 1;
  overflow-y: auto;
  background-image: radial-gradient(circle at 10% 10%, rgba(255,215,0,0.02) 1px, transparent 1px), radial-gradient(circle at 90% 90%, rgba(0,204,255,0.02) 1px, transparent 1px);
  background-size: 40px 40px;
}

.dict-modal-body::-webkit-scrollbar {
  width: 8px;
}

.dict-modal-body::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.03);
  border-radius: 4px;
  margin: 4px 0;
}

.dict-modal-body::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, rgba(255,215,0,0.4), rgba(255,215,0,0.6));
  border-radius: 4px;
  border: 1px solid rgba(255,215,0,0.2);
}

.dict-modal-body::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, rgba(255,215,0,0.6), rgba(255,215,0,0.8));
  box-shadow: 0 0 8px rgba(255,215,0,0.3);
}

#dict-q {
  width: 100%;
  padding: 1rem 3rem 1rem 1.2rem;
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(20,20,40,0.9) 0%, rgba(25,25,45,0.9) 100%);
  color: var(--accent-red);
  font-size: 1rem;
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
  box-sizing: border-box;
}

#dict-q::placeholder {
  color: rgba(233, 238, 245, 0.5);
  font-style: italic;
  transition: opacity 0.3s ease;
}

#dict-q:focus {
  outline: none;
  border-color: rgba(255,215,0,0.8);
  box-shadow: 0 0 0 3px rgba(255,215,0,0.15), inset 0 2px 8px rgba(0,0,0,0.2);
  transform: translateY(-1px);
}

#dict-q:focus::placeholder {
  opacity: 0.3;
}

#dict-search,
#open-all {
  padding: 5px 20px;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  font-size: 0.95rem;
  letter-spacing: 0.3px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  position: relative;
  overflow: hidden;
}

#dict-search {
  background: linear-gradient(135deg, var(--accent-blue) 0%, #00b8eb 100%);
  color: #0a0a1a;
  box-shadow: 0 6px 15px rgba(0,204,255,0.3), 0 0 20px rgba(0,204,255,0.2);
  border: 1px solid rgba(0,204,255,0.4);
}

#dict-search:hover {
  background: linear-gradient(135deg, #00b8eb 0%, #00a0d4 100%);
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 10px 25px rgba(0,204,255,0.4), 0 0 30px rgba(0,204,255,0.3);
}

#open-all {
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.9) 0%, rgba(255, 216, 106, 0.8) 100%);
  color: #0a0a1a;
  box-shadow: 0 6px 15px rgba(255, 215, 0, 0.3), 0 0 20px rgba(255, 216, 106, 0.2);
  border: 1px solid rgba(255, 215, 0, 0.4);
}

#open-all:hover {
  background: linear-gradient(135deg, rgba(255, 215, 0, 1) 0%, rgba(255, 216, 106, 0.9) 100%);
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 10px 25px rgba(255, 215, 0, 0.4), 0 0 30px rgba(255, 216, 106, 0.3);
}

.dict-suggestions {
  margin: 10px 0;
  max-height: 200px;
  overflow-y: auto;
  border-radius: 12px;
  border: 1px solid rgba(255,215,0,0.2);
  background: linear-gradient(135deg, rgba(20,20,40,0.9) 0%, rgba(25,25,45,0.9) 100%);
}

.suggestion-item {
  padding: 12px 15px;
  cursor: pointer;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  color: var(--text-light);
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  transition: all 0.2s ease;
}

.suggestion-item:hover {
  background: rgba(255,215,0,0.1);
  color: var(--primary-gold);
  padding-left: 20px;
}

.suggestion-item:last-child {
  border-bottom: none;
}

.sources {
  margin: 20px 0;
  padding: 15px;
  background: linear-gradient(135deg, rgba(20,20,40,0.7) 0%, rgba(25,25,45,0.7) 100%);
  border-radius: 12px;
  border: 1px solid rgba(255,215,0,0.2);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.sources label {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  color: var(--text-light);
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  padding: 10px;
  border-radius: 8px;
  transition: all 0.3s ease;
  background: rgba(255,255,255,0.05);
}

.sources label:hover {
  background: rgba(255,215,0,0.1);
  transform: translateX(5px);
}

.sources input[type="checkbox"] {
  accent-color: var(--primary-gold);
  width: 18px;
  height: 18px;
  cursor: pointer;
}

@keyframes modalSlideIn {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes modalSlideOut {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

/* ============================================================
   üí• ESPLOSIONE ULTIMATE
   ============================================================ */

.exploding-text {
  position: relative;
  cursor: pointer;
  user-select: none;
  padding: 0.4rem 1rem;
  font-weight: 700;
  border-radius: 15px;
  background: linear-gradient(145deg, rgba(255, 215, 0, 0.1), rgba(0, 204, 255, 0.05), rgba(185, 103, 255, 0.08));
  border: 1px solid rgba(255, 215, 0, 0.3);
  color: #3DDC84;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  display: inline-block;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.exploding-text:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border-color: rgba(255, 215, 0, 0.5);
}

.exploding-text:active {
  transform: translateY(0);
  transition-duration: 0.1s;
}

.exploding-text .m-text {
  display: inline-block;
  position: relative;
}

.exploding-text.boom-active .m-text {
  transform: scale(1.5);
  opacity: 0;
  transition: all 0.5s ease;
}

.exploding-text.boom-active .char {
  --dx: calc((var(--index) - 7) * 220px + (Math.random() * 80 - 40));
  --dy: calc((Math.random() * 200 - 250) * 1px);
  --dz: calc(Math.random() * 200 - 100px);
  --rx: calc(Math.random() * 720 - 360deg);
  --ry: calc(Math.random() * 720 - 360deg);
  --rz: calc(Math.random() * 720 - 360deg);
  --scale: calc(0.3 + Math.random() * 0.7);
  --blur: calc(2px + Math.random() * 4px);
  --glow: calc(10px + Math.random() * 20px);
  
  transform: translate3d(var(--dx), var(--dy), var(--dz)) rotateX(var(--rx)) rotateY(var(--ry)) rotateZ(var(--rz)) scale(var(--scale));
  opacity: 0;
  filter: blur(var(--blur)) drop-shadow(0 0 var(--glow) rgba(255, 215, 0, 0.8));
}

.exploding-text.boom-recomposing .char {
  animation: spectacularRecompose 1.8s cubic-bezier(0.2, 1.2, 0.1, 1) both;
  animation-delay: calc(var(--index) * 0.08s);
}

@keyframes spectacularRecompose {
  0% { transform: translate3d(var(--dx, 0), var(--dy, -100px), var(--dz, 0)) rotateX(var(--rx, 180deg)) rotateY(var(--ry, 180deg)) rotateZ(var(--rz, 180deg)) scale(0.1); opacity: 0; filter: blur(8px) drop-shadow(0 0 30px rgba(255, 215, 0, 0.8)); }
  20% { opacity: 1; filter: blur(4px) drop-shadow(0 0 40px rgba(0, 204, 255, 0.9)); transform: translate3d(calc(var(--dx, 0) * 0.3), calc(var(--dy, -100px) * 0.2), calc(var(--dz, 0) * 0.3)) rotateX(calc(var(--rx, 180deg) * 0.2)) rotateY(calc(var(--ry, 180deg) * 0.2)) rotateZ(calc(var(--rz, 180deg) * 0.2)) scale(1.3); }
  40% { transform: translate3d(calc(var(--dx, 0) * 0.1), calc(var(--dy, -100px) * 0.05), calc(var(--dz, 0) * 0.1)) rotateX(calc(var(--rx, 180deg) * 0.05)) rotateY(calc(var(--ry, 180deg) * 0.05)) rotateZ(calc(var(--rz, 180deg) * 0.05)) scale(1.1); filter: blur(2px) drop-shadow(0 0 25px rgba(185, 103, 255, 0.8)); }
  60% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0) rotateZ(0) scale(1.05); filter: blur(1px) drop-shadow(0 0 15px rgba(255, 215, 0, 0.6)); }
  80% { transform: scale(0.98); filter: blur(0) drop-shadow(0 0 8px rgba(0, 204, 255, 0.4)); }
  100% { transform: scale(1); opacity: 1; filter: blur(0) drop-shadow(0 0 0 transparent); }
}

.explosion-shockwave {
  position: fixed;
  left: var(--x);
  top: var(--y);
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 215, 0, 0.8) 20%, rgba(0, 204, 255, 0.6) 40%, rgba(185, 103, 255, 0.4) 60%, transparent 80%);
  mix-blend-mode: screen;
  pointer-events: none;
  z-index: 2147483602;
  animation: megaShockwave 1.5s cubic-bezier(0.2, 0.8, 0.1, 1) forwards;
}

@keyframes megaShockwave {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(150); opacity: 0; }
}

.explosion-particles {
  position: fixed;
  left: var(--x);
  top: var(--y);
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, #ffffff, var(--particle-color, #ffd700));
  pointer-events: none;
  z-index: 2147483603;
  animation: particleFly 2s ease-out forwards;
}

@keyframes particleFly {
  0% { transform: translate(0, 0) scale(1); opacity: 1; }
  100% { transform: translate(var(--p-dx, 200px), var(--p-dy, -200px)) scale(0); opacity: 0; }
}

/* ============================================================
   üå≥ ALBERO DELLA CONOSCENZA
   ============================================================ */

.welcome-decoration {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  text-align: center;
  z-index: 50;
}

.welcome-decoration.left {
  left: calc(50% - 450px);
  top: 40%;
}

.welcome-decoration.right {
  right: calc(50% - 540px);
  top: 45%;
}

.philosophy-tree {
  font-size: 0.8rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
}

.tree-container {
  position: relative;
  width: 120px;
  height: 180px;
  margin: 0 auto;
}

.tree-trunk {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 80px;
  background: linear-gradient(to right, #8B4513, #A0522D, #8B4513);
  border-radius: 4px;
}

.tree-branches {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 100px;
}

.branch {
  position: absolute;
  background: linear-gradient(to bottom, #8B4513, #A0522D);
  border-radius: 2px;
}

.branch-1 { width: 40px; height: 4px; top: 20px; left: 10px; transform: rotate(-30deg); }
.branch-2 { width: 35px; height: 4px; top: 40px; right: 15px; transform: rotate(25deg); }
.branch-3 { width: 30px; height: 3px; top: 60px; left: 5px; transform: rotate(-20deg); }
.branch-4 { width: 25px; height: 3px; top: 75px; right: 8px; transform: rotate(15deg); }

.tree-leaves {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.leaf {
  position: absolute;
  font-size: 1.2rem;
  opacity: 0.8;
  animation: leafGlow 3s ease-in-out infinite;
  text-shadow: 0 0 8px currentColor;
}

.leaf-1 { top: 15px; left: 20px; color: var(--gold); animation-delay: 0s; }
.leaf-2 { top: 25px; right: 25px; color: var(--cyan); animation-delay: 0.5s; }
.leaf-3 { top: 50px; left: 15px; color: var(--purple); animation-delay: 1s; }
.leaf-4 { top: 55px; right: 20px; color: var(--gold); animation-delay: 1.5s; }
.leaf-5 { top: 75px; left: 30px; color: var(--cyan); animation-delay: 2s; }
.leaf-6 { top: 80px; right: 15px; color: var(--purple); animation-delay: 2.5s; }

.tree-roots {
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 20px;
}

.root {
  position: absolute;
  background: linear-gradient(to bottom, #5D4037, #6D4C41);
  border-radius: 1px;
  bottom: 0;
}

.root-1 { width: 15px; height: 8px; left: 10px; transform: rotate(-20deg); }
.root-2 { width: 12px; height: 6px; left: 50%; transform: translateX(-50%); }
.root-3 { width: 14px; height: 7px; right: 10px; transform: rotate(20deg); }

.decoration-caption {
  margin-top: 1rem;
  font-family: 'Cormorant Garamond', serif;
  font-style: italic;
  font-size: 1.2rem;
  opacity: 0.9;
  background: linear-gradient(90deg, #FFD700, #FFE8A3, #FFD700);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
  font-weight: 700;
}

@keyframes leafGlow {
  0%, 100% { opacity: 0.6; transform: scale(1); text-shadow: 0 0 5px currentColor; }
  50% { opacity: 1; transform: scale(1.1); text-shadow: 0 0 15px currentColor; }
}

.philosophy-tree:hover .leaf {
  animation-duration: 1.5s;
}

.philosophy-tree:hover .tree-trunk {
  background: linear-gradient(to right, #A0522D, #CD853F, #A0522D);
}

.heraclitus-clock {
  font-size: 0.8rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
}

.clock-face {
  position: relative;
  width: 120px;
  height: 120px;
  margin: 0 auto;
  background: radial-gradient(circle, rgba(10,10,30,0.9) 0%, rgba(20,20,50,0.8) 70%);
  border: 3px solid var(--gold);
  border-radius: 50%;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), inset 0 0 20px rgba(0, 204, 255, 0.2);
}

.clock-hand {
  position: absolute;
  background: linear-gradient(to top, var(--cyan), var(--purple));
  border-radius: 2px;
  transform-origin: bottom center;
  left: 50%;
  bottom: 50%;
}

.clock-hand.hours {
  width: 4px;
  height: 35px;
  transform: translateX(-50%) rotate(45deg);
  box-shadow: 0 0 8px var(--cyan);
  animation: hourHand 12s linear infinite;
}

.clock-hand.minutes {
  width: 2px;
  height: 50px;
  transform: translateX(-50%) rotate(180deg);
  box-shadow: 0 0 6px var(--purple);
  animation: minuteHand 8s linear infinite;
}

.river-flow {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent 0%, var(--cyan) 20%, var(--purple) 50%, var(--cyan) 80%, transparent 100%);
  animation: riverFlow 3s linear infinite;
  box-shadow: 0 0 10px var(--cyan);
}

.clock-face::before {
  content: '';
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 6px;
  background: var(--gold);
  border-radius: 50%;
  box-shadow: 0 0 8px var(--gold);
}

.clock-face::after {
  content: '';
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 6px;
  background: var(--gold);
  border-radius: 50%;
  box-shadow: 0 0 8px var(--gold);
}

@keyframes riverFlow {
  0% { transform: translateX(-100%); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateX(100%); opacity: 0; }
}

@keyframes hourHand {
  from { transform: translateX(-50%) rotate(45deg); }
  to { transform: translateX(-50%) rotate(405deg); }
}

@keyframes minuteHand {
  from { transform: translateX(-50%) rotate(180deg); }
  to { transform: translateX(-50%) rotate(540deg); }
}

.heraclitus-clock:hover .river-flow {
  animation-duration: 1.5s;
  background: linear-gradient(90deg, transparent 0%, #00ff88 20%, var(--cyan) 50%, #00ff88 80%, transparent 100%);
}

.heraclitus-clock:hover .clock-hand {
  animation-duration: 4s;
}

/* ============================================================
   üöÄ CTA SECTION
   ============================================================ */

.cta-section {
  margin: 4rem auto;
  max-width: 800px;
  padding: 0 1rem;
}

.cta-card {
  background: linear-gradient(145deg, rgba(10,10,30,0.9), rgba(20,20,50,0.8));
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 15px;
  padding: 2.5rem;
  text-align: center;
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.cta-card h3 {
  color: var(--gold);
  font-family: 'Cinzel', serif;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.cta-card p {
  color: var(--text-light);
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 0;
}

.cta-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1.5rem;
}

.cta-btn {
  padding: 0.8rem 1.5rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
  border: none;
  cursor: pointer;
  font-size: 0.95rem;
}

.cta-btn.primary {
  background: var(--gold);
  color: #0a0a1a;
}

.cta-btn.secondary {
  background: transparent;
  border: 2px solid var(--gold);
  color: var(--gold);
}

.cta-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255,215,0,0.3);
}

.cta-note {
  margin-top: 1rem;
  opacity: 0.7;
  font-size: 0.9rem;
  color: var(--text-accent);
}

.floating-cta {
  position: fixed;
  bottom: 50px;
  right: 355px;
  z-index: 10000;
  animation: floatBounce 3s ease-in-out infinite;
}

.floating-cta button {
  background: linear-gradient(135deg, var(--gold), #ffeb3b);
  border: none;
  border-radius: 25px;
  padding: 12px 20px;
  color: #0a0a1a;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
  transition: all 0.3s ease;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.9rem;
  white-space: nowrap;
}

.floating-cta button:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
}

@keyframes floatBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* ============================================================
   üìù MODALE NEWSLETTER
   ============================================================ */

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(10, 10, 30, 0.95);
  z-index: 10001;
  display: none;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(5px);
  animation: fadeIn 0.3s ease;
}

.modal-content {
  background: var(--menu-bg);
  padding: 2.5rem 2rem 2rem;
  border-radius: 15px;
  border: 1px solid var(--menu-border);
  max-width: 450px;
  width: 90%;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
  position: relative;
  animation: slideUp 0.3s ease;
}

.modal-content h3 {
  color: var(--gold);
  font-family: 'Cinzel', serif;
  margin-bottom: 1rem;
  text-align: center;
  font-size: 1.4rem;
}

.modal-content p {
  color: var(--text-light);
  text-align: center;
  margin-bottom: 1.5rem;
  line-height: 1.5;
}

.close-modal {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 1.8rem;
  cursor: pointer;
  color: var(--text-light);
  background: none;
  border: none;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
}

.close-modal:hover {
  color: var(--gold);
  background: rgba(255,215,0,0.1);
  transform: scale(1.1);
}

#newsletterForm {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

#newsletterForm input[type="email"] {
  width: 100%;
  padding: 0.9rem;
  border: 1px solid var(--menu-border);
  border-radius: 8px;
  background: rgba(20, 20, 40, 0.8);
  color: var(--text-light);
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

#newsletterForm input[type="email"]:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(255,215,0,0.2);
}

#newsletterForm input[type="email"]::placeholder {
  color: rgba(233, 238, 245, 0.6);
}

#newsletterForm button[type="submit"] {
  background: var(--gold);
  color: #0a0a1a;
  border: none;
  padding: 0.9rem 1.5rem;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

#newsletterForm button[type="submit"]:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255,215,0,0.3);
}

.privacy-note {
  margin-top: 1rem;
  opacity: 0.7;
  font-size: 0.8rem;
  text-align: center;
  color: var(--text-accent);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ============================================================
   üîô PULSANTE TORNA SU
   ============================================================ */

.back-to-top.floating {
  position: fixed;
  bottom: 20px;
  left: 155px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), #ffeb3b);
  border: 2px solid rgba(255, 215, 0, 0.3);
  color: #0a0a1a;
  font-size: 1.5rem;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4), 0 0 0 2px rgba(10, 10, 30, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(10px);
  animation: float-gentle 3s ease-in-out infinite;
}

@keyframes float-gentle {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-5px); }
}

.back-to-top.floating:hover {
  transform: translateY(-3px) scale(1.1);
  box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6), 0 0 0 2px rgba(255, 215, 0, 0.2);
  background: linear-gradient(135deg, #ffeb3b, var(--gold));
  animation: none;
}

.back-to-top.floating:active {
  transform: translateY(-1px) scale(1.05);
}

.back-to-top.floating.glow {
  background: radial-gradient(circle at 30% 30%, #ffeb3b, var(--gold));
  box-shadow: 0 4px 20px rgba(255, 215, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.back-to-top.floating.glass {
  background: rgba(212, 175, 55, 0.15);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 215, 0, 0.4);
  color: var(--gold);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.back-to-top.floating.glass:hover {
  background: rgba(212, 175, 55, 0.25);
  color: #0a0a1a;
}

.back-to-top.floating.above-small-cta { bottom: 90px; }
.back-to-top.floating.above-large-cta { bottom: 120px; }
.back-to-top.floating.above-xl-cta { bottom: 150px; }

/* ============================================================
   üß© PANEL / CARD / WIDGET (generici)
   ============================================================ */

.panel,
.card,
.widget,
.result-panel,
.search-panel,
.glass-panel {
  border: 1px solid color-mix(in oklab, var(--accent) 60%, #000 40%);
  box-shadow: 0 12px 35px -12px var(--accent-glow);
  border-radius: 16px;
}

.panel .panel-title,
.card .card-title,
.widget .widget-title {
  color: var(--accent);
}

/* ============================================================
   üçî MOBILE MENU
   ============================================================ */

.mobile-menu-btn {
  display: none;
  position: fixed;
  top: .75rem;
  right: .75rem;
  width: 42px;
  height: 42px;
  background: rgba(20,20,40,.85);
  border: 1px solid var(--menu-border);
  border-radius: 10px;
  z-index: 2200;
  cursor: pointer;
}

.mobile-menu-btn span {
  display: block;
  height: 2px;
  width: 22px;
  margin: 5px auto;
  background: var(--accent-5);
  transition: .3s;
}

.mobile-menu-btn.open span:nth-child(1) { transform: rotate(45deg) translate(5px,5px); }
.mobile-menu-btn.open span:nth-child(2) { opacity: 0; }
.mobile-menu-btn.open span:nth-child(3) { transform: rotate(-45deg) translate(5px,-5px); }

.mobile-menu {
  position: fixed;
  inset: 0;
  background: rgba(10,10,30,.96);
  backdrop-filter: blur(12px);
  z-index: 2100;
  transform: translateX(100%);
  transition: transform .35s ease;
  padding: 4.5rem 1.5rem 1.5rem;
}

.mobile-menu.open {
  transform: translateX(0);
}

.mobile-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.mobile-menu li {
  margin-bottom: .6rem;
}

.mobile-menu a,
.mobile-menu button.sub-toggle {
  display: block;
  width: 100%;
  background: none;
  border: none;
  text-align: left;
  font-family: 'Cinzel', serif;
  font-size: 1.15rem;
  color: var(--accent-5);
  padding: .55rem .3rem;
  cursor: pointer;
}

.mobile-menu .sub {
  display: none;
  padding-left: 1rem;
  margin-top: .25rem;
}

.mobile-menu .sub a {
  font-family: 'Montserrat', sans-serif;
  font-size: .95rem;
  color: var(--text-accent);
}

.mobile-menu a.active {
  color: var(--accent);
  font-weight: 700;
  text-shadow: 0 0 8px color-mix(in srgb, var(--accent) 50%, transparent);
}

/* ============================================================
   üì± RESPONSIVE DESIGN
   ============================================================ */

/* Breakpoint: 1200px */
@media (min-width: 1200px) {
  main {
    padding-left: 16rem;
    padding-right: 22rem;
  }
  .right-embed {
    top: 42.5rem;
  }
}

/* Breakpoint: 1100px */
@media (max-width: 1100px) {
  .mega-menu {
    grid-template-columns: repeat(2, 1fr);
    width: 50rem;
  }
}

/* Breakpoint: 1024px */
@media (max-width: 1024px) {
  .welcome-decoration.left {
    left: calc(50% - 250px);
    transform: translateY(-50%) scale(0.9);
  }
  .welcome-decoration.right {
    right: calc(50% - 250px);
    transform: translateY(-50%) scale(0.9);
  }
}

/* Breakpoint: 980px */
@media (max-width: 980px) {
  #dict-compact,
  #iep-linkbox {
    position: static;
    width: 100%;
    margin: .75rem 0;
  }
}

/* Breakpoint: 61.25rem (~980px) */
@media (max-width: 61.25rem) {
  .footer-columns {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  .mega-menu {
    grid-template-columns: repeat(2, 1fr);
  }
  .search-container input {
    width: 12rem;
  }
  .welcome-title {
    font-size: 2.3rem;
  }
  .timeline::after {
    left: 31px;
  }
  .timeline-item {
    width: 100%;
    padding-left: 70px;
    padding-right: 25px;
  }
  .timeline-item:nth-child(even) {
    left: 0;
  }
  .timeline-item:nth-child(odd)::after,
  .timeline-item:nth-child(even)::after {
    left: 21px;
  }
}

/* Breakpoint: 900px */
@media (max-width: 900px) {
  :root {
    --search-panel-w: 100vw;
    --search-panel-maxh: 82vh;
  }
  #search-panel,
  #searchPanel,
  .search-panel,
  .results-panel {
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    border-radius: 10px;
  }
  #audio-player {
    width: 100%;
    max-width: 520px;
  }
  #quote-runner {
    bottom: 160px;
  }
  #quote-runner .quote-bubble .quote-text {
    font-size: 1rem;
  }
  
  .timeline::before,
  .timeline::after {
    left: 30px;
  }
  .timeline-item {
    width: auto;
    margin: 3rem 0;
  }
  .timeline-item.left,
  .timeline-item.right {
    padding-left: 70px;
    padding-right: 20px;
    text-align: left;
    margin-left: 0;
    margin-right: 0;
  }
  .timeline-item.visible.left,
  .timeline-item.visible.right {
    animation: mobileSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
  .tl-connector {
    left: 38px;
    right: auto;
    width: calc(100% - 70px);
  }
  .timeline-title {
    font-size: 2.5rem;
  }
  .timeline > .timeline-item {
    width: 100% !important;
    margin-left: 0 !important;
    text-align: left;
  }
  .timeline > .timeline-item.left {
    padding-right: 20px;
    padding-left: 70px;
  }
  .timeline > .timeline-item.right {
    padding-left: 70px;
  }
  
  .cc-banner {
    left: .75rem;
    right: .75rem;
    transform: none;
    width: auto;
  }
  
  #site-search {
    padding-right: 3.8rem;
  }
}

/* Breakpoint: 768px */
@media (max-width: 768px) {
  html, body {
    overflow-x: hidden !important;
    max-width: 100% !important;
  }
  body {
    font-size: 16px;
  }
  
  /* Menu */
  nav.menu-desktop,
  .mega-menu {
    display: none !important;
  }
  
  .mobile-menu-btn {
    display: block;
  }
  
  /* Top bar */
  .top-bar {
    position: sticky !important;
    flex-wrap: wrap;
    justify-content: center;
    gap: .5rem;
    padding: .5rem;
  }
  .brand {
    margin-left: 0 !important;
    justify-content: center;
  }
  .bar-right {
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  /* Search */
  .search-container input,
  #site-search {
    width: 100% !important;
    max-width: 100% !important;
  }
  .translate-box {
    justify-content: center;
  }
  
  /* Typography */
  .typing-effect {
    font-size: 1.1rem;
    min-width: 40ch;
    white-space: normal;
  }
  .welcome-title {
    font-size: 2.5rem;
  }
  .welcome-subtitle {
    font-size: 1.2rem;
  }
  
  .accordion-subtitle {
    font-size: .95rem;
    padding: .4rem .8rem;
  }
  .typing-effect {
    min-width: 0 !important;
    white-space: normal !important;
    font-size: 1rem !important;
  }
  
  /* Menu items */
  .menu-btn,
  .ctrl-btn {
    min-width: 44px;
    min-height: 44px;
  }
  
  /* Timeline */
  .timeline::before {
    left: 30px;
  }
  .timeline-item {
    width: calc(100% - 70px);
    margin: var(--space-lg) 0;
    margin-left: 70px;
  }
  .timeline-item.left,
  .timeline-item.right {
    left: 0;
    padding: 0 0 0 var(--space-sm);
    text-align: left;
  }
  .timeline-item.left::before,
  .timeline-item.right::before {
    left: -40px;
    right: auto;
  }
  .timeline-item.left::after,
  .timeline-item.right::after {
    left: -30px;
    right: auto;
    width: 30px;
    transform-origin: left center;
    background: linear-gradient(90deg, var(--gold), var(--cyan), var(--purple));
  }
  .timeline-item.left::after,
  .timeline-item.right::after {
    width: 30px;
    left: 40px;
  }
  .timeline-content {
    padding: 15px;
    margin: 10px 5px;
  }
  
  /* Fixed elements */
  .slider-vertical,
  .slider-controls,
  .audio-player,
  .articles-blob,
  .right-embed,
  #russell-box,
  #russell-hint,
  #effects-ctrl {
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 1rem 0 !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    transform: none !important;
    z-index: auto !important;
  }
  #russell-box {
    font-size: .95rem;
  }
  
  /* Decorative elements */
  .floating-quotes,
  .cosmic-particle,
  #lightning,
  #bolt,
  .textShimmer,
  .shakeSoft {
    display: none !important;
  }
  
  /* Main */
  main {
    margin-top: 6.5rem;
    padding: .75rem;
  }
  section,
  .welcome-section {
    padding-left: .5rem;
    padding-right: .5rem;
  }
  
  /* Footer */
  .footer-columns {
    grid-template-columns: 1fr !important;
    text-align: center;
  }
  .footer-legal {
    justify-content: center;
  }
  
  /* Cookie */
  .cc-banner {
    left: .75rem !important;
    right: .75rem !important;
    transform: none !important;
    width: auto !important;
  }
  
  /* Search panel */
  #search-panel,
  .search-panel {
    width: 100vw !important;
    left: 0 !important;
    transform: none !important;
    border-radius: 10px;
  }
  
  /* Disable heavy effects */
  .glass,
  .card-bg,
  .menu-container,
  .top-bar,
  .mobile-menu {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  * {
    box-shadow: none !important;
  }
  
  /* Welcome decoration */
  .welcome-decoration.left {
    left: calc(50% - 200px);
    transform: translateY(-50%) scale(0.7);
  }
  .welcome-decoration.right {
    right: calc(50% - 200px);
    transform: translateY(-50%) scale(0.7);
  }
  .tree-container {
    width: 80px;
    height: 120px;
  }
  .decoration-caption {
    font-size: 0.7rem;
  }
  
  /* CTA */
  .cta-section {
    margin: 3rem auto;
    padding: 0 0.5rem;
  }
  .cta-card {
    padding: 2rem 1.5rem;
  }
  .cta-card h3 {
    font-size: 1.3rem;
  }
  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }
  .cta-btn {
    width: 100%;
    max-width: 250px;
  }
  .floating-cta {
    bottom: 50px;
    right: 15px;
    left: auto;
  }
  .floating-cta button {
    padding: 10px 16px;
    font-size: 0.8rem;
  }
  
  /* Modal */
  .modal-content {
    padding: 2rem 1.5rem 1.5rem;
    margin: 1rem;
  }
  .modal-content h3 {
    font-size: 1.2rem;
  }
  
  /* Back to top */
  .back-to-top.floating {
    bottom: 80px;
    left: 20px;
    width: 45px;
    height: 45px;
    font-size: 1.3rem;
    animation: float-gentle-mobile 4s ease-in-out infinite;
  }
  .back-to-top.floating.above-small-cta { bottom: 70px; }
  .back-to-top.floating.above-large-cta { bottom: 100px; }
  
  @keyframes float-gentle-mobile {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-3px); }
  }
  
  /* Explosion */
  .exploding-text {
    padding: 0.8rem 1rem;
    font-size: 1.1rem;
  }
  .exploding-text.boom-active .char {
    --dx: calc((var(--index) - 7) * 60px + (Math.random() * 40 - 20));
    --dy: calc((Math.random() * 150 - 180) * 1px);
  }
  
  /* Cookie FAB */
  .cc-fab {
    bottom: 1rem;
    left: 1rem;
    padding: 0.75rem;
    border-radius: 50%;
  }
  .cc-fab-label {
    display: none;
  }
  #cookie-banner.open ~ .cc-fab {
    display: none;
  }
  
  /* Dictionary */
  #dict-modal {
    width: 100vw;
    border-left: none;
  }
  .dict-header {
    padding: 1.2rem 1.4rem;
  }
  .dict-header h2 {
    font-size: 1.2rem;
  }
  .dict-modal-body {
    padding: 1.4rem;
    gap: 1.2rem;
  }
  #dict-fab {
    bottom: 120px;
    right: 15px;
    padding: 10px 16px;
    font-size: 0.9rem;
  }
  .fab-label {
    display: none;
  }
  
  /* Mega menu mobile */
  nav.menu-desktop .mega-menu {
    left: 0 !important;
    right: 0 !important;
    transform: translateY(0.62rem) !important;
    width: 100vw !important;
    max-width: 100vw !important;
  }
  
  #lista-articoli {
    scroll-margin-top: 140px;
  }
  
  .cosmic-particle,
  #lightning,
  #bolt,
  .textShimmer,
  .shakeSoft {
    display: none !important;
  }
}

/* Breakpoint: 680px */
@media (max-width: 680px) {
  #cookie-fab {
    height: 44px;
    gap: .40rem;
    padding: 0 .75rem 0 .60rem;
    font-size: .95rem;
  }
}

/* Breakpoint: 600px */
@media (max-width: 600px) {
  .timeline::after {
    left: 30px;
  }
  .timeline-item {
    width: 100%;
    padding-left: 70px;
    padding-right: 25px;
  }
  .timeline-item:nth-child(even) {
    left: 0;
  }
  .timeline-item:nth-child(odd)::after,
  .timeline-item:nth-child(even)::after {
    left: 21px;
  }
  .welcome-decoration.left {
    left: 20px;
    transform: translateY(-50%) scale(0.6);
  }
  .welcome-decoration.right {
    right: 20px;
    transform: translateY(-50%) scale(0.6);
  }
  #quote-runner {
    bottom: 160px;
  }
  #quote-runner .quote-bubble .quote-text {
    font-size: 1rem;
  }
}

/* Breakpoint: 37.5rem (~600px) */
@media (max-width: 37.5rem) {
  .top-bar {
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
  }
  .bar-right {
    flex-wrap: wrap;
    justify-content: center;
  }
  .search-container input {
    width: 100%;
    max-width: 100%;
  }
  .menu-container {
    overflow-x: auto;
  }
  nav.menu-desktop ul {
    flex-wrap: nowrap;
    justify-content: flex-start;
  }
  .floating-quotes {
    display: none;
  }
}

/* Breakpoint: 480px */
@media (max-width: 480px) {
  .welcome-decoration.left,
  .welcome-decoration.right {
    display: none;
  }
  
  .cta-card {
    padding: 1.5rem 1rem;
  }
  .cta-card h3 {
    font-size: 1.2rem;
  }
  .cta-card p {
    font-size: 1rem;
  }
  .floating-cta {
    bottom: 50px;
    right: 10px;
    left: auto;
  }
  .floating-cta button {
    padding: 8px 14px;
    font-size: 0.75rem;
  }
  
  #dict-fab {
    bottom: 100px;
    padding: 10px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    justify-content: center;
  }
  .fab-icona {
    font-size: 1.5em;
    margin: 0;
  }
  .dict-modal-body {
    padding: 1rem;
  }
  #dict-search,
  #open-all {
    width: 100%;
    margin-bottom: 10px;
  }
}

/* ============================================================
   ‚ôø ACCESSIBILIT√Ä
   ============================================================ */

#dict-fab:focus-visible,
#dict-close:focus-visible,
#dict-search:focus-visible,
#open-all:focus-visible,
#dict-q:focus-visible {
  outline: 2px solid var(--accent-blue);
  outline-offset: 2px;
}

#lista-articoli {
  scroll-margin-top: 120px;
}

@media (max-width: 768px) {
  #lista-articoli {
    scroll-margin-top: 140px;
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
  
  .star,
  .shooting-star {
    animation: none !important;
    opacity: 0.5;
  }
  
  .comet {
    animation: none !important;
    opacity: 0;
  }
  
  .floating-cta {
    animation: none;
  }
  
  .back-to-top.floating {
    animation: none;
  }
  
  .cc-fab {
    animation: none;
  }
  
  #search-panel,
  #searchPanel,
  .search-panel,
  .results-panel {
    transition: none !important;
  }
  
  #search-backdrop {
    transition: none !important;
  }
  
  #search-results > *,
  .search-results > *,
  #searchResults > * {
    animation: none !important;
    opacity: 1;
    transform: none;
  }
  
  #dict-fab,
  #dict-modal,
  #dict-close,
  #dict-search,
  #open-all,
  .sources label,
  .suggestion-item,
  #dict-q,
  #dict-overlay {
    transition: none !important;
    animation: none !important;
  }
  
  #dict-fab:hover,
  #dict-search:hover,
  #open-all:hover,
  .sources label:hover,
  .suggestion-item:hover,
  #dict-close:hover {
    transform: none !important;
  }
  
  #russell-box {
    transition: box-shadow 220ms ease, background-color 220ms ease, filter 220ms ease;
  }
  #russell-box.ping {
    transform: none;
  }
  
  .timeline-item,
  .timeline-content,
  .tl-dot,
  .tl-connector,
  .timeline-item::before,
  .timeline-item::after {
    transition: none !important;
    animation: none !important;
    transform: none !important;
    opacity: 1 !important;
    filter: none !important;
  }
  .timeline::after {
    animation: none;
  }
  
  .fx-layer {
    display: none !important;
  }
  .char {
    transition: none !important;
  }
  .welcome-title-themable {
    animation: none !important;
    text-shadow: none !important;
  }
}

/* ============================================================
   üìÑ NO-JS FALLBACK
   ============================================================ */

.no-js .timeline .timeline-item {
  opacity: 1 !important;
  transform: none !important;
  transition: none !important;
}

/* ============================================================
   üß™ UTILITY E CORREZIONI
   ============================================================ */

/* Fix per la timeline */
.timeline > .timeline-item.right[style] {
  left: auto !important;
}

/* Fix per il menu su mobile */
@media (max-width: 768px) {
  nav.menu-desktop li.dropdown:hover > .mega-menu,
  nav.menu-desktop li.dropdown:focus-within > .mega-menu,
  nav.menu-desktop .mega-menu:hover {
    transform: translateY(0) !important;
  }
}

/* Fix per gli effetti */
.fx-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1300;
}

.fx-flash {
  background: radial-gradient(circle at center, #fff, rgba(255,255,255,.3) 40%, transparent 60%);
  mix-blend-mode: screen;
  opacity: 0;
  transition: opacity .25s ease;
  width: 100%;
  height: 100%;
}

.fx-shock {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 10vmin;
  height: 10vmin;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,.9);
  opacity: 0;
  transform: translate(-50%,-50%) scale(.25);
  filter: drop-shadow(0 0 12px rgba(255,255,255,.85));
  mix-blend-mode: screen;
}

.fx-smoke {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 60vmin;
  height: 60vmin;
  border-radius: 50%;
  background: radial-gradient(closest-side, rgba(180,200,255,.18), rgba(0,0,0,0));
  transform: translate(-50%,-50%) scale(.4);
  opacity: 0;
  filter: blur(2px);
}

.fx-embers {
  position: absolute;
  inset: 0;
}

#exploding.preglow .m-text {
  text-shadow: 0 0 18px rgba(0,220,255,.75), 0 0 32px rgba(0,180,255,.55);
}

.motto {
  display: inline-block;
  white-space: nowrap;
  contain: inline-size;
  line-height: 1;
  --motto-ch: 26;
  min-width: calc(var(--motto-ch) * 1ch);
}

.motto .m-text {
  display: inline-block;
  white-space: nowrap;
  font-size-adjust: 0.52;
}

.motto .m-icon,
.motto .m-sep,
.motto .char {
  line-height: 1;
  vertical-align: baseline;
}

exploding-text {
  border: 1px solid rgba(255, 215, 0, 0.6) !important;
  box-shadow: 0 0 0 4px rgba(0, 204, 255, 0.3), inset 0 0 0 1px rgba(255, 215, 0, 0.4) !important;
  padding: 0.8rem 1rem !important;
  border-radius: 15px !important;
}
</style>
</head>
<body>

  <!-- === FAB Dizionario === -->
<button id="dict-fab" class="fab-with-text">
  <span class="fab-label">üìòDizionario</span>
  <span class="fab-icona"></span>
</button>

 <div hidden="True" id="search-backdrop"></div>
  <div class="search-panel" id="search-panel">
    <div class="search-header"><h3 class="search-title">Risultati</h3><button aria-label="Chiudi pannello" class="search-close" id="search-close" type="button">Chiudi</button></div>
    <div class="search-results results-scroll" id="search-results"><div class="sp-item" data-placeholder="true"><h4 class="result-title">Suggerimento</h4><p class="result-desc">Digita nel campo di ricerca in alto per vedere i risultati qui.</p></div></div></div>
<!-- UI PATCH BLOCKS -->
<div aria-label="Galleria autori" class="slider-vertical">
<div class="slider-inner" id="sliderInner">
<!-- PRIME 3 IMMAGINI: loading="eager" perch√© visibili subito -->
<div class="slide-vertical">
<img alt="Socrate" decoding="async" height="340" loading="eager" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/socrate.webp" width="260">
<p>Socrate</p>
</div>
<div class="slide-vertical">
<img alt="Platone" decoding="async" height="340" loading="eager" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/platone.webp" width="260">
<p>Platone</p>
</div>
<div class="slide-vertical">
<img alt="Aristotele" decoding="async" height="340" loading="eager" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/aristotele.webp" width="260">
<p>Aristotele</p>
</div>
<!-- TUTTE LE ALTRE: loading="lazy" -->
<div class="slide-vertical">
<img alt="Maria Teresa" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/mt.webp" width="260">
<p>üïØÔ∏èMaria Teresa: virt√π e bellezza in armonia‚úùÔ∏è</p>
</div>
<div class="slide-vertical">
<img alt="Livia" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/livia.webp" width="260">
<p>üëëü¶åLiviaü¶ÖDEA egiziaüî±</p>
</div>
  <div class="slide-vertical">
<img alt="Polpetta" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/polpetta.webp" width="260">
<p>üèπ Polpettaü¶∏: guerriera celtica</p>
</div>
<div class="slide-vertical">
<img alt="Cerbero" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/cerbero.webp" width="260">
<p>Cerbero - Guardiano dell'Ade</p>
</div>
<div class="slide-vertical">
<img alt="Nietzsche" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/nietzsche.webp" width="260">
<p>Nietzsche: sent√¨ i becchini seppellire Dio</p>
</div>
<div class="slide-vertical">
<img alt="Kant" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/kant.webp" width="260">
<p>Kant - il pi√π zoppo tra gli storpi del concetto</p>
</div>
   <div class="slide-vertical">
<img alt="Dante Alighieri" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/dante.webp" width="260">
<p>Dante ovvero la iena che poeta fra le tombe.</p>
</div>
  <div class="slide-vertical">
<img alt="Cartesio" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/cartesio.webp" width="260">
<p>Cartesio</p>
</div>
<div class="slide-vertical">
  <img alt="Zygmunt Bauman" decoding="async" height="340" loading="lazy"
       src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/bauman.webp" width="260">
  <p>Zygmunt Bauman</p>
</div>
<div class="slide-vertical">
  <img alt="Voltaire" decoding="async" height="340" loading="lazy"
       src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/voltaire.webp" width="260">
  <p>Voltaire</p>
</div>
<div class="slide-vertical">
  <img alt="Leszek Ko≈Çakowski" decoding="async" height="340" loading="lazy"
       src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/kolakowski.webp" width="260">
  <p>Leszek Ko≈Çakowski</p>
</div>

<div class="slide-vertical">
  <img alt="Tararski" decoding="async" height="340" loading="lazy"
       src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/tararski.webp" width="260">
  <p>Alfred Tararski</p>
</div>
<div class="slide-vertical">
<img alt="Gadamer" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/gadamer.webp" width="260">
<p>H.G.Gadamer</p>
</div>

<div class="slide-vertical">
<img alt="Ricoeur" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/ricoeur.webp" width="260">
<p>P. Ricoeur</p>
</div>
<div class="slide-vertical">
<img alt="Levinas" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/levinas.webp" width="260">
<p>E. L√©vinas</p>
</div>
<div class="slide-vertical">
<img alt="San Tommaso" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/tommaso.webp" width="260">
<p>San Tommaso</p>
</div>
<div class="slide-vertical">
<img alt="Dea" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/dea.webp" width="260">
<p>ìçùDivinit√† mesopotamica‚öØ</p>
</div>
<div class="slide-vertical">
<img alt="Gianni Vattimo" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/vattimo.webp" width="260">
<p>Gianni Vattimo</p>
</div>
<div class="slide-vertical">
<img alt="Testa di..." decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/krk.webp" width="260">
<p>Testa di ...</p>
</div>
<div class="slide-vertical">
<img alt="Democrito" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/democrito.webp" width="260">
<p>Democrito</p>
</div>
<div class="slide-vertical">
<img alt="Talete" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/talete.webp" width="260">
<p>Talete</p>
</div>
<div class="slide-vertical">
<img alt="Aristippo" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/aristippo.webp" width="260">
<p>Aristippo</p>
</div>
<div class="slide-vertical">
<img alt="Massimo Cacciari" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/cacciari.webp" width="260">
<p>Massimo Cacciari</p>
</div>
<div class="slide-vertical">
<img alt="Cicerone" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/cicerone.webp" width="260">
<p>Cicerone</p>
</div>

<div class="slide-vertical">
<img alt="Gilles Deleuze" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/deleuze.webp" width="260">
<p>Gilles Deleuze</p>
</div>
<div class="slide-vertical">
<img alt="Jacques Derrida" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/derrida.webp" width="260">
<p>Jacques Derrida</p>
</div>
<div class="slide-vertical">
<img alt="John Dewey" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/dewey.webp" width="260">
<p>John Dewey</p>
</div>
<div class="slide-vertical">
<img alt="Michel Foucault" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/foucault.webp" width="260">
<p>Michel Foucault</p>
</div>
<div class="slide-vertical">
<img alt="G.W.F. Hegel" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/hegel.webp" width="260">
<p>G.W.F. Hegel</p>
</div>
<div class="slide-vertical">
<img alt="Martin Heidegger" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/heidegger.webp" width="260">
<p>Martin Heidegger</p>
</div>
<div class="slide-vertical">
<img alt="Max Horkheimer" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/horkheimer.webp" width="260">
<p>Max Horkheimer</p>
</div>
<div class="slide-vertical">
<img alt="Edmund Husserl" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/husserl.webp" width="260">
<p>Edmund Husserl</p>
</div>
<div class="slide-vertical">
<img alt="Maurice Merleau-Ponty" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/ponty.webp" width="260">
<p>Maurice Merleau-Ponty</p>
</div>
<div class="slide-vertical">
<img alt="Charles S. Peirce" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/peirce.webp" width="260">
<p>Charles S. Peirce</p>
</div>
<div class="slide-vertical">
<img alt="Pirrone" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/pirrone.webp" width="260">
<p>Pirrone</p>
</div>
<div class="slide-vertical">
<img alt="Pitagora" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/pitagora.webp" width="260">
<p>Pitagora</p>
</div>
<div class="slide-vertical">
<img alt="Diotima" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/diotima.webp" width="260">
<p>Diotima di Mantinea</p>
</div>
<div class="slide-vertical">
<img alt="Ip√†zia" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/ipazia.webp" width="260">
<p>Ip√†zia di Alessandria</p>
</div>
<div class="slide-vertical">
<img alt="Bertrand Russell" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/russell.webp" width="260">
<p>Bertrand Russell</p>
</div>
<div class="slide-vertical">
<img alt="Emanuele Severino" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/severino.webp" width="260">
<p>Emanuele Severino</p>
</div>
<div class="slide-vertical">
<img alt="Michail Bulgakov" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/bulgakov.webp" width="260">
<p>Michail Bulgakov</p>
</div>
<div class="slide-vertical">
<img alt="F√´dor Dostoevskij" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/dostoyevsky.webp" width="260">
<p>F√´dor Dostoevskij</p>
</div>
<div class="slide-vertical">
<img alt="Umberto Galimberti" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/galimberti.webp" width="260">
<p>Umberto Galimberti</p>
</div>
<div class="slide-vertical">
<img alt="Max Weber" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/veber.webp" width="260">
<p>Max Weber</p>
</div>
<div class="slide-vertical">
<img alt="Lev ≈†estov" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/sestov.webp" width="260">
<p>Lev ≈†estov</p>
</div>
<div class="slide-vertical">
<img alt="F.W.J. Schelling" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/schelling.webp" width="260">
<p>F.W.J. Schelling</p>
</div>
<div class="slide-vertical">
<img alt="Ludwig Wittgenstein" decoding="async" height="340" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/wittgenstein.webp" width="260">
<p>Ludwig Wittgenstein</p>
</div>
</div>
</div>
<div class="slider-controls" id="slider-controls">
<button class="ctrl-btn" id="slider-toggle">‚èØÔ∏è Avvia / Ferma</button>
<button class="ctrl-btn" id="slider-invert">üîÑ Inverti</button>
<label class="speed-label" for="slider-speed"><span class="speed-label-text">Regola velocit√†</span><input id="slider-speed" max="12" min="1" type="range" value="8"/></label>
</div>
<div aria-label="Lettore audio" class="audio-player" id="audio-player">
<div class="audio-title">üéß Musica per lo studio</div>
<br/>
<div class="controls"><button aria-label="Riproduci/Pausa" id="playPause">‚ñ∂Ô∏è</button><span aria-live="polite" id="time">0:00 / 0:00</span><input id="volume" max="1" min="0" step="0.01" type="range" value="0.8"/></div>
<audio id="myAudio" playsinline="True" preload="auto" src="https://casi0048.github.io/suoni/Strauss.mp3"></audio>
</div>
<aside aria-label="Ultimi articoli" class="articles-blob">
<h3>üì∞ Ultimi articoli</h3>
<ul>
<li><a href="articoli/circolo_di_vienna.html">Circolo di Vienna</a></li>
<li><a href="articoli/ipazia.html">Ip√†zia di Alessandria</a></li>
<li><a href="articoli/platone_mito_caverna.html">Il Mito della Caverna di Platone</a></li>
<li><a href="articoli/parmenide1.html">Parmenide di Elea</a></li>
<li><a href="articoli/2nietzsche.html">Nietzsche</a></li>
<li><a href="articoli/battaglia_maratona.html">Battaglia di Maratona</a></li>
</ul>
</aside>


<!-- Enciclopedia filosofica (IEP tradotta) -->
<div class="right-box" id="iep-linkbox">

  <h3>üìö Enciclopedia filosofica IEP</h3>

  <a class="btn"
     href="https://iep-utm-edu.translate.goog/a/?_x_tr_sl=auto&_x_tr_tl=it&_x_tr_hl=uk&_x_tr_pto=wapp"
     target="_blank" rel="noopener">
    Apri versione tradotta
  </a>
<div class="mini">
      oppure <a href="https://iep.utm.edu/" target="_blank" rel="noopener">IEP originale</a>
  </div>
</div>

<div class="right-embed">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" src="https://www.youtube.com/embed/G_REgkOuQfw" title="Schopenhauer e Nietzsche (Hans-Georg Gadamer) - 3x4"></iframe>
</div>
<!-- ========================= -->


 <!-- === RUSSELL BOX ‚Äî HYPERNOVA V3 ULTRA === -->
<div id="russell-box" class="russell-box">

    <!-- WRAPPER per animazioni "transform" -->
    <div class="russell-inner">
        <button id="russell-btn">
            üéµ "La maggior parte degli uomini preferirebbe morire piuttosto che pensare,
            infatti √® quello che fanno."<br/>
            <strong>‚Äì Bertrand Russell</strong>
        </button>
    </div>
<div id="russell-flash"></div>
    <!-- Effetti -->
    <div class="shockwave"></div>
    <div class="shockwave second"></div>
    <div class="lightning-strike"></div>
    <div class="lightning-branch"></div>
    <div class="ripple"></div>

    <!-- Anelli -->
    <div class="russell-ring"></div>
    <div class="russell-ring"></div>

    <!-- Scintille -->
    <div id="spark-container"></div>

    <!-- Nebbia -->
    <div class="fog-layer"></div>
</div>

<div id="russell-hint">üî•Clicca il box per sentire chitarra üé∏</div>

<audio id="russell-audio" preload="auto" src="https://casi0048.github.io/suoni/gitarra.mp3"></audio>
<audio id="explosionSound" preload="auto" src="https://casi0048.github.io/suoni/explosion-1.mp3"></audio>

<!-- Audio sincronizzati -->
<audio id="russell-audio" playsinline preload="auto"
       src="https://casi0048.github.io/suoni/gitarra.mp3"></audio>

<audio id="thunder-sound" playsinline preload="auto">
    <source src="https://casi0048.github.io/suoni/thunder-sound.mp3" type="audio/mpeg">
</audio>

<audio id="explosionSound" playsinline preload="auto"
       src="https://casi0048.github.io/suoni/explosion-1.mp3"></audio>

<div aria-hidden="true" id="lightning"></div>
<div aria-hidden="true" id="bolt"></div>
<!-- Sfondo con particelle cosmiche -->
<div id="cosmic-bg"></div>
<div aria-hidden="true" class="stars-container" id="starsContainer"></div>
<!-- Top Bar -->
<div class="top-bar">
<a class="brand" href="/">
<svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24">
<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
<polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
<line x1="12" x2="12" y1="22.08" y2="12"></line>
</svg>
<span>Echi di Sofia</span>
</a>
<div aria-label="Cambia colore tema" class="welcome-switcher" style="display:inline-flex;gap:.4rem;align-items:center;">
    <button class="color-dot" data-variant="gold" type="button" aria-label="Tema oro">
      <span class="dot gold-dot"></span>
    </button>
    <button class="color-dot" data-variant="blue" type="button" aria-label="Tema blu">
      <span class="dot blue-dot"></span>
    </button>
    <button class="color-dot" data-variant="green" type="button" aria-label="Tema verde">
      <span class="dot green-dot"></span>
    </button>
    <button class="color-dot" data-variant="red" type="button" aria-label="Tema rosso">
      <span class="dot red-dot"></span>
    </button>
  </div>
<div style="position: relative;">
<button class="ctrl-btn" id="paradigma-btn" style="
            background: rgba(20, 20, 40, 0.78);
            border: 1px solid rgba(255, 215, 0, 0.25);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            margin-left: 260px;
            color: #ffd86a;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            white-space: nowrap;">
            üé≠ Maestri del Pensiero üß†<span style="font-size: 1.5em; color: #00ccff;">‚ñæ</span>
</button>
<!-- Overlay 4 Filosofi -->
<div id="filosofi-overlay" style="
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 10px;
            background: linear-gradient(to bottom, rgba(10, 10, 30, 0.95), rgba(10, 10, 30, 0.9));
            border-radius: 10px;
            max-width: 800px;
            width: 600px;
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
            z-index: 9999;
            backdrop-filter: blur(10px);">
<h3 style="color: #ffd86a; margin-bottom: 20px; font-family: 'Cinzel', serif; text-align: center;">
                I Filosofi che hanno cambiato il paradigma
                <span style="font-size: 1.5em; color: #00ccff;">‚ñæ</span>
</h3>
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
<div style="text-align: center;">
<img alt="Socrate" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/socrate.webp" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;">
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Socrate</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"So di non sapere."</p>
</div>
<div style="text-align: center;">
<img alt="Platone" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/foto/aristotele.webp" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;">
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Platone</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"La realt√† √® un'ombra delle Idee." - Tradotto: "Come il ¬´mondo vero¬ª divenne favola"</p>
</div>
<div style="text-align: center;">
<img alt="Kant" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/kant.webp" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;">
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Kant</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"Sapere aude! Abbi il coraggio di servirti della tua propria intelligenza!"</p>
</div>
<div style="text-align: center;">
<img alt="Nietzsche" decoding="async" loading="lazy" src="https://raw.githubusercontent.com/Casi0048/casi0048.github.io/main/immagini%20per%20sito/friedrich-nietzsche.jpg" style="width: 100%; max-width: 80px; border-radius: 50%; border: 3px solid #d4af37;">
<p style="margin-top: 10px; color: #e9eef5; font-weight: bold; font-family: 'Cormorant Garamond', serif;">Nietzsche</p>
<p style="font-style: italic; color: #9ad0ff; font-size: 0.85rem;font-weight: 700;">"Dio √® morto! Dio resta morto! E noi lo abbiamo ucciso!"</p>
</div>
</div>
</div>
</div>
 
<!-- ============================================================
        TOPBAR CON DIZIONARIO
============================================================ -->
<div class="bar-right">
<div class="translate-box">
<span>üåê</span>
<select aria-label="Traduci pagina" class="translate-select" id="customTranslate">
<option value="it">Italiano</option>
<option value="en">English</option>
<option value="fr">Fran√ßais</option>
<option value="de">Deutsch</option>
<option value="es">Espa√±ol</option>
<option value="pl">Polski</option>
</select>
<div aria-hidden="true" id="google_translate_element" style="position:fixed;bottom:0;right:0;width:1px;height:1px;opacity:0;pointer-events:none;overflow:hidden"></div>
</div>
<div class="search-container" role="search">
<input aria-label="Cerca" id="site-search" placeholder="Cerca nel sito..." type="search"/>
<i aria-hidden="true" class="fa-solid fa-magnifying-glass search-icon"></i>
</div>
<button aria-label="Cambia tema" class="ctrl-btn theme-btn" id="theme-toggle" title="Tema chiaro/scuro">
    üåô
  </button>
<button class="ctrl-btn" id="btn-thunder" title="Riproduci tuono">‚ö° Tuono</button>
</div>
</div>
<!-- ============================================================
     OVERLAY + MODALE DIZIONARIO FILOSOFICO
============================================================ -->
<!-- ====== OVERLAY DIZIONARIO ====== -->
<div id="dict-overlay" class="dict-overlay"></div>

<!-- ====== MODALE DIZIONARIO ====== -->
<div id="dict-modal" class="dict-modal notranslate" translate="no">

  <!-- Header -->
  <div class="dict-header">
    <h2 class="notranslate" translate="no"> Dizionario Filosofico</h2>
    <button id="dict-close" class="dict-close-btn" aria-label="Chiudi modale">√ó</button>
  </div>

<!-- Corpo -->
  <div class="dict-body">

    <!-- Campo ricerca -->
    <div class="dict-input-wrap">
      <input id="dict-q"
             type="search"
             class="dict-input notranslate"
             translate="no"
             placeholder="Cerca un termine‚Ä¶">

      <!-- Pulsante X per cancellare -->
     
    </div> 
    <!-- Suggerimenti live -->
    <div id="dict-suggestions"
         class="dict-suggestions notranslate"
         translate="no"></div>

    <!-- =========================
         FONTI FILOSOFICHE
         ========================= -->
    <div class="sources">

      <label>
        <input type="checkbox" checked
               data-url="https://duckduckgo.com/?q=site%3Aplato.stanford.edu+{q}">
        üèõÔ∏è Stanford Encyclopedia of Philosophy (SEP)
      </label>

      <label>
        <input type="checkbox" checked
               data-url="https://duckduckgo.com/?q=site%3Aiep.utm.edu+{q}">
        üß≠ IEP ‚Äì Internet Encyclopedia of Philosophy
      </label>

      <label>
        <input type="checkbox" checked
               data-url="https://www.treccani.it/enciclopedia/ricerca/{q}/?search={q}">
        üìò Treccani
      </label>

      <label>
        <input type="checkbox"
               data-url="https://it.wikipedia.org/w/index.php?search={q}">
        üìö Wikipedia
      </label>

      <label>
        <input type="checkbox"
               data-url="https://www.britannica.com/search?query={q}">
        üåç Encyclopaedia Britannica
      </label>

      <label>
        <input type="checkbox" checked
               data-url="https://www.google.com/search?q={q}">
        üîé Google
      </label>

      <label>
        <input type="checkbox" checked
               data-url="https://scholar.google.com/scholar?q={q}">
        üéì Google Scholar
      </label>

      <label>
        <input type="checkbox"
               data-url="https://www.google.com/search?q=site:raicultura.it/filosofia+{q}">
        üé• Rai Cultura ‚Äì Filosofia
      </label>

    </div>

    <!-- Pulsanti -->
    <button id="dict-search" class="btn">Cerca</button>
    <button id="open-all" class="btn small">Apri tutte</button>

  </div>

</div>
  <!-- üçî Mobile Menu Button -->
<button class="mobile-menu-btn" aria-label="Apri menu" aria-expanded="false">
  <span></span>
  <span></span>
  <span></span>
</button>

<!-- üì± Mobile Menu Panel -->
<nav class="mobile-menu" aria-hidden="true">
  <ul>
    <li><a href="/">Home</a></li>

    <li class="has-sub">
      <button class="sub-toggle">Filosofia antica</button>
      <ul class="sub">
        <li><a href="/presocratici.html">Presocratici</a></li>
        <li><a href="/socrate_oscillante.html">Socrate</a></li>
        <li><a href="/platonici.html">Platone</a></li>
        <li><a href="/filosofi/aristotele.html">Aristotele</a></li>
      </ul>
    </li>

    <li><a href="/timeline.html">Timeline</a></li>
    <li><a href="/articoli/">Articoli</a></li>
    <li><a href="/dizionario.html">Dizionario</a></li>
    <li><a href="/presentazione-sito.html">Info</a></li>
  </ul>
</nav>

  <!-- Menu principale -->
<div class="menu-container">
<nav aria-label="Navigazione principale" class="menu-desktop" role="navigation">
<ul role="menu">
<li class="dropdown">
<a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/benvenuti.html" role="menuitem"> üóùÔ∏è INCIPIT</a>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            üèõÔ∏è Filosofia antica <span class="arrow">‚ñº</span>
</button>
<div aria-label="Sottomenu Filosofia antica" class="mega-menu columns-4 anchor-left" role="menu">
<div>
<h4>Presocratici</h4>
<a href="Presocratici/talete.html" role="menuitem">Talete</a>
<a href="Presocratici/anassimandro.html" role="menuitem">Anassimandro</a>
<a href="Presocratici/anassimene.html" role="menuitem">Anassimene</a>
<a href="articoli/eraclito.html" role="menuitem">Eraclito</a>
</div>
<div>
<h4>Eleatismo</h4>
<a href="Presocratici/senofane.html" role="menuitem">Senofane</a>
<a href="Presocratici/parmenide.html" role="menuitem">Parmenide</a>
<a href="articoli/zenone.html" role="menuitem">Zenone</a>
<a href="articoli/melisso.html" role="menuitem">Melisso</a>
</div>
<div>
<h4>Sofisti</h4>
<a href="articoli/gorgia.html" role="menuitem">Gorgia</a>
<a href="articoli/ippia.html" role="menuitem">Ippia</a>
<a href="articoli/prodico.html" role="menuitem">Prodico</a>
</div>
<div>
<h4>Pitagorici</h4>
<a href="articoli/pitagora.html" role="menuitem">Pitagora</a>
<a href="articoli/filolao.html" role="menuitem">Filolao</a>
<a href="articoli/alcmeone.html" role="menuitem">Alcmeone</a>
<a href="articoli/archita.html" role="menuitem">Archita</a>
<a href="articoli/ippaso.html" role="menuitem">Ippaso</a>
</div>
<div>
<h4>Scuola cinica</h4>
<a href="articoli/antistene.html" role="menuitem">Antistene</a>
<a href="articoli/diogene.html" role="menuitem">Diogene di Sinope</a>
<a href="articoli/cratete.html" role="menuitem">Cratete di Tebe</a>
<a href="articoli/iparchia.html" role="menuitem">Ipparchia</a>
<a href="articoli/metrocle.html" role="menuitem">Metrocle di Maronea</a>
</div>
<div>
<h4>Scuola atomistica</h4>
<a href="articoli/leucippo.html" role="menuitem">Leucippo di Mileto</a>
<a href="articoli/democrito.html" role="menuitem">Democrito di Abdera</a>
<a href="articoli/scuola-vai%C5%9Be%E1%B9%A3ika.html" role="menuitem">Scuola Vai≈õe·π£ika</a>
</div>
<div>
<h4>Storiografia greca antica</h4>
<a href="articoli/erodoto.html" role="menuitem">Erodoto</a>
<a href="articoli/tucidide.html" role="menuitem">Tucidide </a>
<a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
<a href="articoli/polibio.html" role="menuitem">Polibio</a>
</div>
<div>
<h4>üöÄApprofondimenti</h4>
<a href="https://www.worldhistory.org/trans/it/1-13310/democrazia-ateniese/" role="menuitem">Democrazia Ateniese</a>
<a href="https://www.worldhistory.org/trans/it/2-927/donne-nellantica-grecia/" role="menuitem">Donne nell'Antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-11373/magna-grecia/" role="menuitem">Magna Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-14956/il-teatro-dellantica-grecia/" role="menuitem">Il teatro dell'antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-10553/la-religione-nellantica-grecia/" role="menuitem">La religione nell'antica Grecia</a>
<a href="https://www.worldhistory.org/trans/it/1-19269/la-danza-nellantica-grecia/" role="menuitem">La danza nell'Antica Grecia</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">
            üìúFilosofia classica <span class="arrow">‚ñº</span>
</button>
<div aria-label="Sottomenu Filosofia classica" class="mega-menu columns-4" role="menu">
<div>
<h4>Socrate e Scuola</h4>
<a href="articoli/socrate.html" role="menuitem">Socrate</a>
<a href="articoli/senofonte.html" role="menuitem">Senofonte</a>
<a href="articoli/antistene.html" role="menuitem">Antistene</a>
<h4>Scetticismo</h4>
<a href="articoli/pirrone.html" role="menuitem">Pirrone di Elide </a>
<a href="articoli/timone.html" role="menuitem">Timone di Fliunte </a>
<a href="articoli/arcesilao.html" role="menuitem">Arcesilao di Pitane</a>
<a href="articoli/carneade.html" role="menuitem">Carneade di Cirene</a>
<a href="articoli/enesidemo.html" role="menuitem">Enesidemo di Cnosso</a>
<a href="articoli/agrippa.html" role="menuitem">Agrippa</a>
<a href="articoli/sesto.html" role="menuitem">Sesto Empirico</a>
</div>
<div>
<h4>Platone e Accademia</h4>
<a href="articoli/platone.html" role="menuitem">Platone</a>
<a href="articoli/aristippo.html" role="menuitem">Aristippo</a>
<a href="articoli/diotima.html" role="menuitem">Diotima</a>
</div>
<div>
<h4>Aristotele e Peripatetici</h4>
<a href="articoli/aristotele.html" role="menuitem">Aristotele</a>
<a href="articoli/teofrasto.html" role="menuitem">Teofrasto</a>
<a href="articoli/eudemo.html" role="menuitem">Eudemo di Rodi </a>
<a href="articoli/stratone.html" role="menuitem">Stratone di Lampsaco</a>
<a href="articoli/demetrio.html" role="menuitem">Demetrio Falereo</a>
<a href="articoli/andronico.html" role="menuitem">Andronico di Rodi</a>
<a href="articoli/alessandro-afrodisia.html" role="menuitem">Alessandro di Afrodisia </a>
</div>
<div>
<h4>Stoicismo</h4>
<a href="articoli/zenone.html" role="menuitem">Zenone di Cizio</a>
<a href="articoli/epitteto.html" role="menuitem">Epitteto</a>
<a href="articoli/seneca.html" role="menuitem">Seneca</a>
<a href="articoli/cleante.html" role="menuitem">Cleante di Asso </a>
<a href="articoli/crisippo.html" role="menuitem">Crisippo di Soli </a>
<a href="articoli/panezio.html" role="menuitem">Panezio di Rodi</a>
<a href="articoli/posidonio.html" role="menuitem">Posidonio di Apamea </a>
</div>
<div>
<h4>Epicureismo</h4>
<a href="articoli/epicuro.html" role="menuitem">Epicuro</a>
<a href="articoli/lucrezio.html" role="menuitem">Lucrezio</a>
<a href="articoli/cicerone.html" role="menuitem">Cicerone</a>
<a href="articoli/ermarco.html" role="menuitem">Ermarco di Mitilene</a>
<a href="articoli/colote.html" role="menuitem">Colote di Lampsaco</a>
<a href="articoli/zenone_di_sidone.html " role="menuitem">Zenone di Sidone </a>
</div>
<div>
<h4>Neoplatonismo</h4>
<a href="articoli/plotino.html" role="menuitem">Plotino</a>
<a href="articoli/giamblico.html" role="menuitem">Giamblico di Calcide </a>
<a href="articoli/proclo.html" role="menuitem">Proclo</a>
<a href="articoli/ipazia.html" role="menuitem">Ip√†zia di Alessandria</a>
<a href="articoli/simplicio.html" role="menuitem">Simplicio di Cilicia </a>
<a href="articoli/orfismo.html" role="menuitem">Orfismo</a>
<a href="articoli/eleusi.html" role="menuitem">Misteri Eleusini</a>
</div>
<div>
<h4>Drammaturgia greca antica</h4>
<a href="articoli/eschilo.html" role="menuitem">Eschilo</a>
<a href="articoli/sofocle.html" role="menuitem">Sofocle</a>
<a href="articoli/euripide.html" role="menuitem">Euripide</a>
</div>
<div>
<h4>Commedia greca antica</h4>
<a href="articoli/aristofane.html" role="menuitem">Aristofane</a>
<a href="articoli/menandro.html" role="menuitem">Menandro</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">‚õ™Filosofia medievale<span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia medievale" class="mega-menu columns-4" role="menu">
<div>
<h4>Scolastica</h4>
<a href="articoli/eriugena.html" role="menuitem">Giovanni Scoto Eriugena</a>
<a href="articoli/anselmo.html" role="menuitem">Sant'Anselmo d'Aosta</a>
<a href="articoli/abelardo.html" role="menuitem">Pietro Abelardo</a>
<a href="articoli/alberto-m.html" role="menuitem">Alberto Magno</a>
<a href="articoli/tommaso%20d'aquino.html" role="menuitem">Tommaso d'Aquino</a>
<a href="articoli/bonaventura.html" role="menuitem">Bonaventura da Bagnoregio</a>
<a href="articoli/duns%20scoto.html" role="menuitem">Duns Scoto</a>
<a href="articoli/ockham.html" role="menuitem">Guglielmo di Ockham</a>
<a href="articoli/buridano.html" role="menuitem">Giovanni Buridano</a>
<a href="articoli/oresome.html" role="menuitem">Nicola d'Oresme</a>
</div>
<div>
<h4>Patristica</h4>
<a href="articoli/clemente.html" role="menuitem">Clemente Alessandrino</a>
<a href="articoli/tertulliano.html" role="menuitem">Tertulliano</a>
<a href="articoli/origene.html" role="menuitem">Origene</a>
<a href="articoli/cipriano.html" role="menuitem">Cipriano di Cartagine</a>
<a href="articoli/atanasio.html" role="menuitem">Atanasio di Alessandria</a>
<a href="articoli/basilio.html" role="menuitem">Basilio di Cesarea</a>
<a href="articoli/gregorio-di-nazianzo.html" role="menuitem">Gregorio di Nazianzo</a>
<a href="articoli/gregorio-di-nizza.html" role="menuitem">Gregorio di Nissa</a>
<a href="articoli/ambrogio.html" role="menuitem">Ambrogio di Milano</a>
<a href="articoli/girolamo.html" role="menuitem">Girolamo</a>
<a href="articoli/agostino.html" role="menuitem">Agostino</a>
<a href="articoli/pseudo-dionigi.html" role="menuitem">Pseudo-Dionigi Areopagita</a>
<a href="articoli/boezio.html" role="menuitem">Boezio</a>
<a href="articoli/alberto-m.html" role="menuitem">Gregorio Magno</a>
</div>
<div>
<h4>Mistica</h4>
<a href="articoli/ildegarda.html" role="menuitem">Ildegarda di Bingen </a>
<a href="articoli/eckhart.html" role="menuitem">Meister Eckhart</a>
<a href="articoli/caterina.html" role="menuitem">Caterina da Siena</a>
<h4>Filosofia Islamica</h4>
<a href="articoli/avicenna.html" role="menuitem">Avicenna</a>
<a href="articoli/averroe.html" role="menuitem">Averro√®</a>
<a href="articoli/al-farabi.html" role="menuitem">Al-Farabi</a>
<a href="articoli/al-ghazali.html" role="menuitem">Al-Ghazali</a>
</div>
<div>
<h4>Filosofia Ebraica</h4>
<a href="articoli/maimonide.html" role="menuitem">Maimonide</a>
<a href="articoli/saadia%20goan.html" role="menuitem">Saadia Gaon</a>
<a href="articoli/gersonide.html" role="menuitem">Gersonide</a>
<a href="articoli/hasdai%20crescas.html" role="menuitem">Hasdai Crescas</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üí°Filosofia moderna <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia moderna" class="mega-menu columns-4" role="menu">
<div>
<h4>Rinascimento</h4>
<a href="articoli/erasmo.html" role="menuitem">Erasmo da Rotterdam</a>
<a href="articoli/machiavelli.html" role="menuitem">Niccol√≤ Machiavelli</a>
<a href="articoli/moro.html" role="menuitem">Tommaso Moro</a>
<a href="articoli/bruno.html" role="menuitem">Giordano Bruno</a>
<h4>Razionalismo</h4>
<a href="articoli/cartesio.html" role="menuitem">Cartesio</a>
<a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
<a href="articoli/leibniz.html" role="menuitem">Leibniz</a>
</div>
<div>
<h4>Empirismo</h4>
<a href="articoli/locke.html" role="menuitem">Locke</a>
<a href="articoli/hume.html" role="menuitem">Hume</a>
<a href="articoli/berkeley.html" role="menuitem">Berkeley</a>
<h4>Romanticismo</h4>
<a href="articoli/frege.html" role="menuitem">Arthur Schopenhauer</a>
<a href="articoli/kierkegaard.html" role="menuitem">S√∏ren Kierkegaard</a>
<a href="articoli/goethe.html" role="menuitem">Johann Wolfgang von Goethe</a>
</div>
<div>
<h4>Illuminismo</h4>
<a href="articoli/rousseau.html" role="menuitem">Rousseau</a>
<a href="articoli/montesquieu.html" role="menuitem">Montesquieu</a>
<a href="articoli/voltaire.html" role="menuitem">Voltaire</a>
<h4>Materialismo</h4>
<a href="articoli/marx.html" role="menuitem">Karl Marx</a>
<a href="articoli/engels.html" role="menuitem">Friedrich Engels</a>
<a href="articoli/feuerbach.html" role="menuitem">Ludwig Andreas Feuerbach </a>
</div>
<div>
<h4>Idealismo</h4>
<a href="articoli/hegel.html" role="menuitem">Hegel</a>
<a href="articoli/kant.html" role="menuitem">Kant</a>
<a href="articoli/fichte.html" role="menuitem">Fichte</a>
<a href="articoli/schelling.html" role="menuitem">Schelling</a>
</div>
<div>
<h4>Positivismo</h4>
<a href="articoli/comte.html" role="menuitem">Auguste Comte </a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
<a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
<a href="articoli/mach.html" role="menuitem">Ernst Mach</a>
<a href="articoli/adrig%C3%B2.html" role="menuitem">Roberto Ardig√≤</a>
</div>
<div>
<h4>Gnoseologia</h4>
<a href="articoli/bacon.html" role="menuitem">Francis Bacon</a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill </a>
<a href="articoli/spencer.html" role="menuitem">Herbert Spencer</a>
</div>
<div>
<h4>Metafisica/Ontologia</h4>
<a href="articoli/spinoza.html" role="menuitem">Spinoza</a>
<a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
<a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
<a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
<a href="articoli/lewis.html" role="menuitem">David Lewis</a>
</div>
<div>
<h4>Filosofia russa</h4>
<a href="articoli/dostoevskij.html" role="menuitem">F√´dor Dostoevskij</a>
<a href="articoli/solov'%C3%ABv.html" role="menuitem">Vladimir Solov'√´v </a>
<a href="articoli/rozanov.html" role="menuitem">Vasilij Rozanov </a>
<a href="articoli/sestov.html" role="menuitem">Lev ≈†estov</a>
<a href="articoli/bulgakov.html" role="menuitem">Sergej Bulgakov</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üåÄFilosofia contemporanea <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia contemporanea" class="mega-menu columns-4" role="menu">
<div>
<h4>Filosofia analitica</h4>
<a href="articoli/frege.html" role="menuitem">Frege</a>
<a href="articoli/russell.html" role="menuitem">Russell</a>
<a href="articoli/wittgenstein.html" role="menuitem">Wittgenstein</a>
<a href="articoli/moore.html" role="menuitem">G.E. Moore</a>
<h4>Utilitarismo</h4>
<a href="articoli/betham.html" role="menuitem">Jeremy Bentham </a>
<a href="articoli/mill.html" role="menuitem">John Stuart Mill</a>
</div>
<div>
<h4>Filosofia Continentale</h4>
<a href="articoli/husserl.html" role="menuitem">Husserl</a>
<a href="articoli/merleau-ponty.html" role="menuitem">Merleau-Ponty</a>
<a href="articoli/l%C3%A9vi-strauss.html" role="menuitem">Claude L√©vi-Strauss</a>
<a href="articoli/bergson1.html" role="menuitem">Henri-Louis Bergson</a>
<a href="articoli/althusser.html" role="menuitem">Louis Althusser</a>
<a href="articoli/dreyfus.html" role="menuitem">Dina Dreyfus</a>
<a href="articoli/sartre.html" role="menuitem">Sartre</a>
</div>
<div>
<h4>Ermeneutica</h4>
<a href="articoli/schleiermacher.html" role="menuitem">Friedrich Schleiermacher</a>
<a href="articoli/dilthey.html" role="menuitem">Wilhelm Dilthey</a>
<a href="articoli/heidegger.html" role="menuitem">Heidegger</a>
<a href="articoli/gadamer.html" role="menuitem">Hans-Georg Gadamer</a>
<a href="/articoli/ricoeur.html" role="menuitem">Paul Ricoeur</a>
  <h4>Post-Positivismo</h4>
              <a href="articoli/popper.html" role="menuitem">Karl R. Popper</a>
              <a href="articoli/kuhn.html" role="menuitem">Thomas S. Kuhn</a>
              <a href="articoli/lakatos.html" role="menuitem">Imre Lakatos</a>
              <a href="articoli/feyerabend.html" role="menuitem">Paul K. Feyerabend</a>
              <a href="articoli/preti.html" role="menuitem">Giulio Preti</a>
</div>
<div>
<h4>Filosofia del linguaggio</h4>
<a href="articoli/wittgenstein.html" role="menuitem">Ludwig Wittgenstein</a>
<a href="articoli/austin.html" role="menuitem">J.L. Austin</a>
<a href="articoli/searle.html" role="menuitem">John Searle</a>
<a href="articoli/quine.html" role="menuitem">Willard Van Orme Quine</a>
<h4>Scuola di Francoforte</h4>
<a href="articoli/horkheimer.html" role="menuitem">Max Horkheimer</a>
<a href="articoli/adorno.html" role="menuitem">Theodor W. Adorno</a>
<a href="/articoli/marcuse.html" role="menuitem">Herbert Marcuse</a>
<a href="articoli/benjamin.html" role="menuitem">Walter Benjamin</a>
<a href="articoli/fromm.html" role="menuitem">Erich Fromm</a>
<a href="articoli/habermas.html" role="menuitem">J√ºrgen Habermas</a>
</div>
<div>
<h4>Pragmatismo Americano</h4>
<a href="articoli/peirce.html" role="menuitem">Peirce</a>
<a href="articoli/james.html" role="menuitem">W. James</a>
<a href="articoli/dewey.html" role="menuitem">Dewey</a>
<a href="articoli/rorty.html" role="menuitem">R. Rorty</a>
</div>
<div>
<h4>Filosofia postmoderna</h4>
<a href="articoli/derrida.html" role="menuitem">Derrida</a>
<a href="articoli/foucault.html" role="menuitem">Foucault</a>
<a href="articoli/lyotard.html" role="menuitem">Lyotard</a>
<a href="articoli/deleuze.html" role="menuitem">Deleuze</a>
<a href="articoli/butler.html" role="menuitem">Butler</a>
</div>
<div>
<h4>Filosofia italiana</h4>
<a href="articoli/severino.html" role="menuitem">Emmanuele Severino</a>
<a href="articoli/eco.html" role="menuitem">Umberto Eco</a>
<a href="articoli/vattimo.html" role="menuitem">Gianni Vattimo</a>
<a href="articoli/bodei.html" role="menuitem">Remo Bodei</a>
<a href="articoli/cacciari.html" role="menuitem">Massimo Cacciari</a>
<a href="articoli/galimberti.html" role="menuitem">Umberto Galimberti</a>
</div>
<div>
<h4>Socioetica</h4>
<a href="articoli/rawls.html" role="menuitem">John Rawls:</a>
<a href="articoli/nozick.html" role="menuitem">Robert Nozick</a>
<a href="articoli/singer.html" role="menuitem">Peter Singer</a>
<a href="articoli/jonas.html" role="menuitem">Hans Jonas</a>
<a href="articoli/beauvoir.html" role="menuitem">Simone de Beauvoir</a>
<a href="articoli/fraser.html" role="menuitem">Nancy Fraser</a>
<a href="articoli/said.html" role="menuitem">Edward Said</a>
</div>
</div>
</li>
<li class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="menu-btn underline-effect" role="menuitem">üáµüá± Filosofia polacca <span class="arrow">‚ñº</span></button>
<div aria-label="Sottomenu Filosofia polacca" class="mega-menu columns-4 right-align" role="menu">
<div>
<h4>Romanticismo</h4>
<a href="articoli/wronski.html" role="menuitem">J√≥zef Hoene-Wro≈Ñski</a>
<a href="articoli/cieszkowski.html" role="menuitem">August Cieszkowski</a>
<a href="articoli/mickiewicz.html" role="menuitem">Adam Mickiewicz</a>
<a href="articoli/rzewuski.html" role="menuitem">Henryk Rzewuski</a>
<a href="articoli/potocki.html" role="menuitem">Stanis≈Çaw Kostka Potocki</a>
</div>
<div>
<h4>Logica e Analitica</h4>
<a href="articoli/twardowski.html" role="menuitem">Kazimierz Twardowski</a>
<a href="articoli/lukasiewicz.html" role="menuitem">Jan ≈Åukasiewicz</a>
<a href="articoli/tarski.html" role="menuitem">Alfred Tarski</a>
<a href="articoli/kotarbinski.html" role="menuitem">Tadeusz Kotarbi≈Ñski</a>
<a href="articoli/ajdukiewicz.html" role="menuitem">Kazimierz Ajdukiewicz</a>
<a href="articoli/ingarden.html" role="menuitem">Roman Ingarden</a>
</div>
<div>
<h4>Periodo comunista</h4>
<a href="articoli/malinowski.html" role="menuitem">Bronis≈Çaw Malinowski</a>
<a href="articoli/swie%C5%BCawski.html" role="menuitem">Stefan Swie≈ºawski</a>
<a href="articoli/kolakowski.html" role="menuitem">Leszek Ko≈Çakowski</a>
<a href="articoli/wojtyla.html" role="menuitem">
                Karol Wojty≈Ça<br/>
                (Papa Giovanni Paolo II)
                </a>
</div>
<div>
<h4>Post-Comunista</h4>
<a href="articoli/tischner.html" role="menuitem">J√≥zef Tischner</a>
<a href="articoli/bauman.html" role="menuitem">Zygmunt Bauman</a>
</div>
</div>
</li>
<li class="dropdown">
<a class="menu-btn underline-effect" href="https://casi0048.github.io/pagine/pagina-contatti.html" role="menuitem">üìß Contatti</a>
</li>
</ul>
</nav>
</div>
<div class="scroll-progress">
<div class="scroll-progress-bar"></div>
</div>
<!-- Contenuto principale -->
<main aria-label="Contenuto principale" role="main">
<!-- Canvas per le piccole cometine variopinte -->
<canvas class="tiny-comets-canvas" id="tiny-comets"></canvas>
<section class="welcome-section">
<!-- ALBERO DELLA CONOSCENZA - SINISTRA -->
<div class="welcome-decoration left">
<div class="philosophy-tree">
<div class="tree-container">
<div class="tree-trunk"></div>
<div class="tree-branches">
<div class="branch branch-1"></div>
<div class="branch branch-2"></div>
<div class="branch branch-3"></div>
<div class="branch branch-4"></div>
</div>
<div class="tree-leaves">
<div class="leaf leaf-1">‚ôÇ</div>
<div class="leaf leaf-2">‚ôÄ</div>
<div class="leaf leaf-3">‚àû</div>
<div class="leaf leaf-4">Œî</div>
<div class="leaf leaf-5">Œ®</div>
<div class="leaf leaf-6">Œ¶</div>
</div>
<div class="tree-roots">
<div class="root root-1"></div>
<div class="root root-2"></div>
<div class="root root-3"></div>
</div>
</div>
</div>
<p class="decoration-caption">Contemplata aliis tradere</p>
</div>
<h1 class="welcome-title-themable" id="welcomeTitle">Benvenuto in<br/>Echi di Sofia</h1>
<div class="accordion-subtitle">Un viaggio tra storia, stelle e pensiero</div>
<div class="welcome-decoration right">
<div class="heraclitus-clock">
<div class="clock-face">
<div class="clock-hand hours"></div>
<div class="clock-hand minutes"></div>
<div class="river-flow"></div>
</div>
</div>
<p class="decoration-caption">‚è≥"Panta rei"üåø<br/><span class="sub-caption">üíÉTutto danza nel divenire üåä</span></p>
</div>
<div class="typing-wrap">
<div class="typing-effect"></div>
</div>
<button class="ctrl-btn" id="btn-explode" onclick="(function(){var x=document.getElementById('exploding');if(!x)return;var r=x.getBoundingClientRect();x.dispatchEvent(new MouseEvent('click',{bubbles:true,cancelable:true,clientX:r.left+r.width/2,clientY:r.top+r.height/2}));})();" type="button">
  üß® Esplodiüåã
</button>
<div aria-label="Sustine et abstine" class="motto exploding-text" id="exploding" title="Clicca per esplodere">
<span aria-hidden="true" class="m-icon">‚è≥</span>
<span aria-hidden="true" class="m-sep">‚Ä¢</span>
<span class="m-text">
<span class="char">S</span>
<span class="char">u</span>
<span class="char">s</span>
<span class="char">t</span>
<span class="char">i</span>
<span class="char">n</span>
<span class="char">e</span>
<span class="char">¬†</span>
<span class="char">e</span>
<span class="char">t</span>
<span class="char">¬†</span>
<span class="char">a</span>
<span class="char">b</span>
<span class="char">s</span>
<span class="char">t</span>
<span class="char">i</span>
<span class="char">n</span>
<span class="char">e</span>
</span>
<span aria-hidden="true" class="m-sep">‚Ä¢</span>
<span aria-hidden="true" class="m-icon">‚ôæÔ∏è</span>
</div>
</section>
<!-- Timeline filosofica interattiva - INTEGRATA -->
<!-- Timeline filosofica interattiva - COMPLETA -->
<section class="timeline-container">
<h2 class="timeline-title">Linea del Tempo Filosofica</h2>
<div class="timeline">
<!-- Filosofia Antica -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üèõÔ∏è Filosofia Antica</h3>
<p class="period">VII sec. a.C. - V sec. d.C.</p>
<p>Dai Presocratici al Neoplatonismo, l'indagine sulla physis e sul cosmo. I filosofi cercano di comprendere la natura fondamentale della realt√†.</p>
<p><strong>Filosofi principali:</strong> Talete, Socrate, Platone, Aristotele, Plotino</p>
</div>

</div>
<!-- Filosofia Medievale -->
<div class="timeline-item right">
<div class="timeline-content">
<h3>‚õ™ Filosofia Medievale</h3>
<p class="period">V - XV secolo</p>
<p>Fede e ragione si incontrano nella Scolastica. La filosofia araba ed ebraica fioriscono preservando il pensiero antico.</p>
<p><strong>Filosofi principali:</strong> Agostino, Tommaso d'Aquino, Avicenna, Averro√®, Maimonide</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Moderna -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üí° Filosofia Moderna</h3>
<p class="period">XV - XIX secolo</p>
<p>Razionalismo, Empirismo, Idealismo: il soggetto diventa il centro della riflessione filosofica.</p>
<p><strong>Filosofi principali:</strong> Cartesio, Kant, Hegel, Hume, Rousseau</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Contemporanea -->
<div class="timeline-item right">
<div class="timeline-content">
<h3>üåÄ Filosofia Contemporanea</h3>
<p class="period">XIX secolo - oggi</p>
<p>Dalla crisi della metafisica alle filosofie del linguaggio e dell'esistenza. Nuovi approcci alla conoscenza e all'etica.</p>
<p><strong>Filosofi principali:</strong> Nietzsche, Heidegger, Wittgenstein, Foucault, Derrida</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
<!-- Filosofia Polacca -->
<div class="timeline-item left">
<div class="timeline-content">
<h3>üáµüá± Filosofia Polacca</h3>
<p class="period">XIX‚ÄìXX secolo</p>
<p>Dalla Scuola di Leopoli-Varsavia alla fenomenologia e all'etica del Novecento.</p>
<p><strong>Filosofi principali:</strong> Twardowski, ≈Åukasiewicz, Kotarbi≈Ñski, Ajdukiewicz, Tatarkiewicz</p>
</div>
<span class="tl-dot"></span>
<span class="tl-connector"></span>
</div>
</div>
</section>
<!-- -->
<!-- CTA: approfondisci -->
<section class="cta-timeline">
<div class="cta-card">
<h3>üéØ Ti √® piaciuto questo viaggio nella filosofia?</h3>
<p>Approfondisci con i nostri articoli specializzati e risorse esclusive</p>
<div class="cta-buttons">
<!-- porta alla griglia completa nella HOME -->
<a aria-label="Vai alla griglia completa degli articoli" class="cta-btn primary" href="/articoli/#lista-articoli">
  üìñ Esplora Articoli Completi
</a>
<a aria-label="Iscriviti per ricevere contenuti esclusivi" class="cta-btn secondary" href="#" onclick="showNewsletterModal(); return false;">
        üìß Ricevi Contenuti Esclusivi
      </a>
</div>
<p class="cta-note"><small>Unisciti a 2.300+ appassionati di filosofia</small></p>
</div>
</section>
<!-- ANCORAGGIO GRIGLIA: il pulsante #lista-articoli atterra qui -->
<section class="wrap" id="lista-articoli" style="padding:1.2rem 1rem 0;">
<!-- Se hai gi√† una griglia/carte pi√π gi√π: lascia pure vuoto, serve solo l'ancora -->
<!-- In alternativa, puoi mettere qui le card articoli o farle generare via JS -->
<div class="grid">
<!-- facoltativo: placeholder visivo -->
<!-- <article class="card"><h3>Articoli</h3><p>Scorri per esplorare la sezione.</p></article> -->
</div>
</section>
</main>
<!-- Citazioni filosofiche fluttuanti -->
<div class="floating-quotes"><div class="quote-bubble"><div class="quote-text">‚ÄúConosci te stesso‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúSo di non sapere‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúUna vita senza ricerca non √® degna di essere vissuta‚Äù</div><div class="quote-author">‚Äî Socrate</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa filosofia comincia con la meraviglia‚Äù</div><div class="quote-author">‚Äî Platone</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa bellezza √® lo splendore del vero‚Äù</div><div class="quote-author">‚Äî Platone</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúSiamo ci√≤ che facciamo ripetutamente. L'eccellenza non √® un atto ma un'abitudine‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa felicit√† dipende da noi stessi‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNulla √® nell'intelletto che prima non sia passato dai sensi‚Äù</div><div class="quote-author">‚Äî Aristotele</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúTutto scorre‚Äù</div><div class="quote-author">‚Äî Eraclito</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl carattere √® destino‚Äù</div><div class="quote-author">‚Äî Eraclito</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúL'uomo √® misura di tutte le cose‚Äù</div><div class="quote-author">‚Äî Protagora</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúVivere secondo natura‚Äù</div><div class="quote-author">‚Äî Zenone di Cizio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon sono le cose che ci turbano, ma le opinioni che abbiamo su di esse‚Äù</div><div class="quote-author">‚Äî Epitteto</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon √® la morte che dobbiamo temere, ma il non cominciare mai a vivere‚Äù</div><div class="quote-author">‚Äî Marco Aurelio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita √® opinione‚Äù</div><div class="quote-author">‚Äî Marco Aurelio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa felicit√† consiste nel desiderare ci√≤ che si ha‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon esiste vento favorevole per il marinaio che non sa dove andare‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl destino guida chi lo segue e trascina chi si oppone‚Äù</div><div class="quote-author">‚Äî Seneca</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúVivi nascosto‚Äù</div><div class="quote-author">‚Äî Epicuro</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúAma e fa' ci√≤ che vuoi‚Äù</div><div class="quote-author">‚Äî Sant'Agostino</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa fede cerca l'intelligenza‚Äù</div><div class="quote-author">‚Äî Anselmo d'Aosta</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúContemplata aliis tradere‚Äù</div><div class="quote-author">‚Äî Tommaso d'Aquino</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon moltiplicare gli enti senza necessit√†‚Äù</div><div class="quote-author">‚Äî Guglielmo di Ockham</div></div><div class="quote-bubble"><div class="quote-text">‚Äú√à meglio essere temuti che amati, se non si pu√≤ essere entrambi‚Äù</div><div class="quote-author">‚Äî Niccol√≤ Machiavelli</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúCogito, ergo sum‚Äù</div><div class="quote-author">‚Äî Cartesio</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl cuore ha le sue ragioni che la ragione non conosce‚Äù</div><div class="quote-author">‚Äî Blaise Pascal</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa mente √® una tabula rasa‚Äù</div><div class="quote-author">‚Äî John Locke</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúEsse est percipi‚Äù</div><div class="quote-author">‚Äî George Berkeley</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa bellezza delle cose esiste nella mente di chi le contempla‚Äù</div><div class="quote-author">‚Äî David Hume</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDue cose riempiono l‚Äôanimo: il cielo stellato sopra di me e la legge morale dentro di me‚Äù</div><div class="quote-author">‚Äî Immanuel Kant</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúAgisci in modo da trattare l‚Äôumanit√† sempre come fine e mai semplicemente come mezzo‚Äù</div><div class="quote-author">‚Äî Immanuel Kant</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúQuel che √® reale √® razionale‚Äù</div><div class="quote-author">‚Äî G.W.F. Hegel</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita oscilla tra la noia e il dolore‚Äù</div><div class="quote-author">‚Äî Arthur Schopenhauer</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúLa vita dev‚Äôessere compresa all‚Äôindietro, ma va vissuta in avanti‚Äù</div><div class="quote-author">‚Äî S√∏ren Kierkegaard</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúChi ha un perch√© per vivere pu√≤ sopportare quasi ogni come‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDiventa ci√≤ che sei‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúNon esistono fatti, solo interpretazioni‚Äù</div><div class="quote-author">‚Äî Friedrich Nietzsche</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúDi ci√≤ di cui non si pu√≤ parlare si deve tacere‚Äù</div><div class="quote-author">‚Äî Ludwig Wittgenstein</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl significato √® l‚Äôuso‚Äù</div><div class="quote-author">‚Äî Ludwig Wittgenstein</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúIl linguaggio √® la casa dell‚Äôessere‚Äù</div><div class="quote-author">‚Äî Martin Heidegger</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúL‚Äôesistenza precede l‚Äôessenza‚Äù</div><div class="quote-author">‚Äî Jean‚ÄëPaul Sartre</div></div><div class="quote-bubble"><div class="quote-text">‚ÄúBisogna immaginare Sisifo felice‚Äù</div><div class="quote-author">‚Äî Albert Camus</div></div></div>
<!-- Footer -->
<footer>
<div class="footer-wrap">
<div class="footer-columns">
<div class="col about">
<h3>Pensieri Filosofici</h3>
<p>Tra pensiero e stelle: un percorso tra scuole, autori<br/> e temi della filosofia, dalla classicit√† al contemporaneo.</p>
</div>
<div class="search-sections">
<h4>Sezioni</h4>
<ul>
<li><a href="pagine/benvenuti.html">Incipit</a></li>
<li><a href="articoli/cinismo.html">Cinismo</a></li>
<li><a href="articoli/epicureismo.html">Epicureismo</a></li>
<li><a href="articoli/filosofia-indiana.html">Filosofia indiana</a></li>
<li><a href="articoli/platonismo.html">Platonismo</a></li>
<li><a href="articoli/scetticismo.html">Scetticismo</a></li>
<li><a href="articoli/stoicismo.html">Stoicismo</a></li>
</ul>
</div>
<div class="col contact">
<h4>Contatti</h4>
<ul>
<li><a href="mailto:info@echidisofia.example">info@echidisofia.example</a></li>
<li><a href="https://casi0048.github.io/pagine/pagina-contatti.html">Modulo contatti</a></li>
</ul>
<div class="social">
<a aria-label="Instagram" href="#"><i class="fa-brands fa-instagram"></i></a>
<a aria-label="YouTube" href="#"><i class="fa-brands fa-youtube"></i></a>
<a aria-label="X/Twitter" href="#"><i class="fa-brands fa-x-twitter"></i></a>
</div>
</div>
</div>
<div class="footer-legal">
<span>¬© <span id="year"></span> Echi di Sofia</span>
<span class="dot">‚Ä¢</span>
<a href="https://casi0048.github.io/pagine/privacy-policy.html">Privacy</a>
<span class="dot">‚Ä¢</span>
<a href="https://casi0048.github.io/pagine/credits.html">Crediti</a>
</div>
</div>
</footer>
<!-- ========== CTA FLOTTANTE ========== -->
<div class="floating-cta" id="floatingNewsletter">
<button onclick="showNewsletterModal()">
    üìß Filosofia in Posta
  </button>
</div>
<!-- ========== MODALE NEWSLETTER ========== -->
<div class="modal" id="newsletterModal">
<div class="modal-content">
<span class="close-modal" onclick="closeNewsletterModal()">√ó</span>
<h3>üìö Iscriviti alla Newsletter Filosofica</h3>
<p>Ricevi articoli esclusivi, risorse gratuite e approfondimenti direttamente nella tua email</p>
<form id="newsletterForm">
<input placeholder="tua.email@esempio.com" required="" type="email">
<button type="submit">Iscriviti Ora</button>
</form>
<p class="privacy-note"><small>Rispettiamo la tua privacy. Cancellazione sempre possibile.</small></p>
</div>
</div>
<script>
/* ============================================================
   üì¶ UTILITY GLOBALI (sicure, definite PRIMA di tutto)
   ============================================================ */

// Safe DOM manipulation
window.safeDOMOperation = function(operation, fallback = null) {
  try {
    if (typeof operation === 'function') {
      return operation();
    }
  } catch (error) {
    console.warn('DOM operation failed:', error.message);
    if (fallback && typeof fallback === 'function') {
      try {
        return fallback();
      } catch (fallbackError) {
        console.error('Fallback also failed:', fallbackError);
      }
    }
  }
  return null;
};

// Safe element selector
window.getElementSafe = function(selector) {
  return safeDOMOperation(() => {
    const element = typeof selector === 'string' ? 
      document.querySelector(selector) : selector;
    return element && document.body.contains(element) ? element : null;
  });
};

// Soft audio play (unificata)
window.softPlay = function(el, targetVol = 1.0, delay = 140) {
  if (!el) return Promise.reject('Audio element not found');
  
  return new Promise((resolve) => {
    setTimeout(() => {
      try {
        el.muted = false;
        el.currentTime = 0;
        el.volume = 0.0001;
        el.play().then(() => {
          const steps = Math.max(1, Math.round(delay / 30));
          let i = 0;
          const start = el.volume;
          const diff = targetVol - start;
          const t = setInterval(() => {
            i++;
            el.volume = start + diff * (i / steps);
            if (i >= steps) {
              el.volume = targetVol;
              clearInterval(t);
              resolve();
            }
          }, 30);
        }).catch(resolve);
      } catch (e) {
        resolve();
      }
    }, delay);
  });
};

// Normalizzazione testo per ricerca (unificata)
window.norm = function(s) {
  const NORM_MAP = {'≈Ç':'l','≈Å':'l','√ü':'ss','√∏':'o','√¶':'ae','≈ì':'oe'};
  return (s || '').toString().toLowerCase()
    .replace(/[≈Ç≈Å√ü√∏√¶≈ì]/g, m => NORM_MAP[m] || m)
    .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
    .replace(/\s+/g, ' ').trim();
};

// Escape HTML
window.escapeHTML = function(s) {
  return (s || '').replace(/[&<>"']/g, m => ({
    '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
  }[m]));
};

// ============================================================
// üöÄ INIZIALIZZAZIONE PRINCIPALE (eseguita al DOMContentLoaded)
// ============================================================

document.addEventListener('DOMContentLoaded', function() {
  
  console.log('üöÄ Inizializzazione sistema...');
  
  // Carica Font Awesome (semplificato)
  const fontAwesomeCSS = document.createElement('link');
  fontAwesomeCSS.rel = 'stylesheet';
  fontAwesomeCSS.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css';
  fontAwesomeCSS.crossOrigin = 'anonymous';
  document.head.appendChild(fontAwesomeCSS);
  
  // Inietta CSS per stati speciali
  injectPerformanceCSS();
  
  // Inizializza componenti
  initializeStars();
  initializeLazyLoading();
  initializeSearch();
  initializeSlider();
  initializeAudioPlayer();
  initializeRussellBox();
  initializeThunder();
  initializeThemeToggle();
  initializeMobileMenu();
  initializeScrollProgress();
  initializeAccentTheme();
  initializeExplosion();
  
  console.log('‚úÖ Sistema completamente inizializzato');
});

// ============================================================
// ‚≠ê SISTEMA STELLARE
// ============================================================

function initializeStars() {
  safeDOMOperation(() => {
    const container = document.getElementById('starsContainer');
    if (!container) return;
    
    // Crea stelle basiche
    createBasicStars(container);
    
    // Avvia stelle cadenti
    createMultipleShootingStars(container);
    setInterval(() => createMultipleShootingStars(container), 4000);
    
    // Resize handler
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        container.innerHTML = '';
        createBasicStars(container);
      }, 250);
    });
  });
}

function createBasicStars(container) {
  if (!container) return;
  
  const baseStars = Math.floor((window.innerWidth * window.innerHeight) / 800);
  const starCount = Math.min(600, Math.max(150, baseStars));
  
  for (let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    
    const sizes = ['small', 'medium', 'large', 'xlarge'];
    const size = sizes[Math.floor(Math.random() * sizes.length)];
    star.classList.add(size);
    
    // Stelle colorate
    if (Math.random() < 0.75) {
      const colors = ['color-blue', 'color-gold', 'color-purple'];
      star.classList.add(colors[Math.floor(Math.random() * colors.length)]);
    }
    
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    
    container.appendChild(star);
  }
}

function createShootingStar(container) {
  const shooter = document.createElement('div');
  shooter.className = 'shooting-star';
  
  const directions = ['diagonal', 'horizontal', 'vertical', 'reverse'];
  const direction = directions[Math.floor(Math.random() * directions.length)];
  shooter.classList.add(direction);
  
  if (Math.random() < 0.3) shooter.classList.add('fast');
  if (Math.random() < 0.2) shooter.classList.add('slow');
  
  // Posizionamento
  if (direction === 'diagonal') {
    shooter.style.left = '-150px';
    shooter.style.top = Math.random() * 300 + 'px';
  } else if (direction === 'horizontal') {
    shooter.style.left = '-150px';
    shooter.style.top = (Math.random() * window.innerHeight) + 'px';
  } else if (direction === 'vertical') {
    shooter.style.left = (Math.random() * window.innerWidth) + 'px';
    shooter.style.top = '-150px';
  } else if (direction === 'reverse') {
    shooter.style.left = (window.innerWidth + 150) + 'px';
    shooter.style.top = Math.random() * 300 + 'px';
  }
  
  shooter.style.animationDelay = (Math.random() * 3) + 's';
  container.appendChild(shooter);
  
  const duration = shooter.classList.contains('fast') ? 8000 : 
                   shooter.classList.contains('slow') ? 15000 : 12000;
  
  setTimeout(() => shooter.remove(), duration);
}

function createMultipleShootingStars(container) {
  const count = 1 + Math.floor(Math.random() * 2);
  for (let i = 0; i < count; i++) {
    setTimeout(() => createShootingStar(container), i * 1000);
  }
}

// ============================================================
// üñºÔ∏è LAZY LOADING IMMAGINI
// ============================================================

function initializeLazyLoading() {
  safeDOMOperation(() => {
    const lazyImages = document.querySelectorAll('.timeline-content img[data-src]');
    if (!lazyImages.length) return;
    
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            safeDOMOperation(() => {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
              img.classList.add('fade-in');
              observer.unobserve(img);
            });
          }
        });
      }, { rootMargin: '50px 0px', threshold: 0.1 });
      
      lazyImages.forEach(img => imageObserver.observe(img));
    } else {
      lazyImages.forEach(img => {
        img.src = img.dataset.src;
        img.removeAttribute('data-src');
      });
    }
  });
}

// ============================================================
// üîç SISTEMA DI RICERCA
// ============================================================

function initializeSearch() {
  const input = document.getElementById('site-search');
  if (!input) return;
  
  // Configura pannello ricerca
  setupSearchPanel();
  
  // Carica indice
  let INDEX = [];
  let searchIndexLoaded = false;
  
  async function loadSearchIndex() {
    if (searchIndexLoaded) return;
    
    const candidates = window.SEARCH_INDEX_URLS || 
      ['search-index.json', '/search-index.json', '/assets/search-index.json'];
    
    for (const url of candidates) {
      try {
        const r = await fetch(url, { cache: 'no-store' });
        if (r.ok) {
          INDEX = await r.json();
          searchIndexLoaded = true;
          window.SEARCH_INDEX = INDEX; // Esponi globalmente
          console.log(`‚úÖ Indice di ricerca caricato (${INDEX.length} voci)`);
          return;
        }
      } catch (e) {}
    }
  }
  
  function score(query, item) {
    const q = norm(query);
    if (!q) return 0;
    const t = norm(item.title), d = norm(item.desc || ''), u = norm(item.url || '');
    let s = 0;
    if (t.includes(q)) s += 40;
    if (d.includes(q)) s += 20;
    if (u.includes(q)) s += 10;
    
    const toks = q.split(' ').filter(Boolean);
    toks.forEach(tok => {
      if (t.startsWith(tok + ' ') || t.endsWith(' ' + tok) || t.includes(' ' + tok + ' ')) s += 12;
      if (d.includes(tok)) s += 6;
    });
    return s;
  }
  
  function highlight(text, query) {
    if (!query) return escapeHTML(text || '');
    const t = escapeHTML(text || '');
    const n = norm(text);
    const nq = norm(query);
    if (!nq) return t;
    
    const pos = n.indexOf(nq);
    if (pos < 0) return t;
    
    const pre = escapeHTML((text || '').slice(0, pos));
    const mid = escapeHTML((text || '').slice(pos, pos + nq.length));
    const post = escapeHTML((text || '').slice(pos + nq.length));
    return `${pre}<mark>${mid}</mark>${post}`;
  }
  
  function renderResults(results, query, panel, resultsWrap) {
    resultsWrap.innerHTML = '';
    if (!results.length) {
      resultsWrap.innerHTML = '<div class="result"><em>Nessun risultato</em></div>';
      return;
    }
    
    results.slice(0, 20).forEach(it => {
      const title = highlight(it.title, query);
      const desc = highlight(it.desc || '', query);
      const url = escapeHTML(it.url || '#');
      const row = document.createElement('div');
      row.className = 'result';
      row.innerHTML = `
        <h4 class="result-title"><a href="${url}">${title}</a></h4>
        ${desc ? `<div class="result-desc">${desc}</div>` : ''}
        <div class="result-source">${escapeHTML(new URL(url, location.href).hostname || '')}</div>
      `;
      resultsWrap.appendChild(row);
    });
    
    panel.style.display = 'block';
    panel.classList.add('open');
    
    // Stagger animation
    Array.from(resultsWrap.children).forEach((el, i) => {
      el.style.setProperty('--i', i);
    });
  }
  
  function performSearch(query, panel, resultsWrap) {
    if (!searchIndexLoaded || !query.trim()) {
      panel.style.display = 'none';
      resultsWrap.innerHTML = '';
      return;
    }
    
    const ranked = INDEX
      .map(it => ({ it, s: score(query, it) }))
      .filter(x => x.s > 0)
      .sort((a, b) => b.s - a.s)
      .map(x => x.it);
    
    renderResults(ranked, query, panel, resultsWrap);
  }
  
  function setupSearchPanel() {
    let panel = document.querySelector('#search-panel, .search-panel');
    if (!panel) {
      panel = document.createElement('div');
      panel.id = 'search-panel';
      panel.className = 'search-panel';
      panel.innerHTML = `
        <div class="search-header">
          <h3 class="search-title">Risultati</h3>
          <button class="search-close" aria-label="Chiudi">Chiudi</button>
        </div>
        <div class="search-results" id="search-results"></div>
      `;
      document.body.appendChild(panel);
    }
    
    const resultsWrap = panel.querySelector('#search-results, .search-results');
    const closeBtn = panel.querySelector('.search-close');
    
    closeBtn?.addEventListener('click', () => {
      panel.style.display = 'none';
      panel.classList.remove('open');
    });
    
    // Backdrop
    let backdrop = document.getElementById('search-backdrop');
    if (!backdrop) {
      backdrop = document.createElement('div');
      backdrop.id = 'search-backdrop';
      document.body.appendChild(backdrop);
    }
    
    // Input handler con debounce
    let timeout;
    input.addEventListener('input', () => {
      clearTimeout(timeout);
      const q = input.value;
      timeout = setTimeout(() => performSearch(q, panel, resultsWrap), 150);
    });
    
    // ESC chiude
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        panel.style.display = 'none';
        panel.classList.remove('open');
      }
    });
    
    // Click sul container focus input
    const wrap = input.closest('.search-container');
    wrap?.addEventListener('click', e => {
      if (e.target !== input) input.focus();
    });
    
    // Carica indice
    loadSearchIndex().then(() => {
      if (input.value.trim()) performSearch(input.value, panel, resultsWrap);
    });
  }
}

// ============================================================
// üéöÔ∏è SLIDER VERTICALE
// ============================================================

function initializeSlider() {
  const inner = document.getElementById('sliderInner');
  if (!inner) return;
  
  let pos = 0;
  let speed = 0.8;
  let dir = 1;
  let running = true;
  
  function step() {
    if (!running) {
      requestAnimationFrame(step);
      return;
    }
    pos += dir * speed;
    inner.style.transform = `translateY(${-pos}px)`;
    const total = inner.scrollHeight - inner.clientHeight;
    if (pos >= total) pos = 0;
    if (pos < 0) pos = total;
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
  
  const toggle = document.getElementById('slider-toggle');
  const invert = document.getElementById('slider-invert');
  const speedSlider = document.getElementById('slider-speed');
  
  toggle?.addEventListener('click', () => running = !running);
  invert?.addEventListener('click', () => dir *= -1);
  
  // Speed readout
  if (speedSlider) {
    const readout = document.createElement('span');
    readout.id = 'speed-readout';
    readout.textContent = '8';
    readout.style.cssText = `
      display: inline-block; min-width: 3.5ch; margin-left: .6rem;
      padding: .15rem .4rem; border-radius: .5rem;
      font-variant-numeric: tabular-nums; font-size: .9rem;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(212,175,55,.55);
      box-shadow: 0 0 6px rgba(255,215,0,.25);
    `;
    speedSlider.parentNode.appendChild(readout);
    
    speedSlider.min = 1;
    speedSlider.max = 20;
    speedSlider.value = 8;
    
    speedSlider.addEventListener('input', () => {
      const v = parseInt(speedSlider.value, 10) || 5;
      readout.textContent = v;
      
      if (v <= 6) speed = 0.2 + (v - 1) * 0.15;
      else speed = 0.2 + (v - 1) * 0.25;
    });
    
    speedSlider.dispatchEvent(new Event('input'));
  }
}

// ============================================================
// üîä AUDIO PLAYER
// ============================================================

function initializeAudioPlayer() {
  const audio = document.getElementById('myAudio');
  const btn = document.getElementById('playPause');
  const time = document.getElementById('time');
  const volume = document.getElementById('volume');
  
  if (!audio || !btn) return;
  
  function formatTime(s) {
    if (!isFinite(s)) return '0:00';
    const m = Math.floor(s / 60);
    const c = Math.floor(s % 60);
    return m + ':' + (c < 10 ? '0' + c : c);
  }
  
  function updateTime() {
    time.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
  }
  
  volume.value = 0.8;
  audio.volume = parseFloat(volume.value);
  
  btn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play().catch(() => {});
      btn.textContent = '‚è∏Ô∏è';
    } else {
      audio.pause();
      btn.textContent = '‚ñ∂Ô∏è';
    }
  });
  
  volume.addEventListener('input', () => {
    audio.volume = parseFloat(volume.value);
  });
  
  audio.addEventListener('timeupdate', updateTime);
  audio.addEventListener('loadedmetadata', updateTime);
  audio.addEventListener('ended', () => {
    btn.textContent = '‚ñ∂Ô∏è';
  });
  
  // Dynamic fill per volume slider
  const setFill = (el) => {
    if (!el) return;
    const min = +el.min || 0;
    const max = +el.max || 100;
    const val = +el.value || 0;
    const pct = ((val - min) * 100) / (max - min);
    el.style.setProperty('--fill', pct + '%');
  };
  
  setFill(volume);
  volume.addEventListener('input', () => setFill(volume));
  
  // Speed slider fill
  const speedSlider = document.getElementById('slider-speed');
  if (speedSlider) {
    setFill(speedSlider);
    speedSlider.addEventListener('input', () => setFill(speedSlider));
  }
}

// ============================================================
// üì¶ RUSSELL BOX
// ============================================================

function initializeRussellBox() {
  const box = document.getElementById('russell-box');
  const btn = document.getElementById('russell-btn');
  const audio = document.getElementById('russell-audio');
  const hint = document.getElementById('russell-hint');
  
  if (!box || !btn || !audio) return;
  
  // Unlock audio al primo interazione
  let unlocked = false;
  function unlockAudio() {
    if (unlocked) return;
    unlocked = true;
    audio.muted = false;
    audio.play().then(() => {
      audio.pause();
      audio.currentTime = 0;
    }).catch(() => {});
    
    window.removeEventListener('pointerdown', unlockAudio, { capture: true });
    window.removeEventListener('keydown', unlockAudio, { capture: true });
  }
  
  window.addEventListener('pointerdown', unlockAudio, { once: true, capture: true, passive: true });
  window.addEventListener('keydown', unlockAudio, { once: true, capture: true });
  
  // Ping effect
  function pingOnce() {
    box.classList.add('ping');
    btn.classList.add('ping');
    clearTimeout(pingOnce._t);
    pingOnce._t = setTimeout(() => {
      box.classList.remove('ping');
      btn.classList.remove('ping');
    }, 520);
    
    // Play audio
    try {
      audio.currentTime = 0;
      audio.play().catch(() => {});
    } catch (_) {}
  }
  
  function isInside(el, id) {
    while (el) {
      if (el.id === id) return true;
      el = el.parentElement;
    }
    return false;
  }
  
  box.addEventListener('click', (e) => {
    if (isInside(e.target, 'russell-box') || isInside(e.target, 'russell-btn')) {
      pingOnce();
    }
  });
  
  if (btn) {
    btn.setAttribute('role', 'button');
    btn.setAttribute('tabindex', '0');
    btn.setAttribute('aria-label', 'Apri Russell');
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ' || e.keyCode === 13 || e.keyCode === 32) {
        e.preventDefault();
        pingOnce();
      }
    });
  }
}

// ============================================================
// ‚ö° EFFETTO TUONO
// ============================================================

function initializeThunder() {
  const btn = document.getElementById('btn-thunder');
  const audio = document.getElementById('thunder-sound');
  const explosionAudio = document.getElementById('explosionSound');
  const overlay = document.getElementById('lightning');
  const bolt = document.getElementById('bolt');
  
  if (!btn || !audio || !overlay || !bolt) return;
  
  let playing = false;
  let unlocked = false;
  
  async function unlockAudio() {
    if (unlocked) return;
    unlocked = true;
    for (const s of [audio, explosionAudio].filter(Boolean)) {
      try {
        s.muted = false;
        await s.play();
        s.pause();
        s.currentTime = 0;
      } catch (_) {}
    }
  }
  
  window.addEventListener('pointerdown', unlockAudio, { once: true, passive: true, capture: true });
  window.addEventListener('keydown', unlockAudio, { once: true, capture: true });
  
  function updateUI() {
    btn.classList.toggle('active', playing);
    btn.setAttribute('aria-pressed', playing ? 'true' : 'false');
    btn.textContent = playing ? '‚ö° Tuono: ON' : '‚ö° Tuono';
  }
  
  function flash() {
    const x = 15 + Math.random() * 70;
    const y = 10 + Math.random() * 65;
    const ang = -25 + Math.random() * 50;
    const sy = 0.8 + Math.random() * 1.2;
    
    overlay.style.transition = 'none';
    overlay.offsetHeight;
    overlay.style.background = `radial-gradient(circle at ${x}% ${y}%, rgba(255,255,255,.95), rgba(255,255,255,.22) 40%, transparent 65%)`;
    overlay.style.opacity = '1';
    overlay.style.transition = 'opacity 80ms ease-out';
    setTimeout(() => overlay.style.opacity = '0', 140);
    
    bolt.style.left = x + '%';
    bolt.style.top = y + '%';
    bolt.style.transform = `translate(-50%,-50%) rotate(${ang}deg) scaleY(${sy})`;
    bolt.style.transition = 'transform 90ms ease-out, opacity 280ms ease-out';
    bolt.style.opacity = '1';
    setTimeout(() => bolt.style.opacity = '0', 180);
    
    if (playing) {
      try {
        audio.currentTime = 0;
        softPlay(audio, 1.0, 140);
      } catch (_) {}
    }
  }
  
  // Sostituisci bottone per evitare doppi eventi
  const newBtn = btn.cloneNode(true);
  btn.parentNode.replaceChild(newBtn, btn);
  
  newBtn.addEventListener('click', (e) => {
    e.preventDefault();
    playing = !playing;
    if (!playing) {
      try {
        audio.pause();
        audio.currentTime = 0;
      } catch (_) {}
    }
    updateUI();
  });
  
  // Flash periodico
  (function schedule() {
    setTimeout(() => {
      flash();
      schedule();
    }, 10000 + Math.random() * 5000);
  })();
  
  audio.loop = false;
  audio.addEventListener('ended', () => {
    playing = false;
    updateUI();
  });
  
  // ESC ferma
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && playing) {
      playing = false;
      try {
        audio.pause();
        audio.currentTime = 0;
      } catch (_) {}
      updateUI();
    }
  });
  
  updateUI();
  
  // Explode button
  const explodeBtn = document.getElementById('explode-btn') || document.getElementById('btn-explode');
  explodeBtn?.addEventListener('click', () => {
    if (explosionAudio) {
      try {
        explosionAudio.muted = false;
        explosionAudio.volume = 1.0;
        explosionAudio.currentTime = 0;
        softPlay(explosionAudio, 1.0, 140);
      } catch (_) {}
    }
  });
}

// ============================================================
// üåì THEME TOGGLE
// ============================================================

function initializeThemeToggle() {
  const toggle = document.getElementById('theme-toggle');
  if (!toggle) return;
  
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateToggleButton(savedTheme);
  
  toggle.addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme');
    const newTheme = current === 'dark' ? 'light' : 'dark';
    
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateToggleButton(newTheme);
    
    document.documentElement.style.transition = 'all 0.5s ease';
    setTimeout(() => {
      document.documentElement.style.transition = '';
    }, 500);
  });
  
  function updateToggleButton(theme) {
    const icon = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    const label = theme === 'dark' ? 'Attiva tema chiaro' : 'Attiva tema scuro';
    toggle.innerHTML = icon;
    toggle.setAttribute('aria-label', label);
    toggle.setAttribute('title', label);
    
    toggle.style.transform = 'scale(0.9)';
    setTimeout(() => toggle.style.transform = 'scale(1)', 150);
  }
  
  // System preference
  const systemTheme = window.matchMedia('(prefers-color-scheme: light)');
  systemTheme.addEventListener('change', (e) => {
    if (!localStorage.getItem('theme')) {
      const newTheme = e.matches ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      updateToggleButton(newTheme);
    }
  });
}

// ============================================================
// üçî MOBILE MENU
// ============================================================

function initializeMobileMenu() {
  const btn = document.querySelector('.mobile-menu-btn');
  const menu = document.querySelector('.mobile-menu');
  
  if (!btn || !menu) return;
  
  btn.addEventListener('click', () => {
    const open = btn.classList.toggle('open');
    menu.classList.toggle('open', open);
    btn.setAttribute('aria-expanded', open);
    menu.setAttribute('aria-hidden', !open);
    document.body.style.overflow = open ? 'hidden' : '';
  });
  
  menu.querySelectorAll('.sub-toggle').forEach(toggle => {
    toggle.addEventListener('click', () => {
      const sub = toggle.nextElementSibling;
      if (sub) {
        sub.style.display = sub.style.display === 'block' ? 'none' : 'block';
      }
    });
  });
  
  menu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      btn.classList.remove('open');
      menu.classList.remove('open');
      btn.setAttribute('aria-expanded', 'false');
      menu.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    });
  });
  
  menu.addEventListener('click', (e) => {
    if (e.target === menu) {
      btn.classList.remove('open');
      menu.classList.remove('open');
      document.body.style.overflow = '';
    }
  });
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && menu.classList.contains('open')) {
      btn.classList.remove('open');
      menu.classList.remove('open');
      document.body.style.overflow = '';
    }
  });
  
  // Active page
  const currentPath = location.pathname.replace(/\/$/, '');
  menu.querySelectorAll('a').forEach(link => {
    const linkPath = link.getAttribute('href')?.replace(/\/$/, '');
    if (linkPath && currentPath.endsWith(linkPath)) {
      link.classList.add('active');
    }
  });
  
  if (window.matchMedia('(max-width: 768px)').matches) {
    document.body.classList.add('is-mobile');
  }
}

// ============================================================
üìà SCROLL PROGRESS BAR
// ============================================================

function initializeScrollProgress() {
  const bar = document.querySelector('.scroll-progress-bar');
  if (!bar) return;
  
  window.addEventListener('scroll', () => {
    const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (window.scrollY / windowHeight) * 100;
    bar.style.width = scrolled + '%';
  });
}

// ============================================================
üé® ACCENT THEME SWITCHER
// ============================================================

function initializeAccentTheme() {
  const KEY = 'accent-theme';
  const order = ['gold', 'blue', 'green', 'red'];
  const saved = localStorage.getItem(KEY) || 'gold';
  
  applyAccent(saved);
  
  document.querySelectorAll('.welcome-switcher [data-variant]').forEach(btn => {
    btn.addEventListener('click', () => applyAccent(btn.dataset.variant));
  });
  
  const title = document.getElementById('welcomeTitle');
  title?.addEventListener('click', () => {
    const curr = localStorage.getItem(KEY) || 'gold';
    const next = order[(order.indexOf(curr) + 1) % order.length];
    applyAccent(next);
  });
  
  function applyAccent(variant) {
    if (!['gold', 'blue', 'green', 'red'].includes(variant)) variant = 'gold';
    if (variant === 'gold') {
      document.body.removeAttribute('data-accent');
    } else {
      document.body.setAttribute('data-accent', variant);
    }
    localStorage.setItem(KEY, variant);
    document.querySelectorAll('.welcome-switcher [data-variant]').forEach(b => {
      b.setAttribute('aria-pressed', b.dataset.variant === variant ? 'true' : 'false');
    });
  }
}

// ============================================================
üí• SISTEMA ESPLOSIONE
// ============================================================

function initializeExplosion() {
  let explodingText = document.getElementById('exploding');
  if (!explodingText) {
    explodingText = Array.from(document.querySelectorAll('h1,h2,h3,p,span,.hero-title,.headline,.motto'))
      .find(el => el.textContent && el.textContent.includes('Sustine et abstine'));
  }
  
  const explodeBtn = document.getElementById('btn-explode');
  const explosionSound = document.getElementById('explosionSound');
  
  if (!explodingText) return;
  
  // CSS per esplosione
  const explosionStyles = `
    .explosion-char {
      display: inline-block;
      will-change: transform, opacity, filter;
    }
    .exploding-text.boom-active .explosion-char {
      animation: none !important;
    }
    .mega-shockwave {
      position: fixed;
      border-radius: 50%;
      background: radial-gradient(circle, 
          rgba(255,255,255,1) 0%, 
          rgba(255,215,0,0.9) 15%, 
          rgba(255,100,0,0.7) 30%, 
          rgba(0,204,255,0.5) 50%,
          transparent 70%
      );
      animation: megaShockwave 1.5s ease-out forwards;
      z-index: 2147483601;
      pointer-events: none;
    }
    @keyframes megaShockwave {
      0% { transform: translate(-50%, -50%) scale(0.1); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(25); opacity: 0; }
    }
    .mega-particle {
      position: fixed;
      border-radius: 50%;
      animation: megaParticleFly 2s ease-out forwards;
      z-index: 2147483600;
      pointer-events: none;
    }
    @keyframes megaParticleFly {
      0% { transform: translate(0, 0) scale(1); opacity: 1; }
      100% { transform: translate(var(--p-dx), var(--p-dy)) scale(0); opacity: 0; }
    }
  `;
  
  const styleSheet = document.createElement('style');
  styleSheet.textContent = explosionStyles;
  document.head.appendChild(styleSheet);
  
  // Prepara testo
  function prepareExplosion() {
    if (explodingText.__split) return;
    const text = (explodingText.textContent || '')
      .normalize('NFC')
      .replace(/[\uFEFF\u200B-\u200D\u2060]/g, '')
      .replace(/\uFFFD/g, '');
    
    explodingText.__originalText = text;
    explodingText.classList.add('exploding-text');
    explodingText.innerHTML = '';
    
    for (let i = 0; i < text.length; i++) {
      const charSpan = document.createElement('span');
      charSpan.className = 'explosion-char';
      charSpan.textContent = text[i];
      charSpan.style.setProperty('--index', i);
      explodingText.appendChild(charSpan);
    }
    explodingText.__split = true;
  }
  
  function createShockwave(element) {
    const rect = element.getBoundingClientRect();
    const shockwave = document.createElement('div');
    shockwave.className = 'mega-shockwave';
    shockwave.style.left = (rect.left + rect.width / 2) + 'px';
    shockwave.style.top = (rect.top + rect.height / 2) + 'px';
    shockwave.style.width = '90px';
    shockwave.style.height = '90px';
    document.body.appendChild(shockwave);
    setTimeout(() => shockwave.remove(), 1500);
  }
  
  function createParticles(element) {
    const rect = element.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.className = 'mega-particle';
      particle.style.left = centerX + 'px';
      particle.style.top = centerY + 'px';
      particle.style.setProperty('--p-dx', (Math.random() * 600 - 300) + 'px');
      particle.style.setProperty('--p-dy', (Math.random() * 400 - 300) + 'px');
      
      const size = 4 + Math.random() * 8;
      particle.style.width = size + 'px';
      particle.style.height = size + 'px';
      particle.style.background = ['#ff0000', '#ffd700', '#00ccff', '#b967ff'][i % 4];
      
      document.body.appendChild(particle);
      setTimeout(() => particle.remove(), 2000);
    }
  }
  
  function explodeTarget(element) {
    if (!element || element.__exploding) return;
    element.__exploding = true;
    
    if (explosionSound) {
      try {
        explosionSound.currentTime = 0;
        explosionSound.volume = 0.7;
        explosionSound.play().catch(() => {});
      } catch (_) {}
    }
    
    element.classList.remove('boom-recomposing');
    element.classList.add('boom-active');
    element.style.border = '2px solid rgba(255,215,0,0.5)';
    
    createShockwave(element);
    createParticles(element);
    
    const spans = Array.from(element.querySelectorAll('.explosion-char'));
    if (!spans.length) {
      prepareExplosion();
      return setTimeout(() => explodeTarget(element), 100);
    }
    
    let finished = 0;
    
    spans.forEach((span, index) => {
      span.style.transform = 'translate(0px, 0px) rotate(0deg)';
      span.style.opacity = '1';
      span.style.filter = 'blur(0px)';
      
      const dx = (Math.random() * 400 - 200);
      const dy = (Math.random() * 300 - 250);
      const rotation = (Math.random() * 360 - 180);
      const delay = index * 15;
      const duration = 800 + Math.random() * 400;
      
      const exitKeyframes = [
        { transform: 'translate(0px, 0px) rotate(0deg)', opacity: 1, filter: 'blur(0px)' },
        { transform: `translate(${dx}px, ${dy}px) rotate(${rotation}deg)`, opacity: 0, filter: 'blur(8px)' }
      ];
      
      const exitAnimation = span.animate(exitKeyframes, {
        duration: duration,
        delay: delay,
        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
        fill: 'forwards'
      });
      
      exitAnimation.onfinish = () => {
        setTimeout(() => {
          const returnKeyframes = [
            { transform: `translate(${dx}px, ${dy}px) rotate(${rotation}deg)`, opacity: 0, filter: 'blur(8px)' },
            { transform: 'translate(0px, 0px) rotate(0deg)', opacity: 1, filter: 'blur(0px)' }
          ];
          
          const returnAnimation = span.animate(returnKeyframes, {
            duration: duration * 0.8,
            easing: 'cubic-bezier(0.2, 0.8, 0.4, 1.2)',
            fill: 'forwards'
          });
          
          returnAnimation.onfinish = () => {
            span.style.transform = 'translate(0px, 0px) rotate(0deg)';
            span.style.opacity = '1';
            span.style.filter = 'blur(0px)';
            
            finished++;
            if (finished === spans.length) {
              element.classList.remove('boom-active');
              element.classList.add('boom-recomposing');
              setTimeout(() => {
                element.classList.remove('boom-recomposing');
                element.style.border = '';
                element.__exploding = false;
              }, 300);
            }
          };
        }, 300);
      };
    });
  }
  
  prepareExplosion();
  
  if (explodeBtn) {
    explodeBtn.addEventListener('click', (e) => {
      e.preventDefault();
      explodeTarget(explodingText);
    });
  }
  
  explodingText.addEventListener('click', () => {
    explodeTarget(explodingText);
  });
  
  // FX Layer per esplosione teatro
  if (!document.querySelector('.fx-layer')) {
    const layer = document.createElement('div');
    layer.className = 'fx-layer';
    layer.innerHTML = '<div class="fx-flash"></div><div class="fx-shock"></div><div class="fx-smoke"></div><canvas class="fx-embers"></canvas>';
    document.body.appendChild(layer);
    
    const canvas = layer.querySelector('.fx-embers');
    const ctx = canvas.getContext('2d');
    
    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);
    
    let sparks = [];
    
    function seedSparks(x, y, count) {
      for (let i = 0; i < count; i++) {
        const a = Math.random() * Math.PI * 2;
        const sp = 2 + Math.random() * 6;
        sparks.push({
          x, y,
          vx: Math.cos(a) * sp,
          vy: Math.sin(a) * sp - (Math.random() * 2),
          life: 40 + Math.random() * 50,
          age: 0,
          r: 1 + Math.random() * 2
        });
      }
    }
    
    function tick() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = sparks.length - 1; i >= 0; i--) {
        const s = sparks[i];
        s.age++;
        s.vy += 0.06;
        s.vx *= 0.99;
        s.vy *= 0.995;
        s.x += s.vx;
        s.y += s.vy;
        const t = 1 - (s.age / s.life);
        if (t <= 0) {
          sparks.splice(i, 1);
          continue;
        }
        ctx.globalAlpha = Math.max(0, t);
        const g = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r * 3);
        g.addColorStop(0, 'rgba(255,240,180,1)');
        g.addColorStop(1, 'rgba(255,120,0,0)');
        ctx.fillStyle = g;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fill();
      }
      requestAnimationFrame(tick);
    }
    
    tick();
    
    window.EchiExplode = function() {
      const chars = [...explodingText.querySelectorAll('.char')];
      explodingText.classList.add('preglow');
      layer.querySelector('.fx-flash').style.opacity = 1;
      setTimeout(() => layer.querySelector('.fx-flash').style.opacity = 0, 120);
      
      const shock = layer.querySelector('.fx-shock');
      const smoke = layer.querySelector('.fx-smoke');
      shock.style.opacity = 1;
      shock.style.transform = 'translate(-50%,-50%) scale(.25)';
      smoke.style.opacity = .25;
      smoke.style.transform = 'translate(-50%,-50%) scale(.4)';
      
      const start = performance.now();
      const DUR = 680;
      
      (function loop(now) {
        const t = Math.min(1, (now - start) / DUR);
        const ease = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
        shock.style.transform = 'translate(-50%,-50%) scale(' + (0.25 + ease * 2.0) + ')';
        shock.style.opacity = String(1 - t);
        smoke.style.transform = 'translate(-50%,-50%) scale(' + (0.4 + ease * 1.4) + ')';
        smoke.style.opacity = String(0.25 * (1 - t));
        if (t < 1) requestAnimationFrame(loop);
      })(start);
      
      const rect = explodingText.getBoundingClientRect();
      seedSparks(rect.left + rect.width / 2, rect.top + rect.height / 2, 110);
    };
  }
}

// ============================================================
// üìÑ CSS PER STATI SPECIALI
// ============================================================

function injectPerformanceCSS() {
  if (!document.head) return;
  
  const css = `
    .fade-in { animation: fadeIn 0.5s ease-in; }
    .offline { opacity: 0.8; filter: grayscale(0.3); }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @media (prefers-reduced-motion: reduce) {
      .fade-in, .star { animation: none !important; }
    }
  `;
  
  const style = document.createElement('style');
  style.textContent = css;
  document.head.appendChild(style);
}

// ============================================================
// üåê GESTIONE STATO CONNESSIONE
// ============================================================

window.addEventListener('online', () => {
  console.log('üì∂ Connessione ripristinata');
  safeDOMOperation(() => document.body.classList.remove('offline'));
});

window.addEventListener('offline', () => {
  console.warn('üì∂ Connessione persa');
  safeDOMOperation(() => document.body.classList.add('offline'));
});

// ============================================================
// üéØ GESTIONE ERRORI GLOBALE
// ============================================================

window.addEventListener('error', (event) => {
  console.error('‚ùå Errore globale:', event.error);
});

// ============================================================
// ‚è±Ô∏è ANIMAZIONE DELAY PER VOCI MENU
// ============================================================

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.mega-menu').forEach(menu => {
    menu.querySelectorAll('a').forEach((link, index) => {
      link.style.setProperty('--delay', index);
    });
  });
});

// ============================================================
// üîÑ POSIZIONAMENTO EFFETTI
// ============================================================

document.addEventListener('DOMContentLoaded', () => {
  const effects = document.getElementById('effects-ctrl');
  if (effects && document.body.contains(effects)) {
    const host = document.querySelector('.topbar, .top-bar, header .menu-desktop, header nav, header, .navbar');
    if (host && document.body.contains(host)) {
      try {
        host.appendChild(effects);
        effects.style.position = '';
        effects.style.top = '';
        effects.style.right = '';
      } catch (_) {}
    }
  }
});

// ============================================================
// üé¨ TYPING CONTROLLER
// ============================================================

(function() {
  function ready(fn) {
    if (document.readyState !== 'loading') fn();
    else document.addEventListener('DOMContentLoaded', fn);
  }
  
  ready(function() {
    const el = document.querySelector('.typing-effect');
    if (!el) return;
    
    if (!el.querySelector('.cursor')) {
      el.innerHTML += '<span class="cursor">|</span>';
    }
    
    const phrases = [
      "‚ÄúLa filosofia comincia con la meraviglia.‚Äù ‚Äî Platone",
      "‚ÄúSapere di non sapere √® il principio della saggezza.‚Äù ‚Äî Socrate",
      "‚ÄúLa misura dell‚Äôuomo √® l‚Äôuomo.‚Äù ‚Äî Protagora",
      "‚ÄúLa conoscenza √® potere.‚Äù ‚Äî Francis Bacon",
      "‚ÄúL'uomo √® un lupo per l'uomo.‚Äù ‚Äî Thomas Hobbes",
      "‚ÄúLa mente √® una tabula rasa.‚Äù ‚Äî John Locke",
      "‚ÄúEsse est percipi (essere √® essere percepito).‚Äù ‚Äî George Berkeley",
      "‚ÄúLa ragione √® schiava delle passioni.‚Äù ‚Äî David Hume",
      "‚ÄúIl cielo stellato sopra di me e la legge morale in me.‚Äù ‚Äî Immanuel Kant",
      "‚ÄúViviamo nel migliore dei mondi possibili.‚Äù ‚Äî Gottfried Wilhelm Leibniz",
      "‚ÄúIl cuore ha le sue ragioni che la ragione non conosce.‚Äù ‚Äî Blaise Pascal",
      "‚ÄúLa libert√† √® il riconoscimento della necessit√†.‚Äù ‚Äî G.W.F. Hegel",
      "‚ÄúDio √® morto.‚Äù ‚Äî Friedrich Nietzsche",
      "‚ÄúDiventa ci√≤ che sei.‚Äù ‚Äî Friedrich Nietzsche",
      "‚ÄúIl mondo √® la mia rappresentazione.‚Äù ‚Äî Arthur Schopenhauer",
      "‚ÄúLa vita pu√≤ essere compresa solo all'indietro, ma va vissuta in avanti.‚Äù ‚Äî S√∏ren Kierkegaard",
      "‚ÄúL'esistenza precede l'essenza.‚Äù ‚Äî Jean-Paul Sartre",
      "‚ÄúL'inferno sono gli altri.‚Äù ‚Äî Jean-Paul Sartre",
      "‚ÄúBisogna immaginare Sisifo felice.‚Äù ‚Äî Albert Camus",
      "‚ÄúDonna non si nasce, lo si diventa.‚Äù ‚Äî Simone de Beauvoir",
      "‚ÄúLa banalit√† del male.‚Äù ‚Äî Hannah Arendt",
      "‚ÄúLa scienza avanza per congetture e confutazioni.‚Äù ‚Äî Karl Popper",
      "‚ÄúIl problema dell'umanit√† √® che gli stupidi sono sicurissimi, mentre gli intelligenti sono pieni di dubbi.‚Äù ‚Äî Bertrand Russell",
      "‚ÄúLa mente e il corpo sono una sola e medesima cosa.‚Äù ‚Äî Baruch Spinoza",
      "‚ÄúNon si scende due volte nello stesso fiume.‚Äù ‚Äî Eraclito",
      "‚ÄúL'essere √®, il non-essere non √®.‚Äù ‚Äî Parmenide",
      "‚ÄúIl piacere √® il principio e il fine della vita felice.‚Äù ‚Äî Epicuro",
      "‚ÄúNon sono le cose a turbare gli uomini, ma i giudizi che essi formulano sulle cose.‚Äù ‚Äî Epitteto",
      "‚ÄúLa felicit√† della tua vita dipende dalla qualit√† dei tuoi pensieri.‚Äù ‚Äî Marco Aurelio",
      "‚ÄúNon esiste vento favorevole per il marinaio che non sa dove andare.‚Äù ‚Äî Seneca",
      "‚ÄúAma e fa' ci√≤ che vuoi.‚Äù ‚Äî Agostino d'Ippona",
      "‚ÄúTemo l'uomo di un solo libro.‚Äù ‚Äî Tommaso d'Aquino",
      "‚ÄúCredo per comprendere.‚Äù ‚Äî Anselmo d'Aosta",
      "‚Äú√à meglio essere temuti che amati, se non si pu√≤ essere entrambi.‚Äù ‚Äî Niccol√≤ Machiavelli",
      "‚ÄúL'uomo nasce libero, ma ovunque √® in catene.‚Äù ‚Äî Jean-Jacques Rousseau",
      "‚ÄúSe Dio non esistesse, bisognerebbe inventarlo.‚Äù ‚Äî Voltaire",
      "‚ÄúIl linguaggio √® la casa dell'Essere.‚Äù ‚Äî Martin Heidegger",
      "‚ÄúSu ci√≤ di cui non si pu√≤ parlare si deve tacere.‚Äù ‚Äî Ludwig Wittgenstein",
      "‚ÄúDove c'√® potere, c'√® resistenza.‚Äù ‚Äî Michel Foucault",
      "‚ÄúEssere che pu√≤ essere compreso √® linguaggio.‚Äù ‚Äî Hans-Georg Gadamer",
      "‚ÄúUn viaggio di mille miglia comincia con un solo passo.‚Äù ‚Äî Laozi",
      "‚ÄúCi√≤ che sappiamo √® una goccia, ci√≤ che ignoriamo √® un oceano.‚Äù ‚Äî Isaac Newton",
      "‚ÄúCogito, ergo sum.‚Äù ‚Äî Cartesio"
    ];
    
    let i = 0, j = 0, isDeleting = false, pauseCount = 0;
    const baseSpeed = 60;
    const pauseThreshold = 60;
    
    function typeCharacter() {
      const currentPhrase = phrases[i];
      const cursor = '<span class="cursor">|</span>';
      
      if (!isDeleting) {
        if (j <= currentPhrase.length) {
          el.innerHTML = currentPhrase.slice(0, j) + cursor;
          j++;
          const speed = baseSpeed + (Math.random() * 30 - 15);
          setTimeout(typeCharacter, speed);
        } else {
          pauseCount++;
          if (pauseCount > pauseThreshold) {
            isDeleting = true;
            pauseCount = 0;
            setTimeout(typeCharacter, 100);
          } else {
            setTimeout(typeCharacter, 50);
          }
        }
      } else {
        if (j >= 0) {
          el.innerHTML = currentPhrase.slice(0, j) + cursor;
          j--;
          const deleteSpeed = baseSpeed * 0.7 + (Math.random() * 20 - 10);
          setTimeout(typeCharacter, deleteSpeed);
        } else {
          isDeleting = false;
          i = (i + 1) % phrases.length;
          j = 0;
          setTimeout(typeCharacter, 300);
        }
      }
    }
    
    setTimeout(typeCharacter, 1000);
  });
})();

// ============================================================
// üí¨ QUOTE RUNNER (centrale)
// ============================================================

(function() {
  function ready(fn) {
    if (document.readyState !== 'loading') fn();
    else document.addEventListener('DOMContentLoaded', fn);
  }
  
  ready(function() {
    const runner = document.getElementById('quote-runner');
    if (!runner) return;
    const PERIOD = 9000;
    
    function readSource() {
      const list = Array.from(document.querySelectorAll('.floating-quotes .quote-bubble'));
      return list.map(q => ({
        t: q.querySelector('.quote-text')?.textContent.trim() || '',
        a: q.querySelector('.quote-author')?.textContent.trim() || ''
      }));
    }
    
    let data = readSource();
    if (!data.length) {
      data = [
        { t: '‚ÄúConosci te stesso‚Äù', a: '‚Äî Socrate' },
        { t: '‚ÄúLa filosofia comincia con la meraviglia‚Äù', a: '‚Äî Platone' },
        { t: '‚ÄúCogito, ergo sum‚Äù', a: '‚Äî Cartesio' }
      ];
    }
    
    let idx = Math.floor(Math.random() * data.length);
    
    function render(item) {
      runner.innerHTML = '';
      const b = document.createElement('div');
      b.className = 'quote-bubble slide-in';
      
      const qt = document.createElement('div');
      qt.className = 'quote-text';
      qt.textContent = item.t;
      
      const qa = document.createElement('div');
      qa.className = 'quote-author';
      qa.textContent = item.a;
      
      b.appendChild(qt);
      b.appendChild(qa);
      runner.appendChild(b);
    }
    
    function next() {
      render(data[idx]);
      idx = (idx + 1) % data.length;
    }
    
    next();
    setInterval(next, PERIOD);
  });
})();

// ============================================================
// üí¨ FLOATING QUOTES CONTROLLER
// ============================================================

(function() {
  let timer = null, idx = 0, paused = false;
  
  function step(bubbles) {
    if (!bubbles.length) return;
    document.querySelector('.floating-quotes').style.zIndex = '20';
    bubbles.forEach(b => b.classList.remove('show'));
    bubbles[idx].classList.add('show');
    idx = (idx + 1) % bubbles.length;
  }
  
  function start() {
    const bubbles = Array.from(document.querySelectorAll('.floating-quotes .quote-bubble'));
    if (!bubbles.length) return;
    document.querySelector('.floating-quotes').style.zIndex = '20';
    
    const any = bubbles.some(b => b.classList.contains('show'));
    if (!any) {
      idx = 0;
    } else {
      idx = (bubbles.findIndex(b => b.classList.contains('show')) + 1) % bubbles.length;
    }
    
    step(bubbles);
    clearInterval(timer);
    timer = setInterval(() => { if (!paused) step(bubbles); }, 8000);
    
    const box = document.querySelector('.floating-quotes');
    if (box) {
      box.addEventListener('mouseenter', () => paused = true);
      box.addEventListener('mouseleave', () => paused = false);
    }
  }
  
  if (document.readyState !== 'loading') {
    start();
  } else {
    document.addEventListener('DOMContentLoaded', start);
  }
  setTimeout(start, 1000);
})();

// ============================================================
// üìú TIMELINE SCROLL REVEAL
// ============================================================

document.addEventListener('DOMContentLoaded', function() {
  const items = Array.from(document.querySelectorAll('.timeline-item'));
  if (!items.length) return;
  
  items.forEach((el, i) => {
    el.classList.remove('left', 'right', 'visible');
    el.classList.add(i % 2 === 0 ? 'left' : 'right');
  });
  
  function computeDelay(el) {
    const rect = el.getBoundingClientRect();
    const y = Math.max(0, Math.min(1, (rect.top / Math.max(1, window.innerHeight))));
    const w = Math.max(320, window.innerWidth || 0);
    const scale = (w >= 1200) ? 1.6 : (w >= 1024 ? 1.4 : (w >= 601 ? 1.1 : 0.8));
    const base = Math.round(y * 250 * scale);
    const jitter = Math.round((Math.random() * 120));
    return base + jitter;
  }
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const d = computeDelay(entry.target);
        entry.target.style.setProperty('--delay', d + 'ms');
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, { root: null, rootMargin: '0px 0px -8% 0px', threshold: 0.18 });
  
  items.forEach(el => observer.observe(el));
  
  function initialSync() {
    const vh = Math.max(1, window.innerHeight || 1);
    items.forEach(el => {
      if (!el.classList.contains('visible')) {
        const r = el.getBoundingClientRect();
        if (r.top < vh * 0.88 && r.bottom > vh * 0.12) {
          el.classList.add('visible');
        }
      }
    });
  }
  
  function scrollFallback() {
    const vh = Math.max(1, window.innerHeight || 1);
    items.forEach(el => {
      if (!el.classList.contains('visible')) {
        const r = el.getBoundingClientRect();
        if (r.top < vh * 0.9 && r.bottom > 0) {
          el.classList.add('visible');
        }
      }
    });
  }
  
  requestAnimationFrame(initialSync);
  window.addEventListener('scroll', scrollFallback, { passive: true });
  window.addEventListener('resize', scrollFallback);
});

// ============================================================
// üîù BACK TO TOP BUTTON
// ============================================================

(function() {
  const backToTop = document.getElementById('backToTop');
  if (!backToTop) return;
  
  function toggle() {
    backToTop.style.display = window.scrollY > 300 ? 'flex' : 'none';
  }
  
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
  
  window.addEventListener('scroll', toggle);
  backToTop.addEventListener('click', scrollToTop);
  backToTop.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      scrollToTop();
    }
  });
  
  toggle();
})();

// ============================================================
// üå† COMETINE ORIZZONTALI
// ============================================================

(function() {
  const BODY = document.body;
  const rnd = (min, max) => Math.random() * (max - min) + min;
  const MIN_INTERVAL = 800;
  const MAX_INTERVAL = 2200;
  
  function createComet() {
    const comet = document.createElement('div');
    comet.className = 'comet';
    
    const y = rnd(0, window.innerHeight * 0.9);
    const drift = rnd(-30, 30);
    const duration = rnd(3, 7);
    const dir = Math.random() < 0.5 ? 'ltr' : 'rtl';
    const hue = rnd(40, 240);
    
    if (dir === 'ltr') {
      comet.style.background = `linear-gradient(90deg,
        hsla(${hue},100%,70%,0) 0%,
        hsla(${hue},100%,85%,.95) 100%)`;
      comet.style.animationName = 'comet-move-ltr';
      comet.style.left = '0';
      comet.style.right = 'auto';
      comet.style.setProperty('--startY', `${y}px`);
      comet.style.setProperty('--endY', `${y + drift}px`);
      comet.style.setProperty('--head-pos', 'right');
    } else {
      comet.style.background = `linear-gradient(270deg,
        hsla(${hue},100%,70%,0) 0%,
        hsla(${hue},100%,85%,.95) 100%)`;
      comet.style.animationName = 'comet-move-rtl';
      comet.style.left = 'auto';
      comet.style.right = '0';
      comet.style.setProperty('--startY', `${y}px`);
      comet.style.setProperty('--endY', `${y + drift}px`);
      comet.style.setProperty('--head-pos', 'left');
    }
    
    comet.style.setProperty('--duration', `${duration}s`);
    comet.style.animationDuration = `${duration}s`;
    
    if (dir === 'rtl') {
      comet.style.setProperty('--head-position', '0px');
    } else {
      comet.style.setProperty('--head-position', '0px');
    }
    
    BODY.appendChild(comet);
    setTimeout(() => comet.remove(), duration * 1000);
  }
  
  function loop() {
    createComet();
    setTimeout(loop, rnd(MIN_INTERVAL, MAX_INTERVAL));
  }
  
  window.addEventListener('DOMContentLoaded', loop);
})();

// ============================================================
// üé® TINY COMETS CANVAS
// ============================================================

(function() {
  const canvas = document.getElementById('tiny-comets');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  let w, h;
  const comets = [];
  const colors = [
    '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',
    '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9',
    '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2'
  ];
  
  function resizeCanvas() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  
  class TinyComet {
    constructor() {
      this.reset();
      this.angle = Math.random() * Math.PI * 2;
      this.speed = Math.random() * 2 + 0.5;
      this.color = colors[Math.floor(Math.random() * colors.length)];
      this.size = Math.random() * 3 + 1;
      this.trailLength = Math.floor(Math.random() * 8) + 4;
      this.trail = [];
    }
    
    reset() {
      const side = Math.floor(Math.random() * 4);
      switch (side) {
        case 0:
          this.x = Math.random() * w;
          this.y = -10;
          break;
        case 1:
          this.x = w + 10;
          this.y = Math.random() * h;
          break;
        case 2:
          this.x = Math.random() * w;
          this.y = h + 10;
          break;
        case 3:
          this.x = -10;
          this.y = Math.random() * h;
          break;
      }
      this.angle = Math.random() * Math.PI * 2;
      this.speed = Math.random() * 2 + 0.5;
      this.color = colors[Math.floor(Math.random() * colors.length)];
      this.size = Math.random() * 3 + 1;
      this.trailLength = Math.floor(Math.random() * 8) + 4;
      this.trail = [];
      this.life = 0;
      this.maxLife = 200 + Math.random() * 300;
    }
    
    update() {
      this.life++;
      this.x += Math.cos(this.angle) * this.speed;
      this.y += Math.sin(this.angle) * this.speed;
      this.trail.push({ x: this.x, y: this.y });
      if (this.trail.length > this.trailLength) this.trail.shift();
      
      if (this.x < -50 || this.x > w + 50 || this.y < -50 || this.y > h + 50 || this.life > this.maxLife) {
        this.reset();
      }
    }
    
    draw() {
      for (let i = 0; i < this.trail.length; i++) {
        const point = this.trail[i];
        const alpha = i / this.trail.length * 0.7;
        const size = this.size * (i / this.trail.length);
        ctx.beginPath();
        ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
        ctx.fillStyle = this.color.replace(')', `, ${alpha})`).replace('rgb', 'rgba');
        ctx.fill();
      }
      
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fillStyle = this.color;
      ctx.fill();
      
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
      const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 1.5);
      gradient.addColorStop(0, this.color.replace(')', ', 0.8)').replace('rgb', 'rgba'));
      gradient.addColorStop(1, this.color.replace(')', ', 0)').replace('rgb', 'rgba'));
      ctx.fillStyle = gradient;
      ctx.fill();
    }
  }
  
  function init() {
    resizeCanvas();
    for (let i = 0; i < 30; i++) {
      comets.push(new TinyComet());
      comets[i].life = Math.random() * 100;
    }
    animate();
  }
  
  function animate() {
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = 'rgba(10, 10, 26, 0.1)';
    ctx.fillRect(0, 0, w, h);
    comets.forEach(comet => {
      comet.update();
      comet.draw();
    });
    requestAnimationFrame(animate);
  }
  
  window.addEventListener('resize', resizeCanvas);
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();

// ============================================================
// üéØ PARADIGMA OVERLAY
// ============================================================

const btn = document.getElementById('paradigma-btn');
const overlay = document.getElementById('filosofi-overlay');

if (btn && overlay) {
  let hideTimeout;
  
  function showOverlay() {
    clearTimeout(hideTimeout);
    overlay.style.display = 'block';
  }
  
  function hideOverlay() {
    hideTimeout = setTimeout(() => {
      overlay.style.display = 'none';
    }, 300);
  }
  
  btn.addEventListener('mouseenter', showOverlay);
  btn.addEventListener('mouseleave', hideOverlay);
  overlay.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
  overlay.addEventListener('mouseleave', hideOverlay);
}

// ============================================================
// üì¨ NEWSLETTER MODALE
// ============================================================

function showNewsletterModal() {
  document.getElementById('newsletterModal').style.display = 'flex';
}

function closeNewsletterModal() {
  document.getElementById('newsletterModal').style.display = 'none';
}

document.addEventListener('DOMContentLoaded', () => {
  const modal = document.getElementById('newsletterModal');
  const form = document.getElementById('newsletterForm');
  
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeNewsletterModal();
    });
  }
  
  if (form) {
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = form.querySelector('input[type="email"]').value;
      alert('Grazie per esserti iscritto! Controlla la tua email: ' + email);
      closeNewsletterModal();
    });
  }
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeNewsletterModal();
  });
});

// ============================================================
// üìç SMOOTH SCROLL PER #lista-articoli
// ============================================================

document.addEventListener('click', (e) => {
  const link = e.target.closest('a[href="#lista-articoli"]');
  if (!link) return;
  const target = document.getElementById('lista-articoli');
  if (!target) return;
  e.preventDefault();
  try {
    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  } catch (_) {
    location.hash = '#lista-articoli';
  }
});

// ============================================================
// üé¨ ANIMAZIONI OTTIMIZZATE
// ============================================================

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.timeline-item, .mega-menu').forEach(el => {
    el.style.willChange = 'transform, opacity';
  });
});

// ============================================================
// üîç SEARCH AUTO-OPEN
// ============================================================

(function() {
  const panel = document.querySelector('#search-panel, #searchPanel, .search-panel, .results-panel');
  const box = document.querySelector('#search-results, #searchResults, .search-results, .results-scroll');
  const backdrop = document.getElementById('search-backdrop');
  
  if (!panel || !box) return;
  
  function hasRealItems() {
    const sel = '.sp-item:not([data-placeholder]), .search-result, .result, li.result-item, .result-title a';
    return box.querySelector(sel) !== null;
  }
  
  function forceClose() {
    panel.classList.remove('open');
    if (backdrop) {
      backdrop.classList.remove('open');
      backdrop.hidden = true;
    }
  }
  
  function openPanel() {
    if (!panel.classList.contains('open')) panel.classList.add('open');
    if (backdrop) {
      backdrop.hidden = false;
      backdrop.classList.add('open');
      backdrop.onclick = forceClose;
    }
    Array.from(box.children).forEach((el, i) => el.style.setProperty('--i', i));
  }
  
  const mo = new MutationObserver(() => {
    if (hasRealItems()) openPanel();
    else forceClose();
  });
  
  mo.observe(box, { childList: true, subtree: true });
  
  if (!hasRealItems()) forceClose();
  else openPanel();
  
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') forceClose(); });
})();
</script>

</body>
</html>
