<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echi di Sofia - Filosofia attraverso i secoli</title>
    <link rel="icon" type="image/png" href="favicon_io/favicon-32x32.png">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&family=Cormorant+Garamond&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- GSAP per animazioni -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/TextPlugin.min.js"></script>

    <style>
        /* Tutti gli stili precedenti rimangono invariati */
        /* ... */
        
        /* Aggiunta animazione pulse */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse-animation {
            animation: pulse 3s infinite ease-in-out;
        }
        
        /* Miglioramenti animazione benvenuto */
        .welcome-section {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: transparent;
            margin-top: -60px; /* Compensa la top bar */
        }
        
        .welcome-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a1a;
            z-index: 1;
        }
        
        .welcome-content {
            position: relative;
            z-index: 2;
            text-align: center;
            opacity: 0;
            transform: scale(0.8);
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .welcome-title {
            font-family: 'Cinzel Decorative', cursive;
            font-size: clamp(3rem, 8vw, 5rem);
            color: transparent;
            background: linear-gradient(90deg, #ffd700, #ffaa00, #ffd700);
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            margin-bottom: 2rem;
            letter-spacing: 3px;
            line-height: 1.2;
        }
        
        .welcome-quote {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: rgba(255,255,255,0.9);
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem 2rem;
            border-left: 3px solid #ffd700;
            background: rgba(10, 10, 26, 0.3);
            border-radius: 4px;
        }
        
        .quote-author {
            display: block;
            font-style: italic;
            margin-top: 1rem;
            color: #ffd700;
            font-size: clamp(1rem, 2.5vw, 1.4rem);
        }
    </style>
</head>
<body>
    <!-- SFONDO STELLATO -->
    <div class="starfield" id="starfield"></div>
    
    <!-- PARTICELLE INTERATTIVE -->
    <div class="philo-particles" id="philoParticles"></div>
    
    <!-- BARRA SUPERIORE CON RICERCA E TRADUTTORE -->
    <div class="top-bar">
        <div class="search-translate-container">
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Cerca filosofi, concetti...">
            </div>
            <div class="translate-container" id="google_translate_element"></div>
        </div>
    </div>
    
    <!-- HEADER CON MEGA MENU -->
    <header id="mainHeader">
        <div class="menu-container">
            <a class="logo" href="index.html">Φ ECHI DI SOFIA</a>
            
            <div style="display: flex; align-items: center;">
                <nav class="menu-desktop">
                    <ul role="menu">
                        <!-- Menu items rimangono invariati -->
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- SEZIONE BENVENUTO - MODIFICATA PER L'ANIMAZIONE -->
    <section class="welcome-section">
        <div class="welcome-mask"></div>
        <div class="welcome-content">
            <h1 class="welcome-title pulse-animation">ECHI DI SOFIA</h1>
            <div class="welcome-quote">
                <p class="quote-text"></p>
                <span class="quote-author"></span>
            </div>
        </div>
    </section>

    <main>
        <!-- Il tuo contenuto qui -->
    </main>

    <script>
        // Registra il plugin TextPlugin
        gsap.registerPlugin(TextPlugin);

        // SIMBOLI FILOSOFICI e CONFIGURAZIONE PARTICELLE
        // ... (rimangono invariati)

        // CITAZIONI FILOSOFICHE AGGIORNATE
        const quotes = [
            {
                text: "La filosofia è una lotta contro l'incantesimo del nostro intelletto mediante il linguaggio.",
                author: "Ludwig Wittgenstein"
            },
            {
                text: "Conosci te stesso e conoscerai l'universo e gli dei.",
                author: "Socrate"
            },
            {
                text: "Il sapere è l'unico bene che aumenta condividendolo.",
                author: "Pitagora"
            },
            {
                text: "La meraviglia è il principio di ogni conoscenza.",
                author: "Aristotele"
            },
            {
                text: "Penso, dunque sono.",
                author: "Cartesio"
            },
            {
                text: "L'uomo è condannato ad essere libero.",
                author: "Jean-Paul Sartre"
            },
            {
                text: "Tutto ciò che so è che non so nulla.",
                author: "Socrate"
            },
            {
                text: "La vita deve essere compresa all'indietro. Ma deve essere vissuta in avanti.",
                author: "Søren Kierkegaard"
            }
        ];

        // ANIMAZIONE DI BENVENUTO MIGLIORATA
        function playWelcomeAnimation() {
            const mask = document.querySelector('.welcome-mask');
            const content = document.querySelector('.welcome-content');
            const title = document.querySelector('.welcome-title');
            const quoteText = document.querySelector('.quote-text');
            const quoteAuthor = document.querySelector('.quote-author');
            
            // Reset contenuti
            quoteText.textContent = '';
            quoteAuthor.textContent = '';
            
            // Scegli una citazione casuale
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            
            // Timeline animazione
            const tl = gsap.timeline();
            
            // 1. Apertura sipario
            tl.to(mask, {
                duration: 1.5,
                height: 0,
                ease: "power4.inOut",
                onComplete: function() {
                    // Rimuove il mask dopo l'animazione
                    mask.style.display = 'none';
                }
            })
            
            // 2. Entrata titolo con effetto più drammatico
            .fromTo(content, 
                { opacity: 0, scale: 0.8, y: 50 },
                { 
                    duration: 1.5,
                    opacity: 1, 
                    scale: 1,
                    y: 0,
                    ease: "elastic.out(1, 0.5)"
                }, "-=0.8")
            
            // 3. Scrittura citazione con effetto macchina da scrivere
            .call(() => {
                let i = 0;
                const speed = 30;
                const quoteElement = document.querySelector('.quote-text');
                
                function typeWriter() {
                    if (i < randomQuote.text.length) {
                        quoteElement.textContent += randomQuote.text.charAt(i);
                        i++;
                        setTimeout(typeWriter, speed);
                    } else {
                        // Mostra l'autore con effetto fade
                        gsap.to(quoteAuthor, {
                            duration: 1,
                            text: `— ${randomQuote.author}`,
                            ease: "power2.out"
                        });
                        
                        // Particelle dorate alla fine
                        createGoldenParticles(title);
                    }
                }
                
                typeWriter();
            });
        }

        // CREA PARTICELLE DORATE MIGLIORATO
        function createGoldenParticles(element) {
            const bounds = element.getBoundingClientRect();
            const centerX = bounds.left + bounds.width / 2;
            const centerY = bounds.top + bounds.height / 2;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = ['∞', 'Φ', 'Ψ', 'Δ', '§', '†', '‡'][Math.floor(Math.random() * 7)];
                particle.style.color = '#ffd700';
                particle.style.position = 'fixed';
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                particle.style.fontSize = `${1 + Math.random() * 1.5}rem`;
                particle.style.opacity = '0';
                particle.style.zIndex = '10';
                particle.style.pointerEvents = 'none';
                document.body.appendChild(particle);
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 200;
                const duration = 1.5 + Math.random() * 1;
                
                gsap.to(particle, {
                    duration: duration,
                    x: `+=${Math.cos(angle) * distance}`,
                    y: `+=${Math.sin(angle) * distance}`,
                    opacity: 0.8,
                    ease: "power3.out",
                    onComplete: () => {
                        gsap.to(particle, {
                            duration: 0.5,
                            opacity: 0,
                            onComplete: () => particle.remove()
                        });
                    }
                });
                
                // Aggiunge rotazione casuale
                gsap.to(particle, {
                    duration: duration,
                    rotation: Math.random() * 360,
                    ease: "none"
                });
            }
        }

        // INIZIALIZZA TRADUTTORE GOOGLE
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'it',
                includedLanguages: 'it,en,es,fr,de,pt,ru,zh-CN,ja,ar,hi,bn,ko,vi,th,pl,tr,nl,sv,fi,he',
                layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL,
                autoDisplay: false,
                multilanguagePage: true
            }, 'google_translate_element');
            
            // Mostra solo il menu a tendina e nascondi il resto
            const googleTranslateElement = document.querySelector('.goog-te-gadget');
            if (googleTranslateElement) {
                googleTranslateElement.style.fontSize = '0';
            }
            
            // Stili aggiuntivi per il menu a tendina
            const combo = document.querySelector('.goog-te-combo');
            if (combo) {
                combo.style.fontFamily = "'Cormorant Garamond', serif";
                combo.style.background = "rgba(20, 20, 40, 0.8)";
                combo.style.color = "#e0e0e0";
                combo.style.border = "1px solid rgba(255, 215, 0, 0.3)";
                combo.style.borderRadius = "4px";
                combo.style.padding = "8px 15px";
                combo.style.cursor = "pointer";
            }
        }

        // CARICA GOOGLE TRANSLATE
        function loadGoogleTranslate() {
            const script = document.createElement('script');
            script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
            script.async = true;
            document.body.appendChild(script);
        }

        // AVVIA TUTTO AL CARICAMENTO DELLA PAGINA
        window.addEventListener('load', () => {
            // Inizializza particelle
            initParticles();
            
            // Avvia animazione di benvenuto
            playWelcomeAnimation();
            
            // Carica il traduttore
            loadGoogleTranslate();
        });

        // FUNZIONE PER INIZIALIZZARE LE PARTICELLE (se necessario)
        function initParticles() {
            // ... codice di inizializzazione particelle ...
        }
    </script>
</body>
</html>
