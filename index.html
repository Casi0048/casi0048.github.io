<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Echi di Sofia - Filosofia attraverso i secoli</title>
  <link rel="icon" href="favicon_io/favicon.ico" />
  
  <!-- CSS BASE -->
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121318;
      color: #eee;
      overflow-x: hidden;
      min-height: 100vh;
      padding-bottom: 120px;
    }
    header, footer {
      background: #1a1c22;
      color: #eee;
    }
    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    /* Aggiungi qui i tuoi stili: top-bar, search, menu, articoli, footer, ecc... */
  </style>
  
  <!-- LIBRERIE -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
  <script async src="https://cse.google.com/cse.js?cx=87b07564ab3cb462a"></script>
</head>
<body>
  <div id="particles-js"></div>
  
  <header>
    <!-- Top bar con Cerca e Traduci -->
    <div class="top-bar">
      <input type="text" id="searchInput" placeholder="Cerca filosofi, concetti...">
      <button id="searchButton">Cerca</button>
      <button id="translate-btn" title="Traduci">üåê</button>
    </div>
    <!-- Menu -->
    <nav class="menu-desktop">
      <!-- Inserisci qui il mega menu -->
    </nav>
  </header>
  
  <main>
    <section id="benvenuto">
      <h1 class="titolo">Echi di Sofia</h1>
      <p class="sottotitolo">Filosofia attraverso i secoli</p>
    </section>
    <!-- Altre sezioni -->
  </main>
  
  <footer>
    <p>&copy; 2025 Echi di Sofia. Tutti i diritti riservati.</p>
  </footer>
  
  <!-- Cookie Banner -->
  <div id="cookie-banner">
    <span>Utilizziamo i cookie per migliorare l'esperienza utente.</span>
    <button id="accept">Accetta</button>
    <button id="reject">Rifiuta</button>
    <button id="customize">Personalizza</button>
  </div>
  
  <div id="google_translate_element" style="display:none; position:fixed; top:50px; right:20px; background:#222; padding:10px; border-radius:8px; z-index:10000;"></div>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  
  <!-- Script Unificato -->
  <script>
    particlesJS('particles-js', {
      particles: {
        number: { value: 80 },
        color: { value: "#4caf50" },
        shape: { type: "circle" },
        opacity: { value: 0.5 },
        size: { value: 3 },
        line_linked: { enable: true, color: "#4caf50" },
        move: { enable: true, speed: 3 }
      },
      interactivity: {
        events: { onhover: { enable: true, mode: "repulse" } },
        modes: { repulse: { distance: 100 } }
      }
    });

    document.getElementById('translate-btn').addEventListener('click', () => {
      let el = document.getElementById('google_translate_element');
      el.style.display = el.style.display === 'none' ? 'block' : 'none';
    });

    function googleTranslateElementInit() {
      new google.translate.TranslateElement({ pageLanguage: 'it' }, 'google_translate_element');
    }

    const banner = document.getElementById('cookie-banner');
    if (document.cookie.includes('cookie-ok=')) banner.style.display = 'none';
    document.getElementById('accept').onclick = () => { document.cookie = "cookie-ok=yes; path=/; max-age=31536000"; banner.style.display = 'none'; };
    document.getElementById('reject').onclick = () => { document.cookie = "cookie-ok=no; path=/; max-age=31536000"; banner.style.display = 'none'; };
    document.getElementById('customize').onclick = () => { alert('Funzione personalizzazione in sviluppo.'); };

    document.getElementById('searchButton').addEventListener('click', () => {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return alert('Inserisci un termine di ricerca.');
      let gcse = document.getElementById('gcse-search');
      if (!gcse) {
        gcse = document.createElement('div');
        gcse.id = 'gcse-search';
        document.body.appendChild(gcse);
      }
      function renderCSE() {
        if (window.google?.search?.cse?.element) {
          window.google.search.cse.element.render({ div: 'gcse-search', tag: 'search' });
          setSearchInputValue();
        } else setTimeout(renderCSE, 200);
      }
      function setSearchInputValue() {
        const inputCse = document.querySelector('input.gsc-input');
        if (inputCse) {
          inputCse.value = query;
          inputCse.focus();
          inputCse.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter', bubbles: true }));
        } else setTimeout(setSearchInputValue, 200);
      }
      renderCSE();
    });

    window.addEventListener('load', () => {
      const titolo = document.querySelector(".titolo");
      gsap.to(titolo, { scale: 1.1, rotation: 6, duration: 3, repeat: -1, yoyo: true });
    });
  </script>
</body>
</html>
