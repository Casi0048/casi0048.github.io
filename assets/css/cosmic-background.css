/* === SFONDO STELLARE COMPLETO - VERSIONE DEFINITIVA === */
.stars-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1; /* ← DIETRO A TUTTO IL CONTENUTO */
    overflow: hidden;
    background: transparent !important; /* ← NO SFONDO GRADIENT */
}

/* STELLE NORMALI - VERSIONE IPER LUMINOSA */
.star {
    position: absolute;
    background-color: #ffffff;
    border-radius: 50%;
    animation: hyperTwinkle var(--duration) ease-in-out infinite;
    animation-delay: var(--delay);
    z-index: -1; /* ← STESSE STELLE DIETRO */
}

/* DIMENSIONI MASSIME E OPACITÀ TOTALE */
.star.small { 
    width: 6px; 
    height: 6px; 
    opacity: 0.9; 
    --duration: 4s; 
    --delay: 0s; 
    box-shadow: 
        0 0 10px #ffffff,
        0 0 20px #ffffff,
        0 0 30px #ffffff !important;
}

.star.medium { 
    width: 8px; 
    height: 8px; 
    opacity: 0.95; 
    --duration: 5s; 
    --delay: 1s; 
    box-shadow: 
        0 0 15px #ffffff,
        0 0 25px #ffffff,
        0 0 35px #ffffff !important;
}

.star.large { 
    width: 10px; 
    height: 10px; 
    opacity: 1; 
    --duration: 6s; 
    --delay: 2s; 
    box-shadow: 
        0 0 20px #ffffff,
        0 0 30px #ffffff,
        0 0 40px #ffffff !important;
}

.star.xlarge { 
    width: 12px; 
    height: 12px; 
    opacity: 1; 
    --duration: 7s; 
    --delay: 3s; 
    box-shadow: 
        0 0 25px #ffffff,
        0 0 35px #ffffff,
        0 0 45px #ffffff !important;
}

/* STELLE COLORATE IPER-LUMINOSE */
.star.color-blue {
    background: #00ffff !important;
    box-shadow: 
        0 0 15px #00ffff,
        0 0 30px #00ffff,
        0 0 45px #00ffff,
        0 0 60px #00ffff !important;
}

.star.color-gold {
    background: #ffd700 !important;
    box-shadow: 
        0 0 15px #ffd700,
        0 0 30px #ffd700,
        0 0 45px #ffd700,
        0 0 60px #ffd700 !important;
}

.star.color-purple {
    background: #ff00ff !important;
    box-shadow: 
        0 0 15px #ff00ff,
        0 0 30px #ff00ff,
        0 0 45px #ff00ff,
        0 0 60px #ff00ff !important;
}

/* ANIMAZIONE DI SCINTILLIO IPER-EVIDENTE */
@keyframes hyperTwinkle {
    0%, 100% {
        opacity: 0.8;
        transform: scale(1);
        filter: brightness(1.2);
    }
    25% {
        opacity: 1;
        transform: scale(1.4);
        filter: brightness(1.8);
    }
    50% {
        opacity: 1;
        transform: scale(1.8);
        filter: brightness(2.5) drop-shadow(0 0 40px currentColor);
    }
    75% {
        opacity: 0.9;
        transform: scale(1.5);
        filter: brightness(2.0);
    }
}

/* === COMETE SUPER LUMINOSE === */
.shooting-star {
    position: absolute;
    --trail: 150px;             /* lunghezza scia aumentata */
    --thick: 4px;               /* spessore scia aumentato */
    --tail: rgba(255, 255, 255, 0.95); /* coda più luminosa */
    width: var(--trail);
    height: var(--thick);
    
    /* Testa IPER luminosa */
    background:
        radial-gradient(circle at 100% 50%,
            #ffffff 0 8px,
            #ffffff 9px,
            rgba(255, 255, 255, 0.9) 11px,
            transparent 20px),
        linear-gradient(to left,
            var(--tail) 0%,
            rgba(255, 255, 255, 0.7) 20%,
            rgba(255, 255, 255, 0.4) 40%,
            rgba(255, 255, 255, 0.2) 60%,
            transparent 100%);
    background-repeat: no-repeat, no-repeat;
    background-size: 20px 20px, 100% 100%;
    border-radius: 999px;
    filter: drop-shadow(0 0 20px #ffffff) blur(0.3px);
    opacity: 0;
    z-index: -1; /* ← COMETE DIETRO AL CONTENUTO */
    transform-origin: 100% 50%;
}

/* VARIANTI COMETE IPER-LUMINOSE */
.shooting-star.micro { 
    --trail: 180px;  
    --thick: 3px; 
    filter: drop-shadow(0 0 15px #ffffff) blur(0.2px); 
}

.shooting-star.fast  { 
    animation-duration: 2.5s;  
    filter: drop-shadow(0 0 25px #ffd700) blur(0.3px);
}

.shooting-star.slow  { 
    animation-duration: 7s; 
    filter: drop-shadow(0 0 30px #b967ff) blur(0.3px);
}

/* DIREZIONI */
.shooting-star.horizontal { transform: rotate(0deg); }
.shooting-star.vertical   { transform: rotate(90deg); }
.shooting-star.diagonal   { transform: rotate(45deg); }
.shooting-star.reverse    { transform: rotate(180deg); }

/* ANIMAZIONI COMETE PIÙ LENTE PER MAGGIORE VISIBILITÀ */
@keyframes fly-horizontal {
    0%   { 
        transform: rotate(0deg) translateX(-250px);
        opacity: 0; 
    }
    3%  { opacity: 1; }
    90%  { opacity: 1; }
    100% { 
        transform: rotate(0deg) translateX(calc(100vw + 250px));
        opacity: 0; 
    }
}

@keyframes fly-vertical {
    0%   { 
        transform: translateY(-250px) rotate(90deg);   
        opacity: 0; 
    }
    3%  { opacity: 1; }
    90%  { opacity: 1; }
    100% { 
        transform: translateY(calc(100vh + 250px)) rotate(90deg); 
        opacity: 0; 
    }
}

@keyframes fly-diagonal {
    0%   { 
        transform: translate(-250px, -250px) rotate(45deg); 
        opacity: 0; 
    }
    3%  { opacity: 1; }
    90%  { opacity: 1; }
    100% { 
        transform: translate(calc(100vw + 250px), calc(100vh + 250px)) rotate(45deg); 
        opacity: 0; 
    }
}

@keyframes fly-reverse {
    0%   { 
        transform: translate(calc(100vw + 250px), -250px) rotate(180deg); 
        opacity: 0; 
    }
    3%  { opacity: 1; }
    90%  { opacity: 1; }
    100% { 
        transform: translate(-250px, calc(100vh + 250px)) rotate(180deg); 
        opacity: 0; 
    }
}

/* COLLEGA ANIMAZIONI */
.shooting-star.horizontal { animation: fly-horizontal 4s ease-out infinite; }
.shooting-star.vertical   { animation: fly-vertical   6s ease-out infinite; }
.shooting-star.diagonal   { animation: fly-diagonal   5s ease-out infinite; }
.shooting-star.reverse    { animation: fly-reverse    5s ease-out infinite; }

/* COMETINE CANVAS */
.tiny-comets-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1; /* ← DIETRO AL CONTENUTO */
}

/* EFFETTO BAGLIORE AGGIUNTIVO PER LE STELLE */
.star::after {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    right: -100%;
    bottom: -100%;
    background: radial-gradient(circle, currentColor 0%, transparent 60%);
    opacity: 0.4;
    border-radius: 50%;
    animation: hyperPulse 2s infinite alternate;
    z-index: -2;
}

@keyframes hyperPulse {
    0% { 
        opacity: 0.3; 
        transform: scale(0.7); 
    }
    100% { 
        opacity: 0.6; 
        transform: scale(1.5); 
    }
}

/* MIGLIORA CONTRASTO SU SCHERMI GRANDI */
@media (min-width: 1200px) {
    .star {
        box-shadow: 
            0 0 20px currentColor,
            0 0 40px currentColor,
            0 0 60px currentColor !important;
    }
    
    .shooting-star {
        filter: drop-shadow(0 0 30px #ffffff) blur(0.2px);
    }
}

/* ACCESSIBILITÀ - RIDUZIONE ANIMAZIONI */
@media (prefers-reduced-motion: reduce) {
    .star, .shooting-star {
        animation: none !important;
        opacity: 0.9 !important;
        filter: brightness(1.5) !important;
    }
}

/* GARANTISCI CHE IL CONTENUTO SIA SOPRA LE STELLE */
body > *:not(.stars-container):not(.tiny-comets-canvas) {
    position: relative;
    z-index: 1;
}
